function ug(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function cg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $h={exports:{}},vi={},Bh={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jl=Symbol.for("react.element"),dg=Symbol.for("react.portal"),fg=Symbol.for("react.fragment"),hg=Symbol.for("react.strict_mode"),pg=Symbol.for("react.profiler"),mg=Symbol.for("react.provider"),gg=Symbol.for("react.context"),xg=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),yg=Symbol.for("react.memo"),wg=Symbol.for("react.lazy"),gf=Symbol.iterator;function bg(e){return e===null||typeof e!="object"?null:(e=gf&&e[gf]||e["@@iterator"],typeof e=="function"?e:null)}var zh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vh=Object.assign,Wh={};function qs(e,t,r){this.props=e,this.context=t,this.refs=Wh,this.updater=r||zh}qs.prototype.isReactComponent={};qs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hh(){}Hh.prototype=qs.prototype;function qc(e,t,r){this.props=e,this.context=t,this.refs=Wh,this.updater=r||zh}var Qc=qc.prototype=new Hh;Qc.constructor=qc;Vh(Qc,qs.prototype);Qc.isPureReactComponent=!0;var xf=Array.isArray,qh=Object.prototype.hasOwnProperty,Gc={current:null},Qh={key:!0,ref:!0,__self:!0,__source:!0};function Gh(e,t,r){var n,a={},l=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)qh.call(t,n)&&!Qh.hasOwnProperty(n)&&(a[n]=t[n]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var f=Array(u),m=0;m<u;m++)f[m]=arguments[m+2];a.children=f}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)a[n]===void 0&&(a[n]=u[n]);return{$$typeof:jl,type:e,key:l,ref:i,props:a,_owner:Gc.current}}function kg(e,t){return{$$typeof:jl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kc(e){return typeof e=="object"&&e!==null&&e.$$typeof===jl}function jg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vf=/\/+/g;function uu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jg(""+e.key):t.toString(36)}function Ro(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case jl:case dg:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+uu(i,0):n,xf(a)?(r="",e!=null&&(r=e.replace(vf,"$&/")+"/"),Ro(a,t,r,"",function(m){return m})):a!=null&&(Kc(a)&&(a=kg(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(vf,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",xf(e))for(var u=0;u<e.length;u++){l=e[u];var f=n+uu(l,u);i+=Ro(l,t,r,f,a)}else if(f=bg(e),typeof f=="function")for(e=f.call(e),u=0;!(l=e.next()).done;)l=l.value,f=n+uu(l,u++),i+=Ro(l,t,r,f,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function io(e,t,r){if(e==null)return e;var n=[],a=0;return Ro(e,n,"","",function(l){return t.call(r,l,a++)}),n}function Ng(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},Lo={transition:null},Sg={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Lo,ReactCurrentOwner:Gc};oe.Children={map:io,forEach:function(e,t,r){io(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return io(e,function(){t++}),t},toArray:function(e){return io(e,function(t){return t})||[]},only:function(e){if(!Kc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=qs;oe.Fragment=fg;oe.Profiler=pg;oe.PureComponent=qc;oe.StrictMode=hg;oe.Suspense=vg;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sg;oe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Vh({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Gc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(f in t)qh.call(t,f)&&!Qh.hasOwnProperty(f)&&(n[f]=t[f]===void 0&&u!==void 0?u[f]:t[f])}var f=arguments.length-2;if(f===1)n.children=r;else if(1<f){u=Array(f);for(var m=0;m<f;m++)u[m]=arguments[m+2];n.children=u}return{$$typeof:jl,type:e.type,key:a,ref:l,props:n,_owner:i}};oe.createContext=function(e){return e={$$typeof:gg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mg,_context:e},e.Consumer=e};oe.createElement=Gh;oe.createFactory=function(e){var t=Gh.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:xg,render:e}};oe.isValidElement=Kc;oe.lazy=function(e){return{$$typeof:wg,_payload:{_status:-1,_result:e},_init:Ng}};oe.memo=function(e,t){return{$$typeof:yg,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Lo.transition;Lo.transition={};try{e()}finally{Lo.transition=t}};oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};oe.useCallback=function(e,t){return ut.current.useCallback(e,t)};oe.useContext=function(e){return ut.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};oe.useEffect=function(e,t){return ut.current.useEffect(e,t)};oe.useId=function(){return ut.current.useId()};oe.useImperativeHandle=function(e,t,r){return ut.current.useImperativeHandle(e,t,r)};oe.useInsertionEffect=function(e,t){return ut.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return ut.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return ut.current.useMemo(e,t)};oe.useReducer=function(e,t,r){return ut.current.useReducer(e,t,r)};oe.useRef=function(e){return ut.current.useRef(e)};oe.useState=function(e){return ut.current.useState(e)};oe.useSyncExternalStore=function(e,t,r){return ut.current.useSyncExternalStore(e,t,r)};oe.useTransition=function(){return ut.current.useTransition()};oe.version="18.2.0";Bh.exports=oe;var c=Bh.exports;const yi=cg(c),Eg=ug({__proto__:null,default:yi},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=c,Dg=Symbol.for("react.element"),_g=Symbol.for("react.fragment"),Ag=Object.prototype.hasOwnProperty,Rg=Cg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lg={key:!0,ref:!0,__self:!0,__source:!0};function Kh(e,t,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Ag.call(t,n)&&!Lg.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Dg,type:e,key:l,ref:i,props:a,_owner:Rg.current}}vi.Fragment=_g;vi.jsx=Kh;vi.jsxs=Kh;$h.exports=vi;var s=$h.exports,Zh={exports:{}},Ct={},Jh={exports:{}},Yh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,B){var ne=W.length;W.push(B);e:for(;0<ne;){var T=ne-1>>>1,J=W[T];if(0<a(J,B))W[T]=B,W[ne]=J,ne=T;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var B=W[0],ne=W.pop();if(ne!==B){W[0]=ne;e:for(var T=0,J=W.length,ce=J>>>1;T<ce;){var ie=2*(T+1)-1,fe=W[ie],he=ie+1,He=W[he];if(0>a(fe,ne))he<J&&0>a(He,fe)?(W[T]=He,W[he]=ne,T=he):(W[T]=fe,W[ie]=ne,T=ie);else if(he<J&&0>a(He,ne))W[T]=He,W[he]=ne,T=he;else break e}}return B}function a(W,B){var ne=W.sortIndex-B.sortIndex;return ne!==0?ne:W.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,u=i.now();e.unstable_now=function(){return i.now()-u}}var f=[],m=[],v=1,b=null,N=3,C=!1,D=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(W){for(var B=r(m);B!==null;){if(B.callback===null)n(m);else if(B.startTime<=W)n(m),B.sortIndex=B.expirationTime,t(f,B);else break;B=r(m)}}function E(W){if(A=!1,y(W),!D)if(r(f)!==null)D=!0,Se(_);else{var B=r(m);B!==null&&nt(E,B.startTime-W)}}function _(W,B){D=!1,A&&(A=!1,k(Q),Q=-1),C=!0;var ne=N;try{for(y(B),b=r(f);b!==null&&(!(b.expirationTime>B)||W&&!ee());){var T=b.callback;if(typeof T=="function"){b.callback=null,N=b.priorityLevel;var J=T(b.expirationTime<=B);B=e.unstable_now(),typeof J=="function"?b.callback=J:b===r(f)&&n(f),y(B)}else n(f);b=r(f)}if(b!==null)var ce=!0;else{var ie=r(m);ie!==null&&nt(E,ie.startTime-B),ce=!1}return ce}finally{b=null,N=ne,C=!1}}var U=!1,V=null,Q=-1,O=5,P=-1;function ee(){return!(e.unstable_now()-P<O)}function me(){if(V!==null){var W=e.unstable_now();P=W;var B=!0;try{B=V(!0,W)}finally{B?$():(U=!1,V=null)}}else U=!1}var $;if(typeof x=="function")$=function(){x(me)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,xe=re.port2;re.port1.onmessage=me,$=function(){xe.postMessage(null)}}else $=function(){I(me,0)};function Se(W){V=W,U||(U=!0,$())}function nt(W,B){Q=I(function(){W(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){D||C||(D=!0,Se(_))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(W){switch(N){case 1:case 2:case 3:var B=3;break;default:B=N}var ne=N;N=B;try{return W()}finally{N=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,B){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ne=N;N=W;try{return B()}finally{N=ne}},e.unstable_scheduleCallback=function(W,B,ne){var T=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?T+ne:T):ne=T,W){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ne+J,W={id:v++,callback:B,priorityLevel:W,startTime:ne,expirationTime:J,sortIndex:-1},ne>T?(W.sortIndex=ne,t(m,W),r(f)===null&&W===r(m)&&(A?(k(Q),Q=-1):A=!0,nt(E,ne-T))):(W.sortIndex=J,t(f,W),D||C||(D=!0,Se(_))),W},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(W){var B=N;return function(){var ne=N;N=B;try{return W.apply(this,arguments)}finally{N=ne}}}})(Yh);Jh.exports=Yh;var Pg=Jh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh=c,Et=Pg;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ep=new Set,sl={};function Jn(e,t){Ms(e,t),Ms(e+"Capture",t)}function Ms(e,t){for(sl[e]=t,e=0;e<t.length;e++)ep.add(t[e])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=Object.prototype.hasOwnProperty,Ig=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yf={},wf={};function Tg(e){return Wu.call(wf,e)?!0:Wu.call(yf,e)?!1:Ig.test(e)?wf[e]=!0:(yf[e]=!0,!1)}function Fg(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Og(e,t,r,n){if(t===null||typeof t>"u"||Fg(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,r,n,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zc=/[\-:]([a-z])/g;function Jc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zc,Jc);Je[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zc,Jc);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zc,Jc);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yc(e,t,r,n){var a=Je.hasOwnProperty(t)?Je[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Og(t,r,a,n)&&(r=null),n||a===null?Tg(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Or=Xh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uo=Symbol.for("react.element"),ws=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),Xc=Symbol.for("react.strict_mode"),Hu=Symbol.for("react.profiler"),tp=Symbol.for("react.provider"),rp=Symbol.for("react.context"),ed=Symbol.for("react.forward_ref"),qu=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),td=Symbol.for("react.memo"),Zr=Symbol.for("react.lazy"),np=Symbol.for("react.offscreen"),bf=Symbol.iterator;function La(e){return e===null||typeof e!="object"?null:(e=bf&&e[bf]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,cu;function Wa(e){if(cu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);cu=t&&t[1]||""}return`
`+cu+e}var du=!1;function fu(e,t){if(!e||du)return"";du=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var n=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){n=m}e.call(t.prototype)}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,u=l.length-1;1<=i&&0<=u&&a[i]!==l[u];)u--;for(;1<=i&&0<=u;i--,u--)if(a[i]!==l[u]){if(i!==1||u!==1)do if(i--,u--,0>u||a[i]!==l[u]){var f=`
`+a[i].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=i&&0<=u);break}}}finally{du=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wa(e):""}function Ug(e){switch(e.tag){case 5:return Wa(e.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return e=fu(e.type,!1),e;case 11:return e=fu(e.type.render,!1),e;case 1:return e=fu(e.type,!0),e;default:return""}}function Gu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bs:return"Fragment";case ws:return"Portal";case Hu:return"Profiler";case Xc:return"StrictMode";case qu:return"Suspense";case Qu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rp:return(e.displayName||"Context")+".Consumer";case tp:return(e._context.displayName||"Context")+".Provider";case ed:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case td:return t=e.displayName||null,t!==null?t:Gu(e.type)||"Memo";case Zr:t=e._payload,e=e._init;try{return Gu(e(t))}catch{}}return null}function Mg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gu(t);case 8:return t===Xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $g(e){var t=sp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function co(e){e._valueTracker||(e._valueTracker=$g(e))}function ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=sp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Qo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ku(e,t){var r=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function kf(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=pn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lp(e,t){t=t.checked,t!=null&&Yc(e,"checked",t,!1)}function Zu(e,t){lp(e,t);var r=pn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ju(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ju(e,t.type,pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jf(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ju(e,t,r){(t!=="number"||Qo(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ha=Array.isArray;function Ls(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+pn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Yu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nf(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(M(92));if(Ha(r)){if(1<r.length)throw Error(M(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:pn(r)}}function op(e,t){var r=pn(t.value),n=pn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Sf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ip(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ip(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fo,up=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fo=fo||document.createElement("div"),fo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function al(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bg=["Webkit","ms","Moz","O"];Object.keys(Ka).forEach(function(e){Bg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ka[t]=Ka[e]})});function cp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ka.hasOwnProperty(e)&&Ka[e]?(""+t).trim():t+"px"}function dp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=cp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var zg=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ec(e,t){if(t){if(zg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function tc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nc=null,Ps=null,Is=null;function Ef(e){if(e=El(e)){if(typeof nc!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Ni(t),nc(e.stateNode,e.type,t))}}function fp(e){Ps?Is?Is.push(e):Is=[e]:Ps=e}function hp(){if(Ps){var e=Ps,t=Is;if(Is=Ps=null,Ef(e),t)for(e=0;e<t.length;e++)Ef(t[e])}}function pp(e,t){return e(t)}function mp(){}var hu=!1;function gp(e,t,r){if(hu)return e(t,r);hu=!0;try{return pp(e,t,r)}finally{hu=!1,(Ps!==null||Is!==null)&&(mp(),hp())}}function ll(e,t){var r=e.stateNode;if(r===null)return null;var n=Ni(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(M(231,t,typeof r));return r}var sc=!1;if(Pr)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){sc=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{sc=!1}function Vg(e,t,r,n,a,l,i,u,f){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(v){this.onError(v)}}var Za=!1,Go=null,Ko=!1,ac=null,Wg={onError:function(e){Za=!0,Go=e}};function Hg(e,t,r,n,a,l,i,u,f){Za=!1,Go=null,Vg.apply(Wg,arguments)}function qg(e,t,r,n,a,l,i,u,f){if(Hg.apply(this,arguments),Za){if(Za){var m=Go;Za=!1,Go=null}else throw Error(M(198));Ko||(Ko=!0,ac=m)}}function Yn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function xp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cf(e){if(Yn(e)!==e)throw Error(M(188))}function Qg(e){var t=e.alternate;if(!t){if(t=Yn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return Cf(a),e;if(l===n)return Cf(a),t;l=l.sibling}throw Error(M(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,u=a.child;u;){if(u===r){i=!0,r=a,n=l;break}if(u===n){i=!0,n=a,r=l;break}u=u.sibling}if(!i){for(u=l.child;u;){if(u===r){i=!0,r=l,n=a;break}if(u===n){i=!0,n=l,r=a;break}u=u.sibling}if(!i)throw Error(M(189))}}if(r.alternate!==n)throw Error(M(190))}if(r.tag!==3)throw Error(M(188));return r.stateNode.current===r?e:t}function vp(e){return e=Qg(e),e!==null?yp(e):null}function yp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yp(e);if(t!==null)return t;e=e.sibling}return null}var wp=Et.unstable_scheduleCallback,Df=Et.unstable_cancelCallback,Gg=Et.unstable_shouldYield,Kg=Et.unstable_requestPaint,Fe=Et.unstable_now,Zg=Et.unstable_getCurrentPriorityLevel,nd=Et.unstable_ImmediatePriority,bp=Et.unstable_UserBlockingPriority,Zo=Et.unstable_NormalPriority,Jg=Et.unstable_LowPriority,kp=Et.unstable_IdlePriority,wi=null,ur=null;function Yg(e){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(wi,e,void 0,(e.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:tx,Xg=Math.log,ex=Math.LN2;function tx(e){return e>>>=0,e===0?32:31-(Xg(e)/ex|0)|0}var ho=64,po=4194304;function qa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jo(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var u=i&~a;u!==0?n=qa(u):(l&=i,l!==0&&(n=qa(l)))}else i=r&~a,i!==0?n=qa(i):l!==0&&(n=qa(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Gt(t),a=1<<r,n|=e[r],t&=~a;return n}function rx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nx(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Gt(l),u=1<<i,f=a[i];f===-1?(!(u&r)||u&n)&&(a[i]=rx(u,t)):f<=t&&(e.expiredLanes|=u),l&=~u}}function lc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jp(){var e=ho;return ho<<=1,!(ho&4194240)&&(ho=64),e}function pu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Nl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Gt(t),e[t]=r}function sx(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Gt(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function sd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Gt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ye=0;function Np(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sp,ad,Ep,Cp,Dp,oc=!1,mo=[],nn=null,sn=null,an=null,ol=new Map,il=new Map,Yr=[],ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _f(e,t){switch(e){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":ol.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(t.pointerId)}}function Ia(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=El(t),t!==null&&ad(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function lx(e,t,r,n,a){switch(t){case"focusin":return nn=Ia(nn,e,t,r,n,a),!0;case"dragenter":return sn=Ia(sn,e,t,r,n,a),!0;case"mouseover":return an=Ia(an,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return ol.set(l,Ia(ol.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,il.set(l,Ia(il.get(l)||null,e,t,r,n,a)),!0}return!1}function _p(e){var t=Bn(e.target);if(t!==null){var r=Yn(t);if(r!==null){if(t=r.tag,t===13){if(t=xp(r),t!==null){e.blockedOn=t,Dp(e.priority,function(){Ep(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ic(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);rc=n,r.target.dispatchEvent(n),rc=null}else return t=El(r),t!==null&&ad(t),e.blockedOn=r,!1;t.shift()}return!0}function Af(e,t,r){Po(e)&&r.delete(t)}function ox(){oc=!1,nn!==null&&Po(nn)&&(nn=null),sn!==null&&Po(sn)&&(sn=null),an!==null&&Po(an)&&(an=null),ol.forEach(Af),il.forEach(Af)}function Ta(e,t){e.blockedOn===t&&(e.blockedOn=null,oc||(oc=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,ox)))}function ul(e){function t(a){return Ta(a,e)}if(0<mo.length){Ta(mo[0],e);for(var r=1;r<mo.length;r++){var n=mo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(nn!==null&&Ta(nn,e),sn!==null&&Ta(sn,e),an!==null&&Ta(an,e),ol.forEach(t),il.forEach(t),r=0;r<Yr.length;r++)n=Yr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Yr.length&&(r=Yr[0],r.blockedOn===null);)_p(r),r.blockedOn===null&&Yr.shift()}var Ts=Or.ReactCurrentBatchConfig,Yo=!0;function ix(e,t,r,n){var a=ye,l=Ts.transition;Ts.transition=null;try{ye=1,ld(e,t,r,n)}finally{ye=a,Ts.transition=l}}function ux(e,t,r,n){var a=ye,l=Ts.transition;Ts.transition=null;try{ye=4,ld(e,t,r,n)}finally{ye=a,Ts.transition=l}}function ld(e,t,r,n){if(Yo){var a=ic(e,t,r,n);if(a===null)Nu(e,t,n,Xo,r),_f(e,n);else if(lx(a,e,t,r,n))n.stopPropagation();else if(_f(e,n),t&4&&-1<ax.indexOf(e)){for(;a!==null;){var l=El(a);if(l!==null&&Sp(l),l=ic(e,t,r,n),l===null&&Nu(e,t,n,Xo,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else Nu(e,t,n,null,r)}}var Xo=null;function ic(e,t,r,n){if(Xo=null,e=rd(n),e=Bn(e),e!==null)if(t=Yn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=xp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xo=e,null}function Ap(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zg()){case nd:return 1;case bp:return 4;case Zo:case Jg:return 16;case kp:return 536870912;default:return 16}default:return 16}}var en=null,od=null,Io=null;function Rp(){if(Io)return Io;var e,t=od,r=t.length,n,a="value"in en?en.value:en.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[l-n];n++);return Io=a.slice(e,1<n?1-n:void 0)}function To(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function go(){return!0}function Rf(){return!1}function Dt(e){function t(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?go:Rf,this.isPropagationStopped=Rf,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=go)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=go)},persist:function(){},isPersistent:go}),t}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=Dt(Qs),Sl=Ae({},Qs,{view:0,detail:0}),cx=Dt(Sl),mu,gu,Fa,bi=Ae({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fa&&(Fa&&e.type==="mousemove"?(mu=e.screenX-Fa.screenX,gu=e.screenY-Fa.screenY):gu=mu=0,Fa=e),mu)},movementY:function(e){return"movementY"in e?e.movementY:gu}}),Lf=Dt(bi),dx=Ae({},bi,{dataTransfer:0}),fx=Dt(dx),hx=Ae({},Sl,{relatedTarget:0}),xu=Dt(hx),px=Ae({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),mx=Dt(px),gx=Ae({},Qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xx=Dt(gx),vx=Ae({},Qs,{data:0}),Pf=Dt(vx),yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bx[e])?!!t[e]:!1}function ud(){return kx}var jx=Ae({},Sl,{key:function(e){if(e.key){var t=yx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=To(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(e){return e.type==="keypress"?To(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?To(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nx=Dt(jx),Sx=Ae({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),If=Dt(Sx),Ex=Ae({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),Cx=Dt(Ex),Dx=Ae({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=Dt(Dx),Ax=Ae({},bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rx=Dt(Ax),Lx=[9,13,27,32],cd=Pr&&"CompositionEvent"in window,Ja=null;Pr&&"documentMode"in document&&(Ja=document.documentMode);var Px=Pr&&"TextEvent"in window&&!Ja,Lp=Pr&&(!cd||Ja&&8<Ja&&11>=Ja),Tf=" ",Ff=!1;function Pp(e,t){switch(e){case"keyup":return Lx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ks=!1;function Ix(e,t){switch(e){case"compositionend":return Ip(t);case"keypress":return t.which!==32?null:(Ff=!0,Tf);case"textInput":return e=t.data,e===Tf&&Ff?null:e;default:return null}}function Tx(e,t){if(ks)return e==="compositionend"||!cd&&Pp(e,t)?(e=Rp(),Io=od=en=null,ks=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lp&&t.locale!=="ko"?null:t.data;default:return null}}var Fx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Of(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fx[e.type]:t==="textarea"}function Tp(e,t,r,n){fp(n),t=ei(t,"onChange"),0<t.length&&(r=new id("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ya=null,cl=null;function Ox(e){qp(e,0)}function ki(e){var t=Ss(e);if(ap(t))return e}function Ux(e,t){if(e==="change")return t}var Fp=!1;if(Pr){var vu;if(Pr){var yu="oninput"in document;if(!yu){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),yu=typeof Uf.oninput=="function"}vu=yu}else vu=!1;Fp=vu&&(!document.documentMode||9<document.documentMode)}function Mf(){Ya&&(Ya.detachEvent("onpropertychange",Op),cl=Ya=null)}function Op(e){if(e.propertyName==="value"&&ki(cl)){var t=[];Tp(t,cl,e,rd(e)),gp(Ox,t)}}function Mx(e,t,r){e==="focusin"?(Mf(),Ya=t,cl=r,Ya.attachEvent("onpropertychange",Op)):e==="focusout"&&Mf()}function $x(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ki(cl)}function Bx(e,t){if(e==="click")return ki(t)}function zx(e,t){if(e==="input"||e==="change")return ki(t)}function Vx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:Vx;function dl(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Wu.call(t,a)||!Zt(e[a],t[a]))return!1}return!0}function $f(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bf(e,t){var r=$f(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$f(r)}}function Up(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Up(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mp(){for(var e=window,t=Qo();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Qo(e.document)}return t}function dd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wx(e){var t=Mp(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Up(r.ownerDocument.documentElement,r)){if(n!==null&&dd(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Bf(r,l);var i=Bf(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hx=Pr&&"documentMode"in document&&11>=document.documentMode,js=null,uc=null,Xa=null,cc=!1;function zf(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cc||js==null||js!==Qo(n)||(n=js,"selectionStart"in n&&dd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xa&&dl(Xa,n)||(Xa=n,n=ei(uc,"onSelect"),0<n.length&&(t=new id("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=js)))}function xo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ns={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionend:xo("Transition","TransitionEnd")},wu={},$p={};Pr&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function ji(e){if(wu[e])return wu[e];if(!Ns[e])return e;var t=Ns[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in $p)return wu[e]=t[r];return e}var Bp=ji("animationend"),zp=ji("animationiteration"),Vp=ji("animationstart"),Wp=ji("transitionend"),Hp=new Map,Vf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gn(e,t){Hp.set(e,t),Jn(t,[e])}for(var bu=0;bu<Vf.length;bu++){var ku=Vf[bu],qx=ku.toLowerCase(),Qx=ku[0].toUpperCase()+ku.slice(1);gn(qx,"on"+Qx)}gn(Bp,"onAnimationEnd");gn(zp,"onAnimationIteration");gn(Vp,"onAnimationStart");gn("dblclick","onDoubleClick");gn("focusin","onFocus");gn("focusout","onBlur");gn(Wp,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function Wf(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qg(n,t,void 0,e),e.currentTarget=null}function qp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var i=n.length-1;0<=i;i--){var u=n[i],f=u.instance,m=u.currentTarget;if(u=u.listener,f!==l&&a.isPropagationStopped())break e;Wf(a,u,m),l=f}else for(i=0;i<n.length;i++){if(u=n[i],f=u.instance,m=u.currentTarget,u=u.listener,f!==l&&a.isPropagationStopped())break e;Wf(a,u,m),l=f}}}if(Ko)throw e=ac,Ko=!1,ac=null,e}function je(e,t){var r=t[mc];r===void 0&&(r=t[mc]=new Set);var n=e+"__bubble";r.has(n)||(Qp(t,e,2,!1),r.add(n))}function ju(e,t,r){var n=0;t&&(n|=4),Qp(r,e,n,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function fl(e){if(!e[vo]){e[vo]=!0,ep.forEach(function(r){r!=="selectionchange"&&(Gx.has(r)||ju(r,!1,e),ju(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,ju("selectionchange",!1,t))}}function Qp(e,t,r,n){switch(Ap(t)){case 1:var a=ix;break;case 4:a=ux;break;default:a=ld}r=a.bind(null,t,r,e),a=void 0,!sc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Nu(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var u=n.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var f=i.tag;if((f===3||f===4)&&(f=i.stateNode.containerInfo,f===a||f.nodeType===8&&f.parentNode===a))return;i=i.return}for(;u!==null;){if(i=Bn(u),i===null)return;if(f=i.tag,f===5||f===6){n=l=i;continue e}u=u.parentNode}}n=n.return}gp(function(){var m=l,v=rd(r),b=[];e:{var N=Hp.get(e);if(N!==void 0){var C=id,D=e;switch(e){case"keypress":if(To(r)===0)break e;case"keydown":case"keyup":C=Nx;break;case"focusin":D="focus",C=xu;break;case"focusout":D="blur",C=xu;break;case"beforeblur":case"afterblur":C=xu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Cx;break;case Bp:case zp:case Vp:C=mx;break;case Wp:C=_x;break;case"scroll":C=cx;break;case"wheel":C=Rx;break;case"copy":case"cut":case"paste":C=xx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=If}var A=(t&4)!==0,I=!A&&e==="scroll",k=A?N!==null?N+"Capture":null:N;A=[];for(var x=m,y;x!==null;){y=x;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,k!==null&&(E=ll(x,k),E!=null&&A.push(hl(x,E,y)))),I)break;x=x.return}0<A.length&&(N=new C(N,D,null,r,v),b.push({event:N,listeners:A}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",N&&r!==rc&&(D=r.relatedTarget||r.fromElement)&&(Bn(D)||D[Ir]))break e;if((C||N)&&(N=v.window===v?v:(N=v.ownerDocument)?N.defaultView||N.parentWindow:window,C?(D=r.relatedTarget||r.toElement,C=m,D=D?Bn(D):null,D!==null&&(I=Yn(D),D!==I||D.tag!==5&&D.tag!==6)&&(D=null)):(C=null,D=m),C!==D)){if(A=Lf,E="onMouseLeave",k="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(A=If,E="onPointerLeave",k="onPointerEnter",x="pointer"),I=C==null?N:Ss(C),y=D==null?N:Ss(D),N=new A(E,x+"leave",C,r,v),N.target=I,N.relatedTarget=y,E=null,Bn(v)===m&&(A=new A(k,x+"enter",D,r,v),A.target=y,A.relatedTarget=I,E=A),I=E,C&&D)t:{for(A=C,k=D,x=0,y=A;y;y=ys(y))x++;for(y=0,E=k;E;E=ys(E))y++;for(;0<x-y;)A=ys(A),x--;for(;0<y-x;)k=ys(k),y--;for(;x--;){if(A===k||k!==null&&A===k.alternate)break t;A=ys(A),k=ys(k)}A=null}else A=null;C!==null&&Hf(b,N,C,A,!1),D!==null&&I!==null&&Hf(b,I,D,A,!0)}}e:{if(N=m?Ss(m):window,C=N.nodeName&&N.nodeName.toLowerCase(),C==="select"||C==="input"&&N.type==="file")var _=Ux;else if(Of(N))if(Fp)_=zx;else{_=$x;var U=Mx}else(C=N.nodeName)&&C.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(_=Bx);if(_&&(_=_(e,m))){Tp(b,_,r,v);break e}U&&U(e,N,m),e==="focusout"&&(U=N._wrapperState)&&U.controlled&&N.type==="number"&&Ju(N,"number",N.value)}switch(U=m?Ss(m):window,e){case"focusin":(Of(U)||U.contentEditable==="true")&&(js=U,uc=m,Xa=null);break;case"focusout":Xa=uc=js=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,zf(b,r,v);break;case"selectionchange":if(Hx)break;case"keydown":case"keyup":zf(b,r,v)}var V;if(cd)e:{switch(e){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else ks?Pp(e,r)&&(Q="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Q="onCompositionStart");Q&&(Lp&&r.locale!=="ko"&&(ks||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&ks&&(V=Rp()):(en=v,od="value"in en?en.value:en.textContent,ks=!0)),U=ei(m,Q),0<U.length&&(Q=new Pf(Q,e,null,r,v),b.push({event:Q,listeners:U}),V?Q.data=V:(V=Ip(r),V!==null&&(Q.data=V)))),(V=Px?Ix(e,r):Tx(e,r))&&(m=ei(m,"onBeforeInput"),0<m.length&&(v=new Pf("onBeforeInput","beforeinput",null,r,v),b.push({event:v,listeners:m}),v.data=V))}qp(b,t)})}function hl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ei(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=ll(e,r),l!=null&&n.unshift(hl(e,l,a)),l=ll(e,t),l!=null&&n.push(hl(e,l,a))),e=e.return}return n}function ys(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hf(e,t,r,n,a){for(var l=t._reactName,i=[];r!==null&&r!==n;){var u=r,f=u.alternate,m=u.stateNode;if(f!==null&&f===n)break;u.tag===5&&m!==null&&(u=m,a?(f=ll(r,l),f!=null&&i.unshift(hl(r,f,u))):a||(f=ll(r,l),f!=null&&i.push(hl(r,f,u)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Kx=/\r\n?/g,Zx=/\u0000|\uFFFD/g;function qf(e){return(typeof e=="string"?e:""+e).replace(Kx,`
`).replace(Zx,"")}function yo(e,t,r){if(t=qf(t),qf(e)!==t&&r)throw Error(M(425))}function ti(){}var dc=null,fc=null;function hc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,Jx=typeof clearTimeout=="function"?clearTimeout:void 0,Qf=typeof Promise=="function"?Promise:void 0,Yx=typeof queueMicrotask=="function"?queueMicrotask:typeof Qf<"u"?function(e){return Qf.resolve(null).then(e).catch(Xx)}:pc;function Xx(e){setTimeout(function(){throw e})}function Su(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),ul(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ul(t)}function ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),ir="__reactFiber$"+Gs,pl="__reactProps$"+Gs,Ir="__reactContainer$"+Gs,mc="__reactEvents$"+Gs,ev="__reactListeners$"+Gs,tv="__reactHandles$"+Gs;function Bn(e){var t=e[ir];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ir]||r[ir]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Gf(e);e!==null;){if(r=e[ir])return r;e=Gf(e)}return t}e=r,r=e.parentNode}return null}function El(e){return e=e[ir]||e[Ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ss(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Ni(e){return e[pl]||null}var gc=[],Es=-1;function xn(e){return{current:e}}function Ne(e){0>Es||(e.current=gc[Es],gc[Es]=null,Es--)}function we(e,t){Es++,gc[Es]=e.current,e.current=t}var mn={},rt=xn(mn),mt=xn(!1),qn=mn;function $s(e,t){var r=e.type.contextTypes;if(!r)return mn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gt(e){return e=e.childContextTypes,e!=null}function ri(){Ne(mt),Ne(rt)}function Kf(e,t,r){if(rt.current!==mn)throw Error(M(168));we(rt,t),we(mt,r)}function Gp(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(M(108,Mg(e)||"Unknown",a));return Ae({},r,n)}function ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,qn=rt.current,we(rt,e),we(mt,mt.current),!0}function Zf(e,t,r){var n=e.stateNode;if(!n)throw Error(M(169));r?(e=Gp(e,t,qn),n.__reactInternalMemoizedMergedChildContext=e,Ne(mt),Ne(rt),we(rt,e)):Ne(mt),we(mt,r)}var Dr=null,Si=!1,Eu=!1;function Kp(e){Dr===null?Dr=[e]:Dr.push(e)}function rv(e){Si=!0,Kp(e)}function vn(){if(!Eu&&Dr!==null){Eu=!0;var e=0,t=ye;try{var r=Dr;for(ye=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Dr=null,Si=!1}catch(a){throw Dr!==null&&(Dr=Dr.slice(e+1)),wp(nd,vn),a}finally{ye=t,Eu=!1}}return null}var Cs=[],Ds=0,si=null,ai=0,Pt=[],It=0,Qn=null,Ar=1,Rr="";function Un(e,t){Cs[Ds++]=ai,Cs[Ds++]=si,si=e,ai=t}function Zp(e,t,r){Pt[It++]=Ar,Pt[It++]=Rr,Pt[It++]=Qn,Qn=e;var n=Ar;e=Rr;var a=32-Gt(n)-1;n&=~(1<<a),r+=1;var l=32-Gt(t)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Ar=1<<32-Gt(t)+a|r<<a|n,Rr=l+e}else Ar=1<<l|r<<a|n,Rr=e}function fd(e){e.return!==null&&(Un(e,1),Zp(e,1,0))}function hd(e){for(;e===si;)si=Cs[--Ds],Cs[Ds]=null,ai=Cs[--Ds],Cs[Ds]=null;for(;e===Qn;)Qn=Pt[--It],Pt[It]=null,Rr=Pt[--It],Pt[It]=null,Ar=Pt[--It],Pt[It]=null}var St=null,Nt=null,Ce=!1,qt=null;function Jp(e,t){var r=Ft(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Jf(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,Nt=ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qn!==null?{id:Ar,overflow:Rr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ft(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,St=e,Nt=null,!0):!1;default:return!1}}function xc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vc(e){if(Ce){var t=Nt;if(t){var r=t;if(!Jf(e,t)){if(xc(e))throw Error(M(418));t=ln(r.nextSibling);var n=St;t&&Jf(e,t)?Jp(n,r):(e.flags=e.flags&-4097|2,Ce=!1,St=e)}}else{if(xc(e))throw Error(M(418));e.flags=e.flags&-4097|2,Ce=!1,St=e}}}function Yf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function wo(e){if(e!==St)return!1;if(!Ce)return Yf(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hc(e.type,e.memoizedProps)),t&&(t=Nt)){if(xc(e))throw Yp(),Error(M(418));for(;t;)Jp(e,t),t=ln(t.nextSibling)}if(Yf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Nt=ln(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=St?ln(e.stateNode.nextSibling):null;return!0}function Yp(){for(var e=Nt;e;)e=ln(e.nextSibling)}function Bs(){Nt=St=null,Ce=!1}function pd(e){qt===null?qt=[e]:qt.push(e)}var nv=Or.ReactCurrentBatchConfig;function Vt(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var li=xn(null),oi=null,_s=null,md=null;function gd(){md=_s=oi=null}function xd(e){var t=li.current;Ne(li),e._currentValue=t}function yc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fs(e,t){oi=e,md=_s=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pt=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(md!==e)if(e={context:e,memoizedValue:t,next:null},_s===null){if(oi===null)throw Error(M(308));_s=e,oi.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var zn=null;function vd(e){zn===null?zn=[e]:zn.push(e)}function Xp(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,vd(t)):(r.next=a.next,a.next=r),t.interleaved=r,Tr(e,n)}function Tr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Jr=!1;function yd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function em(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function on(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pe&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Tr(e,r)}return a=n.interleaved,a===null?(t.next=t,vd(n)):(t.next=a.next,a.next=t),n.interleaved=t,Tr(e,r)}function Fo(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,sd(e,r)}}function Xf(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ii(e,t,r,n){var a=e.updateQueue;Jr=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var f=u,m=f.next;f.next=null,i===null?l=m:i.next=m,i=f;var v=e.alternate;v!==null&&(v=v.updateQueue,u=v.lastBaseUpdate,u!==i&&(u===null?v.firstBaseUpdate=m:u.next=m,v.lastBaseUpdate=f))}if(l!==null){var b=a.baseState;i=0,v=m=f=null,u=l;do{var N=u.lane,C=u.eventTime;if((n&N)===N){v!==null&&(v=v.next={eventTime:C,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var D=e,A=u;switch(N=t,C=r,A.tag){case 1:if(D=A.payload,typeof D=="function"){b=D.call(C,b,N);break e}b=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=A.payload,N=typeof D=="function"?D.call(C,b,N):D,N==null)break e;b=Ae({},b,N);break e;case 2:Jr=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,N=a.effects,N===null?a.effects=[u]:N.push(u))}else C={eventTime:C,lane:N,tag:u.tag,payload:u.payload,callback:u.callback,next:null},v===null?(m=v=C,f=b):v=v.next=C,i|=N;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;N=u,u=N.next,N.next=null,a.lastBaseUpdate=N,a.shared.pending=null}}while(!0);if(v===null&&(f=b),a.baseState=f,a.firstBaseUpdate=m,a.lastBaseUpdate=v,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Kn|=i,e.lanes=i,e.memoizedState=b}}function eh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(M(191,a));a.call(n)}}}var tm=new Xh.Component().refs;function wc(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Yn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=it(),a=cn(e),l=Lr(n,a);l.payload=t,r!=null&&(l.callback=r),t=on(e,l,a),t!==null&&(Kt(t,e,a,n),Fo(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=it(),a=cn(e),l=Lr(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=on(e,l,a),t!==null&&(Kt(t,e,a,n),Fo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),n=cn(e),a=Lr(r,n);a.tag=2,t!=null&&(a.callback=t),t=on(e,a,n),t!==null&&(Kt(t,e,n,r),Fo(t,e,n))}};function th(e,t,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):t.prototype&&t.prototype.isPureReactComponent?!dl(r,n)||!dl(a,l):!0}function rm(e,t,r){var n=!1,a=mn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ut(l):(a=gt(t)?qn:rt.current,n=t.contextTypes,l=(n=n!=null)?$s(e,a):mn),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ei,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function rh(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ei.enqueueReplaceState(t,t.state,null)}function bc(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=tm,yd(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ut(l):(l=gt(t)?qn:rt.current,a.context=$s(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(wc(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ei.enqueueReplaceState(a,a.state,null),ii(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Oa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(M(309));var n=r.stateNode}if(!n)throw Error(M(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var u=a.refs;u===tm&&(u=a.refs={}),i===null?delete u[l]:u[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(M(284));if(!r._owner)throw Error(M(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nh(e){var t=e._init;return t(e._payload)}function nm(e){function t(k,x){if(e){var y=k.deletions;y===null?(k.deletions=[x],k.flags|=16):y.push(x)}}function r(k,x){if(!e)return null;for(;x!==null;)t(k,x),x=x.sibling;return null}function n(k,x){for(k=new Map;x!==null;)x.key!==null?k.set(x.key,x):k.set(x.index,x),x=x.sibling;return k}function a(k,x){return k=dn(k,x),k.index=0,k.sibling=null,k}function l(k,x,y){return k.index=y,e?(y=k.alternate,y!==null?(y=y.index,y<x?(k.flags|=2,x):y):(k.flags|=2,x)):(k.flags|=1048576,x)}function i(k){return e&&k.alternate===null&&(k.flags|=2),k}function u(k,x,y,E){return x===null||x.tag!==6?(x=Pu(y,k.mode,E),x.return=k,x):(x=a(x,y),x.return=k,x)}function f(k,x,y,E){var _=y.type;return _===bs?v(k,x,y.props.children,E,y.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zr&&nh(_)===x.type)?(E=a(x,y.props),E.ref=Oa(k,x,y),E.return=k,E):(E=zo(y.type,y.key,y.props,null,k.mode,E),E.ref=Oa(k,x,y),E.return=k,E)}function m(k,x,y,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Iu(y,k.mode,E),x.return=k,x):(x=a(x,y.children||[]),x.return=k,x)}function v(k,x,y,E,_){return x===null||x.tag!==7?(x=Hn(y,k.mode,E,_),x.return=k,x):(x=a(x,y),x.return=k,x)}function b(k,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Pu(""+x,k.mode,y),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uo:return y=zo(x.type,x.key,x.props,null,k.mode,y),y.ref=Oa(k,null,x),y.return=k,y;case ws:return x=Iu(x,k.mode,y),x.return=k,x;case Zr:var E=x._init;return b(k,E(x._payload),y)}if(Ha(x)||La(x))return x=Hn(x,k.mode,y,null),x.return=k,x;bo(k,x)}return null}function N(k,x,y,E){var _=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:u(k,x,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case uo:return y.key===_?f(k,x,y,E):null;case ws:return y.key===_?m(k,x,y,E):null;case Zr:return _=y._init,N(k,x,_(y._payload),E)}if(Ha(y)||La(y))return _!==null?null:v(k,x,y,E,null);bo(k,y)}return null}function C(k,x,y,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return k=k.get(y)||null,u(x,k,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case uo:return k=k.get(E.key===null?y:E.key)||null,f(x,k,E,_);case ws:return k=k.get(E.key===null?y:E.key)||null,m(x,k,E,_);case Zr:var U=E._init;return C(k,x,y,U(E._payload),_)}if(Ha(E)||La(E))return k=k.get(y)||null,v(x,k,E,_,null);bo(x,E)}return null}function D(k,x,y,E){for(var _=null,U=null,V=x,Q=x=0,O=null;V!==null&&Q<y.length;Q++){V.index>Q?(O=V,V=null):O=V.sibling;var P=N(k,V,y[Q],E);if(P===null){V===null&&(V=O);break}e&&V&&P.alternate===null&&t(k,V),x=l(P,x,Q),U===null?_=P:U.sibling=P,U=P,V=O}if(Q===y.length)return r(k,V),Ce&&Un(k,Q),_;if(V===null){for(;Q<y.length;Q++)V=b(k,y[Q],E),V!==null&&(x=l(V,x,Q),U===null?_=V:U.sibling=V,U=V);return Ce&&Un(k,Q),_}for(V=n(k,V);Q<y.length;Q++)O=C(V,k,Q,y[Q],E),O!==null&&(e&&O.alternate!==null&&V.delete(O.key===null?Q:O.key),x=l(O,x,Q),U===null?_=O:U.sibling=O,U=O);return e&&V.forEach(function(ee){return t(k,ee)}),Ce&&Un(k,Q),_}function A(k,x,y,E){var _=La(y);if(typeof _!="function")throw Error(M(150));if(y=_.call(y),y==null)throw Error(M(151));for(var U=_=null,V=x,Q=x=0,O=null,P=y.next();V!==null&&!P.done;Q++,P=y.next()){V.index>Q?(O=V,V=null):O=V.sibling;var ee=N(k,V,P.value,E);if(ee===null){V===null&&(V=O);break}e&&V&&ee.alternate===null&&t(k,V),x=l(ee,x,Q),U===null?_=ee:U.sibling=ee,U=ee,V=O}if(P.done)return r(k,V),Ce&&Un(k,Q),_;if(V===null){for(;!P.done;Q++,P=y.next())P=b(k,P.value,E),P!==null&&(x=l(P,x,Q),U===null?_=P:U.sibling=P,U=P);return Ce&&Un(k,Q),_}for(V=n(k,V);!P.done;Q++,P=y.next())P=C(V,k,Q,P.value,E),P!==null&&(e&&P.alternate!==null&&V.delete(P.key===null?Q:P.key),x=l(P,x,Q),U===null?_=P:U.sibling=P,U=P);return e&&V.forEach(function(me){return t(k,me)}),Ce&&Un(k,Q),_}function I(k,x,y,E){if(typeof y=="object"&&y!==null&&y.type===bs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case uo:e:{for(var _=y.key,U=x;U!==null;){if(U.key===_){if(_=y.type,_===bs){if(U.tag===7){r(k,U.sibling),x=a(U,y.props.children),x.return=k,k=x;break e}}else if(U.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zr&&nh(_)===U.type){r(k,U.sibling),x=a(U,y.props),x.ref=Oa(k,U,y),x.return=k,k=x;break e}r(k,U);break}else t(k,U);U=U.sibling}y.type===bs?(x=Hn(y.props.children,k.mode,E,y.key),x.return=k,k=x):(E=zo(y.type,y.key,y.props,null,k.mode,E),E.ref=Oa(k,x,y),E.return=k,k=E)}return i(k);case ws:e:{for(U=y.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){r(k,x.sibling),x=a(x,y.children||[]),x.return=k,k=x;break e}else{r(k,x);break}else t(k,x);x=x.sibling}x=Iu(y,k.mode,E),x.return=k,k=x}return i(k);case Zr:return U=y._init,I(k,x,U(y._payload),E)}if(Ha(y))return D(k,x,y,E);if(La(y))return A(k,x,y,E);bo(k,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(r(k,x.sibling),x=a(x,y),x.return=k,k=x):(r(k,x),x=Pu(y,k.mode,E),x.return=k,k=x),i(k)):r(k,x)}return I}var zs=nm(!0),sm=nm(!1),Cl={},cr=xn(Cl),ml=xn(Cl),gl=xn(Cl);function Vn(e){if(e===Cl)throw Error(M(174));return e}function wd(e,t){switch(we(gl,t),we(ml,e),we(cr,Cl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xu(t,e)}Ne(cr),we(cr,t)}function Vs(){Ne(cr),Ne(ml),Ne(gl)}function am(e){Vn(gl.current);var t=Vn(cr.current),r=Xu(t,e.type);t!==r&&(we(ml,e),we(cr,r))}function bd(e){ml.current===e&&(Ne(cr),Ne(ml))}var De=xn(0);function ui(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cu=[];function kd(){for(var e=0;e<Cu.length;e++)Cu[e]._workInProgressVersionPrimary=null;Cu.length=0}var Oo=Or.ReactCurrentDispatcher,Du=Or.ReactCurrentBatchConfig,Gn=0,_e=null,Ve=null,Qe=null,ci=!1,el=!1,xl=0,sv=0;function Xe(){throw Error(M(321))}function jd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zt(e[r],t[r]))return!1;return!0}function Nd(e,t,r,n,a,l){if(Gn=l,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oo.current=e===null||e.memoizedState===null?iv:uv,e=r(n,a),el){l=0;do{if(el=!1,xl=0,25<=l)throw Error(M(301));l+=1,Qe=Ve=null,t.updateQueue=null,Oo.current=cv,e=r(n,a)}while(el)}if(Oo.current=di,t=Ve!==null&&Ve.next!==null,Gn=0,Qe=Ve=_e=null,ci=!1,t)throw Error(M(300));return e}function Sd(){var e=xl!==0;return xl=0,e}function or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?_e.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Mt(){if(Ve===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Qe===null?_e.memoizedState:Qe.next;if(t!==null)Qe=t,Ve=e;else{if(e===null)throw Error(M(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Qe===null?_e.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function vl(e,t){return typeof t=="function"?t(e):t}function _u(e){var t=Mt(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var n=Ve,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var u=i=null,f=null,m=l;do{var v=m.lane;if((Gn&v)===v)f!==null&&(f=f.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:e(n,m.action);else{var b={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};f===null?(u=f=b,i=n):f=f.next=b,_e.lanes|=v,Kn|=v}m=m.next}while(m!==null&&m!==l);f===null?i=n:f.next=u,Zt(n,t.memoizedState)||(pt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=f,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,_e.lanes|=l,Kn|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Au(e){var t=Mt(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Zt(l,t.memoizedState)||(pt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function lm(){}function om(e,t){var r=_e,n=Mt(),a=t(),l=!Zt(n.memoizedState,a);if(l&&(n.memoizedState=a,pt=!0),n=n.queue,Ed(cm.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||Qe!==null&&Qe.memoizedState.tag&1){if(r.flags|=2048,yl(9,um.bind(null,r,n,a,t),void 0,null),Ge===null)throw Error(M(349));Gn&30||im(r,t,a)}return a}function im(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function um(e,t,r,n){t.value=r,t.getSnapshot=n,dm(t)&&fm(e)}function cm(e,t,r){return r(function(){dm(t)&&fm(e)})}function dm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zt(e,r)}catch{return!0}}function fm(e){var t=Tr(e,1);t!==null&&Kt(t,e,1,-1)}function sh(e){var t=or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:e},t.queue=e,e=e.dispatch=ov.bind(null,_e,e),[t.memoizedState,e]}function yl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function hm(){return Mt().memoizedState}function Uo(e,t,r,n){var a=or();_e.flags|=e,a.memoizedState=yl(1|t,r,void 0,n===void 0?null:n)}function Ci(e,t,r,n){var a=Mt();n=n===void 0?null:n;var l=void 0;if(Ve!==null){var i=Ve.memoizedState;if(l=i.destroy,n!==null&&jd(n,i.deps)){a.memoizedState=yl(t,r,l,n);return}}_e.flags|=e,a.memoizedState=yl(1|t,r,l,n)}function ah(e,t){return Uo(8390656,8,e,t)}function Ed(e,t){return Ci(2048,8,e,t)}function pm(e,t){return Ci(4,2,e,t)}function mm(e,t){return Ci(4,4,e,t)}function gm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xm(e,t,r){return r=r!=null?r.concat([e]):null,Ci(4,4,gm.bind(null,t,e),r)}function Cd(){}function vm(e,t){var r=Mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jd(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ym(e,t){var r=Mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jd(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function wm(e,t,r){return Gn&21?(Zt(r,t)||(r=jp(),_e.lanes|=r,Kn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pt=!0),e.memoizedState=r)}function av(e,t){var r=ye;ye=r!==0&&4>r?r:4,e(!0);var n=Du.transition;Du.transition={};try{e(!1),t()}finally{ye=r,Du.transition=n}}function bm(){return Mt().memoizedState}function lv(e,t,r){var n=cn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},km(e))jm(t,r);else if(r=Xp(e,t,r,n),r!==null){var a=it();Kt(r,e,n,a),Nm(r,t,n)}}function ov(e,t,r){var n=cn(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(km(e))jm(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,u=l(i,r);if(a.hasEagerState=!0,a.eagerState=u,Zt(u,i)){var f=t.interleaved;f===null?(a.next=a,vd(t)):(a.next=f.next,f.next=a),t.interleaved=a;return}}catch{}finally{}r=Xp(e,t,a,n),r!==null&&(a=it(),Kt(r,e,n,a),Nm(r,t,n))}}function km(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function jm(e,t){el=ci=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Nm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,sd(e,r)}}var di={readContext:Ut,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},iv={readContext:Ut,useCallback:function(e,t){return or().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:ah,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Uo(4194308,4,gm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var r=or();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=or();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=lv.bind(null,_e,e),[n.memoizedState,e]},useRef:function(e){var t=or();return e={current:e},t.memoizedState=e},useState:sh,useDebugValue:Cd,useDeferredValue:function(e){return or().memoizedState=e},useTransition:function(){var e=sh(!1),t=e[0];return e=av.bind(null,e[1]),or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=_e,a=or();if(Ce){if(r===void 0)throw Error(M(407));r=r()}else{if(r=t(),Ge===null)throw Error(M(349));Gn&30||im(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,ah(cm.bind(null,n,l,e),[e]),n.flags|=2048,yl(9,um.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=or(),t=Ge.identifierPrefix;if(Ce){var r=Rr,n=Ar;r=(n&~(1<<32-Gt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=xl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=sv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uv={readContext:Ut,useCallback:vm,useContext:Ut,useEffect:Ed,useImperativeHandle:xm,useInsertionEffect:pm,useLayoutEffect:mm,useMemo:ym,useReducer:_u,useRef:hm,useState:function(){return _u(vl)},useDebugValue:Cd,useDeferredValue:function(e){var t=Mt();return wm(t,Ve.memoizedState,e)},useTransition:function(){var e=_u(vl)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:lm,useSyncExternalStore:om,useId:bm,unstable_isNewReconciler:!1},cv={readContext:Ut,useCallback:vm,useContext:Ut,useEffect:Ed,useImperativeHandle:xm,useInsertionEffect:pm,useLayoutEffect:mm,useMemo:ym,useReducer:Au,useRef:hm,useState:function(){return Au(vl)},useDebugValue:Cd,useDeferredValue:function(e){var t=Mt();return Ve===null?t.memoizedState=e:wm(t,Ve.memoizedState,e)},useTransition:function(){var e=Au(vl)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:lm,useSyncExternalStore:om,useId:bm,unstable_isNewReconciler:!1};function Ws(e,t){try{var r="",n=t;do r+=Ug(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Ru(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function kc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var dv=typeof WeakMap=="function"?WeakMap:Map;function Sm(e,t,r){r=Lr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){hi||(hi=!0,Lc=n),kc(e,t)},r}function Em(e,t,r){r=Lr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){kc(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){kc(e,t),typeof n!="function"&&(un===null?un=new Set([this]):un.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function lh(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new dv;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Sv.bind(null,e,t,r),t.then(e,e))}function oh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ih(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Lr(-1,1),t.tag=2,on(r,t,1))),r.lanes|=1),e)}var fv=Or.ReactCurrentOwner,pt=!1;function ot(e,t,r,n){t.child=e===null?sm(t,null,r,n):zs(t,e.child,r,n)}function uh(e,t,r,n,a){r=r.render;var l=t.ref;return Fs(t,a),n=Nd(e,t,r,n,l,a),r=Sd(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fr(e,t,a)):(Ce&&r&&fd(t),t.flags|=1,ot(e,t,n,a),t.child)}function ch(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Td(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,Cm(e,t,l,n,a)):(e=zo(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:dl,r(i,n)&&e.ref===t.ref)return Fr(e,t,a)}return t.flags|=1,e=dn(l,n),e.ref=t.ref,e.return=t,t.child=e}function Cm(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(dl(l,n)&&e.ref===t.ref)if(pt=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(pt=!0);else return t.lanes=e.lanes,Fr(e,t,a)}return jc(e,t,r,n,a)}function Dm(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Rs,kt),kt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Rs,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,we(Rs,kt),kt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,we(Rs,kt),kt|=n;return ot(e,t,a,r),t.child}function _m(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function jc(e,t,r,n,a){var l=gt(r)?qn:rt.current;return l=$s(t,l),Fs(t,a),r=Nd(e,t,r,n,l,a),n=Sd(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fr(e,t,a)):(Ce&&n&&fd(t),t.flags|=1,ot(e,t,r,a),t.child)}function dh(e,t,r,n,a){if(gt(r)){var l=!0;ni(t)}else l=!1;if(Fs(t,a),t.stateNode===null)Mo(e,t),rm(t,r,n),bc(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,u=t.memoizedProps;i.props=u;var f=i.context,m=r.contextType;typeof m=="object"&&m!==null?m=Ut(m):(m=gt(r)?qn:rt.current,m=$s(t,m));var v=r.getDerivedStateFromProps,b=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function";b||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==n||f!==m)&&rh(t,i,n,m),Jr=!1;var N=t.memoizedState;i.state=N,ii(t,n,i,a),f=t.memoizedState,u!==n||N!==f||mt.current||Jr?(typeof v=="function"&&(wc(t,r,v,n),f=t.memoizedState),(u=Jr||th(t,r,u,n,N,f,m))?(b||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=f),i.props=n,i.state=f,i.context=m,n=u):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,em(e,t),u=t.memoizedProps,m=t.type===t.elementType?u:Vt(t.type,u),i.props=m,b=t.pendingProps,N=i.context,f=r.contextType,typeof f=="object"&&f!==null?f=Ut(f):(f=gt(r)?qn:rt.current,f=$s(t,f));var C=r.getDerivedStateFromProps;(v=typeof C=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==b||N!==f)&&rh(t,i,n,f),Jr=!1,N=t.memoizedState,i.state=N,ii(t,n,i,a);var D=t.memoizedState;u!==b||N!==D||mt.current||Jr?(typeof C=="function"&&(wc(t,r,C,n),D=t.memoizedState),(m=Jr||th(t,r,m,n,N,D,f)||!1)?(v||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,D,f),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,D,f)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=D),i.props=n,i.state=D,i.context=f,n=m):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),n=!1)}return Nc(e,t,r,n,l,a)}function Nc(e,t,r,n,a,l){_m(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&Zf(t,r,!1),Fr(e,t,l);n=t.stateNode,fv.current=t;var u=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=zs(t,e.child,null,l),t.child=zs(t,null,u,l)):ot(e,t,u,l),t.memoizedState=n.state,a&&Zf(t,r,!0),t.child}function Am(e){var t=e.stateNode;t.pendingContext?Kf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kf(e,t.context,!1),wd(e,t.containerInfo)}function fh(e,t,r,n,a){return Bs(),pd(a),t.flags|=256,ot(e,t,r,n),t.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Ec(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rm(e,t,r){var n=t.pendingProps,a=De.current,l=!1,i=(t.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),we(De,a&1),e===null)return vc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,l?(n=t.mode,l=t.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ai(i,n,0,null),e=Hn(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ec(r),t.memoizedState=Sc,e):Dd(t,i));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return hv(e,t,i,n,u,a,r);if(l){l=n.fallback,i=t.mode,a=e.child,u=a.sibling;var f={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=f,t.deletions=null):(n=dn(a,f),n.subtreeFlags=a.subtreeFlags&14680064),u!==null?l=dn(u,l):(l=Hn(l,i,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,i=e.child.memoizedState,i=i===null?Ec(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=Sc,n}return l=e.child,e=l.sibling,n=dn(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Dd(e,t){return t=Ai({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ko(e,t,r,n){return n!==null&&pd(n),zs(t,e.child,null,r),e=Dd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hv(e,t,r,n,a,l,i){if(r)return t.flags&256?(t.flags&=-257,n=Ru(Error(M(422))),ko(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Ai({mode:"visible",children:n.children},a,0,null),l=Hn(l,a,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&zs(t,e.child,null,i),t.child.memoizedState=Ec(i),t.memoizedState=Sc,l);if(!(t.mode&1))return ko(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var u=n.dgst;return n=u,l=Error(M(419)),n=Ru(l,n,void 0),ko(e,t,i,n)}if(u=(i&e.childLanes)!==0,pt||u){if(n=Ge,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Tr(e,a),Kt(n,e,a,-1))}return Id(),n=Ru(Error(M(421))),ko(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Ev.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Nt=ln(a.nextSibling),St=t,Ce=!0,qt=null,e!==null&&(Pt[It++]=Ar,Pt[It++]=Rr,Pt[It++]=Qn,Ar=e.id,Rr=e.overflow,Qn=t),t=Dd(t,n.children),t.flags|=4096,t)}function hh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yc(e.return,t,r)}function Lu(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Lm(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(ot(e,t,n.children,r),n=De.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hh(e,r,t);else if(e.tag===19)hh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(we(De,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&ui(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Lu(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ui(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Lu(t,!0,r,null,l);break;case"together":Lu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,r=dn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=dn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pv(e,t,r){switch(t.tag){case 3:Am(t),Bs();break;case 5:am(t);break;case 1:gt(t.type)&&ni(t);break;case 4:wd(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;we(li,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(we(De,De.current&1),t.flags|=128,null):r&t.child.childLanes?Rm(e,t,r):(we(De,De.current&1),e=Fr(e,t,r),e!==null?e.sibling:null);we(De,De.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Lm(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),we(De,De.current),n)break;return null;case 22:case 23:return t.lanes=0,Dm(e,t,r)}return Fr(e,t,r)}var Pm,Cc,Im,Tm;Pm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Cc=function(){};Im=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Vn(cr.current);var l=null;switch(r){case"input":a=Ku(e,a),n=Ku(e,n),l=[];break;case"select":a=Ae({},a,{value:void 0}),n=Ae({},n,{value:void 0}),l=[];break;case"textarea":a=Yu(e,a),n=Yu(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ti)}ec(r,n);var i;r=null;for(m in a)if(!n.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var u=a[m];for(i in u)u.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(sl.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in n){var f=n[m];if(u=a!=null?a[m]:void 0,n.hasOwnProperty(m)&&f!==u&&(f!=null||u!=null))if(m==="style")if(u){for(i in u)!u.hasOwnProperty(i)||f&&f.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in f)f.hasOwnProperty(i)&&u[i]!==f[i]&&(r||(r={}),r[i]=f[i])}else r||(l||(l=[]),l.push(m,r)),r=f;else m==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(l=l||[]).push(m,f)):m==="children"?typeof f!="string"&&typeof f!="number"||(l=l||[]).push(m,""+f):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(sl.hasOwnProperty(m)?(f!=null&&m==="onScroll"&&je("scroll",e),l||u===f||(l=[])):(l=l||[]).push(m,f))}r&&(l=l||[]).push("style",r);var m=l;(t.updateQueue=m)&&(t.flags|=4)}};Tm=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ua(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function mv(e,t,r){var n=t.pendingProps;switch(hd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return gt(t.type)&&ri(),et(t),null;case 3:return n=t.stateNode,Vs(),Ne(mt),Ne(rt),kd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Tc(qt),qt=null))),Cc(e,t),et(t),null;case 5:bd(t);var a=Vn(gl.current);if(r=t.type,e!==null&&t.stateNode!=null)Im(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(M(166));return et(t),null}if(e=Vn(cr.current),wo(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[ir]=t,n[pl]=l,e=(t.mode&1)!==0,r){case"dialog":je("cancel",n),je("close",n);break;case"iframe":case"object":case"embed":je("load",n);break;case"video":case"audio":for(a=0;a<Qa.length;a++)je(Qa[a],n);break;case"source":je("error",n);break;case"img":case"image":case"link":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"input":kf(n,l),je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},je("invalid",n);break;case"textarea":Nf(n,l),je("invalid",n)}ec(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="children"?typeof u=="string"?n.textContent!==u&&(l.suppressHydrationWarning!==!0&&yo(n.textContent,u,e),a=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(l.suppressHydrationWarning!==!0&&yo(n.textContent,u,e),a=["children",""+u]):sl.hasOwnProperty(i)&&u!=null&&i==="onScroll"&&je("scroll",n)}switch(r){case"input":co(n),jf(n,l,!0);break;case"textarea":co(n),Sf(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ti)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ip(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[ir]=t,e[pl]=n,Pm(e,t,!1,!1),t.stateNode=e;e:{switch(i=tc(r,n),r){case"dialog":je("cancel",e),je("close",e),a=n;break;case"iframe":case"object":case"embed":je("load",e),a=n;break;case"video":case"audio":for(a=0;a<Qa.length;a++)je(Qa[a],e);a=n;break;case"source":je("error",e),a=n;break;case"img":case"image":case"link":je("error",e),je("load",e),a=n;break;case"details":je("toggle",e),a=n;break;case"input":kf(e,n),a=Ku(e,n),je("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ae({},n,{value:void 0}),je("invalid",e);break;case"textarea":Nf(e,n),a=Yu(e,n),je("invalid",e);break;default:a=n}ec(r,a),u=a;for(l in u)if(u.hasOwnProperty(l)){var f=u[l];l==="style"?dp(e,f):l==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&up(e,f)):l==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&al(e,f):typeof f=="number"&&al(e,""+f):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(sl.hasOwnProperty(l)?f!=null&&l==="onScroll"&&je("scroll",e):f!=null&&Yc(e,l,f,i))}switch(r){case"input":co(e),jf(e,n,!1);break;case"textarea":co(e),Sf(e);break;case"option":n.value!=null&&e.setAttribute("value",""+pn(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Ls(e,!!n.multiple,l,!1):n.defaultValue!=null&&Ls(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ti)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)Tm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(M(166));if(r=Vn(gl.current),Vn(cr.current),wo(t)){if(n=t.stateNode,r=t.memoizedProps,n[ir]=t,(l=n.nodeValue!==r)&&(e=St,e!==null))switch(e.tag){case 3:yo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ir]=t,t.stateNode=n}return et(t),null;case 13:if(Ne(De),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&Nt!==null&&t.mode&1&&!(t.flags&128))Yp(),Bs(),t.flags|=98560,l=!1;else if(l=wo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(M(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(M(317));l[ir]=t}else Bs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),l=!1}else qt!==null&&(Tc(qt),qt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?We===0&&(We=3):Id())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return Vs(),Cc(e,t),e===null&&fl(t.stateNode.containerInfo),et(t),null;case 10:return xd(t.type._context),et(t),null;case 17:return gt(t.type)&&ri(),et(t),null;case 19:if(Ne(De),l=t.memoizedState,l===null)return et(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)Ua(l,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ui(e),i!==null){for(t.flags|=128,Ua(l,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return we(De,De.current&1|2),t.child}e=e.sibling}l.tail!==null&&Fe()>Hs&&(t.flags|=128,n=!0,Ua(l,!1),t.lanes=4194304)}else{if(!n)if(e=ui(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ua(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Ce)return et(t),null}else 2*Fe()-l.renderingStartTime>Hs&&r!==1073741824&&(t.flags|=128,n=!0,Ua(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Fe(),t.sibling=null,r=De.current,we(De,n?r&1|2:r&1),t):(et(t),null);case 22:case 23:return Pd(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?kt&1073741824&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function gv(e,t){switch(hd(t),t.tag){case 1:return gt(t.type)&&ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vs(),Ne(mt),Ne(rt),kd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bd(t),null;case 13:if(Ne(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Bs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(De),null;case 4:return Vs(),null;case 10:return xd(t.type._context),null;case 22:case 23:return Pd(),null;case 24:return null;default:return null}}var jo=!1,tt=!1,xv=typeof WeakSet=="function"?WeakSet:Set,Z=null;function As(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ie(e,t,n)}else r.current=null}function Dc(e,t,r){try{r()}catch(n){Ie(e,t,n)}}var ph=!1;function vv(e,t){if(dc=Yo,e=Mp(),dd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,u=-1,f=-1,m=0,v=0,b=e,N=null;t:for(;;){for(var C;b!==r||a!==0&&b.nodeType!==3||(u=i+a),b!==l||n!==0&&b.nodeType!==3||(f=i+n),b.nodeType===3&&(i+=b.nodeValue.length),(C=b.firstChild)!==null;)N=b,b=C;for(;;){if(b===e)break t;if(N===r&&++m===a&&(u=i),N===l&&++v===n&&(f=i),(C=b.nextSibling)!==null)break;b=N,N=b.parentNode}b=C}r=u===-1||f===-1?null:{start:u,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(fc={focusedElem:e,selectionRange:r},Yo=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var A=D.memoizedProps,I=D.memoizedState,k=t.stateNode,x=k.getSnapshotBeforeUpdate(t.elementType===t.type?A:Vt(t.type,A),I);k.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(E){Ie(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return D=ph,ph=!1,D}function tl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Dc(t,r,l)}a=a.next}while(a!==n)}}function Di(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function _c(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Fm(e){var t=e.alternate;t!==null&&(e.alternate=null,Fm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ir],delete t[pl],delete t[mc],delete t[ev],delete t[tv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Om(e){return e.tag===5||e.tag===3||e.tag===4}function mh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ac(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ti));else if(n!==4&&(e=e.child,e!==null))for(Ac(e,t,r),e=e.sibling;e!==null;)Ac(e,t,r),e=e.sibling}function Rc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Rc(e,t,r),e=e.sibling;e!==null;)Rc(e,t,r),e=e.sibling}var Ke=null,Wt=!1;function Kr(e,t,r){for(r=r.child;r!==null;)Um(e,t,r),r=r.sibling}function Um(e,t,r){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(wi,r)}catch{}switch(r.tag){case 5:tt||As(r,t);case 6:var n=Ke,a=Wt;Ke=null,Kr(e,t,r),Ke=n,Wt=a,Ke!==null&&(Wt?(e=Ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ke.removeChild(r.stateNode));break;case 18:Ke!==null&&(Wt?(e=Ke,r=r.stateNode,e.nodeType===8?Su(e.parentNode,r):e.nodeType===1&&Su(e,r),ul(e)):Su(Ke,r.stateNode));break;case 4:n=Ke,a=Wt,Ke=r.stateNode.containerInfo,Wt=!0,Kr(e,t,r),Ke=n,Wt=a;break;case 0:case 11:case 14:case 15:if(!tt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Dc(r,t,i),a=a.next}while(a!==n)}Kr(e,t,r);break;case 1:if(!tt&&(As(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){Ie(r,t,u)}Kr(e,t,r);break;case 21:Kr(e,t,r);break;case 22:r.mode&1?(tt=(n=tt)||r.memoizedState!==null,Kr(e,t,r),tt=n):Kr(e,t,r);break;default:Kr(e,t,r)}}function gh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xv),t.forEach(function(n){var a=Cv.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Bt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=t,u=i;e:for(;u!==null;){switch(u.tag){case 5:Ke=u.stateNode,Wt=!1;break e;case 3:Ke=u.stateNode.containerInfo,Wt=!0;break e;case 4:Ke=u.stateNode.containerInfo,Wt=!0;break e}u=u.return}if(Ke===null)throw Error(M(160));Um(l,i,a),Ke=null,Wt=!1;var f=a.alternate;f!==null&&(f.return=null),a.return=null}catch(m){Ie(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mm(t,e),t=t.sibling}function Mm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),lr(e),n&4){try{tl(3,e,e.return),Di(3,e)}catch(A){Ie(e,e.return,A)}try{tl(5,e,e.return)}catch(A){Ie(e,e.return,A)}}break;case 1:Bt(t,e),lr(e),n&512&&r!==null&&As(r,r.return);break;case 5:if(Bt(t,e),lr(e),n&512&&r!==null&&As(r,r.return),e.flags&32){var a=e.stateNode;try{al(a,"")}catch(A){Ie(e,e.return,A)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&l.type==="radio"&&l.name!=null&&lp(a,l),tc(u,i);var m=tc(u,l);for(i=0;i<f.length;i+=2){var v=f[i],b=f[i+1];v==="style"?dp(a,b):v==="dangerouslySetInnerHTML"?up(a,b):v==="children"?al(a,b):Yc(a,v,b,m)}switch(u){case"input":Zu(a,l);break;case"textarea":op(a,l);break;case"select":var N=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var C=l.value;C!=null?Ls(a,!!l.multiple,C,!1):N!==!!l.multiple&&(l.defaultValue!=null?Ls(a,!!l.multiple,l.defaultValue,!0):Ls(a,!!l.multiple,l.multiple?[]:"",!1))}a[pl]=l}catch(A){Ie(e,e.return,A)}}break;case 6:if(Bt(t,e),lr(e),n&4){if(e.stateNode===null)throw Error(M(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(A){Ie(e,e.return,A)}}break;case 3:if(Bt(t,e),lr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ul(t.containerInfo)}catch(A){Ie(e,e.return,A)}break;case 4:Bt(t,e),lr(e);break;case 13:Bt(t,e),lr(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Rd=Fe())),n&4&&gh(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(tt=(m=tt)||v,Bt(t,e),tt=m):Bt(t,e),lr(e),n&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!v&&e.mode&1)for(Z=e,v=e.child;v!==null;){for(b=Z=v;Z!==null;){switch(N=Z,C=N.child,N.tag){case 0:case 11:case 14:case 15:tl(4,N,N.return);break;case 1:As(N,N.return);var D=N.stateNode;if(typeof D.componentWillUnmount=="function"){n=N,r=N.return;try{t=n,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(A){Ie(n,r,A)}}break;case 5:As(N,N.return);break;case 22:if(N.memoizedState!==null){vh(b);continue}}C!==null?(C.return=N,Z=C):vh(b)}v=v.sibling}e:for(v=null,b=e;;){if(b.tag===5){if(v===null){v=b;try{a=b.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(u=b.stateNode,f=b.memoizedProps.style,i=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=cp("display",i))}catch(A){Ie(e,e.return,A)}}}else if(b.tag===6){if(v===null)try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(A){Ie(e,e.return,A)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;v===b&&(v=null),b=b.return}v===b&&(v=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Bt(t,e),lr(e),n&4&&gh(e);break;case 21:break;default:Bt(t,e),lr(e)}}function lr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Om(r)){var n=r;break e}r=r.return}throw Error(M(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(al(a,""),n.flags&=-33);var l=mh(e);Rc(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,u=mh(e);Ac(e,u,i);break;default:throw Error(M(161))}}catch(f){Ie(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yv(e,t,r){Z=e,$m(e)}function $m(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var a=Z,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||jo;if(!i){var u=a.alternate,f=u!==null&&u.memoizedState!==null||tt;u=jo;var m=tt;if(jo=i,(tt=f)&&!m)for(Z=a;Z!==null;)i=Z,f=i.child,i.tag===22&&i.memoizedState!==null?yh(a):f!==null?(f.return=i,Z=f):yh(a);for(;l!==null;)Z=l,$m(l),l=l.sibling;Z=a,jo=u,tt=m}xh(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,Z=l):xh(e)}}function xh(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tt||Di(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!tt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Vt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&eh(t,l,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}eh(t,i,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var b=v.dehydrated;b!==null&&ul(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}tt||t.flags&512&&_c(t)}catch(N){Ie(t,t.return,N)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function vh(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function yh(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Di(4,t)}catch(f){Ie(t,r,f)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(f){Ie(t,a,f)}}var l=t.return;try{_c(t)}catch(f){Ie(t,l,f)}break;case 5:var i=t.return;try{_c(t)}catch(f){Ie(t,i,f)}}}catch(f){Ie(t,t.return,f)}if(t===e){Z=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Z=u;break}Z=t.return}}var wv=Math.ceil,fi=Or.ReactCurrentDispatcher,_d=Or.ReactCurrentOwner,Ot=Or.ReactCurrentBatchConfig,pe=0,Ge=null,$e=null,Ze=0,kt=0,Rs=xn(0),We=0,wl=null,Kn=0,_i=0,Ad=0,rl=null,ht=null,Rd=0,Hs=1/0,Er=null,hi=!1,Lc=null,un=null,No=!1,tn=null,pi=0,nl=0,Pc=null,$o=-1,Bo=0;function it(){return pe&6?Fe():$o!==-1?$o:$o=Fe()}function cn(e){return e.mode&1?pe&2&&Ze!==0?Ze&-Ze:nv.transition!==null?(Bo===0&&(Bo=jp()),Bo):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Ap(e.type)),e):1}function Kt(e,t,r,n){if(50<nl)throw nl=0,Pc=null,Error(M(185));Nl(e,r,n),(!(pe&2)||e!==Ge)&&(e===Ge&&(!(pe&2)&&(_i|=r),We===4&&Xr(e,Ze)),xt(e,n),r===1&&pe===0&&!(t.mode&1)&&(Hs=Fe()+500,Si&&vn()))}function xt(e,t){var r=e.callbackNode;nx(e,t);var n=Jo(e,e===Ge?Ze:0);if(n===0)r!==null&&Df(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Df(r),t===1)e.tag===0?rv(wh.bind(null,e)):Kp(wh.bind(null,e)),Yx(function(){!(pe&6)&&vn()}),r=null;else{switch(Np(n)){case 1:r=nd;break;case 4:r=bp;break;case 16:r=Zo;break;case 536870912:r=kp;break;default:r=Zo}r=Gm(r,Bm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Bm(e,t){if($o=-1,Bo=0,pe&6)throw Error(M(327));var r=e.callbackNode;if(Os()&&e.callbackNode!==r)return null;var n=Jo(e,e===Ge?Ze:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=mi(e,n);else{t=n;var a=pe;pe|=2;var l=Vm();(Ge!==e||Ze!==t)&&(Er=null,Hs=Fe()+500,Wn(e,t));do try{jv();break}catch(u){zm(e,u)}while(!0);gd(),fi.current=l,pe=a,$e!==null?t=0:(Ge=null,Ze=0,t=We)}if(t!==0){if(t===2&&(a=lc(e),a!==0&&(n=a,t=Ic(e,a))),t===1)throw r=wl,Wn(e,0),Xr(e,n),xt(e,Fe()),r;if(t===6)Xr(e,n);else{if(a=e.current.alternate,!(n&30)&&!bv(a)&&(t=mi(e,n),t===2&&(l=lc(e),l!==0&&(n=l,t=Ic(e,l))),t===1))throw r=wl,Wn(e,0),Xr(e,n),xt(e,Fe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(M(345));case 2:Mn(e,ht,Er);break;case 3:if(Xr(e,n),(n&130023424)===n&&(t=Rd+500-Fe(),10<t)){if(Jo(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){it(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pc(Mn.bind(null,e,ht,Er),t);break}Mn(e,ht,Er);break;case 4:if(Xr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Gt(n);l=1<<i,i=t[i],i>a&&(a=i),n&=~l}if(n=a,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wv(n/1960))-n,10<n){e.timeoutHandle=pc(Mn.bind(null,e,ht,Er),n);break}Mn(e,ht,Er);break;case 5:Mn(e,ht,Er);break;default:throw Error(M(329))}}}return xt(e,Fe()),e.callbackNode===r?Bm.bind(null,e):null}function Ic(e,t){var r=rl;return e.current.memoizedState.isDehydrated&&(Wn(e,t).flags|=256),e=mi(e,t),e!==2&&(t=ht,ht=r,t!==null&&Tc(t)),e}function Tc(e){ht===null?ht=e:ht.push.apply(ht,e)}function bv(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!Zt(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xr(e,t){for(t&=~Ad,t&=~_i,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Gt(t),n=1<<r;e[r]=-1,t&=~n}}function wh(e){if(pe&6)throw Error(M(327));Os();var t=Jo(e,0);if(!(t&1))return xt(e,Fe()),null;var r=mi(e,t);if(e.tag!==0&&r===2){var n=lc(e);n!==0&&(t=n,r=Ic(e,n))}if(r===1)throw r=wl,Wn(e,0),Xr(e,t),xt(e,Fe()),r;if(r===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mn(e,ht,Er),xt(e,Fe()),null}function Ld(e,t){var r=pe;pe|=1;try{return e(t)}finally{pe=r,pe===0&&(Hs=Fe()+500,Si&&vn())}}function Zn(e){tn!==null&&tn.tag===0&&!(pe&6)&&Os();var t=pe;pe|=1;var r=Ot.transition,n=ye;try{if(Ot.transition=null,ye=1,e)return e()}finally{ye=n,Ot.transition=r,pe=t,!(pe&6)&&vn()}}function Pd(){kt=Rs.current,Ne(Rs)}function Wn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Jx(r)),$e!==null)for(r=$e.return;r!==null;){var n=r;switch(hd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ri();break;case 3:Vs(),Ne(mt),Ne(rt),kd();break;case 5:bd(n);break;case 4:Vs();break;case 13:Ne(De);break;case 19:Ne(De);break;case 10:xd(n.type._context);break;case 22:case 23:Pd()}r=r.return}if(Ge=e,$e=e=dn(e.current,null),Ze=kt=t,We=0,wl=null,Ad=_i=Kn=0,ht=rl=null,zn!==null){for(t=0;t<zn.length;t++)if(r=zn[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}zn=null}return e}function zm(e,t){do{var r=$e;try{if(gd(),Oo.current=di,ci){for(var n=_e.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ci=!1}if(Gn=0,Qe=Ve=_e=null,el=!1,xl=0,_d.current=null,r===null||r.return===null){We=1,wl=t,$e=null;break}e:{var l=e,i=r.return,u=r,f=t;if(t=Ze,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=f,v=u,b=v.tag;if(!(v.mode&1)&&(b===0||b===11||b===15)){var N=v.alternate;N?(v.updateQueue=N.updateQueue,v.memoizedState=N.memoizedState,v.lanes=N.lanes):(v.updateQueue=null,v.memoizedState=null)}var C=oh(i);if(C!==null){C.flags&=-257,ih(C,i,u,l,t),C.mode&1&&lh(l,m,t),t=C,f=m;var D=t.updateQueue;if(D===null){var A=new Set;A.add(f),t.updateQueue=A}else D.add(f);break e}else{if(!(t&1)){lh(l,m,t),Id();break e}f=Error(M(426))}}else if(Ce&&u.mode&1){var I=oh(i);if(I!==null){!(I.flags&65536)&&(I.flags|=256),ih(I,i,u,l,t),pd(Ws(f,u));break e}}l=f=Ws(f,u),We!==4&&(We=2),rl===null?rl=[l]:rl.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var k=Sm(l,f,t);Xf(l,k);break e;case 1:u=f;var x=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(un===null||!un.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var E=Em(l,u,t);Xf(l,E);break e}}l=l.return}while(l!==null)}Hm(r)}catch(_){t=_,$e===r&&r!==null&&($e=r=r.return);continue}break}while(!0)}function Vm(){var e=fi.current;return fi.current=di,e===null?di:e}function Id(){(We===0||We===3||We===2)&&(We=4),Ge===null||!(Kn&268435455)&&!(_i&268435455)||Xr(Ge,Ze)}function mi(e,t){var r=pe;pe|=2;var n=Vm();(Ge!==e||Ze!==t)&&(Er=null,Wn(e,t));do try{kv();break}catch(a){zm(e,a)}while(!0);if(gd(),pe=r,fi.current=n,$e!==null)throw Error(M(261));return Ge=null,Ze=0,We}function kv(){for(;$e!==null;)Wm($e)}function jv(){for(;$e!==null&&!Gg();)Wm($e)}function Wm(e){var t=Qm(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?Hm(e):$e=t,_d.current=null}function Hm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gv(r,t),r!==null){r.flags&=32767,$e=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,$e=null;return}}else if(r=mv(r,t,kt),r!==null){$e=r;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);We===0&&(We=5)}function Mn(e,t,r){var n=ye,a=Ot.transition;try{Ot.transition=null,ye=1,Nv(e,t,r,n)}finally{Ot.transition=a,ye=n}return null}function Nv(e,t,r,n){do Os();while(tn!==null);if(pe&6)throw Error(M(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(sx(e,l),e===Ge&&($e=Ge=null,Ze=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||No||(No=!0,Gm(Zo,function(){return Os(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Ot.transition,Ot.transition=null;var i=ye;ye=1;var u=pe;pe|=4,_d.current=null,vv(e,r),Mm(r,e),Wx(fc),Yo=!!dc,fc=dc=null,e.current=r,yv(r),Kg(),pe=u,ye=i,Ot.transition=l}else e.current=r;if(No&&(No=!1,tn=e,pi=a),l=e.pendingLanes,l===0&&(un=null),Yg(r.stateNode),xt(e,Fe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(hi)throw hi=!1,e=Lc,Lc=null,e;return pi&1&&e.tag!==0&&Os(),l=e.pendingLanes,l&1?e===Pc?nl++:(nl=0,Pc=e):nl=0,vn(),null}function Os(){if(tn!==null){var e=Np(pi),t=Ot.transition,r=ye;try{if(Ot.transition=null,ye=16>e?16:e,tn===null)var n=!1;else{if(e=tn,tn=null,pi=0,pe&6)throw Error(M(331));var a=pe;for(pe|=4,Z=e.current;Z!==null;){var l=Z,i=l.child;if(Z.flags&16){var u=l.deletions;if(u!==null){for(var f=0;f<u.length;f++){var m=u[f];for(Z=m;Z!==null;){var v=Z;switch(v.tag){case 0:case 11:case 15:tl(8,v,l)}var b=v.child;if(b!==null)b.return=v,Z=b;else for(;Z!==null;){v=Z;var N=v.sibling,C=v.return;if(Fm(v),v===m){Z=null;break}if(N!==null){N.return=C,Z=N;break}Z=C}}}var D=l.alternate;if(D!==null){var A=D.child;if(A!==null){D.child=null;do{var I=A.sibling;A.sibling=null,A=I}while(A!==null)}}Z=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,Z=i;else e:for(;Z!==null;){if(l=Z,l.flags&2048)switch(l.tag){case 0:case 11:case 15:tl(9,l,l.return)}var k=l.sibling;if(k!==null){k.return=l.return,Z=k;break e}Z=l.return}}var x=e.current;for(Z=x;Z!==null;){i=Z;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,Z=y;else e:for(i=x;Z!==null;){if(u=Z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Di(9,u)}}catch(_){Ie(u,u.return,_)}if(u===i){Z=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,Z=E;break e}Z=u.return}}if(pe=a,vn(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(wi,e)}catch{}n=!0}return n}finally{ye=r,Ot.transition=t}}return!1}function bh(e,t,r){t=Ws(r,t),t=Sm(e,t,1),e=on(e,t,1),t=it(),e!==null&&(Nl(e,1,t),xt(e,t))}function Ie(e,t,r){if(e.tag===3)bh(e,e,r);else for(;t!==null;){if(t.tag===3){bh(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(un===null||!un.has(n))){e=Ws(r,e),e=Em(t,e,1),t=on(t,e,1),e=it(),t!==null&&(Nl(t,1,e),xt(t,e));break}}t=t.return}}function Sv(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,Ge===e&&(Ze&r)===r&&(We===4||We===3&&(Ze&130023424)===Ze&&500>Fe()-Rd?Wn(e,0):Ad|=r),xt(e,t)}function qm(e,t){t===0&&(e.mode&1?(t=po,po<<=1,!(po&130023424)&&(po=4194304)):t=1);var r=it();e=Tr(e,t),e!==null&&(Nl(e,t,r),xt(e,r))}function Ev(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qm(e,r)}function Cv(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(M(314))}n!==null&&n.delete(t),qm(e,r)}var Qm;Qm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)pt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return pt=!1,pv(e,t,r);pt=!!(e.flags&131072)}else pt=!1,Ce&&t.flags&1048576&&Zp(t,ai,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Mo(e,t),e=t.pendingProps;var a=$s(t,rt.current);Fs(t,r),a=Nd(null,t,n,e,a,r);var l=Sd();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(n)?(l=!0,ni(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,yd(t),a.updater=Ei,t.stateNode=a,a._reactInternals=t,bc(t,n,e,r),t=Nc(null,t,n,!0,l,r)):(t.tag=0,Ce&&l&&fd(t),ot(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Mo(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=_v(n),e=Vt(n,e),a){case 0:t=jc(null,t,n,e,r);break e;case 1:t=dh(null,t,n,e,r);break e;case 11:t=uh(null,t,n,e,r);break e;case 14:t=ch(null,t,n,Vt(n.type,e),r);break e}throw Error(M(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vt(n,a),jc(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vt(n,a),dh(e,t,n,a,r);case 3:e:{if(Am(t),e===null)throw Error(M(387));n=t.pendingProps,l=t.memoizedState,a=l.element,em(e,t),ii(t,n,null,r);var i=t.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Ws(Error(M(423)),t),t=fh(e,t,n,r,a);break e}else if(n!==a){a=Ws(Error(M(424)),t),t=fh(e,t,n,r,a);break e}else for(Nt=ln(t.stateNode.containerInfo.firstChild),St=t,Ce=!0,qt=null,r=sm(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bs(),n===a){t=Fr(e,t,r);break e}ot(e,t,n,r)}t=t.child}return t;case 5:return am(t),e===null&&vc(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,hc(n,a)?i=null:l!==null&&hc(n,l)&&(t.flags|=32),_m(e,t),ot(e,t,i,r),t.child;case 6:return e===null&&vc(t),null;case 13:return Rm(e,t,r);case 4:return wd(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=zs(t,null,n,r):ot(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vt(n,a),uh(e,t,n,a,r);case 7:return ot(e,t,t.pendingProps,r),t.child;case 8:return ot(e,t,t.pendingProps.children,r),t.child;case 12:return ot(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,we(li,n._currentValue),n._currentValue=i,l!==null)if(Zt(l.value,i)){if(l.children===a.children&&!mt.current){t=Fr(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var u=l.dependencies;if(u!==null){i=l.child;for(var f=u.firstContext;f!==null;){if(f.context===n){if(l.tag===1){f=Lr(-1,r&-r),f.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?f.next=f:(f.next=v.next,v.next=f),m.pending=f}}l.lanes|=r,f=l.alternate,f!==null&&(f.lanes|=r),yc(l.return,r,t),u.lanes|=r;break}f=f.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(M(341));i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),yc(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}ot(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Fs(t,r),a=Ut(a),n=n(a),t.flags|=1,ot(e,t,n,r),t.child;case 14:return n=t.type,a=Vt(n,t.pendingProps),a=Vt(n.type,a),ch(e,t,n,a,r);case 15:return Cm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vt(n,a),Mo(e,t),t.tag=1,gt(n)?(e=!0,ni(t)):e=!1,Fs(t,r),rm(t,n,a),bc(t,n,a,r),Nc(null,t,n,!0,e,r);case 19:return Lm(e,t,r);case 22:return Dm(e,t,r)}throw Error(M(156,t.tag))};function Gm(e,t){return wp(e,t)}function Dv(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(e,t,r,n){return new Dv(e,t,r,n)}function Td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _v(e){if(typeof e=="function")return Td(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ed)return 11;if(e===td)return 14}return 2}function dn(e,t){var r=e.alternate;return r===null?(r=Ft(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zo(e,t,r,n,a,l){var i=2;if(n=e,typeof e=="function")Td(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case bs:return Hn(r.children,a,l,t);case Xc:i=8,a|=8;break;case Hu:return e=Ft(12,r,t,a|2),e.elementType=Hu,e.lanes=l,e;case qu:return e=Ft(13,r,t,a),e.elementType=qu,e.lanes=l,e;case Qu:return e=Ft(19,r,t,a),e.elementType=Qu,e.lanes=l,e;case np:return Ai(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tp:i=10;break e;case rp:i=9;break e;case ed:i=11;break e;case td:i=14;break e;case Zr:i=16,n=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=Ft(i,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function Hn(e,t,r,n){return e=Ft(7,e,n,t),e.lanes=r,e}function Ai(e,t,r,n){return e=Ft(22,e,n,t),e.elementType=np,e.lanes=r,e.stateNode={isHidden:!1},e}function Pu(e,t,r){return e=Ft(6,e,null,t),e.lanes=r,e}function Iu(e,t,r){return t=Ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Av(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fd(e,t,r,n,a,l,i,u,f){return e=new Av(e,t,r,u,f),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ft(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(l),e}function Rv(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Km(e){if(!e)return mn;e=e._reactInternals;e:{if(Yn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var r=e.type;if(gt(r))return Gp(e,r,t)}return t}function Zm(e,t,r,n,a,l,i,u,f){return e=Fd(r,n,!0,e,a,l,i,u,f),e.context=Km(null),r=e.current,n=it(),a=cn(r),l=Lr(n,a),l.callback=t??null,on(r,l,a),e.current.lanes=a,Nl(e,a,n),xt(e,n),e}function Ri(e,t,r,n){var a=t.current,l=it(),i=cn(a);return r=Km(r),t.context===null?t.context=r:t.pendingContext=r,t=Lr(l,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=on(a,t,i),e!==null&&(Kt(e,a,i,l),Fo(e,a,i)),i}function gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Od(e,t){kh(e,t),(e=e.alternate)&&kh(e,t)}function Lv(){return null}var Jm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ud(e){this._internalRoot=e}Li.prototype.render=Ud.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));Ri(e,t,null,null)};Li.prototype.unmount=Ud.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zn(function(){Ri(null,e,null,null)}),t[Ir]=null}};function Li(e){this._internalRoot=e}Li.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yr.length&&t!==0&&t<Yr[r].priority;r++);Yr.splice(r,0,e),r===0&&_p(e)}};function Md(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jh(){}function Pv(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var m=gi(i);l.call(m)}}var i=Zm(t,n,e,0,null,!1,!1,"",jh);return e._reactRootContainer=i,e[Ir]=i.current,fl(e.nodeType===8?e.parentNode:e),Zn(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var u=n;n=function(){var m=gi(f);u.call(m)}}var f=Fd(e,0,!1,null,null,!1,!1,"",jh);return e._reactRootContainer=f,e[Ir]=f.current,fl(e.nodeType===8?e.parentNode:e),Zn(function(){Ri(t,f,r,n)}),f}function Ii(e,t,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var u=a;a=function(){var f=gi(i);u.call(f)}}Ri(t,i,e,a)}else i=Pv(r,t,e,a,n);return gi(i)}Sp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=qa(t.pendingLanes);r!==0&&(sd(t,r|1),xt(t,Fe()),!(pe&6)&&(Hs=Fe()+500,vn()))}break;case 13:Zn(function(){var n=Tr(e,1);if(n!==null){var a=it();Kt(n,e,1,a)}}),Od(e,1)}};ad=function(e){if(e.tag===13){var t=Tr(e,134217728);if(t!==null){var r=it();Kt(t,e,134217728,r)}Od(e,134217728)}};Ep=function(e){if(e.tag===13){var t=cn(e),r=Tr(e,t);if(r!==null){var n=it();Kt(r,e,t,n)}Od(e,t)}};Cp=function(){return ye};Dp=function(e,t){var r=ye;try{return ye=e,t()}finally{ye=r}};nc=function(e,t,r){switch(t){case"input":if(Zu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ni(n);if(!a)throw Error(M(90));ap(n),Zu(n,a)}}}break;case"textarea":op(e,r);break;case"select":t=r.value,t!=null&&Ls(e,!!r.multiple,t,!1)}};pp=Ld;mp=Zn;var Iv={usingClientEntryPoint:!1,Events:[El,Ss,Ni,fp,hp,Ld]},Ma={findFiberByHostInstance:Bn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Tv={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Or.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vp(e),e===null?null:e.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||Lv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{wi=So.inject(Tv),ur=So}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iv;Ct.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Md(t))throw Error(M(200));return Rv(e,t,null,r)};Ct.createRoot=function(e,t){if(!Md(e))throw Error(M(299));var r=!1,n="",a=Jm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Fd(e,1,!1,null,null,r,!1,n,a),e[Ir]=t.current,fl(e.nodeType===8?e.parentNode:e),new Ud(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=vp(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return Zn(e)};Ct.hydrate=function(e,t,r){if(!Pi(t))throw Error(M(200));return Ii(null,e,t,!0,r)};Ct.hydrateRoot=function(e,t,r){if(!Md(e))throw Error(M(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=Jm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Zm(t,null,e,1,r??null,a,!1,l,i),e[Ir]=t.current,fl(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Li(t)};Ct.render=function(e,t,r){if(!Pi(t))throw Error(M(200));return Ii(null,e,t,!1,r)};Ct.unmountComponentAtNode=function(e){if(!Pi(e))throw Error(M(40));return e._reactRootContainer?(Zn(function(){Ii(null,null,e,!1,function(){e._reactRootContainer=null,e[Ir]=null})}),!0):!1};Ct.unstable_batchedUpdates=Ld;Ct.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Pi(r))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return Ii(e,t,r,!1,n)};Ct.version="18.2.0-next-9e3b772b8-20220608";function Ym(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ym)}catch(e){console.error(e)}}Ym(),Zh.exports=Ct;var Fv=Zh.exports,Xm,Nh=Fv;Xm=Nh.createRoot,Nh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bl.apply(this,arguments)}var rn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(rn||(rn={}));const Sh="popstate";function Ov(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:i,hash:u}=n.location;return Fc("",{pathname:l,search:i,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:xi(a)}return Mv(t,r,null,e)}function Oe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function e0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Uv(){return Math.random().toString(36).substr(2,8)}function Eh(e,t){return{usr:e.state,key:e.key,idx:t}}function Fc(e,t,r,n){return r===void 0&&(r=null),bl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ks(t):t,{state:r,key:t&&t.key||n||Uv()})}function xi(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ks(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Mv(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,u=rn.Pop,f=null,m=v();m==null&&(m=0,i.replaceState(bl({},i.state,{idx:m}),""));function v(){return(i.state||{idx:null}).idx}function b(){u=rn.Pop;let I=v(),k=I==null?null:I-m;m=I,f&&f({action:u,location:A.location,delta:k})}function N(I,k){u=rn.Push;let x=Fc(A.location,I,k);m=v()+1;let y=Eh(x,m),E=A.createHref(x);try{i.pushState(y,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(E)}l&&f&&f({action:u,location:A.location,delta:1})}function C(I,k){u=rn.Replace;let x=Fc(A.location,I,k);m=v();let y=Eh(x,m),E=A.createHref(x);i.replaceState(y,"",E),l&&f&&f({action:u,location:A.location,delta:0})}function D(I){let k=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof I=="string"?I:xi(I);return x=x.replace(/ $/,"%20"),Oe(k,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,k)}let A={get action(){return u},get location(){return e(a,i)},listen(I){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Sh,b),f=I,()=>{a.removeEventListener(Sh,b),f=null}},createHref(I){return t(a,I)},createURL:D,encodeLocation(I){let k=D(I);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:N,replace:C,go(I){return i.go(I)}};return A}var Ch;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ch||(Ch={}));function $v(e,t,r){return r===void 0&&(r="/"),Bv(e,t,r)}function Bv(e,t,r,n){let a=typeof t=="string"?Ks(t):t,l=$d(a.pathname||"/",r);if(l==null)return null;let i=t0(e);zv(i);let u=null;for(let f=0;u==null&&f<i.length;++f){let m=ey(l);u=Jv(i[f],m)}return u}function t0(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,u)=>{let f={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};f.relativePath.startsWith("/")&&(Oe(f.relativePath.startsWith(n),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(n.length));let m=fn([n,f.relativePath]),v=r.concat(f);l.children&&l.children.length>0&&(Oe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),t0(l.children,t,v,m)),!(l.path==null&&!l.index)&&t.push({path:m,score:Kv(m,l.index),routesMeta:v})};return e.forEach((l,i)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))a(l,i);else for(let f of r0(l.path))a(l,i,f)}),t}function r0(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=r0(n.join("/")),u=[];return u.push(...i.map(f=>f===""?l:[l,f].join("/"))),a&&u.push(...i),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function zv(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Zv(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Vv=/^:[\w-]+$/,Wv=3,Hv=2,qv=1,Qv=10,Gv=-2,Dh=e=>e==="*";function Kv(e,t){let r=e.split("/"),n=r.length;return r.some(Dh)&&(n+=Gv),t&&(n+=Hv),r.filter(a=>!Dh(a)).reduce((a,l)=>a+(Vv.test(l)?Wv:l===""?qv:Qv),n)}function Zv(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Jv(e,t,r){let{routesMeta:n}=e,a={},l="/",i=[];for(let u=0;u<n.length;++u){let f=n[u],m=u===n.length-1,v=l==="/"?t:t.slice(l.length)||"/",b=Yv({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),N=f.route;if(!b)return null;Object.assign(a,b.params),i.push({params:a,pathname:fn([l,b.pathname]),pathnameBase:sy(fn([l,b.pathnameBase])),route:N}),b.pathnameBase!=="/"&&(l=fn([l,b.pathnameBase]))}return i}function Yv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Xv(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((m,v,b)=>{let{paramName:N,isOptional:C}=v;if(N==="*"){let A=u[b]||"";i=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const D=u[b];return C&&!D?m[N]=void 0:m[N]=(D||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:i,pattern:e}}function Xv(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),e0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,u,f)=>(n.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function ey(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return e0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function $d(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ty(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Ks(e):e;return{pathname:r?r.startsWith("/")?r:ry(r,t):t,search:ay(n),hash:ly(a)}}function ry(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Tu(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ny(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Bd(e,t){let r=ny(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zd(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Ks(e):(a=bl({},e),Oe(!a.pathname||!a.pathname.includes("?"),Tu("?","pathname","search",a)),Oe(!a.pathname||!a.pathname.includes("#"),Tu("#","pathname","hash",a)),Oe(!a.search||!a.search.includes("#"),Tu("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,u;if(i==null)u=r;else{let b=t.length-1;if(!n&&i.startsWith("..")){let N=i.split("/");for(;N[0]==="..";)N.shift(),b-=1;a.pathname=N.join("/")}u=b>=0?t[b]:"/"}let f=ty(a,u),m=i&&i!=="/"&&i.endsWith("/"),v=(l||i===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}const fn=e=>e.join("/").replace(/\/\/+/g,"/"),sy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ay=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ly=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function oy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const n0=["post","put","patch","delete"];new Set(n0);const iy=["get",...n0];new Set(iy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(this,arguments)}const Vd=c.createContext(null),uy=c.createContext(null),yn=c.createContext(null),Ti=c.createContext(null),hr=c.createContext({outlet:null,matches:[],isDataRoute:!1}),s0=c.createContext(null);function cy(e,t){let{relative:r}=t===void 0?{}:t;Zs()||Oe(!1);let{basename:n,navigator:a}=c.useContext(yn),{hash:l,pathname:i,search:u}=o0(e,{relative:r}),f=i;return n!=="/"&&(f=i==="/"?n:fn([n,i])),a.createHref({pathname:f,search:u,hash:l})}function Zs(){return c.useContext(Ti)!=null}function wn(){return Zs()||Oe(!1),c.useContext(Ti).location}function a0(e){c.useContext(yn).static||c.useLayoutEffect(e)}function pr(){let{isDataRoute:e}=c.useContext(hr);return e?Sy():dy()}function dy(){Zs()||Oe(!1);let e=c.useContext(Vd),{basename:t,future:r,navigator:n}=c.useContext(yn),{matches:a}=c.useContext(hr),{pathname:l}=wn(),i=JSON.stringify(Bd(a,r.v7_relativeSplatPath)),u=c.useRef(!1);return a0(()=>{u.current=!0}),c.useCallback(function(m,v){if(v===void 0&&(v={}),!u.current)return;if(typeof m=="number"){n.go(m);return}let b=zd(m,JSON.parse(i),l,v.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:fn([t,b.pathname])),(v.replace?n.replace:n.push)(b,v.state,v)},[t,n,i,l,e])}const fy=c.createContext(null);function hy(e){let t=c.useContext(hr).outlet;return t&&c.createElement(fy.Provider,{value:e},t)}function l0(){let{matches:e}=c.useContext(hr),t=e[e.length-1];return t?t.params:{}}function o0(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=c.useContext(yn),{matches:a}=c.useContext(hr),{pathname:l}=wn(),i=JSON.stringify(Bd(a,n.v7_relativeSplatPath));return c.useMemo(()=>zd(e,JSON.parse(i),l,r==="path"),[e,i,l,r])}function py(e,t){return my(e,t)}function my(e,t,r,n){Zs()||Oe(!1);let{navigator:a}=c.useContext(yn),{matches:l}=c.useContext(hr),i=l[l.length-1],u=i?i.params:{};i&&i.pathname;let f=i?i.pathnameBase:"/";i&&i.route;let m=wn(),v;if(t){var b;let I=typeof t=="string"?Ks(t):t;f==="/"||(b=I.pathname)!=null&&b.startsWith(f)||Oe(!1),v=I}else v=m;let N=v.pathname||"/",C=N;if(f!=="/"){let I=f.replace(/^\//,"").split("/");C="/"+N.replace(/^\//,"").split("/").slice(I.length).join("/")}let D=$v(e,{pathname:C}),A=wy(D&&D.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:fn([f,a.encodeLocation?a.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?f:fn([f,a.encodeLocation?a.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),l,r,n);return t&&A?c.createElement(Ti.Provider,{value:{location:kl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:rn.Pop}},A):A}function gy(){let e=Ny(),t=oy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),r?c.createElement("pre",{style:a},r):null,null)}const xy=c.createElement(gy,null);class vy extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?c.createElement(hr.Provider,{value:this.props.routeContext},c.createElement(s0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yy(e){let{routeContext:t,match:r,children:n}=e,a=c.useContext(Vd);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),c.createElement(hr.Provider,{value:t},n)}function wy(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,u=(a=r)==null?void 0:a.errors;if(u!=null){let v=i.findIndex(b=>b.route.id&&(u==null?void 0:u[b.route.id])!==void 0);v>=0||Oe(!1),i=i.slice(0,Math.min(i.length,v+1))}let f=!1,m=-1;if(r&&n&&n.v7_partialHydration)for(let v=0;v<i.length;v++){let b=i[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(m=v),b.route.id){let{loaderData:N,errors:C}=r,D=b.route.loader&&N[b.route.id]===void 0&&(!C||C[b.route.id]===void 0);if(b.route.lazy||D){f=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((v,b,N)=>{let C,D=!1,A=null,I=null;r&&(C=u&&b.route.id?u[b.route.id]:void 0,A=b.route.errorElement||xy,f&&(m<0&&N===0?(Ey("route-fallback"),D=!0,I=null):m===N&&(D=!0,I=b.route.hydrateFallbackElement||null)));let k=t.concat(i.slice(0,N+1)),x=()=>{let y;return C?y=A:D?y=I:b.route.Component?y=c.createElement(b.route.Component,null):b.route.element?y=b.route.element:y=v,c.createElement(yy,{match:b,routeContext:{outlet:v,matches:k,isDataRoute:r!=null},children:y})};return r&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?c.createElement(vy,{location:r.location,revalidation:r.revalidation,component:A,error:C,children:x(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):x()},null)}var i0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(i0||{}),u0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(u0||{});function by(e){let t=c.useContext(Vd);return t||Oe(!1),t}function ky(e){let t=c.useContext(uy);return t||Oe(!1),t}function jy(e){let t=c.useContext(hr);return t||Oe(!1),t}function c0(e){let t=jy(),r=t.matches[t.matches.length-1];return r.route.id||Oe(!1),r.route.id}function Ny(){var e;let t=c.useContext(s0),r=ky(),n=c0();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Sy(){let{router:e}=by(i0.UseNavigateStable),t=c0(u0.UseNavigateStable),r=c.useRef(!1);return a0(()=>{r.current=!0}),c.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,kl({fromRouteId:t},l)))},[e,t])}const _h={};function Ey(e,t,r){_h[e]||(_h[e]=!0)}function Cy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Oc(e){let{to:t,replace:r,state:n,relative:a}=e;Zs()||Oe(!1);let{future:l,static:i}=c.useContext(yn),{matches:u}=c.useContext(hr),{pathname:f}=wn(),m=pr(),v=zd(t,Bd(u,l.v7_relativeSplatPath),f,a==="path"),b=JSON.stringify(v);return c.useEffect(()=>m(JSON.parse(b),{replace:r,state:n,relative:a}),[m,b,a,r,n]),null}function Dy(e){return hy(e.context)}function bt(e){Oe(!1)}function _y(e){let{basename:t="/",children:r=null,location:n,navigationType:a=rn.Pop,navigator:l,static:i=!1,future:u}=e;Zs()&&Oe(!1);let f=t.replace(/^\/*/,"/"),m=c.useMemo(()=>({basename:f,navigator:l,static:i,future:kl({v7_relativeSplatPath:!1},u)}),[f,u,l,i]);typeof n=="string"&&(n=Ks(n));let{pathname:v="/",search:b="",hash:N="",state:C=null,key:D="default"}=n,A=c.useMemo(()=>{let I=$d(v,f);return I==null?null:{location:{pathname:I,search:b,hash:N,state:C,key:D},navigationType:a}},[f,v,b,N,C,D,a]);return A==null?null:c.createElement(yn.Provider,{value:m},c.createElement(Ti.Provider,{children:r,value:A}))}function Ay(e){let{children:t,location:r}=e;return py(Uc(t),r)}new Promise(()=>{});function Uc(e,t){t===void 0&&(t=[]);let r=[];return c.Children.forEach(e,(n,a)=>{if(!c.isValidElement(n))return;let l=[...t,a];if(n.type===c.Fragment){r.push.apply(r,Uc(n.props.children,l));return}n.type!==bt&&Oe(!1),!n.props.index||!n.props.children||Oe(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Uc(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mc.apply(this,arguments)}function Ry(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Ly(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Py(e,t){return e.button===0&&(!t||t==="_self")&&!Ly(e)}const Iy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ty="6";try{window.__reactRouterVersion=Ty}catch{}const Fy="startTransition",Ah=Eg[Fy];function Oy(e){let{basename:t,children:r,future:n,window:a}=e,l=c.useRef();l.current==null&&(l.current=Ov({window:a,v5Compat:!0}));let i=l.current,[u,f]=c.useState({action:i.action,location:i.location}),{v7_startTransition:m}=n||{},v=c.useCallback(b=>{m&&Ah?Ah(()=>f(b)):f(b)},[f,m]);return c.useLayoutEffect(()=>i.listen(v),[i,v]),c.useEffect(()=>Cy(n),[n]),c.createElement(_y,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:i,future:n})}const Uy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",My=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$n=c.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:l,replace:i,state:u,target:f,to:m,preventScrollReset:v,viewTransition:b}=t,N=Ry(t,Iy),{basename:C}=c.useContext(yn),D,A=!1;if(typeof m=="string"&&My.test(m)&&(D=m,Uy))try{let y=new URL(window.location.href),E=m.startsWith("//")?new URL(y.protocol+m):new URL(m),_=$d(E.pathname,C);E.origin===y.origin&&_!=null?m=_+E.search+E.hash:A=!0}catch{}let I=cy(m,{relative:a}),k=$y(m,{replace:i,state:u,target:f,preventScrollReset:v,relative:a,viewTransition:b});function x(y){n&&n(y),y.defaultPrevented||k(y)}return c.createElement("a",Mc({},N,{href:D||I,onClick:A||l?n:x,ref:r,target:f}))});var Rh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rh||(Rh={}));var Lh;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Lh||(Lh={}));function $y(e,t){let{target:r,replace:n,state:a,preventScrollReset:l,relative:i,viewTransition:u}=t===void 0?{}:t,f=pr(),m=wn(),v=o0(e,{relative:i});return c.useCallback(b=>{if(Py(b,r)){b.preventDefault();let N=n!==void 0?n:xi(m)===xi(v);f(e,{replace:N,state:a,preventScrollReset:l,relative:i,viewTransition:u})}},[m,f,v,n,a,r,e,l,i,u])}const Fi="chat_auth";function d0(e,t){localStorage.setItem(Fi,JSON.stringify({token:e,user:t}))}function jt(){const e=localStorage.getItem(Fi);if(!e)return null;try{return JSON.parse(e).token}catch{return null}}function Us(){const e=localStorage.getItem(Fi);if(!e)return null;try{return JSON.parse(e).user}catch{return null}}function f0(){localStorage.removeItem(Fi)}function By(){try{if(typeof window<"u"){const{origin:e,location:t}=window,r=(t==null?void 0:t.hostname)||"";return r==="localhost"||r==="127.0.0.1"?"http://localhost:3000/api":`${String(e).replace(/\/$/,"")}/api`}}catch{}return"http://localhost:3000/api"}const Qt=By(),h0=Qt.replace(/\/?api$/,"");function zy(e){const t=`${Qt}${e}`,r=t.includes("?")?"&":"?";return`${t}${r}_=${Date.now()}`}const H={get:e=>fetch(zy(e),{headers:{Authorization:`Bearer ${jt()}`},cache:"no-store"}).then(Cr),post:(e,t)=>fetch(`${Qt}${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${jt()}`},body:JSON.stringify(t)}).then(Cr),patch:(e,t)=>fetch(`${Qt}${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${jt()}`},body:JSON.stringify(t)}).then(Cr),del:e=>fetch(`${Qt}${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${jt()}`}}).then(Cr),upload:(e,t)=>fetch(`${Qt}${e}`,{method:"POST",headers:{Authorization:`Bearer ${jt()}`},body:t}).then(Cr),uploadPatch:(e,t)=>fetch(`${Qt}${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${jt()}`},body:t}).then(Cr),delete:e=>fetch(`${Qt}${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${jt()}`}}).then(Cr)},Vy={post:(e,t)=>fetch(`${Qt}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(Cr),upload:(e,t)=>fetch(`${Qt}${e}`,{method:"POST",body:t}).then(Cr)};function zt(e){return!e||/^https?:\/\//i.test(e)?e:`${h0.replace(/\/$/,"")}${e}`}async function Cr(e){if(e.status===304)return null;if(!e.ok){const r=await e.text();let n;try{n=JSON.parse(r).error||r}catch{n=r}if(e.status===401){try{f0()}catch{}try{typeof window<"u"&&window.location.assign("/login")}catch{}throw new Error(n||"Sesso expirada. Faa login novamente.")}throw new Error(n||"Erro de requisio")}return(e.headers.get("content-type")||"").includes("application/json")?e.json():e.text()}const fr=Object.create(null);fr.open="0";fr.close="1";fr.ping="2";fr.pong="3";fr.message="4";fr.upgrade="5";fr.noop="6";const Vo=Object.create(null);Object.keys(fr).forEach(e=>{Vo[fr[e]]=e});const $c={type:"error",data:"parser error"},p0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",m0=typeof ArrayBuffer=="function",g0=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Wd=({type:e,data:t},r,n)=>p0&&t instanceof Blob?r?n(t):Ph(t,n):m0&&(t instanceof ArrayBuffer||g0(t))?r?n(t):Ph(new Blob([t]),n):n(fr[e]+(t||"")),Ph=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Ih(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Fu;function Wy(e,t){if(p0&&e.data instanceof Blob)return e.data.arrayBuffer().then(Ih).then(t);if(m0&&(e.data instanceof ArrayBuffer||g0(e.data)))return t(Ih(e.data));Wd(e,!1,r=>{Fu||(Fu=new TextEncoder),t(Fu.encode(r))})}const Th="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ga=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Th.length;e++)Ga[Th.charCodeAt(e)]=e;const Hy=e=>{let t=e.length*.75,r=e.length,n,a=0,l,i,u,f;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const m=new ArrayBuffer(t),v=new Uint8Array(m);for(n=0;n<r;n+=4)l=Ga[e.charCodeAt(n)],i=Ga[e.charCodeAt(n+1)],u=Ga[e.charCodeAt(n+2)],f=Ga[e.charCodeAt(n+3)],v[a++]=l<<2|i>>4,v[a++]=(i&15)<<4|u>>2,v[a++]=(u&3)<<6|f&63;return m},qy=typeof ArrayBuffer=="function",Hd=(e,t)=>{if(typeof e!="string")return{type:"message",data:x0(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:Qy(e.substring(1),t)}:Vo[r]?e.length>1?{type:Vo[r],data:e.substring(1)}:{type:Vo[r]}:$c},Qy=(e,t)=>{if(qy){const r=Hy(e);return x0(r,t)}else return{base64:!0,data:e}},x0=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},v0="",Gy=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((l,i)=>{Wd(l,!1,u=>{n[i]=u,++a===r&&t(n.join(v0))})})},Ky=(e,t)=>{const r=e.split(v0),n=[];for(let a=0;a<r.length;a++){const l=Hd(r[a],t);if(n.push(l),l.type==="error")break}return n};function Zy(){return new TransformStream({transform(e,t){Wy(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const l=new DataView(a.buffer);l.setUint8(0,126),l.setUint16(1,n)}else{a=new Uint8Array(9);const l=new DataView(a.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let Ou;function Eo(e){return e.reduce((t,r)=>t+r.length,0)}function Co(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function Jy(e,t){Ou||(Ou=new TextDecoder);const r=[];let n=0,a=-1,l=!1;return new TransformStream({transform(i,u){for(r.push(i);;){if(n===0){if(Eo(r)<1)break;const f=Co(r,1);l=(f[0]&128)===128,a=f[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Eo(r)<2)break;const f=Co(r,2);a=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),n=3}else if(n===2){if(Eo(r)<8)break;const f=Co(r,8),m=new DataView(f.buffer,f.byteOffset,f.length),v=m.getUint32(0);if(v>Math.pow(2,21)-1){u.enqueue($c);break}a=v*Math.pow(2,32)+m.getUint32(4),n=3}else{if(Eo(r)<a)break;const f=Co(r,a);u.enqueue(Hd(l?f:Ou.decode(f),t)),n=0}if(a===0||a>e){u.enqueue($c);break}}}})}const y0=4;function Be(e){if(e)return Yy(e)}function Yy(e){for(var t in Be.prototype)e[t]=Be.prototype[t];return e}Be.prototype.on=Be.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Be.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Be.prototype.off=Be.prototype.removeListener=Be.prototype.removeAllListeners=Be.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Be.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};Be.prototype.emitReserved=Be.prototype.emit;Be.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Be.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Oi=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Tt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Xy="arraybuffer";function w0(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const ew=Tt.setTimeout,tw=Tt.clearTimeout;function Ui(e,t){t.useNativeTimers?(e.setTimeoutFn=ew.bind(Tt),e.clearTimeoutFn=tw.bind(Tt)):(e.setTimeoutFn=Tt.setTimeout.bind(Tt),e.clearTimeoutFn=Tt.clearTimeout.bind(Tt))}const rw=1.33;function nw(e){return typeof e=="string"?sw(e):Math.ceil((e.byteLength||e.size)*rw)}function sw(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function b0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function aw(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function lw(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let l=r[n].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t}class ow extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class qd extends Be{constructor(t){super(),this.writable=!1,Ui(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new ow(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Hd(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=aw(t);return r.length?"?"+r:""}}class iw extends qd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Ky(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Gy(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=b0()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let k0=!1;try{k0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const uw=k0;function cw(){}class dw extends iw{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,l)=>{this.onError("xhr post error",a,l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class dr extends Be{constructor(t,r,n){super(),this.createRequest=t,Ui(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=w0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=dr.requestsCount++,dr.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=cw,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dr.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}dr.requestsCount=0;dr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Fh);else if(typeof addEventListener=="function"){const e="onpagehide"in Tt?"pagehide":"unload";addEventListener(e,Fh,!1)}}function Fh(){for(let e in dr.requests)dr.requests.hasOwnProperty(e)&&dr.requests[e].abort()}const fw=function(){const e=j0({xdomain:!1});return e&&e.responseType!==null}();class hw extends dw{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=fw&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new dr(j0,this.uri(),t)}}function j0(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||uw))return new XMLHttpRequest}catch{}if(!t)try{return new Tt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const N0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pw extends qd{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=N0?{}:w0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;Wd(n,this.supportsBinary,l=>{try{this.doWrite(n,l)}catch{}a&&Oi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=b0()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Uu=Tt.WebSocket||Tt.MozWebSocket;class mw extends pw{createSocket(t,r,n){return N0?new Uu(t,r,n):r?new Uu(t,r):new Uu(t)}doWrite(t,r){this.ws.send(r)}}class gw extends qd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=Jy(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=Zy();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const l=()=>{n.read().then(({done:u,value:f})=>{u||(this.onPacket(f),l())}).catch(u=>{})};l();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&Oi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const xw={websocket:mw,webtransport:gw,polling:hw},vw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,yw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Bc(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=vw.exec(e||""),l={},i=14;for(;i--;)l[yw[i]]=a[i]||"";return r!=-1&&n!=-1&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=ww(l,l.path),l.queryKey=bw(l,l.query),l}function ww(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function bw(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,l){a&&(r[a]=l)}),r}const zc=typeof addEventListener=="function"&&typeof removeEventListener=="function",Wo=[];zc&&addEventListener("offline",()=>{Wo.forEach(e=>e())},!1);class hn extends Be{constructor(t,r){if(super(),this.binaryType=Xy,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Bc(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Bc(r.host).host);Ui(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=lw(this.opts.query)),zc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Wo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=y0,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&hn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",hn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=nw(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Oi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const l={type:t,data:r,options:n};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(hn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Wo.indexOf(this._offlineEventListener);n!==-1&&Wo.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}hn.protocol=y0;class kw extends hn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;hn.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!n)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;hn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const N=new Error("probe error");N.transport=r.name,this.emitReserved("upgradeError",N)}}))};function l(){n||(n=!0,v(),r.close(),r=null)}const i=b=>{const N=new Error("probe error: "+b);N.transport=r.name,l(),this.emitReserved("upgradeError",N)};function u(){i("transport closed")}function f(){i("socket closed")}function m(b){r&&b.name!==r.name&&l()}const v=()=>{r.removeListener("open",a),r.removeListener("error",i),r.removeListener("close",u),this.off("close",f),this.off("upgrading",m)};r.once("open",a),r.once("error",i),r.once("close",u),this.once("close",f),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let jw=class extends kw{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>xw[a]).filter(a=>!!a)),super(t,n)}};function Nw(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Bc(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const l=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+l+":"+n.port+t,n.href=n.protocol+"://"+l+(r&&r.port===n.port?"":":"+n.port),n}const Sw=typeof ArrayBuffer=="function",Ew=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,S0=Object.prototype.toString,Cw=typeof Blob=="function"||typeof Blob<"u"&&S0.call(Blob)==="[object BlobConstructor]",Dw=typeof File=="function"||typeof File<"u"&&S0.call(File)==="[object FileConstructor]";function Qd(e){return Sw&&(e instanceof ArrayBuffer||Ew(e))||Cw&&e instanceof Blob||Dw&&e instanceof File}function Ho(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Ho(e[r]))return!0;return!1}if(Qd(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ho(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Ho(e[r]))return!0;return!1}function _w(e){const t=[],r=e.data,n=e;return n.data=Vc(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Vc(e,t){if(!e)return e;if(Qd(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Vc(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Vc(e[n],t));return r}return e}function Aw(e,t){return e.data=Wc(e.data,t),delete e.attachments,e}function Wc(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Wc(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Wc(e[r],t));return e}const Rw=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Lw=5;var ue;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ue||(ue={}));class Pw{constructor(t){this.replacer=t}encode(t){return(t.type===ue.EVENT||t.type===ue.ACK)&&Ho(t)?this.encodeAsBinary({type:t.type===ue.EVENT?ue.BINARY_EVENT:ue.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ue.BINARY_EVENT||t.type===ue.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=_w(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function Oh(e){return Object.prototype.toString.call(e)==="[object Object]"}class Gd extends Be{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===ue.BINARY_EVENT;n||r.type===ue.BINARY_ACK?(r.type=n?ue.EVENT:ue.ACK,this.reconstructor=new Iw(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Qd(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(ue[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===ue.BINARY_EVENT||n.type===ue.BINARY_ACK){const l=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const i=t.substring(l,r);if(i!=Number(i)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(i)}if(t.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(l,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const l=r+1;for(;++r;){const i=t.charAt(r);if(i==null||Number(i)!=i){--r;break}if(r===t.length)break}n.id=Number(t.substring(l,r+1))}if(t.charAt(++r)){const l=this.tryParse(t.substr(r));if(Gd.isPayloadValid(n.type,l))n.data=l;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ue.CONNECT:return Oh(r);case ue.DISCONNECT:return r===void 0;case ue.CONNECT_ERROR:return typeof r=="string"||Oh(r);case ue.EVENT:case ue.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Rw.indexOf(r[0])===-1);case ue.ACK:case ue.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Iw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=Aw(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Tw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Gd,Encoder:Pw,get PacketType(){return ue},protocol:Lw},Symbol.toStringTag,{value:"Module"}));function Ht(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const Fw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class E0 extends Be{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ht(t,"open",this.onopen.bind(this)),Ht(t,"packet",this.onpacket.bind(this)),Ht(t,"error",this.onerror.bind(this)),Ht(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,l;if(Fw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const i={type:ue.EVENT,data:r};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,b=r.pop();this._registerAckCallback(v,b),i.id=v}const u=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,f=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!u||(f?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);r.call(this,new Error("operation has timed out"))},a),i=(...u)=>{this.io.clearTimeoutFn(l),r.apply(this,u)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...r){return new Promise((n,a)=>{const l=(i,u)=>i?a(i):n(u);l.withError=!0,r.push(l),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...l)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...l)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ue.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ue.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ue.EVENT:case ue.BINARY_EVENT:this.onevent(t);break;case ue.ACK:case ue.BINARY_ACK:this.onack(t);break;case ue.DISCONNECT:this.ondisconnect();break;case ue.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:ue.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ue.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Js(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Js.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Js.prototype.reset=function(){this.attempts=0};Js.prototype.setMin=function(e){this.ms=e};Js.prototype.setMax=function(e){this.max=e};Js.prototype.setJitter=function(e){this.jitter=e};class Hc extends Be{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Ui(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Js({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||Tw;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new jw(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Ht(r,"open",function(){n.onopen(),t&&t()}),l=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},i=Ht(r,"error",l);if(this._timeout!==!1){const u=this._timeout,f=this.setTimeoutFn(()=>{a(),l(new Error("timeout")),r.close()},u);this.opts.autoUnref&&f.unref(),this.subs.push(()=>{this.clearTimeoutFn(f)})}return this.subs.push(a),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ht(t,"ping",this.onping.bind(this)),Ht(t,"data",this.ondata.bind(this)),Ht(t,"error",this.onerror.bind(this)),Ht(t,"close",this.onclose.bind(this)),Ht(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Oi(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new E0(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $a={};function qo(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=Nw(e,t.path||"/socket.io"),n=r.source,a=r.id,l=r.path,i=$a[a]&&l in $a[a].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let f;return u?f=new Hc(n,t):($a[a]||($a[a]=new Hc(n,t)),f=$a[a]),r.query&&!t.query&&(t.query=r.queryKey),f.socket(r.path,t)}Object.assign(qo,{Manager:Hc,Socket:E0,io:qo,connect:qo});let Mu;function _r(){if(!Mu){const e=h0||(typeof window<"u"?window.location.origin:"");Mu=qo(e,{path:"/socket.io",withCredentials:!1,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3})}return Mu}async function Ow(){if(typeof window<"u"&&window.JsSIP)return window.JsSIP;await new Promise((e,t)=>{const r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/jssip@3/dist/jssip.min.js",r.async=!0,r.onload=()=>e(),r.onerror=()=>t(new Error("Falha ao carregar JsSIP via CDN")),document.head.appendChild(r)});try{window.JsSIP.debug.enable("JsSIP:*")}catch{}return window.JsSIP}async function Uw({wsUrl:e,domain:t,extension:r,password:n,iceServers:a}){const l=await Ow(),u={sockets:[new l.WebSocketInterface(e)],uri:`sip:${r}@${t}`,authorization_user:r,password:n,register:!0,register_expires:300,session_timers:!1},f=new l.UA(u);let m=null,v=!1;function b(x,y){f.on(x,y)}function N(){return new Promise(x=>{const y=()=>{v=!0,_(),x()},E=()=>{_(),x()};function _(){try{f.off("registered",y)}catch{}try{f.off("registrationFailed",E)}catch{}}f.on("registered",y),f.on("registrationFailed",E);try{f.start()}catch{x()}})}function C(){return v}function D(x,{onProgress:y,onAccepted:E,onEnded:_,onFailed:U,onTrack:V,audioDeviceId:Q}={}){return new Promise((O,P)=>{const me={eventHandlers:{progress:$=>{y&&y($)},failed:$=>{m=null,U&&U($),O(!1)},ended:$=>{m=null,_&&_($),O(!1)},confirmed:$=>{E&&E($),O(!0)}},mediaConstraints:{audio:Q?{deviceId:{exact:Q}}:!0,video:!1},pcConfig:{iceServers:a||[],iceTransportPolicy:"all"}};try{m=f.call(/^sip:/i.test(x)?x:`sip:${x}@${t}`,me);try{m.connection.addEventListener("track",$=>{const[re]=$.streams;V&&V(re)}),m.connection.addEventListener("iceconnectionstatechange",()=>{})}catch{}}catch($){P($)}})}async function A(x){try{if(!m||!m.connection)return!1;const E=(await navigator.mediaDevices.getUserMedia({audio:x?{deviceId:{exact:x}}:!0})).getAudioTracks()[0];if(!E)return!1;const _=m.connection.getSenders().find(U=>U.track&&U.track.kind==="audio");return _&&await _.replaceTrack(E),!0}catch{return!1}}function I(x){var y;try{(y=m==null?void 0:m.sendDTMF)==null||y.call(m,String(x||"").substring(0,1))}catch{}}function k(){try{m==null||m.terminate()}catch{}m=null}return{ua:f,start:N,isRegistered:C,call:D,hangup:k,on:b,dtmf:I,setAudioDevice:A}}let de=null,Do=!1,Ba=null,$u=null;function za(e){try{localStorage.setItem("sip_registered",e?"1":"0"),window.dispatchEvent(new CustomEvent("sip:reg",{detail:{registered:e}}))}catch{}}function Bu(e=3e3){$u||($u=setTimeout(()=>{$u=null;try{C0().catch(()=>{})}catch{}},e))}function Mw(){const e=[];try{const r=void 0,n=void 0,a=void 0}catch{}return e.length||e.push({urls:"stun:stun.l.google.com:19302"}),e}async function C0(){return Do?de:Ba||(Ba=(async()=>{var e;try{const t="wss://202106.maisfone.com.br:7443/ws",r=await H.get("/phone/me").catch(()=>null);if(!r||!r.hasPassword||!r.domain||!r.extension)return Do=!0,null;if(de=await Uw({wsUrl:t,domain:r.domain,extension:r.extension,password:r.password||"",iceServers:Mw()}),de!=null&&de.on){try{de.on("registered",()=>za(!0))}catch{}try{de.on("unregistered",()=>za(!1))}catch{}try{de.on("registrationFailed",()=>{za(!1),Bu(5e3)})}catch{}try{de.on("disconnected",()=>{za(!1),Bu(3e3)})}catch{}}await de.start(),za(!!((e=de==null?void 0:de.isRegistered)!=null&&e.call(de)));try{document.addEventListener("visibilitychange",()=>{var n,a;(n=de==null?void 0:de.isRegistered)!=null&&n.call(de)||(a=de.start)==null||a.call(de).catch(()=>{})})}catch{}try{window.addEventListener("online",()=>{var n;(n=de==null?void 0:de.start)==null||n.call(de).catch(()=>{})})}catch{}try{setInterval(()=>{var n;try{(n=de==null?void 0:de.ua)!=null&&n.register&&de.ua.register()}catch{}},24e4)}catch{}return Do=!0,de}catch{return Do=!1,Bu(5e3),null}finally{Ba=null}})(),Ba)}function $w(){return de}function Bw(){var B,ne;const e=pr(),t=wn(),r=Us(),n=T=>{try{T?localStorage.setItem("notif_sound_url",T):localStorage.removeItem("notif_sound_url"),window.dispatchEvent(new Event("chat:alertSoundUpdated"))}catch{}},[a,l]=c.useState(0);c.useEffect(()=>{const T=()=>l(J=>J+1);return window.addEventListener("chat:userUpdated",T),()=>window.removeEventListener("chat:userUpdated",T)},[]),c.useEffect(()=>{const T=()=>{const ie=localStorage.getItem("chat_wallpaper")||"";ie?document.documentElement.style.setProperty("--chat-wallpaper",`url('${ie}')`):document.documentElement.style.removeProperty("--chat-wallpaper")},J=ie=>n(ie);return T(),window.addEventListener("chat:wallpaperUpdated",T),(async()=>{try{const ie=`${window.location.origin}/api`.replace(/\/$/,""),fe=await fetch(`${ie}/admin/config/public`);if(!fe.ok)return;const he=await fe.json();if(!!!localStorage.getItem("chat_wallpaper")&&(he!=null&&he.chatWallpaperUrl)&&document.documentElement.style.setProperty("--chat-wallpaper",`url('${he.chatWallpaperUrl}')`),he&&Object.prototype.hasOwnProperty.call(he,"alertSoundUrl")&&J((he==null?void 0:he.alertSoundUrl)||""),he&&Object.prototype.hasOwnProperty.call(he,"chatIconUrl")){const ze=(he==null?void 0:he.chatIconUrl)||"";y(ze);try{ze?localStorage.setItem("chat_icon",ze):localStorage.removeItem("chat_icon"),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}}}catch{}})(),()=>window.removeEventListener("chat:wallpaperUpdated",T)},[]),c.useEffect(()=>{const T=_r(),J=(ie={})=>{n((ie==null?void 0:ie.url)||"")},ce=(ie={})=>{const fe=(ie==null?void 0:ie.url)||"";y(fe);try{fe?localStorage.setItem("chat_icon",fe):localStorage.removeItem("chat_icon"),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}};return T.on("config:alert-sound",J),T.on("config:chat-icon",ce),()=>{T.off("config:alert-sound",J),T.off("config:chat-icon",ce)}},[]),c.useEffect(()=>{C0().catch(()=>{})},[]);const i=c.useCallback(()=>{try{f0()}catch{}f(!1),e("/login",{replace:!0}),setTimeout(()=>{window.location.pathname!=="/login"&&window.location.assign("/login")},75)},[e]),[u,f]=c.useState(!1),[m,v]=c.useState(()=>localStorage.getItem("chat_status")||"online"),b=T=>{v(T),localStorage.setItem("chat_status",T)},[N,C]=c.useState(()=>{const T=localStorage.getItem("theme");if(T==="dark"||T==="light")return T;try{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch{}return"light"}),[D,A]=c.useState(()=>localStorage.getItem("chat_bg")||"whatsapp"),[I,k]=c.useState(!1),[x,y]=c.useState(()=>localStorage.getItem("chat_icon")||""),E=c.useRef(null),[_,U]=c.useState(!1),[V,Q]=c.useState(""),[O,P]=c.useState(""),ee=c.useRef(null),me=c.useCallback(T=>{ee.current=T},[]),$=I?"w-16 md:w-16":"w-64 md:w-64",re=c.useCallback(()=>{},[]);c.useEffect(()=>{const T=document.documentElement,J=document.body;N==="dark"?(T.classList.add("dark"),J.classList.add("dark")):(T.classList.remove("dark"),J.classList.remove("dark")),localStorage.setItem("theme",N);try{window.dispatchEvent(new CustomEvent("chat:themeChanged",{detail:N}))}catch{}},[N]),c.useEffect(()=>{const T=J=>{const ce=J==null?void 0:J.detail;C(ce==="light"||ce==="dark"?ce:ie=>ie==="dark"?"light":"dark")};return window.addEventListener("chat:themeToggle",T),()=>window.removeEventListener("chat:themeToggle",T)},[]),c.useEffect(()=>{const T=document.body;try{T.setAttribute("data-chat-bg",D)}catch{}localStorage.setItem("chat_bg",D)},[D]),c.useEffect(()=>{const T=()=>y(localStorage.getItem("chat_icon")||""),J=()=>A(localStorage.getItem("chat_bg")||"whatsapp");return window.addEventListener("chat:iconUpdated",T),window.addEventListener("chat:bgUpdated",J),()=>{window.removeEventListener("chat:iconUpdated",T),window.removeEventListener("chat:bgUpdated",J)}},[]),c.useEffect(()=>{var ce;const T=_r(),J=(ce=Us())==null?void 0:ce.id;if(J)try{T.emit("presence:online",{userId:J,status:m})}catch{}},[r==null?void 0:r.id]),c.useEffect(()=>{var ce;const T=_r();if((ce=Us())!=null&&ce.id)try{T.emit("presence:set",{status:m})}catch{}},[m]),c.useEffect(()=>{if(!u)return;const T=J=>{const ce=ee.current;ce&&(ce.contains(J.target)||f(!1))};return document.addEventListener("mousedown",T),document.addEventListener("touchstart",T),()=>{document.removeEventListener("mousedown",T),document.removeEventListener("touchstart",T)}},[u]);const xe=async T=>{var ce,ie;const J=(ce=T.target.files)==null?void 0:ce[0];if(J){if(!((ie=J.type)!=null&&ie.startsWith("image/"))){P("Escolha um arquivo de imagem"),T.target.value="";return}Q(""),P(""),U(!0);try{const fe=new FormData;fe.append("avatar",J);const he=await H.uploadPatch("/users/me",fe),He=(he==null?void 0:he.user)||he;if(He!=null&&He.avatarUrl){try{const ze=localStorage.getItem("chat_auth");if(ze){const qe=JSON.parse(ze);qe.user={...qe.user||{},avatarUrl:He.avatarUrl},localStorage.setItem("chat_auth",JSON.stringify(qe))}}catch{}window.dispatchEvent(new Event("chat:userUpdated")),Q("Foto atualizada com sucesso")}else Q("Foto atualizada");f(!1)}catch(fe){P((fe==null?void 0:fe.message)||"Falha ao enviar foto")}finally{U(!1),T.target.value=""}}},Se=()=>{var T;P(""),Q(""),(T=E.current)==null||T.click()},nt=T=>s.jsxs("div",{className:`${T} w-64 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded shadow-lg p-3 z-50`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Preferencias"}),s.jsx("button",{type:"button",onClick:()=>f(!1),className:"inline-flex w-6 h-6 items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Fechar menu",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:s.jsx("path",{d:"m6.225 4.811 13.964 13.964-1.061 1.06L5.164 5.871l1.061-1.06Zm11.55 0 1.06 1.06L4.87 19.386l-1.06-1.06L17.776 4.81Z"})})})]}),s.jsx("div",{className:"mt-3 border-t border-slate-200 dark:border-slate-700"}),s.jsx("div",{className:"px-1.5 py-1 text-xs text-slate-500 dark:text-slate-400",children:"Status"}),s.jsxs("div",{className:"flex flex-wrap gap-2 px-1.5 py-1",children:[s.jsx("button",{onClick:()=>b("online"),className:`px-2 py-1 rounded text-sm transition ${m==="online"?"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-200":"text-slate-600 hover:bg-slate-50 dark:text-slate-300 dark:hover:bg-slate-700/60"}`,children:"Online"}),s.jsx("button",{onClick:()=>b("ausente"),className:`px-2 py-1 rounded text-sm transition ${m==="ausente"?"bg-yellow-100 text-yellow-700 dark:bg-amber-500/20 dark:text-amber-200":"text-slate-600 hover:bg-slate-50 dark:text-slate-300 dark:hover:bg-slate-700/60"}`,children:"Ausente"}),s.jsx("button",{onClick:()=>b("offline"),className:`px-2 py-1 rounded text-sm transition ${m==="offline"?"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200":"text-slate-600 hover:bg-slate-50 dark:text-slate-300 dark:hover:bg-slate-700/60"}`,children:"Offline"})]}),s.jsx("div",{className:"mt-2 border-t border-slate-200 dark:border-slate-700"}),s.jsx("div",{className:"px-1.5 py-1 text-xs text-slate-500 dark:text-slate-400",children:"Tema"}),s.jsxs("div",{className:"flex gap-2 px-1.5 py-1",children:[s.jsx("button",{onClick:()=>C("light"),className:`px-2 py-1 rounded text-sm transition ${N==="light"?"bg-slate-100 text-slate-700 dark:bg-slate-200 dark:text-slate-800":"text-slate-600 hover:bg-slate-50 dark:text-slate-300 dark:hover:bg-slate-700/60"}`,children:"Claro"}),s.jsx("button",{onClick:()=>C("dark"),className:`px-2 py-1 rounded text-sm transition ${N==="dark"?"bg-slate-700 text-white dark:bg-slate-600 dark:text-slate-100":"text-slate-600 hover:bg-slate-50 dark:text-slate-300 dark:hover:bg-slate-700/60"}`,children:"Escuro"})]}),s.jsx("div",{className:"mt-2 border-t border-slate-200 dark:border-slate-700"}),s.jsx("div",{className:"px-1.5 py-1 text-xs text-slate-500 dark:text-slate-400",children:"Foto"}),s.jsxs("button",{type:"button",onClick:()=>{Se()},className:"w-full inline-flex items-center justify-center gap-2 px-2 py-1.5 rounded border border-slate-300 dark:border-slate-600 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/60 disabled:opacity-50",disabled:_,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:s.jsx("path",{d:"M9 3.75A.75.75 0 0 1 9.75 3h4.5a.75.75 0 0 1 .707.493l.401 1.12h2.192A1.95 1.95 0 0 1 19.5 6.563l.75 2.25A2.25 2.25 0 0 1 21 9.75v7.5A3.75 3.75 0 0 1 17.25 21h-10.5A3.75 3.75 0 0 1 3 17.25v-7.5a2.25 2.25 0 0 1 .75-1.688l.75-2.25A1.95 1.95 0 0 1 6.45 4.5h2.192l.401-1.12A.75.75 0 0 1 9 3.75ZM12 8.25a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9Zm0 1.5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Z"})}),s.jsx("span",{children:_?"Enviando...":"Alterar foto"})]}),s.jsx("div",{className:"mt-2 border-t border-slate-200 dark:border-slate-700"}),s.jsxs("div",{className:"flex flex-col gap-1 px-1.5 py-1",children:[s.jsx("button",{type:"button",onClick:()=>{f(!1),e("/")},className:"px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left",children:"Ir para Chat"}),(r==null?void 0:r.isAdmin)&&s.jsx("button",{type:"button",onClick:()=>{f(!1),e("/admin")},className:"px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left",children:"Ir para Admin"}),s.jsx("button",{type:"button",onClick:()=>{f(!1),e("/profile")},className:"px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left",children:"Editar perfil"}),s.jsx("button",{type:"button",onClick:i,className:"px-2 py-1.5 text-sm text-red-600 rounded hover:bg-red-50 dark:hover:bg-red-900/30 text-left",children:"Sair"})]})]}),W=c.useCallback(T=>{const J="px-2 py-2 rounded flex items-center gap-2 transition-colors border border-transparent";return t.pathname===T?`${J} bg-blue-50 text-blue-600 font-semibold dark:bg-slate-800/80 dark:text-slate-100 dark:border-slate-600`:`${J} text-slate-700 hover:bg-slate-100 hover:text-blue-600 dark:text-slate-300 dark:bg-transparent dark:hover:bg-slate-800/70 dark:hover:text-blue-300`},[t.pathname]);return s.jsxs("div",{className:"flex h-screen overflow-x-hidden bg-slate-50 dark:bg-slate-900 dark:text-slate-100",children:[s.jsxs("aside",{className:`${$} flex-shrink-0 border-r border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-950 flex flex-col z-40`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[I?x?s.jsx("img",{src:x,alt:"cone do chat",className:"w-8 h-8 rounded-full object-cover"}):s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-slate-700 dark:text-slate-200",children:s.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z",fill:"currentColor"})}):s.jsxs("div",{className:"flex items-center gap-2",children:[x&&s.jsx("img",{src:x,alt:"cone",className:"w-6 h-6 rounded object-cover"}),s.jsx("h3",{className:"font-semibold text-xl text-slate-800 dark:text-slate-100",children:"Chat Farmacon"})]}),s.jsxs("div",{className:"relative group hidden",children:[s.jsx("button",{type:"button",className:"inline-flex w-8 h-8 items-center justify-center rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700/60",title:I?"Expandir":"Recolher",onClick:()=>{const T=!I;k(T);try{localStorage.setItem("sidebar_mini",T?"1":"0")}catch{}},children:I?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M4.5 12h15v1.5h-15V12Zm0-4.5h9V9h-9V7.5Zm0 9h9V18h-9v-1.5Z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M9 6h10v1.5H9V6Zm0 10.5h10V18H9v-1.5ZM9 11.25h10v1.5H9v-1.5ZM5 6h2v12H5V6Z"})})}),s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:I?"Expandir":"Recolher"})]})]}),!I&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-300 mt-1",children:["Ol, ",r==null?void 0:r.name]}),s.jsxs("nav",{className:"mt-4 flex flex-col gap-2",children:[s.jsxs("div",{className:"relative group",children:[s.jsxs($n,{title:"Conversas",className:W("/conversas"),to:"/conversas",onClick:re,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z"})}),!I&&s.jsx("span",{children:"Conversas"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Conversas"})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs($n,{title:"Telefonia",className:W("/telefonia"),to:"/telefonia",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M2.25 6.75c0-1.24 1.01-2.25 2.25-2.25h3c.97 0 1.8.62 2.1 1.54l.86 2.58a2.25 2.25 0 0 1-.57 2.31l-1.21 1.21a12.06 12.06 0 0 0 4.88 4.88l1.21-1.21a2.25 2.25 0 0 1 2.31-.57l2.58.86c.92.3 1.54 1.13 1.54 2.1v3c0 1.24-1.01 2.25-2.25 2.25H18c-8.28 0-15-6.72-15-15v-3Z"})}),!I&&s.jsx("span",{children:"Telefonia"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Telefonia"})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs($n,{title:"Reunies",className:W("/reunioes"),to:"/reunioes",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M6.75 2a.75.75 0 0 1 .75.75V4h9V2.75a.75.75 0 0 1 1.5 0V4h.75A2.25 2.25 0 0 1 21 6.25v11A2.25 2.25 0 0 1 18.75 19.5H5.25A2.25 2.25 0 0 1 3 17.25v-11A2.25 2.25 0 0 1 5.25 4H6V2.75a.75.75 0 0 1 .75-.75Zm12 6H5.25a.75.75 0 0 0-.75.75V9h15V8.75a.75.75 0 0 0-.75-.75ZM19.5 10.5h-15V17.25c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V10.5Zm-9.75 2.25a.75.75 0 0 1 .102 1.493L9.75 14.25h-2.5a.75.75 0 0 1-.102-1.493l.102-.007h2.5Zm6 0a.75.75 0 0 1 .102 1.493l-.102.007h-3.5a.75.75 0 0 1-.102-1.493l.102-.007h3.5Z"})}),!I&&s.jsx("span",{children:"Reunies"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Reunies"})]}),(r==null?void 0:r.isAdmin)&&s.jsxs("div",{className:"relative group",children:[s.jsxs($n,{title:"Admin",className:W("/admin"),to:"/admin",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M12 2.25 3.75 6v5.25c0 5.108 3.66 9.837 8.625 10.5 4.965-.663 8.625-5.392 8.625-10.5V6L12 2.25Zm0 5.25a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm0 12a7.5 7.5 0 0 1-6-3.09c.03-1.982 4.5-3.06 6-3.06s5.97 1.078 6 3.06A7.5 7.5 0 0 1 12 19.5Z"})}),!I&&s.jsx("span",{children:"Admin"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Admin"})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs($n,{title:"Contatos",className:W("/contatos"),to:"/contatos",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M5.25 3A2.25 2.25 0 0 0 3 5.25v13.5A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V5.25A2.25 2.25 0 0 0 18.75 3H5.25Zm6.75 4.5a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm0 6c2.209 0 4.5 1.122 4.5 2.5V17H7.5v-1c0-1.378 2.291-2.5 4.5-2.5Z"})}),!I&&s.jsx("span",{children:"Contatos"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Contatos"})]})]}),s.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:xe}),I?s.jsxs("div",{ref:me,className:"flex flex-col items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>f(T=>!T),className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 hover:ring-2 hover:ring-blue-500/30","aria-label":"Abrir menu do perfil",children:[s.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:r!=null&&r.avatarUrl?s.jsx("img",{src:r.avatarUrl,alt:"avatar",className:"w-full h-full object-cover",onError:T=>{T.currentTarget.style.display="none"}}):s.jsx("div",{className:"w-full h-full bg-slate-300 dark:bg-slate-600"})}),s.jsx("span",{className:`absolute bottom-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white dark:border-slate-800 ${m==="online"?"bg-green-500":m==="ausente"?"bg-yellow-500":"bg-slate-400"}`})]}),u&&nt("fixed top-4 left-20")]}),_&&s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-300",children:"Enviando..."}),V&&s.jsx("span",{className:"text-[10px] text-green-600 text-center max-w-[64px]",children:V}),O&&s.jsx("span",{className:"text-[10px] text-red-600 text-center max-w-[64px]",children:O})]}):s.jsxs("div",{ref:me,className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>f(T=>!T),className:"w-full inline-flex items-center gap-3 rounded border border-slate-300 dark:border-slate-600 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left","aria-expanded":u,children:[s.jsxs("span",{className:"relative",children:[s.jsx("span",{className:"w-12 h-12 rounded-full border border-slate-300 dark:border-slate-600 overflow-hidden bg-slate-200 block",children:r!=null&&r.avatarUrl?s.jsx("img",{src:r.avatarUrl,alt:"avatar",className:"w-full h-full object-cover",onError:T=>{T.currentTarget.style.display="none"}}):s.jsx("span",{className:"w-full h-full flex items-center justify-center text-sm text-slate-500 dark:text-slate-300 bg-slate-200 dark:bg-slate-700",children:((ne=(B=r==null?void 0:r.name)==null?void 0:B.slice(0,2))==null?void 0:ne.toUpperCase())||"ME"})}),s.jsx("span",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white dark:border-slate-800 ${m==="online"?"bg-green-500":m==="ausente"?"bg-yellow-500":m==="ocupado"?"bg-red-500":"bg-slate-400"}`})]}),s.jsxs("span",{className:"flex-1 min-w-0 text-left",children:[s.jsx("span",{className:"block font-semibold text-sm truncate",children:(r==null?void 0:r.name)||"Meu perfil"}),s.jsxs("span",{className:"block text-xs text-slate-500 dark:text-slate-300 capitalize truncate",children:["Status: ",m]})]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${u?"rotate-180":""}`,children:s.jsx("path",{d:"M12 15.75a.75.75 0 0 1-.53-.22l-4.5-4.5a.75.75 0 1 1 1.06-1.06L12 13.94l3.97-3.97a.75.75 0 0 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-.53.22Z"})})]}),u&&nt("absolute right-0 bottom-full mb-2")]})]})]}),s.jsx("main",{className:"flex-1 overflow-hidden bg-slate-100 dark:bg-slate-950",children:s.jsx(Dy,{})})]})}function zw(){const e=pr(),t=wn(),[r,n]=c.useState(""),[a,l]=c.useState(""),[i,u]=c.useState(!1),[f,m]=c.useState(!1),[v,b]=c.useState(""),[N,C]=c.useState(!1),[D,A]=c.useState("");c.useEffect(()=>{try{const k=localStorage.getItem("theme")||(matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.classList.toggle("dark",k==="dark");const x=localStorage.getItem("rememberedEmail");x&&(n(x),u(!0))}catch{}},[]),c.useEffect(()=>{try{new URLSearchParams((t==null?void 0:t.search)||"").get("registered")==="1"?b("Conta criada com sucesso! Faa login com suas credenciais."):b("")}catch{b("")}},[t]);async function I(k){k.preventDefault(),C(!0),b(""),A("");try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(r))throw new Error("Informe um e-mail vlido");if(!a||a.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const y=await H.post("/auth/login",{email:r,password:a});d0(y.token,y.user);try{i?localStorage.setItem("rememberedEmail",r):localStorage.removeItem("rememberedEmail")}catch{}e("/")}catch(x){A(x.message||"Falha no login")}finally{C(!1)}}return s.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-100",children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[s.jsx("div",{className:"absolute -top-32 -left-24 h-72 w-72 rounded-full bg-emerald-500/30 blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-8rem] right-[-6rem] h-96 w-96 rounded-full bg-blue-500/25 blur-3xl"}),s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.18),transparent_55%)]"}),s.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(135deg,rgba(15,23,42,0.6),rgba(15,23,42,0.9))]"})]}),s.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-6 py-12",children:s.jsxs("div",{className:"grid w-full max-w-5xl gap-12 rounded-[2.5rem] border border-white/5 bg-white/5 p-8 shadow-[0_20px_70px_-30px_rgba(15,23,42,0.9)] backdrop-blur-lg lg:grid-cols-[1.1fr_1fr] lg:p-12",children:[s.jsxs("div",{className:"hidden flex-col justify-between lg:flex",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("span",{className:"inline-flex items-center gap-2 w-fit rounded-full border border-white/10 bg-white/5 px-4 py-1 text-sm text-slate-200",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400 animate-pulse"}),"Plataforma omnichannel Farmachat"]}),s.jsx("h1",{className:"text-4xl font-semibold leading-tight text-white",children:"Conecte sua equipe e Participe de Grupos"}),s.jsx("p",{className:"text-lg text-slate-300",children:"Nosso chat interno conecta toda a equipe em tempo real, facilitando a troca de ideias e decises rpidas. Comunicao simples, gil e segura para aumentar a produtividade e fortalecer a colaborao."})]}),s.jsxs("div",{className:"mt-10 flex flex-col gap-4 text-sm text-slate-200/80",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-300",children:"01"}),"Respostas rpidas e consistentes em todos os atendimentos."]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-cyan-500/20 text-cyan-200",children:"02"}),"Monitoramento em tempo real e histrico completo das conversas."]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-500/20 text-blue-200",children:"03"}),"Segurana e privacidade alinhadas s melhores prticas do mercado."]})]})]}),s.jsxs("form",{onSubmit:I,className:"relative flex flex-col gap-6 rounded-3xl border border-white/10 bg-white/90 p-8 text-slate-900 shadow-2xl backdrop-blur dark:bg-slate-900/85 dark:text-slate-100",noValidate:!0,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/images/logo.png",alt:"Farmachat",className:"h-10 w-auto",draggable:!1}),s.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-300"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("h2",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"Bem-vindo de volta"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Acesse sua conta para continuar acompanhando suas conversas."})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"E-mail"}),s.jsx("input",{id:"email",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-emerald-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"voce@empresa.com",type:"email",autoComplete:"email",autoFocus:!0,required:!0,value:r,onChange:k=>n(k.target.value)})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-28 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-emerald-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Insira sua senha",type:f?"text":"password",autoComplete:"current-password",minLength:6,required:!0,value:a,onChange:k=>l(k.target.value)}),s.jsx("button",{type:"button",onClick:()=>m(k=>!k),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center gap-2 rounded-lg border border-transparent px-3 text-xs font-medium text-emerald-600 transition hover:border-emerald-200 hover:bg-emerald-50 hover:text-emerald-700 dark:text-emerald-300 dark:hover:border-emerald-500/50 dark:hover:bg-emerald-500/10",children:f?"Ocultar":"Mostrar"})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:k=>u(k.target.checked),className:"h-4 w-4 rounded border-slate-300 text-emerald-500 focus:ring-emerald-400 dark:border-slate-600"}),"Lembrar de mim"]}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Esqueceu seus dados? Fale com o administrador."})]}),v&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-emerald-300/60 bg-emerald-50 px-3 py-2 text-sm text-emerald-700 dark:border-emerald-500/40 dark:bg-emerald-500/10 dark:text-emerald-200",children:[s.jsx("span",{className:"text-base",children:""}),s.jsx("span",{children:v})]}),D&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-300/60 bg-red-50/80 px-3 py-2 text-sm text-red-600 dark:border-red-500/40 dark:bg-red-500/10 dark:text-red-200",children:[s.jsx("span",{className:"text-base",children:""}),s.jsx("span",{children:D})]}),s.jsx("button",{type:"submit",disabled:N,className:"inline-flex h-12 items-center justify-center rounded-2xl bg-gradient-to-r from-emerald-500 via-cyan-500 to-blue-500 px-6 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:shadow-2xl hover:shadow-emerald-500/40 disabled:opacity-60 disabled:shadow-none",children:N?"Entrando...":"Entrar"}),s.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-300",children:["No tem conta?"," ",s.jsx($n,{className:"font-medium text-emerald-600 transition hover:text-emerald-500 dark:text-emerald-300 dark:hover:text-emerald-200",to:"/register",children:"Criar cadastro"})]}),s.jsx("p",{className:"text-center text-[11px] text-slate-400 dark:text-slate-500",children:"Ao continuar voc concorda com os termos de uso e poltica de privacidade da Farmachat."})]})]})})]})}function Vw(){const e=pr(),[t,r]=c.useState(""),[n,a]=c.useState(""),[l,i]=c.useState(""),[u,f]=c.useState(""),[m,v]=c.useState(!0),[b,N]=c.useState(!1),[C,D]=c.useState(!1),[A,I]=c.useState(!1),[k,x]=c.useState(null),[y,E]=c.useState(""),[_,U]=c.useState("");c.useEffect(()=>()=>{y&&URL.revokeObjectURL(y)},[y]);async function V(O){if(O.preventDefault(),!m){U("Confirme que leu e aceita os termos de uso.");return}if(U(""),l!==u){U("As senhas no conferem.");return}I(!0);try{const P=new FormData;P.append("name",t.trim()),P.append("email",n.trim()),P.append("password",l),k&&P.append("avatar",k),await Vy.upload("/auth/register",P),e("/login?registered=1")}catch(P){U(P.message||"Falha no cadastro. Tente novamente.")}finally{I(!1)}}function Q(O){var ee;const P=((ee=O.target.files)==null?void 0:ee[0])||null;x(P),y&&URL.revokeObjectURL(y),E(P?URL.createObjectURL(P):"")}return s.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-100",children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[s.jsx("div",{className:"absolute -top-28 -left-36 h-80 w-80 rounded-full bg-cyan-400/25 blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-7rem] right-[-6rem] h-96 w-96 rounded-full bg-emerald-500/25 blur-3xl"}),s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(14,165,233,0.18),transparent_60%)]"}),s.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(135deg,rgba(15,23,42,0.65),rgba(15,23,42,0.92))]"})]}),s.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-6 py-12",children:s.jsxs("div",{className:"grid w-full max-w-5xl gap-10 rounded-[2.5rem] border border-white/5 bg-white/5 p-8 shadow-[0_22px_80px_-28px_rgba(14,116,144,0.8)] backdrop-blur-lg lg:grid-cols-[1.05fr_1fr] lg:p-12",children:[s.jsxs("div",{className:"hidden flex-col justify-between lg:flex",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("span",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-1 text-sm text-slate-200",children:[s.jsx("span",{className:"h-2 w-2 animate-pulse rounded-full bg-emerald-400"}),"Crie sua conta em minutos"]}),s.jsx("h1",{className:"text-4xl font-semibold leading-tight text-white",children:"Personalize seu atendimento com o poder do Farmachat"}),s.jsx("p",{className:"text-lg text-slate-300",children:"Gesto de equipes, dashboards inteligentes e integraes prontas para canais que o seu cliente ama usar."})]}),s.jsxs("ul",{className:"mt-10 space-y-4 text-sm text-slate-200/80",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-200",children:""}),"Fluxos automticos e organizao de filas de atendimento."]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-cyan-500/20 text-cyan-200",children:""}),"Biblioteca de templates, etiquetas e respostas salvas."]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500/20 text-blue-200",children:""}),"Times ilimitados, usurios convidados e permisses customizadas."]})]})]}),s.jsxs("form",{onSubmit:V,className:"relative flex flex-col gap-5 rounded-3xl border border-white/10 bg-white/90 p-8 text-slate-900 shadow-2xl backdrop-blur dark:bg-slate-900/85 dark:text-slate-100",noValidate:!0,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/images/logo.png",alt:"Farmachat",className:"h-10 w-auto",draggable:!1}),s.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-300",children:"Novo portal de atendimento"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("h2",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"Criar conta"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Preencha os dados abaixo para ativar seu espao de trabalho."})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Nome completo"}),s.jsx("input",{id:"name",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Como devemos te chamar?",value:t,onChange:O=>r(O.target.value),required:!0})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"E-mail corporativo"}),s.jsx("input",{id:"email",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"voce@empresa.com",type:"email",autoComplete:"email",value:n,onChange:O=>a(O.target.value),required:!0})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-28 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Crie uma senha",type:b?"text":"password",minLength:8,value:l,onChange:O=>i(O.target.value),required:!0}),s.jsx("button",{type:"button",onClick:()=>N(O=>!O),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center rounded-lg border border-transparent px-3 text-xs font-medium text-cyan-600 transition hover:border-cyan-200 hover:bg-cyan-50 hover:text-cyan-700 dark:text-cyan-200 dark:hover:border-cyan-400/50 dark:hover:bg-cyan-500/10",children:b?"Ocultar":"Mostrar"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"confirm",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Confirmar senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirm",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-28 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Repita a senha",type:C?"text":"password",minLength:8,value:u,onChange:O=>f(O.target.value),required:!0}),s.jsx("button",{type:"button",onClick:()=>D(O=>!O),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center rounded-lg border border-transparent px-3 text-xs font-medium text-cyan-600 transition hover:border-cyan-200 hover:bg-cyan-50 hover:text-cyan-700 dark:text-cyan-200 dark:hover:border-cyan-400/50 dark:hover:bg-cyan-500/10",children:C?"Ocultar":"Mostrar"})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Foto de perfil (opcional)"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:y?s.jsx("img",{src:y,alt:"Pr-visualizao do avatar",className:"h-full w-full object-cover"}):s.jsx("div",{className:"grid h-full w-full place-items-center text-xs text-slate-400 dark:text-slate-500",children:"sem foto"})}),s.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-cyan-200 hover:text-cyan-600 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-cyan-500/60 dark:hover:text-cyan-300",children:[s.jsx("span",{children:"Carregar imagem"}),s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Q})]})]})]}),s.jsxs("label",{className:"mt-1 inline-flex items-start gap-3 text-xs text-slate-500 dark:text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:O=>v(O.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300 text-cyan-500 focus:ring-cyan-400 dark:border-slate-600"}),s.jsx("span",{children:"Li e concordo com os termos de uso, poltica de privacidade e boas prticas da Farmachat."})]}),_&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-300/60 bg-red-50/80 px-3 py-2 text-sm text-red-600 dark:border-red-500/40 dark:bg-red-500/10 dark:text-red-200",children:[s.jsx("span",{className:"text-base",children:""}),s.jsx("span",{children:_})]}),s.jsx("button",{type:"submit",disabled:A,className:"inline-flex h-12 items-center justify-center rounded-2xl bg-gradient-to-r from-cyan-500 via-emerald-500 to-blue-500 px-6 text-sm font-semibold text-white shadow-lg shadow-cyan-500/25 transition hover:shadow-2xl hover:shadow-cyan-500/35 disabled:opacity-60 disabled:shadow-none",children:A?"Cadastrando...":"Criar minha conta"}),s.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-300",children:["J possui conta?"," ",s.jsx($n,{className:"font-medium text-cyan-600 transition hover:text-cyan-500 dark:text-cyan-300 dark:hover:text-cyan-200",to:"/login",children:"Entrar"})]}),s.jsx("p",{className:"text-center text-[11px] text-slate-400 dark:text-slate-500",children:"Suporte 24/7 e implementao assistida inclusos para novos clientes."})]})]})})]})}function Ww({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"})})}function Hw({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}function qw({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}function zu({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function Qw({className:e="w-5 h-5"}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",children:[s.jsx("circle",{cx:"5",cy:"12",r:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"}),s.jsx("circle",{cx:"19",cy:"12",r:"2"})]})}function Gw({className:e="w-5 h-5"}){return s.jsx("span",{className:e,role:"img","aria-label":"emoji",children:""})}function Uh({className:e="w-4 h-4",filled:t=!1}){return t?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:e,children:s.jsx("path",{d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l1.63 3.918 4.254.372c1.164.102 1.636 1.545.749 2.32l-3.244 2.76 1.003 4.135c.274 1.127-.964 1.997-1.96 1.4L12 15.64 8.356 18.116c-.996.598-2.234-.273-1.96-1.4l1.003-4.135-3.244-2.76c-.887-.775-.415-2.218.749-2.32l4.254-.372 1.63-3.918z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:s.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l1.4 3.36a.562.562 0 00.46.345l3.633.314a.562.562 0 01.32.98l-2.77 2.357a.562.562 0 00-.182.536l.82 3.493a.562.562 0 01-.84.61l-3.1-1.87a.562.562 0 00-.586 0l-3.1 1.87a.562.562 0 01-.84-.61l.82-3.493a.562.562 0 00-.182-.536l-2.77-2.357a.562.562 0 01.32-.98l3.633-.314a.562.562 0 00.46-.345l1.4-3.36z"})})}const Kw="BLX4iWgrhNgMUBR7yYLSu_LLHgE0ZbrFlrY9UBd3hGAfXc6SrOTcsVf2tdI1hJEzcXG3cg8NFIkNmvDXIK8sKm0",Mh={attached:!1};function Zw(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=atob(r),a=new Uint8Array(n.length);for(let l=0;l<n.length;l+=1)a[l]=n.charCodeAt(l);return a}async function Jw(){try{const{key:e}=await H.get("/push/vapid-public-key");if(e)return e}catch{}return Kw}async function D0(e){if(!e)return null;try{await H.post("/push/subscribe",{subscription:e})}catch(t){console.error("Falha ao registrar subscription no servidor",t)}return e}function Yw(){if(!(Mh.attached||typeof navigator>"u"||!navigator.serviceWorker))try{navigator.serviceWorker.addEventListener("message",async e=>{var t;if(((t=e==null?void 0:e.data)==null?void 0:t.type)==="push:subscription")try{await D0(e.data.subscription)}catch{}}),Mh.attached=!0}catch{}}async function Xw(){if(typeof window>"u"||!("serviceWorker"in navigator)||!("PushManager"in window))return null;Yw();const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();if(!t){const r=await Jw(),n=Zw(r);t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})}return await D0(t),t}const _o={recent:[],caras:["","","","","","","","","","","","","","","","","","","","","","","",""],gestos:["","","","","","","","","","","","","","","",""],amor:["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],animais:["","","","","","","","","","","","","","","",""],comida:["","","","","","","","","","","","","","","","","","","","","","","","","","",""],objetos:["","","","","","","","","","","","","","",""],transportes:["","","","","","","","","",""],clima:["","","","","","","","","","","","","","","","","","","",""],natureza:["","","","","","","","","","","","","","","","","","","","",""]},e1=[{key:"recent",label:"Recentes",icon:""},{key:"favoritos",label:"Favoritos",icon:""},{key:"caras",label:"Caras",icon:""},{key:"gestos",label:"Gestos",icon:""},{key:"amor",label:"Amor",icon:""},{key:"natureza",label:"Natureza",icon:""},{key:"clima",label:"Clima",icon:""},{key:"animais",label:"Animais",icon:""},{key:"comida",label:"Comida",icon:""},{key:"objetos",label:"Objetos",icon:""},{key:"transportes",label:"Transp.",icon:""}];function Lt(e){return Array.isArray(e)?e:[]}function t1(e){if(!Number.isFinite(e)||e<=0)return"";const t=Math.floor(e),r=Math.floor(t/60),n=t%60;return`${r}:${n.toString().padStart(2,"0")}`}function r1(e){return e?e.split(/(\*[^*\n]+\*)/g).map((r,n)=>r.startsWith("*")&&r.endsWith("*")&&r.length>2?s.jsx("strong",{children:r.slice(1,-1)},n):s.jsx(yi.Fragment,{children:r},n)):null}const Ao=50;function _0(){var pf,mf;const[e,t]=c.useState([]),[r,n]=c.useState([]),[a,l]=c.useState([]),[i,u]=c.useState(null),[f,m]=c.useState([]),[v,b]=c.useState(""),[N,C]=c.useState([]),[D,A]=c.useState(!1),[I,k]=c.useState(()=>typeof document>"u"?!1:document.documentElement.classList.contains("dark")),[x,y]=c.useState(""),[E,_]=c.useState(null),[U,V]=c.useState(null),[Q,O]=c.useState(""),[P,ee]=c.useState(!1),[me,$]=c.useState(""),[re,xe]=c.useState(""),[Se,nt]=c.useState(!1),[W,B]=c.useState(!1),[ne,T]=c.useState(""),[J,ce]=c.useState(null),ie=c.useCallback(()=>{V(null)},[]),[fe,he]=c.useState(!1),[He,ze]=c.useState(""),[qe,Ur]=c.useState(0),[ae,Dl]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_pins")||"{}")}catch{return{}}}),[Ue,_l]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_mutes")||"{}")}catch{return{}}}),[Mr,Xn]=c.useState(()=>{try{const o=localStorage.getItem("chat_conversation_order"),d=o?JSON.parse(o):[];return Array.isArray(d)?d:[]}catch{return[]}}),bn=c.useCallback(o=>{try{localStorage.setItem("chat_conversation_order",JSON.stringify(o))}catch{}},[]),Al=c.useCallback(o=>{o&&Xn(d=>{const p=[o,...d.filter(g=>g!==o)];return bn(p),p})},[bn]),st=c.useCallback((o=[])=>{o.length&&Xn(d=>{const p=new Set(d),g=[];if(o.filter(S=>S&&S.id).sort((S,R)=>{const L=ge(S.ts);return ge(R.ts)-L}).forEach(({id:S})=>{p.has(S)||(g.push(S),p.add(S))}),!g.length)return d;const j=[...d,...g];return bn(j),j})},[bn]);function es(o){Dl(d=>{const p={...d||{}};p[o]=!p[o];try{localStorage.setItem("chat_pins",JSON.stringify(p))}catch{}return p})}function K(o){_l(d=>{const p={...d||{}};p[o]=!p[o];try{localStorage.setItem("chat_mutes",JSON.stringify(p))}catch{}return p})}const[Jt,vt]=c.useState(null),kn=c.useRef(null),ts=c.useCallback(o=>{kn.current=o},[]),[mr,jn]=c.useState(null),Yt=c.useCallback((o,d=2e3)=>{if(o){if(jn(o),wr.current)try{clearTimeout(wr.current)}catch{}wr.current=setTimeout(()=>{jn(p=>p===o?null:p),wr.current=null},d)}},[]),rs=c.useCallback(o=>{if(!o||typeof document>"u")return!1;const d=document.getElementById(`msg-${o}`);if(!d)return!1;try{d.scrollIntoView({behavior:"smooth",block:"center"})}catch{}return Yt(o),!0},[Yt]),[_t,gr]=c.useState(""),[Rl,Xt]=c.useState(""),[$r,ns]=c.useState(""),[Nn,Br]=c.useState(!1),ss=c.useRef(null),[Sn,Ys]=c.useState({left:4,bottom:120,width:360,maxHeight:416}),Xs=c.useRef(null);function Ll(){try{const o=ss.current,d=Xs.current,p=typeof window<"u"?window.innerWidth:800,g=typeof window<"u"?window.innerHeight:600,j=4,S=4,R=Math.min(26*16,g-j*2),L=se=>se&&se.getBoundingClientRect?se.getBoundingClientRect():null,z=L(d),q=L(o);if(z||q){const se=z?Math.min(420,Math.max(320,z.width||420)):Math.min(420,Math.max(320,p*.95)),be=Math.min(se,p-j*2),Ee=z?z.left:q?q.left:j,Pe=j,Me=z?z.top:q?q.top:g/2,Rt=Math.max(j,g-Me+S);Ys({left:Pe,bottom:Rt,width:be,maxHeight:R})}else Ys({left:j,bottom:120,width:Math.min(420,Math.max(320,p*.95)),maxHeight:R})}catch{}Br(!0)}const[le,dt]=c.useState({open:!1,type:null,id:null,groupId:null,x:0,y:0}),ea=c.useRef(null),Mi=c.useCallback(()=>{try{window.dispatchEvent(new CustomEvent("chat:themeToggle",{detail:"toggle"}))}catch{}},[]);yi.useMemo(()=>{try{const o=Object.keys(_o).filter(g=>g!=="recent"&&g!=="bandeiras"),d=[];o.forEach(g=>{(_o[g]||[]).forEach(j=>d.push(j))});const p=new Set;return d.filter(g=>p.has(g)?!1:(p.add(g),!0))}catch{return[]}},[]);const[Re,En]=c.useState("caras"),[Cn,ta]=c.useState(()=>{try{const o=localStorage.getItem("chat_recent_emojis"),d=o?JSON.parse(o):[];return Array.isArray(d)?d.slice(0,24):[]}catch{return[]}}),[Pl,ra]=c.useState(""),[Dn,Il]=c.useState(()=>{try{const o=localStorage.getItem("chat_fav_emojis"),d=o?JSON.parse(o):[];return Array.isArray(d)?d.slice(0,48):[]}catch{return[]}});function Tl(o){try{Il(d=>{const g=(d||[]).includes(o)?(d||[]).filter(j=>j!==o):[o,...(d||[]).filter(j=>j!==o)].slice(0,48);try{localStorage.setItem("chat_fav_emojis",JSON.stringify(g))}catch{}return g})}catch{}}const na=c.useRef(null),sa=c.useRef({}),Fl=o=>d=>{d&&(sa.current[o]=d)};c.useEffect(()=>()=>{if(wr.current){try{clearTimeout(wr.current)}catch{}wr.current=null}},[]);const aa=["recent","favoritos","caras","gestos","amor","natureza","clima","animais","comida","objetos","transportes"];c.useEffect(()=>{if(!Nn)return;const o=na.current;if(!o)return;let d=!1;const p=()=>{d||(d=!0,requestAnimationFrame(()=>{try{let g=Re;for(const j of aa){const S=sa.current[j];if(!S)continue;S.offsetTop-o.scrollTop<=32&&(g=j)}g&&g!==Re&&En(g)}finally{d=!1}}))};return o.addEventListener("scroll",p,{passive:!0}),()=>o.removeEventListener("scroll",p)},[Nn,Pl,Re]);const _n=c.useRef(null),er=c.useRef(null),xr=c.useRef(null),An=c.useRef(null),vr=c.useRef(!1),as=c.useRef(null),ls=c.useRef(null),at=c.useRef(null),Y=Us(),os=pr(),[zr,la]=c.useState(null),[yt,oa]=c.useState(""),yr=c.useRef(null),is=c.useRef(null),wr=c.useRef(null),[br,us]=c.useState(""),[cs,tr]=c.useState(!1),ia=c.useRef([]),Vr=c.useRef(0),[ds,Rn]=c.useState(!1),ua=c.useRef(null);c.useEffect(()=>{ia.current=N},[N]),c.useEffect(()=>()=>{ia.current.forEach(o=>{if(o!=null&&o.preview)try{URL.revokeObjectURL(o.preview)}catch{}})},[]),c.useEffect(()=>{Vr.current=0,A(!1)},[i]),c.useEffect(()=>{const o=d=>{k((d==null?void 0:d.detail)==="dark")};return window.addEventListener("chat:themeChanged",o),()=>window.removeEventListener("chat:themeChanged",o)},[]),c.useEffect(()=>{k(document.documentElement.classList.contains("dark"))},[]),c.useEffect(()=>{if(!U){O(""),$(""),xe(""),ee(!1);return}const o=d=>{d.key==="Escape"&&V(null)};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[U]);function $i(o){var d;return{id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,file:o,preview:(d=o==null?void 0:o.type)!=null&&d.startsWith("image/")?URL.createObjectURL(o):null}}function Ol(o){if(!o)return"";const{name:d="",size:p=0,lastModified:g=0,type:j=""}=o;return`${d}::${p}::${g||0}::${j}`}function ca(o=[]){o.length&&C((d=[])=>{const p=new Set(d.map(j=>j!=null&&j.file?Ol(j.file):j==null?void 0:j.id).filter(Boolean)),g=[];for(const j of o){if(!j)continue;const S=Ol(j);p.has(S)||(p.add(S),g.push($i(j)))}return g.length?[...d,...g]:d})}function Ul(o){C(d=>{const p=d.find(g=>g.id===o);if(p!=null&&p.preview)try{URL.revokeObjectURL(p.preview)}catch{}return d.filter(g=>g.id!==o)})}function da(){ia.current.forEach(o=>{if(o!=null&&o.preview)try{URL.revokeObjectURL(o.preview)}catch{}}),C([]);try{er.current&&(er.current.value="")}catch{}}function fa(o){var p;const d=o==null?void 0:o.dataTransfer;if(!d)return!1;if(d.types){if(typeof d.types.contains=="function"&&d.types.contains("Files"))return!0;try{if(Array.from(d.types).includes("Files"))return!0}catch{}}if(d.items&&d.items.length){for(let g=0;g<d.items.length;g++)if(((p=d.items[g])==null?void 0:p.kind)==="file")return!0}return!!(d.files&&d.files.length)}function ha(o){fa(o)&&(o.preventDefault(),o.stopPropagation(),i&&(o.currentTarget&&o.relatedTarget&&o.currentTarget.contains(o.relatedTarget)||(Vr.current+=1,D||A(!0))))}function Bi(o){!i||!D||o.currentTarget&&o.relatedTarget&&o.currentTarget.contains(o.relatedTarget)||(o.preventDefault(),o.stopPropagation(),Vr.current=Math.max(0,Vr.current-1),Vr.current===0&&A(!1))}function zi(o){if(i&&fa(o)){o.preventDefault(),o.stopPropagation();try{o.dataTransfer.dropEffect=i?"copy":"none"}catch{}}}function pa(o){var p,g;if(!fa(o))return;o.preventDefault(),o.stopPropagation(),Vr.current=0,A(!1);const d=Array.from(((p=o.dataTransfer)==null?void 0:p.files)||[]);if(!(!i||!d.length)){ca(d);try{(g=_n.current)==null||g.focus()}catch{}}}async function Vi(o,d="arquivo"){try{const p=typeof jt=="function"?jt():null,g=p?{Authorization:`Bearer ${p}`}:{},j=await fetch(o,{mode:"cors",credentials:"same-origin",headers:g});if(!j.ok)throw new Error("Falha ao baixar arquivo");const S=await j.blob(),R=URL.createObjectURL(S),L=document.createElement("a");L.href=R,L.download=d,document.body.appendChild(L),L.click(),L.remove(),setTimeout(()=>URL.revokeObjectURL(R),1500)}catch(p){y((p==null?void 0:p.message)||"No foi possvel baixar o arquivo");try{const g=document.createElement("a");g.href=o,g.rel="noopener noreferrer",g.target="_blank",g.download=d,document.body.appendChild(g),g.click(),g.remove()}catch{}}}c.useEffect(()=>{if(!Jt)return;const o=d=>{const p=kn.current;if(!p){vt(null);return}p.contains(d.target)||vt(null)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[Jt]),c.useEffect(()=>{if(!(le!=null&&le.open))return;const o=p=>{const g=ea.current;if(!g){dt(j=>({...j,open:!1}));return}g.contains(p.target)||dt(j=>({...j,open:!1}))},d=p=>{p.key==="Escape"&&dt(g=>({...g,open:!1}))};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o),document.removeEventListener("keydown",d)}},[le==null?void 0:le.open]),c.useEffect(()=>{if(!ds)return;const o=p=>{const g=ua.current;if(!g){Rn(!1);return}g.contains(p.target)||Rn(!1)},d=p=>{p.key==="Escape"&&Rn(!1)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o),document.removeEventListener("keydown",d)}},[ds]);const Ln=typeof window<"u"&&"Notification"in window,Wi=(()=>{if(!Ln)return"default";try{return Notification.permission}catch{return"default"}})(),[fs,Ml]=c.useState(Wi==="granted"),$l=c.useRef(typeof document<"u"?document.title:"Chat"),Pn=c.useRef(null),kr=c.useRef({url:"",buffer:null}),[Bl,zl]=c.useState(()=>{try{return!document.hidden&&document.hasFocus()}catch{return!0}}),Hi=!0,[ma,ga]=c.useState("");c.useEffect(()=>{const o=()=>{try{zl(!document.hidden&&document.hasFocus())}catch{zl(!0)}};return o(),window.addEventListener("focus",o),window.addEventListener("blur",o),document.addEventListener("visibilitychange",o),()=>{window.removeEventListener("focus",o),window.removeEventListener("blur",o),document.removeEventListener("visibilitychange",o)}},[]),c.useEffect(()=>{if(!Ln||!fs)return;let o=!1;return(async()=>{try{await Xw(),o||ga("")}catch(d){o||ga((d==null?void 0:d.message)||"Falha ao registrar push")}})(),()=>{o=!0}},[Ln,fs]),c.useEffect(()=>{const o=()=>{try{const d=localStorage.getItem("notif_sound_url")||"";d?kr.current.url!==d&&(kr.current={url:d,buffer:null}):kr.current={url:"",buffer:null}}catch{}};return o(),window.addEventListener("chat:alertSoundUpdated",o),()=>window.removeEventListener("chat:alertSoundUpdated",o)},[]),c.useEffect(()=>{if(!Ln)return;let o=!1;const d=()=>{try{const p=Notification.permission;o||Ml(p==="granted")}catch{}};d();try{Notification.permission==="default"&&Notification.requestPermission().then(p=>{o||Ml(p==="granted")})}catch{}return window.addEventListener("focus",d),document.addEventListener("visibilitychange",d),()=>{o=!0,window.removeEventListener("focus",d),document.removeEventListener("visibilitychange",d)}},[Ln]);function Wr(o,{skipForward:d=!1}={}){if(!o)return"";if(!d&&o.forwardedFrom){if(o.type==="text"&&o.content)return o.content||"";const p=Wr(o.forwardedFrom,{skipForward:!0});return p?`Encaminhada: ${p}`:"Encaminhada"}return o.type==="text"?o.content||"":o.type==="image"||o.type==="gif"?"Imagem":o.type==="audio"?"udio":"Anexo"}function ge(o){if(typeof o=="number")return Number.isFinite(o)?o:0;if(typeof o=="string"&&o){const d=Date.parse(o);return Number.isNaN(d)?0:d}return 0}function Vl(o,d){var q,X;if(!o)return o;const p=o.lastMessage||o.latestMessage||o.message||o.lastMessagePreview||null,g=ge(o._lastAt)||ge(o.lastAt)||ge(o.lastMessageAt)||ge(p==null?void 0:p.createdAt)||ge(p==null?void 0:p.timestamp)||ge(o.updatedAt)||ge(o.createdAt)||d||0;let j=o._lastPreview!==void 0&&o._lastPreview!==null?o._lastPreview:o.lastPreview!==void 0&&o.lastPreview!==null?o.lastPreview:o.preview!==void 0&&o.preview!==null?o.preview:"";if(!j&&p){const se=p.type||p.messageType||"text";se==="text"?j=p.content||"":se==="image"||se==="gif"?j="Imagem":se==="audio"?j="udio":j="Anexo";const be=((q=p.author)==null?void 0:q.id)||p.authorId||p.userId||null;j&&be&&be===(Y==null?void 0:Y.id)&&(j=`Voc: ${j}`)}const S=ge(o._lastReceivedAt)||ge(o.lastIncomingAt)||ge(o.lastReceivedAt)||ge(o.lastSeenAt)||0,R=((X=p==null?void 0:p.author)==null?void 0:X.id)||(p==null?void 0:p.authorId)||(p==null?void 0:p.userId)||null,z=(R&&(Y!=null&&Y.id)?R!==Y.id:!!(p!=null&&p.from))?g:S;return{...o,_lastAt:g,_lastPreview:j,_lastReceivedAt:z}}function xa(o){const d=Date.now();return(o||[]).map((p,g)=>Vl(p,d-g)).sort((p,g)=>{const j=ae!=null&&ae[p==null?void 0:p.id]?1:0,S=ae!=null&&ae[g==null?void 0:g.id]?1:0;if(j!==S)return S-j;const R=ft(p),L=ft(g);if(R!==L)return L-R;const z=ge(p==null?void 0:p._lastAt),q=ge(g==null?void 0:g._lastAt);return z!==q?q-z:ge(g==null?void 0:g.updatedAt)-ge(p==null?void 0:p.updatedAt)})}const ft=c.useCallback(o=>{if(!o)return 0;const d=ge(o._lastReceivedAt);return d>0?d:ge(o._lastAt)},[]),jr=c.useCallback(o=>{if(!o)return Number.MAX_SAFE_INTEGER;const d=Mr.indexOf(o);return d>=0?d:Number.MAX_SAFE_INTEGER},[Mr]);function Hr(o,{mine:d=!1}={}){if(!o||!o.groupId)return;const p=(()=>{try{return new Date(o.createdAt||Date.now()).getTime()}catch{return Date.now()}})();let g=Wr(o);d&&g&&(g=`Voc: ${g}`);const j=(i==null?void 0:i.id)===o.groupId;Al(o.groupId),t(S=>(S||[]).map(R=>{if(!R||R.id!==o.groupId)return R;const L=ge(R._lastReceivedAt),z={...R,_lastAt:p,_lastPreview:g,_lastReceivedAt:d?L:p};return j?z._unread=0:d||(z._unread=(R._unread||0)+1),z})),n(S=>(S||[]).map(R=>{if(!R||R.groupId!==o.groupId)return R;const L=ge(R._lastReceivedAt),z={...R,_lastAt:p,_lastPreview:g,_lastReceivedAt:d?L:p};return j?z._unread=0:d||(z._unread=(R._unread||0)+1),z}))}function In(o){try{if(!o)return"";try{const j=new URL(o,typeof window<"u"?window.location.origin:"http://localhost").searchParams.get("name");if(j)return j}catch{}const p=String(o).split("?")[0].split("/").pop()||"";return decodeURIComponent(p)}catch{return String(o||"")}}function Wl(o){var d,p;try{if(!fs)return;const g=((d=o==null?void 0:o.author)==null?void 0:d.name)||"Mensagem",j=Wr(o),S=(p=o==null?void 0:o.author)!=null&&p.avatarUrl?zt(o.author.avatarUrl):void 0,R=new Notification(g,{body:j,icon:S});R.onclick=()=>{var L,z,q,X;try{(L=window==null?void 0:window.focus)==null||L.call(window)}catch{}try{u({id:o.groupId,name:((z=o.group)==null?void 0:z.name)||"Direto",avatarUrl:((q=o.group)==null?void 0:q.avatarUrl)||((X=o.author)==null?void 0:X.avatarUrl)||void 0}),sr()}catch{}try{R.close()}catch{}},setTimeout(()=>{try{R.close()}catch{}},8e3)}catch{}}async function Tn(){try{const o=window.AudioContext||window.webkitAudioContext;if(!o)return;Pn.current||(Pn.current=new o);const d=Pn.current;try{const j=localStorage.getItem("notif_sound_url")||"";if(j){if(kr.current.url!==j||!kr.current.buffer){const z=await(await fetch(j)).arrayBuffer(),q=await d.decodeAudioData(z.slice(0));kr.current={url:j,buffer:q}}const S=d.createBufferSource();S.buffer=kr.current.buffer;const R=d.createGain();R.gain.setValueAtTime(1e-4,d.currentTime),R.gain.exponentialRampToValueAtTime(.35,d.currentTime+.01),R.gain.exponentialRampToValueAtTime(1e-4,d.currentTime+Math.min(1.2,S.buffer.duration)),S.connect(R).connect(d.destination),S.start();return}}catch{}const p=d.createOscillator(),g=d.createGain();p.type="sine",p.frequency.value=880,g.gain.setValueAtTime(1e-4,d.currentTime),g.gain.exponentialRampToValueAtTime(.2,d.currentTime+.01),g.gain.exponentialRampToValueAtTime(1e-4,d.currentTime+.45),p.connect(g).connect(d.destination),p.start(),p.stop(d.currentTime+.5)}catch{}}c.useEffect(()=>{function o(){var d,p;try{(p=(d=Pn.current)==null?void 0:d.resume)==null||p.call(d)}catch{}try{window.removeEventListener("click",o),window.removeEventListener("keydown",o),window.removeEventListener("touchstart",o)}catch{}}return window.addEventListener("click",o),window.addEventListener("keydown",o),window.addEventListener("touchstart",o),()=>{try{window.removeEventListener("click",o),window.removeEventListener("keydown",o),window.removeEventListener("touchstart",o)}catch{}}},[]),c.useEffect(()=>{try{const o=(e||[]).reduce((d,p)=>d+(p._unread||0),0)+(r||[]).reduce((d,p)=>d+(p._unread||0),0);o>0?document.title=`(${o}) ${$l.current}`:document.title=$l.current}catch{}},[e,r]);const[At,hs]=c.useState(""),[Nr,rr]=c.useState([]),[qr,$t]=c.useState(-1),[Hl,va]=c.useState(!1),[ql,ps]=c.useState(!1),[Ql,ms]=c.useState("self"),[nr,Gl]=c.useState(null),[ve,qi]=c.useState(null),[Kl,Zl]=c.useState([]),[Qi,ya]=c.useState(!1),[Jl,wa]=c.useState(""),[ba,ka]=c.useState([]),[Yl,h]=c.useState(!1),[w,F]=c.useState(""),[G,te]=c.useState("perfil"),[Le,Te]=c.useState(""),[Qr,Kd]=c.useState(""),[ja,Zd]=c.useState(""),[Gi,Xl]=c.useState(""),[Na,eo]=c.useState(null),[Ki,Jd]=c.useState(""),[Zi,Yd]=c.useState(""),[Xd,Fn]=c.useState(""),[ef,Sr]=c.useState(""),[tf,Ji]=c.useState([]),[Yi,Xi]=c.useState({});function to(o){var d;return!!((d=Yi==null?void 0:Yi[(i==null?void 0:i.id)||""])!=null&&d[o])}const rf=c.useRef(null),[On,A0]=c.useState(()=>{try{return typeof window>"u"?!0:window.innerWidth>=1024}catch{return!0}}),[ro,Sa]=c.useState(()=>{try{return typeof window>"u"?!0:window.innerWidth>=1024}catch{return!0}}),sr=c.useCallback(()=>{try{typeof window<"u"&&window.innerWidth<1024&&Sa(!1)}catch{}},[Sa]);c.useEffect(()=>{if(typeof window>"u")return;const o=()=>{try{const d=window.innerWidth>=1024;A0(d),d&&Sa(!0)}catch{}};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const[Ea,R0]=c.useState(()=>{try{return localStorage.getItem("chat_groups_collapsed")==="1"}catch{}return!1}),[Ca,L0]=c.useState(()=>{try{return localStorage.getItem("chat_people_collapsed")==="1"}catch{}return!1});c.useEffect(()=>{try{localStorage.setItem("chat_groups_collapsed",Ea?"1":"0")}catch{}},[Ea]),c.useEffect(()=>{try{localStorage.setItem("chat_people_collapsed",Ca?"1":"0")}catch{}},[Ca]);async function eu(o){if(!(!(i!=null&&i.id)||!(o!=null&&o.id)))try{to(o.id)?(await H.del(`/messages/${o.id}/favorite`),Xi(d=>{const p={...d||{}},g={...p[i.id]||{}};return delete g[o.id],p[i.id]=g,p}),Ji(d=>d.filter(p=>p.id!==o.id))):(await H.post(`/messages/${o.id}/favorite`,{}),Xi(d=>({...d,[i.id]:{...(d||{})[i.id]||{},[o.id]:!0}})),Ji(d=>d!=null&&d.some(p=>p.id===o.id)?d:[o,...d||[]]))}catch{}}const tu=c.useMemo(()=>{const o={};return(r||[]).forEach(d=>{var p;d!=null&&d.groupId&&((p=d==null?void 0:d.other)!=null&&p.id)&&(o[d.groupId]=d.other.id)}),o},[r]);c.useEffect(()=>{(async()=>{var o;if(i!=null&&i.id)try{const d=Lt(await H.get(`/messages/favorites?groupId=${i.id}`)),p={},g=[];for(const j of d)(o=j==null?void 0:j.message)!=null&&o.id&&(p[j.message.id]=!0,g.push(j.message));Xi(j=>({...j,[i.id]:p})),Ji(g)}catch{}})()},[i==null?void 0:i.id,Ue,tu]);const P0=c.useRef(null),[I0,nf]=c.useState({});c.useEffect(()=>{const o=_r(),d=Y==null?void 0:Y.id,p=(()=>{try{return localStorage.getItem("chat_status")||"online"}catch{return"online"}})();try{o.emit("presence:online",{userId:d,status:p})}catch{}const g=(S={})=>{try{const R={};for(const L of S.users||[])L!=null&&L.userId&&(R[L.userId]=L.status||"online");nf(R)}catch{}},j=(S={})=>{S!=null&&S.userId&&nf(R=>({...R,[S.userId]:S.status||"online"}))};o.on("presence:snapshot",g),o.on("presence:update",j);try{o.emit("presence:who")}catch{}return()=>{try{o.off("presence:snapshot",g),o.off("presence:update",j)}catch{}}},[Y==null?void 0:Y.id]);const Da=c.useMemo(()=>{var p;const o=i==null?void 0:i.id;if(!o)return null;const d=r.find(g=>g.groupId===o);return((p=d==null?void 0:d.other)==null?void 0:p.id)||null},[r,i==null?void 0:i.id]),no=c.useMemo(()=>{var d;if(Da)return Da;const o=(f||[]).find(p=>{var g,j;return(((g=p.author)==null?void 0:g.id)||p.authorId)&&(((j=p.author)==null?void 0:j.id)||p.authorId)!==(Y==null?void 0:Y.id)});return o?((d=o.author)==null?void 0:d.id)||o.authorId:null},[Da,f,Y==null?void 0:Y.id]),sf=c.useMemo(()=>Lt(e).map(o=>({kind:"conversation",groupId:o.id,label:o.name||"Grupo",subtitle:o.description||"",avatarUrl:o.avatarUrl||"",sourceLabel:"Grupo"})),[e]),af=c.useMemo(()=>Lt(r).map(o=>{var d,p,g,j;return{kind:"conversation",groupId:o.groupId,label:((d=o.other)==null?void 0:d.name)||"Direto",subtitle:((p=o.other)==null?void 0:p.email)||((g=o.other)==null?void 0:g.phone)||"",avatarUrl:((j=o.other)==null?void 0:j.avatarUrl)||"",sourceLabel:"Direto"}}),[r]),T0=c.useMemo(()=>Lt(a).filter(o=>o&&o.id&&o.id!==(Y==null?void 0:Y.id)).map(o=>{const d=Lt(r).find(p=>{var g;return((g=p==null?void 0:p.other)==null?void 0:g.id)===o.id});return{kind:"person",userId:o.id,label:o.name||o.email||"Contato",subtitle:o.email||o.phone||"",avatarUrl:o.avatarUrl||"",existingGroupId:(d==null?void 0:d.groupId)||null}}),[a,r,Y==null?void 0:Y.id]),F0=c.useMemo(()=>[...sf,...af],[sf,af]);c.useEffect(()=>{(async()=>{var o,d,p,g;try{const j=Lt(await H.get("/groups")),S=xa(j);t(S);const R=Lt(await H.get("/dm")),L=xa(R);n(L),st([...S.map(X=>({id:X.id,ts:ft(X)})),...L.map(X=>({id:X.groupId,ts:ft(X)}))]);const z=Lt(await H.get("/users/all"));l(z);const q=localStorage.getItem("chat_active");if(q){const X=S.find(be=>be.id===q);if(X){u(X),sr();return}const se=L.find(be=>be.groupId===q);if(se){u({id:se.groupId,name:((o=se.other)==null?void 0:o.name)||"Direto",avatarUrl:((d=se.other)==null?void 0:d.avatarUrl)||void 0}),sr();return}}S[0]?(u(S[0]),sr()):L[0]&&(u({id:L[0].groupId,name:((p=L[0].other)==null?void 0:p.name)||"Direto",avatarUrl:((g=L[0].other)==null?void 0:g.avatarUrl)||void 0}),sr())}catch{y("Falha ao carregar listas")}})()},[sr,st,ft]),c.useEffect(()=>{const o=rf.current;if(!o)return;if(!On){try{o.style.transform="",o.style.transition="",o.style.display=""}catch{}return}let d=0;const p=()=>{try{if(!ro||(o.style.display!=="flex"&&(o.style.display="flex"),o.style.transition==="none"))return;o.style.transition="",o.style.transform=""}catch{}},g=()=>{cancelAnimationFrame(d),d=requestAnimationFrame(p)};g();const j=new MutationObserver(()=>g());return j.observe(o,{attributes:!0,attributeFilter:["style"]}),()=>{j.disconnect(),cancelAnimationFrame(d)}},[On,ro]),c.useEffect(()=>{function o(d){var p,g;try{(p=d.stopImmediatePropagation)==null||p.call(d),(g=d.stopPropagation)==null||g.call(d)}catch{}}return window.addEventListener("chat:openDrawer",o,!0),window.addEventListener("chat:closeDrawer",o,!0),()=>{window.removeEventListener("chat:openDrawer",o,!0),window.removeEventListener("chat:closeDrawer",o,!0)}},[]),c.useEffect(()=>{const o=_r();try{e.forEach(d=>o.emit("group:join",d.id))}catch{}},[e]),c.useEffect(()=>{const o=_r();try{r.forEach(d=>o.emit("group:join",d.groupId))}catch{}},[r]),c.useEffect(()=>{const o=_r(),d=Y==null?void 0:Y.id;if(!d)return;const p=g=>{try{const{groupId:j,userA:S,userB:R}=g||{};if(!j||!(S!=null&&S.id)||!(R!=null&&R.id)||S.id!==d&&R.id!==d)return;const L=S.id===d?R:S,z=Date.now();n(q=>(q||[]).some(X=>X.groupId===j)?q:[...q||[],{id:j,groupId:j,other:L,_unread:0,_lastAt:z}]),st([{id:j,ts:z}]),o.emit("group:join",j)}catch{}};return o.on("dm:created",p),()=>o.off("dm:created",p)},[Y==null?void 0:Y.id,st]),c.useEffect(()=>{const o=_r();function d(S,R){return((S==null?void 0:S.name)||"").localeCompare((R==null?void 0:R.name)||"","pt-BR",{sensitivity:"base"})}const p=S=>{!(S!=null&&S.id)||S.id===(Y==null?void 0:Y.id)||l(R=>{if((R||[]).some(z=>z.id===S.id))return R;const L=[...R||[],{id:S.id,name:S.name,email:S.email,phone:S.phone,avatarUrl:S.avatarUrl}];return L.sort(d),L})},g=S=>{S!=null&&S.id&&l(R=>{const L=(R||[]).map(z=>z.id===S.id?{...z,name:S.name,email:S.email,phone:S.phone,avatarUrl:S.avatarUrl}:z);return L.sort(d),L})},j=({id:S})=>{S&&l(R=>(R||[]).filter(L=>L.id!==S))};return o.on("user:created",p),o.on("user:updated",g),o.on("user:deleted",j),()=>{o.off("user:created",p),o.off("user:updated",g),o.off("user:deleted",j)}},[Y==null?void 0:Y.id]),c.useEffect(()=>{(async()=>{var o;try{const d=r.filter(g=>g&&g.groupId&&(g._lastAt===void 0||g._lastAt===null||g._lastPreview===void 0));if(!d.length)return;const p={};for(const g of d)try{const S=Lt(await H.get(`/messages/${g.groupId}?take=1`))[0]||null,R=S!=null&&S.createdAt?new Date(S.createdAt).getTime():0,L=(((o=S==null?void 0:S.author)==null?void 0:o.id)||(S==null?void 0:S.authorId))===(Y==null?void 0:Y.id);let z="";S&&(S.type==="text"?z=S.content||"":S.type==="image"||S.type==="gif"?z="Imagem":S.type==="audio"?z="udio":z="Anexo",L&&(z=`Voc: ${z}`)),p[g.groupId]={last:R,prev:z,received:L?ge(g._lastReceivedAt):R}}catch{}Object.keys(p).length&&(n(g=>g.map(j=>p[j.groupId]!==void 0?{...j,_lastAt:p[j.groupId].last,_lastPreview:p[j.groupId].prev,_lastReceivedAt:p[j.groupId].received}:j)),st(Object.entries(p).map(([g,j])=>({id:g,ts:j.last}))))}catch{}})()},[r,st]);async function O0(o){if(!o)throw new Error("Usurio invlido");try{const d=await H.get(`/dm/with/${o}`);if(d!=null&&d.groupId)return n(p=>(p||[]).map(g=>g.groupId===d.groupId?{...g,other:d.other||g.other}:g)),d.groupId}catch{}try{const d=await H.post(`/dm/${o}`);if(d!=null&&d.groupId)return n(p=>{const g=p||[],j=g.find(L=>L.groupId===d.groupId),S=j==null?void 0:j._lastAt,R=(j==null?void 0:j._unread)||0;return j?g.map(L=>L.groupId===d.groupId?{...L,other:d.other||L.other,_unread:R,_lastAt:S}:L):[...g,{id:d.groupId,groupId:d.groupId,other:d.other,_unread:R,_lastAt:S}]}),st([{id:d.groupId,ts:Date.now()}]),d.groupId}catch(d){throw new Error((d==null?void 0:d.message)||"No foi possvel iniciar a conversa")}throw new Error("No foi possvel iniciar a conversa")}async function lf(o){if(!(!o||!U)){$(""),xe(""),ee(!0);try{let d=null;if(o.kind==="conversation"?d=o.groupId:o.kind==="person"&&(d=o.existingGroupId||await O0(o.userId)),!d)throw new Error("Destino invlido");const p=await H.post(`/messages/${U.id}/forward`,{targetGroupId:d});if(Hr(p,{mine:!0}),(i==null?void 0:i.id)===d){m(g=>{const j=g||[];return j.some(S=>S.id===p.id)?j:[...j,p]});try{requestAnimationFrame(()=>{var g;(g=An.current)==null||g.scrollIntoView({behavior:"smooth",block:"end"})})}catch{}}xe("Mensagem encaminhada!"),setTimeout(()=>{ie()},600)}catch(d){$((d==null?void 0:d.message)||"Falha ao encaminhar mensagem")}finally{ee(!1)}}}async function U0(o){var d,p,g,j;y("");try{const S=await H.get(`/dm/with/${o}`);if(S!=null&&S.groupId){n(R=>(R||[]).map(L=>L.groupId===S.groupId?{...L,other:S.other||L.other}:L)),u({id:S.groupId,name:((d=S.other)==null?void 0:d.name)||"Direto",avatarUrl:((p=S.other)==null?void 0:p.avatarUrl)||void 0}),sr();return}}catch{}try{const S=await H.post(`/dm/${o}`);if(S!=null&&S.groupId){const R=(r||[]).some(L=>L.groupId===S.groupId);n(L=>{const z=L.find(se=>se.groupId===S.groupId),q=z==null?void 0:z._lastAt,X=(z==null?void 0:z._unread)||0;return z?L.map(se=>se.groupId===S.groupId?{...se,other:S.other,_unread:X,_lastAt:q}:se):[...L||[],{id:S.groupId,groupId:S.groupId,other:S.other,_unread:X,_lastAt:q}]}),R||st([{id:S.groupId,ts:ge(S.lastMessageAt)||Date.now()}]),u({id:S.groupId,name:((g=S.other)==null?void 0:g.name)||"Direto",avatarUrl:((j=S.other)==null?void 0:j.avatarUrl)||void 0}),sr();return}}catch(S){y(S.message||"Falha ao abrir conversa");return}y("Nao foi possivel iniciar a conversa")}c.useEffect(()=>{if(!i)return;let o=()=>{};return T(""),B(!1),ce(null),nt(!1),(async()=>{var z;const d=Lt(await H.get(`/messages/${i.id}?take=${Ao}`)),p=d.slice().reverse();m(p),B(d.length<Ao),ce(((z=p[0])==null?void 0:z.id)||null);try{await H.post(`/messages/${i.id}/read`,{})}catch{}t(q=>q.map(X=>X.id===i.id?{...X,_unread:0}:X)),n(q=>q.map(X=>X.groupId===i.id?{...X,_unread:0}:X));const g=_r();try{g.off("message:new")}catch{}try{g.off("message:deleted")}catch{}g.emit("group:join",i.id);const j=q=>{var Pe;const X=(((Pe=q.author)==null?void 0:Pe.id)||q.authorId)===(Y==null?void 0:Y.id),se=q.groupId===i.id,be=!!(Ue!=null&&Ue[q.groupId])||(tu[q.groupId]?!!(Ue!=null&&Ue[tu[q.groupId]]):!1),Ee=(()=>{try{return(!Bl||document.hidden)&&!X}catch{return!X}})();if(se&&!X)try{H.post(`/messages/${i.id}/read`,{})}catch{}if(Ee)try{Wl(q)}catch{}Hr(q,{mine:X}),se&&m(Me=>{var Rt;return(Me||[]).some(ke=>ke.id===q.id)?Me:(Rt=q.replyTo)!=null&&Rt.id?Me.map(ke=>{var lt;return ke.id===q.replyTo.id?{...ke,_count:{replies:(((lt=ke._count)==null?void 0:lt.replies)||0)+1}}:ke}).concat(q):[...Me,q]});try{!X&&!be&&Tn()}catch{}},S=q=>{(q==null?void 0:q.groupId)===i.id&&m(X=>X.map(se=>se.id===q.id?q:se))},R=q=>{try{if(!q||q.groupId!==i.id)return;const X=Array.isArray(q.ids)?q.ids:[],se=q.userId;if(!se||!X.length)return;m(be=>be.map(Ee=>X.includes(Ee.id)?{...Ee,reads:(Ee.reads||[]).some(Pe=>Pe.userId===se)?Ee.reads||[]:[...Ee.reads||[],{userId:se}]}:Ee))}catch{}},L=q=>{q.groupId===i.id&&m(X=>X.map(se=>se.id===q.id?{...se,deletedAt:q.deletedAt}:se))};g.on("message:new",j),g.on("message:updated",S),g.on("messages:read",R),g.on("message:deleted",L),o=()=>{vt(null),g.off("message:new",j),g.off("message:updated",S),g.off("messages:read",R),g.off("message:deleted",L),g.emit("group:leave",i.id)}})(),()=>o()},[i==null?void 0:i.id]),c.useEffect(()=>{if(i!=null&&i.id)try{localStorage.setItem("chat_active",i.id)}catch{}},[i==null?void 0:i.id]);const so=c.useCallback(async()=>{var g;if(!(i!=null&&i.id)||Se||W||!J)return;const o=xr.current,d=(o==null?void 0:o.scrollHeight)||0,p=(o==null?void 0:o.scrollTop)||0;nt(!0),T("");try{const j=Lt(await H.get(`/messages/${i.id}?take=${Ao}&cursor=${J}`));if(!j.length){B(!0),vr.current=!1;return}const S=j.slice().reverse();let R=[];vr.current=!0,m(L=>{const z=Array.isArray(L)?L:[],q=new Set(z.map(X=>X.id));return R=S.filter(X=>!q.has(X.id)),R.length?[...R,...z]:(vr.current=!1,z)}),R.length?ce(((g=R[0])==null?void 0:g.id)||null):B(!0),j.length<Ao&&B(!0),setTimeout(()=>{const L=xr.current;if(!L)return;const z=L.scrollHeight;L.scrollTop=Math.max(0,z-d+p)},0)}catch(j){T((j==null?void 0:j.message)||"Falha ao carregar mensagens antigas"),vr.current=!1}finally{nt(!1)}},[i==null?void 0:i.id,J,W,Se]),M0=c.useCallback(()=>{const o=xr.current;!o||W||Se||!J||o.scrollTop<=80&&so()},[J,W,so,Se]);c.useEffect(()=>{if(vr.current){vr.current=!1;return}const o=setTimeout(()=>{if(xr.current&&(xr.current.scrollTop=xr.current.scrollHeight),An.current)try{An.current.scrollIntoView({behavior:"smooth",block:"end"})}catch{}},0);return()=>clearTimeout(o)},[f,i==null?void 0:i.id]);const[Gr,ao]=c.useState(!1);async function ru(o){var p,g,j;if(o&&o.preventDefault&&o.preventDefault(),y(""),!i||Gr)return;let d=!1;try{ao(!0);const S=!!(v||"").trim(),R=N.length>0,L=(E==null?void 0:E.id)||null;if(S){const z=v,q=/^(https?:\/\/\S+)/i.test(z),X=z.toLowerCase(),se=q&&/(\.gif($|\?))/i.test(X),be=q&&/(\.png|\.jpg|\.jpeg|\.webp|\.bmp|\.svg)($|\?)/i.test(X),Ee=se?"gif":be?"image":"text",Pe=await H.post(`/messages/${i.id}`,{type:Ee,content:z,replyToId:L});m(Me=>(Me||[]).some(Rt=>Rt.id===Pe.id)?Me:[...Me,Pe]),Hr(Pe,{mine:!0}),b(""),d=!0}if(R){for(const z of N){const q=z==null?void 0:z.file;if(!q)continue;const X=new FormData;X.append("file",q);let se="file";(p=q.type)!=null&&p.startsWith("audio")?se="audio":(g=q.type)!=null&&g.startsWith("image")&&(se="image");const be=L?`&replyToId=${L}`:"",Ee=await H.upload(`/messages/${i.id}/upload?type=${se}${be}`,X);m(Pe=>(Pe||[]).some(Me=>Me.id===Ee.id)?Pe:[...Pe,Ee]),Hr(Ee,{mine:!0}),d=!0}da()}(S||R)&&_(null)}catch(S){y(S.message||"Falha ao enviar mensagem")}finally{if(ao(!1),d)try{(j=_n.current)==null||j.focus()}catch{}}}function $0(o){_(o)}async function B0(o){if(confirm("Excluir esta mensagem?"))try{await H.delete(`/messages/${o.id}`),m(d=>d.map(p=>p.id===o.id?{...p,deletedAt:new Date().toISOString()}:p))}catch(d){y(d.message||"Falha ao excluir")}}function z0(o){const d=f.find(p=>{var g;return((g=p.replyTo)==null?void 0:g.id)===o.id});d&&rs(d.id)}c.useEffect(()=>{const o=(At||"").trim().toLowerCase();if(!o){rr([]),$t(-1);return}const d=f.filter(p=>p&&!p.deletedAt&&p.type==="text"&&(p.content||"").toLowerCase().includes(o)).map(p=>p.id);if(rr(d),d.length){$t(0);const p=document.getElementById(`msg-${d[0]}`);if(p)try{p.scrollIntoView({behavior:"smooth",block:"center"})}catch{}Yt(d[0],1500)}else $t(-1)},[At,f,i==null?void 0:i.id,Yt]);function nu(o=!0){if(!Nr.length)return;let d=qr;d<0?d=0:d=(d+(o?1:-1)+Nr.length)%Nr.length,$t(d);const p=Nr[d],g=document.getElementById(`msg-${p}`);if(g)try{g.scrollIntoView({behavior:"smooth",block:"center"})}catch{}Yt(p,1500)}function V0(o){const d=_n.current;if(!d){b(S=>S+o);try{ta(S=>{const R=[o,...(S||[]).filter(L=>L!==o)].slice(0,24);try{localStorage.setItem("chat_recent_emojis",JSON.stringify(R))}catch{}return R})}catch{}Br(!1);try{ra("")}catch{}return}const p=d.selectionStart??v.length,g=d.selectionEnd??v.length,j=v.slice(0,p)+o+v.slice(g);b(j),requestAnimationFrame(()=>{d.focus();const S=p+o.length;try{d.setSelectionRange(S,S)}catch{}});try{ta(S=>{const R=[o,...(S||[]).filter(L=>L!==o)].slice(0,24);try{localStorage.setItem("chat_recent_emojis",JSON.stringify(R))}catch{}return R})}catch{}Br(!1);try{ra("")}catch{}}async function W0(){if(ze(""),!fe)try{zr&&uf();const o=await navigator.mediaDevices.getUserMedia({audio:!0});ls.current=o;const d=window.MediaRecorder&&MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",p=new MediaRecorder(o,{mimeType:d});as.current=p;const g=[];p.ondataavailable=j=>{j.data&&j.data.size>0&&g.push(j.data)},p.onstop=()=>{try{if(!g.length){ze("Nenhum udio foi capturado");return}const j=new Blob(g,{type:d}),S=new File([j],`rec-${Date.now()}.webm`,{type:d});try{yt&&URL.revokeObjectURL(yt)}catch{}const R=URL.createObjectURL(j);la(S),oa(R),ze("")}catch(j){ze(j.message||"Falha ao processar udio")}finally{of()}},p.start(),is.current=Date.now(),he(!0),Ur(0)}catch{ze("Acesso ao microfone negado ou indisponvel"),of()}}function H0(){var o;try{(o=as.current)==null||o.stop()}catch{}}function of(){var o,d;if(he(!1),at.current){try{clearInterval(at.current)}catch{}at.current=null}Ur(0),is.current=null;try{(d=(o=ls.current)==null?void 0:o.getTracks)==null||d.call(o).forEach(p=>p.stop())}catch{}ls.current=null,as.current=null}c.useEffect(()=>{if(!fe){if(at.current){try{clearInterval(at.current)}catch{}at.current=null}return}const o=is.current??Date.now();is.current=o;const d=()=>{const p=Math.max(0,Math.floor((Date.now()-o)/1e3));Ur(p)};if(d(),at.current)try{clearInterval(at.current)}catch{}return at.current=setInterval(d,1e3),()=>{if(at.current){try{clearInterval(at.current)}catch{}at.current=null}}},[fe]),c.useEffect(()=>{const o=yr.current;if(o)try{o.pause(),o.currentTime=0}catch{}return tr(!1),yt||us(""),()=>{try{yt&&URL.revokeObjectURL(yt)}catch{}}},[yt]);const q0=()=>{const o=yr.current;if(!o)return;const d=t1(o.duration);us(d)},Q0=()=>{const o=yr.current;if(o)try{o.pause(),o.currentTime=0}catch{}tr(!1)},G0=()=>{tr(!1)},K0=()=>{if(Gr)return;const o=yr.current;o&&(cs?o.pause():o.play().then(()=>tr(!0)).catch(()=>tr(!1)))};async function Z0(){if(!(!zr||!(i!=null&&i.id)))try{ao(!0);const o=new FormData;o.append("file",zr);const d=await H.upload(`/messages/${i.id}/upload?type=audio`,o);m(g=>g.some(j=>j.id===d.id)?g:[...g,d]),Hr(d,{mine:!0});const p=yr.current;if(p)try{p.pause(),p.currentTime=0}catch{}tr(!1),la(null),ze("");try{yt&&URL.revokeObjectURL(yt)}catch{}oa(""),us("")}catch(o){ze((o==null?void 0:o.message)||"Falha ao Enviar udio")}finally{ao(!1)}}function uf(){const o=yr.current;if(o)try{o.pause(),o.currentTime=0}catch{}tr(!1),la(null),ze("");try{yt&&URL.revokeObjectURL(yt)}catch{}oa(""),us("")}function cf(o=nr,{force:d=!1}={}){const p=o||{};if((d||!Le)&&Te((p==null?void 0:p.name)||""),(d||!Qr)&&Kd((p==null?void 0:p.phone)||""),(d||!ja)&&Zd((p==null?void 0:p.address)||""),d||!Gi)try{const g=localStorage.getItem("profile_status");Xl(g!==null?g:(p==null?void 0:p.status)||"")}catch{Xl((p==null?void 0:p.status)||"")}}async function df(o=!1){try{ps(!0);const d=await H.get("/users/me");Gl(d||{}),cf(d,{force:o}),Sr(""),Fn("")}catch{Sr("Falha ao carregar perfil")}finally{ps(!1)}}function J0(){var d;va(!0);const o=i==null?void 0:i.id;if(o){const p=r.find(g=>g.groupId===o);if((d=p==null?void 0:p.other)!=null&&d.id){const g=(a||[]).find(j=>j.id===p.other.id)||p.other;ms("contact"),qi(g||null),(async()=>{try{ya(!0),wa("");const j=await H.get(`/users/${p.other.id}/shared-groups`);Zl(Array.isArray(j)?j:[])}catch(j){wa((j==null?void 0:j.message)||"Falha ao carregar grupos em comum"),Zl([])}finally{ya(!1)}})(),te("perfil"),ps(!1),Sr(""),Fn("");return}ms("group"),te("perfil"),ps(!1),Sr(""),Fn(""),(async()=>{try{h(!0),F("");const g=await H.get(`/groups/${o}/participants`);ka(Array.isArray(g)?g:[])}catch(g){F((g==null?void 0:g.message)||"Falha ao carregar participAes"),ka([])}finally{h(!1)}})();return}ms("self"),df(!0)}async function Y0(){try{Sr(""),Fn("");const o=new FormData;o.append("name",Le||""),Qr!=null&&o.append("phone",Qr),ja!=null&&o.append("address",ja),Na&&o.append("avatar",Na),await H.uploadPatch("/users/me",o);try{localStorage.setItem("profile_status",Gi||"")}catch{}Fn("Perfil atualizado"),eo(null),df(!0)}catch(o){Sr((o==null?void 0:o.message)||"Falha ao salvar perfil")}}async function X0(){try{if(Sr(""),Fn(""),!Ki||!Zi){Sr("Preencha senha atual e nova");return}await H.post("/users/me/password",{current:Ki,password:Zi}),Fn("Senha atualizada"),Jd(""),Yd("")}catch(o){Sr((o==null?void 0:o.message)||"Falha ao alterar senha")}}const[_a,eg]=c.useState(!1),[Aa,tg]=c.useState(!1),su=c.useMemo(()=>{const o={};return(e||[]).forEach((d,p)=>{d!=null&&d.id&&(o[d.id]=p)}),o},[e]),rg=c.useMemo(()=>{const o=$r.trim().toLowerCase();let d=o?e.filter(p=>(p.name||"").toLowerCase().includes(o)):e;return _a&&(d=d.filter(p=>!!(ae!=null&&ae[p.id]))),Aa&&(d=d.filter(p=>(p._unread||0)>0)),[...d].sort((p,g)=>{const j=ae!=null&&ae[p.id]?1:0,S=ae!=null&&ae[g.id]?1:0;if(j!==S)return S-j;const R=jr(p.id),L=jr(g.id);if(R!==L)return R-L;const z=ft(p),q=ft(g);if(z!==q)return q-z;const X=ge(p==null?void 0:p._lastAt),se=ge(g==null?void 0:g._lastAt);if(X!==se)return se-X;const be=(p==null?void 0:p._unread)||0,Ee=(g==null?void 0:g._unread)||0;if(be!==Ee)return Ee-be;const Pe=su[p.id]??Number.MAX_SAFE_INTEGER,Me=su[g.id]??Number.MAX_SAFE_INTEGER;return Pe-Me})},[e,$r,ae,_a,Aa,su,jr,ft]),Ra=c.useMemo(()=>{const o={};return(r||[]).forEach(d=>{var g;const p=(g=d==null?void 0:d.other)==null?void 0:g.id;p&&(o[p]=d)}),o},[r]),au=c.useMemo(()=>{const o={};return(a||[]).forEach((d,p)=>{d!=null&&d.id&&(o[d.id]=p)}),o},[a]),lu=c.useMemo(()=>{const o={};return(r||[]).forEach((d,p)=>{var j;const g=(j=d==null?void 0:d.other)==null?void 0:j.id;g&&(o[g]=p)}),o},[r]),gs=c.useMemo(()=>{const o=i==null?void 0:i.id;return o?(r||[]).some(d=>d.groupId===o):!1},[i==null?void 0:i.id,r]),lo=c.useMemo(()=>i!=null&&i.id?gs?Da||no||null:i.id:null,[i==null?void 0:i.id,gs,Da,no]),ng=!!(lo&&(ae!=null&&ae[lo])),sg=c.useMemo(()=>{var o;if(!i)return"Selecione um grupo";if(gs){const d=(r||[]).find(g=>g.groupId===i.id),p=(o=d==null?void 0:d.other)==null?void 0:o.name;if(p)return p}return(i==null?void 0:i.name)||"Direto"},[i,gs,r]),ag=c.useMemo(()=>{var o;if(i){if(i.avatarUrl)return i.avatarUrl;if(gs){const d=(r||[]).find(p=>p.groupId===i.id);if((o=d==null?void 0:d.other)!=null&&o.avatarUrl)return d.other.avatarUrl}}},[i,gs,r]),lg=c.useMemo(()=>{const o=$r.trim().toLowerCase();let d=o?a.filter(p=>(p.name||"").toLowerCase().includes(o)):a;return _a&&(d=d.filter(p=>!!(ae!=null&&ae[p.id]))),Aa&&(d=d.filter(p=>{const g=Ra[p.id];return((g==null?void 0:g._unread)||0)>0})),[...d].sort((p,g)=>{const j=ae!=null&&ae[p.id]?1:0,S=ae!=null&&ae[g.id]?1:0;if(j!==S)return S-j;const R=Ra[p.id],L=Ra[g.id],z=jr(R==null?void 0:R.groupId),q=jr(L==null?void 0:L.groupId);if(z!==q)return z-q;const X=ft(R),se=ft(L);if(X!==se)return se-X;const be=ge(R==null?void 0:R._lastAt),Ee=ge(L==null?void 0:L._lastAt);if(be!==Ee)return Ee-be;const Pe=(R==null?void 0:R._unread)||0,Me=(L==null?void 0:L._unread)||0;if(Pe!==Me)return Me-Pe;const Rt=lu[p.id]??Number.MAX_SAFE_INTEGER,ke=lu[g.id]??Number.MAX_SAFE_INTEGER;if(Rt!==ke)return Rt-ke;const lt=au[p.id]??Number.MAX_SAFE_INTEGER,wt=au[g.id]??Number.MAX_SAFE_INTEGER;return lt-wt})},[a,r,$r,Aa,_a,ae,Ra,au,lu,jr,ft]);c.useEffect(()=>{(async()=>{var o;try{const d=(e||[]).filter(g=>g&&g.id&&(g._lastAt===void 0||g._lastAt===null||g._lastPreview===void 0));if(!d.length)return;const p={};for(const g of d)try{const S=Lt(await H.get(`/messages/${g.id}?take=1`))[0]||null,R=S!=null&&S.createdAt?new Date(S.createdAt).getTime():0,L=(((o=S==null?void 0:S.author)==null?void 0:o.id)||(S==null?void 0:S.authorId))===(Y==null?void 0:Y.id);let z="";S&&(S.type==="text"?z=S.content||"":S.type==="image"||S.type==="gif"?z="Imagem":S.type==="audio"?z="udio":z="Anexo",L&&(z=`Voc: ${z}`)),p[g.id]={last:R,prev:z,received:L?ge(g._lastReceivedAt):R}}catch{}Object.keys(p).length&&(t(g=>(g||[]).map(j=>p[j.id]!==void 0?{...j,_lastAt:p[j.id].last,_lastPreview:p[j.id].prev,_lastReceivedAt:p[j.id].received}:j)),st(Object.entries(p).map(([g,j])=>({id:g,ts:j.last}))))}catch{}})()},[e,st]);const xs=(Q||"").trim().toLowerCase(),ou=F0.filter(o=>{if(!xs)return!0;const d=(o.label||"").toLowerCase(),p=(o.subtitle||"").toLowerCase();return d.includes(xs)||p.includes(xs)}),iu=T0.filter(o=>{if(!xs)return!0;const d=(o.label||"").toLowerCase(),p=(o.subtitle||"").toLowerCase();return d.includes(xs)||p.includes(xs)}),og=U&&Wr(U,{skipForward:!0})||"",ff=(v||"").trim().length>0,hf=N.length>0,ar=ff||hf;return s.jsxs("div",{className:"relative flex h-full min-h-full w-full overflow-x-hidden bg-slate-50 dark:bg-slate-950",children:[ma&&s.jsx("div",{className:"absolute left-1/2 top-3 z-50 -translate-x-1/2 rounded bg-amber-100 px-4 py-2 text-sm text-amber-800 shadow dark:bg-amber-500/20 dark:text-amber-200",children:ma}),!On&&ro&&s.jsx("button",{type:"button",className:"fixed inset-0 z-30 bg-slate-900/30 backdrop-blur-[1px] lg:hidden","aria-label":"Fechar lista de conversas",onClick:()=>Sa(!1)}),s.jsxs("aside",{id:"chat-left-pane",ref:rf,className:`w-72 xl:w-80 max-w-full flex-shrink-0 flex h-full flex-col border-r border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 overflow-y-auto transition-transform duration-200 ease-out ${On?"":"fixed inset-y-0 left-0 z-40 shadow-xl"} ${ro?"translate-x-0":"-translate-x-full"} lg:static lg:shadow-none lg:translate-x-0`,children:[s.jsxs("div",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[s.jsx("input",{value:$r,onChange:o=>ns(o.target.value),placeholder:"Buscar conversas...",className:"w-full border rounded px-3 py-1.5 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100 dark:placeholder-slate-500"}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-slate-300 text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",onClick:()=>{var o;try{(o=document.getElementById("people-list"))==null||o.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},children:"Nova conversa"}),s.jsxs("label",{className:"text-xs inline-flex items-center gap-1 text-slate-600 dark:text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:_a,onChange:o=>eg(o.target.checked)})," ","Fixadas"]}),s.jsxs("label",{className:"text-xs inline-flex items-center gap-1 text-slate-600 dark:text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:Aa,onChange:o=>tg(o.target.checked)})," ","No lidas"]})]})]}),s.jsxs("div",{className:"px-3 py-1.5 text-[10px] font-semibold uppercase tracking-wide text-slate-500 sticky top-0 z-10 bg-white dark:bg-slate-900 dark:text-slate-400 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[s.jsx("span",{children:"Grupos"}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-transform",onClick:()=>R0(o=>!o),"aria-label":Ea?"Expandir grupos":"Ocultar grupos",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${Ea?"-rotate-90":"rotate-0"}`,children:s.jsx("path",{d:"M8.47 4.97a.75.75 0 0 1 1.06 0l6 6a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06L13.94 12 8.47 6.53a.75.75 0 0 1 0-1.06Z"})})})]}),!Ea&&rg.map(o=>{const d=(o==null?void 0:o._lastAt)||0,p=d?new Date(d).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",g=(o==null?void 0:o._lastPreview)||"";return ae!=null&&ae[o.id],Ue!=null&&Ue[o.id],s.jsxs("button",{onClick:()=>{u(o),sr()},onContextMenu:j=>{j.preventDefault(),j.stopPropagation(),dt({open:!0,type:"group",id:o.id,groupId:o.id,x:j.clientX,y:j.clientY})},className:`px-3 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/60 border text-slate-700 dark:text-slate-200 ${(i==null?void 0:i.id)===o.id?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600":"border-transparent hover:border-slate-200 dark:border-transparent dark:hover:border-slate-600"} flex items-center justify-between transition-colors`,title:o.name||"",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"truncate text-left",title:o.name||"",children:o.name}),p&&s.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:p})]}),g&&s.jsx("div",{className:"text-slate-500 dark:text-slate-400 truncate max-w-[220px] text-xs",title:g,children:g})]}),s.jsx("div",{className:"flex items-center gap-1 shrink-0",children:o._unread>0&&s.jsx("span",{className:"ml-2 min-w-[22px] h-5 px-1.5 rounded-full bg-blue-600/90 text-white text-[11px] inline-flex items-center justify-center shadow",children:o._unread})})]},o.id)}),s.jsxs("div",{className:"px-3 py-1.5 text-[10px] font-semibold uppercase tracking-wide text-slate-500 border-t border-slate-200 dark:text-slate-400 dark:border-slate-800 sticky top-0 z-10 bg-white dark:bg-slate-900 flex items-center justify-between",children:[s.jsx("span",{children:"Pessoas"}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-transform",onClick:()=>L0(o=>!o),"aria-label":Ca?"Expandir pessoas":"Ocultar pessoas",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${Ca?"-rotate-90":"rotate-0"}`,children:s.jsx("path",{d:"M8.47 4.97a.75.75 0 0 1 1.06 0l6 6a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06L13.94 12 8.47 6.53a.75.75 0 0 1 0-1.06Z"})})})]}),!Ca&&s.jsx("div",{id:"people-list",className:"px-3 py-2 flex flex-col gap-1",children:lg.map(o=>{const d=Ra[o.id]||null,p=(d==null?void 0:d._unread)||0,g=(d==null?void 0:d._lastAt)||0,j=g?new Date(g).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",S=(d==null?void 0:d._lastPreview)||"";ae!=null&&ae[o.id];const R=!!(i!=null&&i.id&&(d!=null&&d.groupId)&&i.id===d.groupId);return s.jsxs("button",{onClick:()=>U0(o.id),onContextMenu:L=>{L.preventDefault(),L.stopPropagation(),dt({open:!0,type:"user",id:o.id,groupId:(d==null?void 0:d.groupId)||null,x:L.clientX,y:L.clientY})},className:`rounded-lg px-2 py-2 flex items-center justify-between gap-2 border transition-colors text-slate-700 dark:text-slate-200 ${R?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600":"hover:bg-slate-50 dark:hover:bg-slate-700/60 border-transparent hover:border-slate-200 dark:hover:border-slate-600"}`,children:[s.jsxs("span",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(Va,{url:o.avatarUrl,name:o.name,size:40,status:I0[o.id]||o.status,showStatus:!0}),s.jsxs("span",{className:"flex flex-col items-start min-w-0",children:[s.jsx("span",{className:"truncate font-medium text-sm",title:o.name||"",children:o.name}),o.status&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full border ${String(o.status).toLowerCase()==="online"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-500/15 dark:text-green-200 dark:border-green-500/40":"bg-slate-50 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700"}`,children:o.status}),S&&s.jsx("span",{className:"truncate text-xs text-slate-500 dark:text-slate-400 max-w-[180px]",title:S,children:S})]})]}),s.jsxs("span",{className:"flex items-center gap-2 shrink-0",children:[j&&s.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:j}),p>0&&s.jsx("span",{className:"min-w-[22px] h-5 px-1.5 rounded-full bg-blue-600/90 text-white text-[11px] inline-flex items-center justify-center shadow",children:p}),!!(ae!=null&&ae[o.id])&&s.jsx(Uh,{className:"w-4 h-4 text-amber-500"})]})]},o.id)})})]}),(le==null?void 0:le.open)&&s.jsxs("div",{ref:ea,className:"fixed z-50 w-48 bg-white border border-slate-200 rounded shadow dark:bg-slate-800 dark:border-slate-700",style:{top:Math.max(8,le.y),left:Math.max(8,le.x)},role:"menu",children:[le.type==="user"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/60",onClick:()=>{le!=null&&le.id&&es(le.id),dt(o=>({...o,open:!1}))},children:ae!=null&&ae[le.id]?"Desafixar":"Fixar"}),s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/60",onClick:()=>{const o=le.groupId||le.id;o&&K(o),dt(d=>({...d,open:!1}))},children:(()=>{const o=le.groupId||le.id;return Ue!=null&&Ue[o]?"Reativar som":"Silenciar"})()})]}),le.type==="group"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/60",onClick:()=>{le!=null&&le.id&&es(le.id),dt(o=>({...o,open:!1}))},children:ae!=null&&ae[le.id]?"Desafixar":"Fixar"}),s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/60",onClick:()=>{le!=null&&le.id&&K(le.id),dt(o=>({...o,open:!1}))},children:Ue!=null&&Ue[le.id]?"Reativar som":"Silenciar"})]})]}),s.jsxs("div",{className:"relative flex-1 flex min-h-0 min-w-0 flex-col chat-bg border-r border-slate-200 bg-slate-100 dark:bg-slate-900/60",onDragEnter:ha,onDragLeave:Bi,onDragOver:zi,onDrop:pa,children:[D&&s.jsxs("div",{className:"pointer-events-none absolute inset-0 z-30 flex flex-col items-center justify-center gap-3 rounded-lg border-2 border-dashed border-blue-500 bg-blue-100/70 text-blue-700 dark:border-blue-400 dark:bg-blue-900/30 dark:text-blue-200",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"h-12 w-12",children:s.jsx("path",{d:"M21.44 11.05l-9.19 9.19a5 5 0 11-7.07-7.07l9.19-9.19a3 3 0 114.24 4.24l-9.19 9.19a1 1 0 11-1.41-1.41l8.49-8.49"})}),s.jsx("div",{className:"text-sm font-semibold",children:"Solte os arquivos aqui para anexar"}),s.jsx("div",{className:"text-xs",children:"ou clique no cone de anexo abaixo"})]}),s.jsxs("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 bg-gradient-to-r from-white/80 to-slate-50/80 backdrop-blur font-medium flex items-center gap-2 shadow-sm dark:border-slate-800 dark:bg-slate-900/90 dark:from-slate-900/90 dark:to-slate-900/90",children:[!On&&s.jsx("button",{type:"button",className:"lg:hidden inline-flex items-center justify-center rounded border border-slate-300 p-2 text-slate-600 hover:bg-slate-100","aria-label":"Abrir lista de conversas",onClick:()=>Sa(!0),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:s.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})}),s.jsxs("button",{type:"button",className:"flex items-center gap-3 min-w-0 truncate text-left hover:underline",onClick:()=>J0(),title:"Abrir perfil",children:[s.jsx(Va,{url:ag,name:(i==null?void 0:i.name)||"Selecione um grupo",size:36}),s.jsx("span",{className:"truncate font-semibold text-slate-700 dark:text-slate-200",children:sg})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded border border-slate-300 bg-white/90 px-2 py-1 shadow-sm dark:border-slate-700 dark:bg-slate-800/80",children:[s.jsx(Ww,{className:"h-4 w-4 text-slate-500 dark:text-slate-400"}),s.jsx("input",{ref:P0,value:At,onChange:o=>hs(o.target.value),placeholder:"Buscar mensagens...",className:"w-64 border-0 bg-transparent text-sm focus:outline-none focus:ring-0 dark:text-slate-100","aria-label":"Buscar mensagens",onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),nu(!o.shiftKey))}}),s.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:At?Nr.length?`${qr+1}/${Nr.length}`:"0/0":"--"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60",title:"Resultado anterior",onClick:()=>nu(!1),children:s.jsx(Hw,{})}),s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60",title:"Prximo resultado",onClick:()=>nu(!0),children:s.jsx(qw,{})}),At&&s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded hover:bg-slate-100",title:"Limpar busca",onClick:()=>hs(""),children:s.jsx(zu,{})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",title:"Mais opes","aria-haspopup":"menu","aria-expanded":ds,onClick:()=>Rn(o=>!o),children:s.jsx(Qw,{})}),ds&&s.jsx("div",{ref:ua,className:"absolute right-0 top-10 z-20 w-48 rounded border border-slate-200 bg-white shadow dark:border-slate-700 dark:bg-slate-800",role:"menu",children:s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{lo&&es(lo),Rn(!1)},role:"menuitem",children:ng?"Desafixar conversa":"Fixar conversa"})})]})]})]}),!i&&s.jsx("div",{className:"flex-1 grid place-items-center p-6",children:s.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-300",children:[s.jsx("div",{className:"mx-auto dark:bg-slate-700 grid place-items-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8 text-slate-400 dark:text-slate-300",children:s.jsx("path",{d:"M19.5 6.75v10.5A2.25 2.25 0 0 1 17.25 19.5H6.75A2.25 2.25 0 0 1 4.5 17.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5A2.25 2.25 0 0 1 19.5 6.75ZM8.25 9A.75.75 0 0 0 7.5 9.75v6a.75.75 0 0 0 1.5 0v-6A.75.75 0 0 0 8.25 9Zm4.5 0a.75.75 0 0 0-.75.75v6a.75.75 0 0 0 1.5 0v-6A.75.75 0 0 0 12.75 9Zm4.5.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"})})}),s.jsx("div",{className:"text-lg font-semibold",children:"Selecione uma conversa"}),s.jsx("div",{className:"text-sm",children:"Escolha um grupo ou contato  esquerda."})]})}),s.jsxs("div",{ref:xr,onScroll:M0,className:`flex-1 overflow-y-auto overflow-x-hidden overscroll-contain p-4 space-y-3 ${i?"":"hidden"}`,children:[i&&s.jsx("div",{className:"flex justify-center py-1",children:Se?s.jsx("span",{className:"text-xs text-slate-500",children:"Carregando mensagens antigas..."}):ne?s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("span",{className:"text-xs text-red-500",children:ne}),s.jsx("button",{type:"button",onClick:so,className:"text-[11px] font-medium text-red-500 hover:text-red-600",children:"Tentar novamente"})]}):W?s.jsx("span",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Incio da conversa"}):J?s.jsx("button",{type:"button",onClick:so,className:"text-xs font-medium text-blue-600 transition-colors hover:text-blue-500",children:"Carregar mensagens anteriores"}):null}),f.map((o,d)=>{var z,q,X,se,be,Ee,Pe,Me,Rt;const p=(((z=o.author)==null?void 0:z.id)||o.authorId)===(Y==null?void 0:Y.id),g=p?"min-w-0 w-fit max-w-[min(75%,_600px)] bg-blue-600 text-white px-4 py-2.5 rounded-2xl rounded-tr-md shadow-md break-words dark:bg-blue-500":"min-w-0 w-fit max-w-[min(65%,_560px)] bg-white text-slate-800 px-4 py-2.5 rounded-2xl rounded-tl-md shadow-md border border-slate-200/60 break-words dark:bg-slate-800 dark:text-slate-100 dark:border-slate-700/70",j=p?"flex justify-end mb-2 items-end min-w-0":"flex justify-start mb-2 items-end min-w-0",S=f[d-1],R=!S||new Date(S.createdAt).toDateString()!==new Date(o.createdAt).toDateString(),L=(()=>{const ke=new Date(o.createdAt),lt=new Date,wt=Ye=>new Date(Ye.getFullYear(),Ye.getMonth(),Ye.getDate()),vs=(wt(ke)-wt(lt))/864e5;return vs===0?"Hoje":vs===-1?"Ontem":ke.toLocaleDateString("pt-BR")})();return s.jsxs("div",{id:`msg-${o.id}`,className:"w-full",children:[R&&s.jsx("div",{className:"max-w-32 mx-auto rounded-full text-center text-xs bg-sky-600  text-slate-100 my-2",children:L}),s.jsxs("div",{className:`${j} group`,children:[!p&&s.jsx("div",{className:"mr-2",children:s.jsx(Va,{url:(q=o.author)==null?void 0:q.avatarUrl,name:(X=o.author)==null?void 0:X.name,size:32})}),s.jsxs("div",{className:`${g} ${mr===o.id?"ring-2 ring-yellow-400":""} ${At&&o.type==="text"&&(o.content||"").toLowerCase().includes((At||"").toLowerCase())?"outline outline-2 outline-yellow-300":""}`,children:[!p&&s.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600",children:((se=o.author)==null?void 0:se.name)||"Contato"}),o.forwardedFrom&&s.jsxs("div",{className:"mb-1 w-full rounded-sm border-l-4 border-amber-400 bg-amber-50/80 px-2 py-1 text-xs text-slate-600 dark:border-amber-500 dark:bg-slate-800/70 dark:text-slate-200",children:[s.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wider text-amber-600 dark:text-amber-300",children:"Encaminhada"}),s.jsx("div",{className:"font-medium",children:((be=o.forwardedFrom.author)==null?void 0:be.name)||"Mensagem"}),s.jsx("div",{className:"truncate opacity-90",children:Wr(o.forwardedFrom,{skipForward:!0})||"Mensagem"})]}),o.replyTo&&s.jsxs("button",{type:"button",onClick:()=>rs(o.replyTo.id),className:"mb-1 w-full text-left pl-2 border-l-4 border-blue-400 text-xs text-slate-600 hover:bg-blue-50 focus:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-300 rounded-sm transition dark:hover:bg-slate-800/60 dark:focus:bg-slate-800/90",title:"Abrir mensagem original",children:[s.jsx("div",{className:"font-medium",children:((Ee=o.replyTo.author)==null?void 0:Ee.name)||"Mensagem"}),s.jsx("div",{className:"truncate opacity-90",children:o.replyTo.type==="text"?o.replyTo.content:o.replyTo.type==="image"?"Imagem":o.replyTo.type==="audio"?"udio":"Anexo"})]}),o.deletedAt?s.jsx("div",{className:"italic opacity-70",children:"Mensagem apagada"}):o.type==="text"?s.jsx(n1,{message:o,mine:p,onStartEdit:ke=>{gr(ke.id),Xt(ke.content||""),vt(null)},onSave:async(ke,lt)=>{try{const wt=await H.patch(`/messages/${ke.id}`,{content:lt.trim()});m(vs=>vs.map(Ye=>Ye.id===ke.id?wt:Ye)),gr(""),Xt("")}catch(wt){y((wt==null?void 0:wt.message)||"Falha ao editar")}},onCancel:()=>{gr(""),Xt("")},editingId:_t,editText:Rl,setEditText:Xt}):o.type==="image"||o.type==="gif"?(()=>{const ke=zt(o.content),lt=In(o.content)||"imagem";return s.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[s.jsx("a",{href:ke,target:"_blank",rel:"noopener noreferrer",className:"inline-block max-w-[220px]",children:s.jsx("img",{src:ke,alt:lt,className:"max-w-full max-h-60 rounded shadow-sm object-contain bg-slate-100"})}),s.jsx("button",{type:"button",onClick:()=>Vi(ke,lt),className:"inline-flex items-center gap-1 rounded px-3 py-1 text-xs font-semibold text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-400 transition",children:"Baixar"})]})})():o.type==="audio"?s.jsx("audio",{src:zt(o.content),controls:!0,className:"w-60"}):s.jsx("a",{className:"underline break-all",href:zt(o.content),target:"_blank",rel:"noreferrer",title:In(o.content)||"Abrir anexo",children:In(o.content)||"Abrir anexo"}),s.jsxs("div",{className:"mt-1 text-[10px] opacity-80 flex items-center gap-2",children:[s.jsx("span",{children:new Date(o.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),p&&(()=>{const ke=(o.reads||[]).map(Ye=>Ye.userId);if(no){const Ye=ke.includes(no),oo=Ye?"Visualizada":"Entregue";return s.jsx(Vu,{read:Ye,title:oo})}const lt=ke.filter(Ye=>Ye&&Ye!==(Y==null?void 0:Y.id));if(lt.length===0)return s.jsx(Vu,{read:!1,title:"Entregue"});const wt=lt.map(Ye=>{var oo;return((oo=(a||[]).find(ig=>ig.id===Ye))==null?void 0:oo.name)||""}).filter(Boolean),vs=wt.length?wt.join(", "):`Visto por ${lt.length}`;return s.jsx(Vu,{read:!0,title:vs})})(),s.jsx("button",{type:"button",title:to(o.id)?"Remover favorito":"Favoritar",onClick:()=>eu(o),className:`${to(o.id)?"text-yellow-400":"text-slate-300 hover:text-slate-500"} transition-colors`,children:s.jsx(Uh,{className:"w-4 h-4",filled:to(o.id)})})]})]}),s.jsxs("div",{className:"ml-1 relative",ref:Jt===o.id?ts:null,children:[s.jsx("button",{type:"button",className:"opacity-0 group-hover:opacity-100 p-1 text-slate-500 hover:text-slate-700",onClick:()=>vt(Jt===o.id?null:o.id),"aria-label":"Aes",children:"..."}),Jt===o.id&&s.jsxs("div",{className:"absolute right-0 mt-1 bg-white border border-slate-200 rounded shadow text-sm z-10 dark:bg-slate-800 dark:border-slate-700",children:[s.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{vt(null),$0(o)},children:"Responder"}),!o.deletedAt&&s.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{vt(null),V(o),$(""),xe(""),O("")},children:"Encaminhar"}),(((Pe=o.author)==null?void 0:Pe.id)||o.authorId)===(Y==null?void 0:Y.id)&&o.type==="text"&&!o.deletedAt&&s.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{gr(o.id),Xt(o.content||""),vt(null)},children:"Editar"}),s.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{vt(null),eu(o)},children:"Favoritar"}),(((Me=o.author)==null?void 0:Me.id)||o.authorId)===(Y==null?void 0:Y.id)&&s.jsx("button",{className:"block w-full text-left px-3 py-1.5 text-red-600 hover:bg-red-50",onClick:()=>{vt(null),B0(o)},children:"Apagar"}),((Rt=o._count)==null?void 0:Rt.replies)>0&&s.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{vt(null),z0(o)},children:"Ir para respostas"})]})]})]})]},o.id)}),s.jsx("div",{ref:An})]}),E&&s.jsxs("div",{className:"px-3 py-2 border-t border-slate-200 bg-slate-50 flex items-start gap-2",children:[s.jsxs("div",{className:"border-l-4 border-blue-500 pl-2 text-sm text-slate-700 flex-1",children:[s.jsxs("div",{className:"font-medium",children:["Respondendo ",((pf=E.author)==null?void 0:pf.name)||"mensagem"]}),s.jsx("div",{className:"truncate",children:E.type==="text"?E.content:E.type==="image"?"Imagem":E.type==="audio"?"udio":"Anexo"})]}),s.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>_(null),children:"Cancelar"}),fe&&!ar&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",qe>0?`${qe}s`:"REC"]})]}),zr&&s.jsxs("div",{className:"px-3 py-2 border-t border-slate-200 bg-white dark:bg-slate-900",children:[s.jsx("audio",{ref:yr,src:yt,onLoadedMetadata:q0,onEnded:Q0,onPause:G0,onPlay:()=>tr(!0),className:"hidden",preload:"metadata"}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:K0,className:`inline-flex items-center justify-center w-9 h-9 rounded-full transition ${cs?"bg-red-600 text-white hover:bg-red-500":"bg-slate-200 text-slate-600 hover:bg-slate-300"}`,"aria-label":cs?"Pausar pr-escuta":"Reproduzir pr-escuta",disabled:Gr,children:cs?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M7 5.25h2.5c.414 0 .75.336.75.75v12a.75.75 0 0 1-.75.75H7a.75.75 0 0 1-.75-.75V6A.75.75 0 0 1 7 5.25Zm7.5 0H17c.414 0 .75.336.75.75v12a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1-.75-.75V6a.75.75 0 0 1 .75-.75Z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M5.87 3.52 18.5 10.3a1.5 1.5 0 0 1 0 2.6L5.87 19.68A1.5 1.5 0 0 1 3.5 18.5V5.5a1.5 1.5 0 0 1 2.37-1.98Z"})})}),s.jsxs("div",{className:"flex flex-col leading-tight text-right min-w-[120px]",children:[s.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Pr-escuta do udio"}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:br?`Durao ${br}`:zr?`Tamanho ${(zr.size/(1024*1024)).toFixed(1)} MB`:""})]}),s.jsx("button",{type:"button",onClick:Z0,disabled:Gr,className:"inline-flex items-center justify-center w-9 h-9 rounded-full bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 transition","aria-label":"Enviar udio",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M2.31 20.87 22 12 2.31 3.13a.75.75 0 0 0-.98.97L4.7 11.1c.1.25.1.53 0 .78l-3.37 7a.75.75 0 0 0 .98.98Z"})})}),s.jsx("button",{type:"button",onClick:uf,className:"inline-flex items-center justify-center w-9 h-9 rounded-full bg-slate-100 text-slate-600 hover:bg-red-50 hover:text-red-600 transition","aria-label":"Excluir udio",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M9 3.75A.75.75 0 0 1 9.75 3h4.5a.75.75 0 0 1 .75.75V5h3a.75.75 0 0 1 0 1.5h-.522l-.73 12.035A2.25 2.25 0 0 1 14.508 20H9.492a2.25 2.25 0 0 1-2.19-1.965L6.57 6.5H6a.75.75 0 0 1 0-1.5h3V3.75Zm1.5 3.75a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Zm4.5 0a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Z"})})})]})]}),N.length>0&&s.jsx("div",{className:"px-3 py-2 border-t border-slate-200 bg-white dark:bg-slate-900 flex flex-wrap gap-3 flex-wrap",children:N.map(o=>{var d,p,g;return s.jsxs("div",{className:"flex items-center gap-3 border border-slate-200 dark:border-slate-700 rounded-lg px-2 py-1.5 bg-slate-50 dark:bg-slate-800/50",children:[o.preview?s.jsx("img",{src:o.preview,alt:o.file.name,className:"w-16 h-16 object-cover rounded border border-slate-200 dark:border-slate-600"}):s.jsx("div",{className:"w-16 h-16 flex items-center justify-center rounded border border-dashed border-slate-300 bg-slate-100 dark:bg-slate-700/40 text-[11px] font-semibold text-slate-600 dark:text-slate-200",children:(d=o.file.type)!=null&&d.startsWith("audio")?"udio":(p=o.file.type)!=null&&p.startsWith("Vdeo")?"Vdeo":(g=o.file.type)!=null&&g.includes("pdf")?"PDF":"Arquivo"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"truncate text-xs font-medium text-slate-700 dark:text-slate-200",title:o.file.name,children:o.file.name}),s.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:[((o.file.size||0)/(1024*1024)).toFixed(2)," MB"]})]}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-red-600 text-sm",onClick:()=>Ul(o.id),"aria-label":`Remover anexo ${o.file.name}`,children:"Remover"})]},o.id)})}),s.jsxs("form",{ref:Xs,onSubmit:ru,className:`chat-composer relative flex flex-col gap-2 p-3 border-t border-slate-200/70 bg-white/90 dark:bg-slate-900/70 backdrop-blur ${i?"":"hidden"}`,children:[s.jsxs("div",{className:"flex w-full items-center gap-2 flex-wrap md:flex-nowrap",children:[s.jsx("button",{type:"button",ref:ss,onClick:()=>Nn?Br(!1):Ll(),title:"Emojis",className:"flex-shrink-0 px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Emojis",children:s.jsx(Gw,{className:"w-5 h-5"})}),s.jsxs("button",{type:"button",onClick:()=>{var o;try{er.current&&(er.current.value="")}catch{}(o=er.current)==null||o.click()},title:"Anexar",className:"inline-flex shrink-0 items-center justify-center p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Anexar",style:{fontSize:0},children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:s.jsx("path",{d:"M21.44 11.05l-9.19 9.19a5 5 0 11-7.07-7.07l9.19-9.19a3 3 0 114.24 4.24l-9.19 9.19a1 1 0 11-1.41-1.41l8.49-8.49"})}),s.jsx("span",{className:"sr-only",children:"Anexar arquivo"})]}),s.jsx("input",{ref:er,type:"file",multiple:!0,accept:"*/*",onChange:o=>{const d=Array.from(o.target.files||[]);ca(d)},className:"hidden"}),s.jsx("textarea",{ref:_n,value:v,onChange:o=>b(o.target.value),onKeyDown:o=>{o.key==="Enter"&&!o.shiftKey&&!o.altKey&&!o.ctrlKey&&!o.metaKey&&!o.isComposing&&(o.preventDefault(),ru())},onPaste:o=>{var d;try{const p=((d=o.clipboardData)==null?void 0:d.items)||[];for(let g=0;g<p.length;g++){const j=p[g];if(j&&typeof j.type=="string"&&j.type.startsWith("image/")){const S=j.getAsFile();if(S){const R=`paste-${Date.now()}.${(S.type.split("/")[1]||"png").replace(/[^a-z0-9]/gi,"")}`,L=new File([S],R,{type:S.type||"image/png"});ca([L]),o.preventDefault();break}}}}catch{}},placeholder:"Digite sua mensagem... (Enter envia, Shift+Enter quebra linha)",rows:1,className:"flex-1 min-w-0 border border-slate-300 dark:border-slate-700 rounded-xl px-3 py-3 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800 resize-y min-h-[40px]"}),s.jsx("button",{type:"button",onClick:()=>{ar?Gr||ru():fe?H0():W0()},className:`${Gr?"bg-blue-400 text-white cursor-wait":ar?"bg-blue-600 text-white hover:bg-blue-700 shadow":fe?"bg-red-600 text-white hover:bg-red-700 shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300 shadow"} inline-flex items-center justify-center rounded-full h-10 flex-shrink-0 transition ${fe&&!ar?"px-4 gap-2":"w-10"}`,title:Gr?"Enviando...":ar?"Enviar":fe?"Parar gravao":"Gravar udio",disabled:Gr,children:ar?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M2.31 20.87 22 12 2.31 3.13a.75.75 0 0 0-.98.97L4.7 11.1c.1.25.1.53 0 .78l-3.37 7a.75.75 0 0 0 .98.98Z"})}):fe?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M12 14.5a3.5 3.5 0 0 0 3.5-3.5V7a3.5 3.5 0 1 0-7 0v4a3.5 3.5 0 0 0 3.5 3.5Zm5-3.5a5 5 0 0 1-10 0H5a7 7 0 0 0 6 6.92V20h2v-2.08A7 7 0 0 0 19 11h-2Z"})})}),fe&&!ar&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",qe>0?`${qe}s`:"REC"]})]}),ar&&x&&s.jsx("div",{className:"text-sm text-red-600",children:x}),!ff&&!hf&&He&&s.jsx("div",{className:"text-sm text-red-600",children:He}),Nn&&s.jsxs("div",{className:"fixed mb-2 bg-white border border-slate-200 rounded-md p-2 shadow z-50 overflow-y-auto overflow-x-hidden dark:bg-slate-900 dark:border-slate-700",style:{left:Math.max(4,Sn.left),bottom:Math.max(4,Sn.bottom||0),width:`${Sn.width||360}px`,maxHeight:`${Sn.maxHeight||416}px`},children:[s.jsx("button",{type:"button",className:"absolute top-2 right-2 p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Fechar",onClick:()=>Br(!1),title:"Fechar",children:s.jsx(zu,{className:"w-4 h-4"})}),!1,!1,s.jsx("div",{ref:na,className:"relative max-h-80 overflow-y-auto overflow-x-hidden pr-1",children:aa.filter(o=>o!=="recent"||Cn.length>0).filter(o=>o!=="favoritos"||(Dn||[]).length>0).filter(o=>o!=="recent"&&o!=="favoritos"?(_o[o]||[]).length>0:!0).map(o=>{var d;return s.jsxs("div",{children:[s.jsx("div",{ref:Fl(o),className:"sticky top-0 bg-white text-[11px] text-slate-500 mb-1 mt-1 dark:bg-slate-900 dark:text-slate-400",children:o==="recent"?"Recentes":o==="favoritos"?"Favoritos":((d=e1.find(p=>p.key===o))==null?void 0:d.label)||o}),s.jsx("div",{className:"grid grid-cols-7 sm:grid-cols-8 md:grid-cols-10 gap-1 mb-2",children:(o==="recent"?Cn:o==="favoritos"?Dn||[]:_o[o]||[]).map(p=>s.jsxs("button",{type:"button",onClick:()=>V0(p),onContextMenu:g=>{g.preventDefault(),Tl(p)},className:`relative inline-flex items-center justify-center w-8 h-8 md:w-9 md:h-9 text-2xl leading-none hover:bg-slate-100 dark:hover:bg-slate-700/60 rounded px-1.5 ${(Dn||[]).includes(p)?"bg-yellow-50":""}`,children:[(Dn||[]).includes(p)&&s.jsx("span",{className:"absolute -top-0.5 -left-0.5 text-[10px] text-yellow-600",children:""}),p]},`sec-${o}-${p}`))})]},`sec-${o}`)})}),Re==="recent"&&Cn.length===0&&s.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Sem recentes ainda"})]})]})]}),!On&&Hl&&s.jsx("button",{type:"button",className:"fixed inset-0 z-30 bg-slate-900/30 backdrop-blur-[1px] lg:hidden","aria-label":"Fechar detalhes",onClick:()=>va(!1)}),Hl&&s.jsxs("aside",{className:`flex h-full flex-col border-l border-slate-200 bg-white dark:bg-slate-900/70 transition-transform duration-200 ease-out ${On?"w-[360px] max-w-sm flex-shrink-0":"fixed inset-y-0 right-0 z-40 w-full max-w-sm shadow-xl"}`,children:[s.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 flex items-center justify-between",children:[s.jsx("div",{className:"font-semibold",children:"Detalhes"}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700","aria-label":"Fechar detalhes",onClick:()=>va(!1),children:""}),fe&&!ar&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",qe>0?`${qe}s`:"REC"]})]}),s.jsx("div",{className:"px-4 pt-2 border-b border-slate-200",children:s.jsxs("div",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("button",{className:`px-3 py-2 ${G==="perfil"?"border-b-2 border-blue-600 text-blue-700":"text-slate-600 hover:text-slate-800"}`,onClick:()=>te("perfil"),children:"Perfil"}),s.jsx("button",{className:`px-3 py-2 ${G==="arquivos"?"border-b-2 border-blue-600 text-blue-700":"text-slate-600 hover:text-slate-800"}`,onClick:()=>te("arquivos"),children:"Arquivos"}),s.jsx("button",{className:`px-3 py-2 ${G==="favoritos"?"border-b-2 border-blue-600 text-blue-700":"text-slate-600 hover:text-slate-800"}`,onClick:()=>te("favoritos"),children:"Favoritos"}),fe&&!ar&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",qe>0?`${qe}s`:"REC"]})]})}),s.jsx("div",{className:"p-4 space-y-4 overflow-auto flex-1",children:ql?s.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):s.jsxs(s.Fragment,{children:[G==="perfil"&&s.jsx(s.Fragment,{children:Ql==="contact"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:ve!=null&&ve.avatarUrl?s.jsx("img",{src:zt(ve.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-slate-500 text-sm",children:"Sem foto"})}),s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"text-center font-semibold truncate",children:(ve==null?void 0:ve.name)||"Contato"}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[(ve==null?void 0:ve.email)&&s.jsx("div",{className:"px-3 py-1 rounded bg-slate-50 border border-slate-200 truncate text-center",children:ve.email}),(ve==null?void 0:ve.phone)&&s.jsx("div",{className:"px-3 py-1 rounded bg-slate-50 border border-slate-200 truncate text-center",children:ve.phone})]})]})]}),s.jsxs("div",{className:"mt-3 flex justify-center gap-2",children:[(ve==null?void 0:ve.phone)&&s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{const o=new URLSearchParams;ve.phone&&o.set("to",ve.phone),ve.name&&o.set("name",ve.name),ve.id&&o.set("id",ve.id),os(`/telefonia?${o.toString()}`)},children:"Ligar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>te("arquivos"),children:"Ver arquivos"})]}),s.jsxs("div",{className:"mt-5",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Grupos em comum"}),Qi?s.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):Jl?s.jsx("div",{className:"text-sm text-red-600",children:Jl}):Kl.filter(o=>((o==null?void 0:o.name)||"").toUpperCase()!=="DM").length>0?s.jsx("ul",{className:"space-y-1",children:Kl.filter(o=>((o==null?void 0:o.name)||"").toUpperCase()!=="DM").map(o=>s.jsx("li",{children:s.jsx("button",{type:"button",className:"w-full text-left px-2 py-1 rounded border border-slate-200 hover:bg-slate-50",onClick:()=>{u({id:o.id,name:o.name}),sr()},children:o.name})},o.id))}):s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum grupo em comum."})]})]}):Ql==="group"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:i!=null&&i.avatarUrl?s.jsx("img",{src:zt(i.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-slate-500 text-sm",children:"Grupo"})}),s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"text-center font-semibold truncate",children:(i==null?void 0:i.name)||"Grupo"})})]}),s.jsxs("div",{className:"mt-5",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Participantes"}),Yl?s.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):w?s.jsx("div",{className:"text-sm text-red-600",children:w}):ba.length>0?s.jsx("ul",{className:"space-y-1",children:ba.map(o=>{var d,p,g,j,S;return s.jsxs("li",{className:"flex items-center gap-2 px-2 py-1 rounded border border-slate-200",children:[s.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center shrink-0",children:(d=o.user)!=null&&d.avatarUrl?s.jsx("img",{src:zt(o.user.avatarUrl),alt:((p=o.user)==null?void 0:p.name)||"participante",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-[10px] text-slate-500",children:(((g=o.user)==null?void 0:g.name)||"?").slice(0,1).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm truncate",children:((j=o.user)==null?void 0:j.name)||"Participante"}),((S=o.user)==null?void 0:S.email)&&s.jsx("div",{className:"text-[11px] text-slate-500 truncate",children:o.user.email})]}),o.role&&s.jsx("span",{className:"text-[11px] text-slate-500 ml-2",children:o.role})]},o.id)})}):s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum participante."})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:Na?s.jsx("img",{src:URL.createObjectURL(Na),alt:"avatar",className:"w-full h-full object-cover"}):nr!=null&&nr.avatarUrl?s.jsx("img",{src:zt(nr.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-slate-500",children:"Sem foto"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Foto de perfil"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"pfAvatar",type:"file",accept:"image/*",className:"hidden",onChange:o=>{var d;return eo(((d=o.target.files)==null?void 0:d[0])||null)}}),s.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var o;return(o=document.getElementById("pfAvatar"))==null?void 0:o.click()},children:"Alterar"}),Na&&s.jsx("button",{type:"button",className:"px-2 py-1 rounded text-red-600 hover:bg-red-50",onClick:()=>eo(null),children:"Remover"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Nome"}),s.jsx("input",{value:Le,onChange:o=>Te(o.target.value),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"E-mail"}),s.jsx("input",{value:(nr==null?void 0:nr.email)||"",disabled:!0,className:"w-full border rounded px-3 py-2 bg-slate-50 text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Telefone"}),s.jsx("input",{value:Qr,onChange:o=>Kd(o.target.value),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Endereo"}),s.jsx("input",{value:ja,onChange:o=>Zd(o.target.value),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Status"}),s.jsx("input",{value:Gi,onChange:o=>Xl(o.target.value),placeholder:"Ex.: Disponvel",className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Y0,children:"Salvar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{eo(null),cf(void 0,{force:!0})},children:"Cancelar"})]})]}),s.jsxs("div",{className:"pt-3 border-t border-slate-200 space-y-2",children:[s.jsx("div",{className:"font-medium text-sm",children:"Alterar senha"}),s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx("input",{type:"password",value:Ki,onChange:o=>Jd(o.target.value),placeholder:"Senha atual",className:"w-full border rounded px-3 py-2"}),s.jsx("input",{type:"password",value:Zi,onChange:o=>Yd(o.target.value),placeholder:"Nova senha",className:"w-full border rounded px-3 py-2"}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-slate-800 text-white hover:bg-slate-900",onClick:X0,children:"Atualizar senha"})})]})]})]})}),G==="arquivos"&&s.jsxs("div",{className:"space-y-2",children:[f.filter(o=>o.type!=="text"&&!o.deletedAt).map(o=>s.jsxs("div",{className:"flex items-center justify-between border rounded px-3 py-2 text-sm",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:o.type==="image"||o.type==="gif"?"Imagem":o.type==="audio"?"udio":"Anexo"}),s.jsx("div",{className:"text-slate-500 truncate max-w-[220px]",children:o.type==="text"?o.content:In(o.content)||o.content})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsxs("span",{className:"text-[11px] text-slate-500",children:[new Date(o.createdAt).toLocaleDateString("pt-BR")," ",new Date(o.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]}),s.jsx("a",{className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",href:zt(o.content),target:"_blank",rel:"noreferrer",children:"Abrir"})]})]},o.id)),f.filter(o=>o.type!=="text"&&!o.deletedAt).length===0&&s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum arquivo nesta conversa."})]}),G==="favoritos"&&s.jsxs("div",{className:"space-y-2",children:[tf.map(o=>{var d;return s.jsxs("div",{className:"border rounded px-3 py-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium truncate",children:((d=o.author)==null?void 0:d.name)||"Voc"}),s.jsxs("div",{className:"text-[11px] text-slate-500",children:[new Date(o.createdAt).toLocaleDateString("pt-BR")," ",new Date(o.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("div",{className:"mt-1",children:o.type==="text"?o.content:o.type==="image"||o.type==="gif"?"Imagem":o.type==="audio"?"udio":"Anexo"}),s.jsx("div",{className:"mt-1",children:s.jsx("button",{className:"text-[12px] text-red-600 hover:underline",onClick:()=>eu(o),children:"Remover favorito"})})]},o.id)}),tf.length===0&&s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhuma mensagem favoritada nesta conversa."})]}),Xd&&s.jsx("div",{className:"text-green-600 text-sm",children:Xd}),ef&&s.jsx("div",{className:"text-red-600 text-sm",children:ef})]})})]}),U&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button","aria-label":"Fechar encaminhamento",className:`fixed inset-0 z-50 bg-slate-900/50 backdrop-blur-sm ${P?"cursor-wait":""}`,onClick:()=>{P||ie()},disabled:P}),s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6",children:[s.jsxs("div",{className:"relative w-full max-w-2xl rounded-xl border border-slate-200 bg-white p-5 shadow-2xl dark:border-slate-700 dark:bg-slate-900",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Encaminhar mensagem"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300",children:"Escolha uma conversa ou contato para encaminhar."})]}),s.jsx("button",{type:"button",className:`rounded p-1 text-slate-500 hover:bg-slate-100 hover:text-slate-700 dark:hover:bg-slate-800 ${P?"opacity-60 cursor-not-allowed":""}`,onClick:()=>{P||ie()},"aria-label":"Fechar",disabled:P,children:s.jsx(zu,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-3 rounded border-l-4 border-blue-500 bg-blue-50/70 px-3 py-2 text-sm text-slate-700 dark:border-blue-400 dark:bg-slate-800/70 dark:text-slate-100",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-blue-600 dark:text-blue-300",children:"Mensagem selecionada"}),s.jsx("div",{className:"mt-1 font-medium",children:((mf=U.author)==null?void 0:mf.name)||"Voc"}),s.jsx("div",{className:"truncate opacity-80",children:og||"Mensagem"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("input",{value:Q,onChange:o=>O(o.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100 dark:focus:border-blue-400 dark:focus:ring-blue-500/40",placeholder:"Buscar conversa ou contato..."})}),me&&s.jsx("div",{className:"mt-3 text-sm text-red-600",children:me}),re&&s.jsx("div",{className:"mt-3 text-sm text-green-600",children:re}),s.jsxs("div",{className:"mt-4 max-h-72 space-y-4 overflow-y-auto pr-1",children:[ou.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Conversas"}),s.jsx("div",{className:"space-y-2",children:ou.map(o=>s.jsxs("button",{type:"button",disabled:P,onClick:()=>lf(o),className:`flex w-full items-center gap-3 rounded-lg border border-slate-200 px-3 py-2 text-left transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:hover:bg-slate-800/70 ${P?"opacity-60":""}`,children:[s.jsx(Va,{url:o.avatarUrl,name:o.label,size:40}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium truncate text-slate-800 dark:text-slate-100",children:o.label}),o.subtitle&&s.jsx("div",{className:"truncate text-xs text-slate-500 dark:text-slate-400",children:o.subtitle}),s.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500",children:o.sourceLabel})]})]},`conv-${o.groupId}`))})]}),iu.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Contatos"}),s.jsx("div",{className:"space-y-2",children:iu.map(o=>s.jsxs("button",{type:"button",disabled:P,onClick:()=>lf(o),className:`flex w-full items-center gap-3 rounded-lg border border-slate-200 px-3 py-2 text-left transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:hover:bg-slate-800/70 ${P?"opacity-60":""}`,children:[s.jsx(Va,{url:o.avatarUrl,name:o.label,size:40,showStatus:!1}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium truncate text-slate-800 dark:text-slate-100",children:o.label}),o.subtitle&&s.jsx("div",{className:"truncate text-xs text-slate-500 dark:text-slate-400",children:o.subtitle}),s.jsxs("div",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500",children:["Contato",o.existingGroupId?"  DM existente":""]})]})]},`person-${o.userId}`))})]}),ou.length===0&&iu.length===0&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-300",children:"Nenhum destino encontrado."})]}),P&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-slate-500 dark:text-slate-300",children:[s.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-2 border-slate-400 border-t-transparent"}),"Encaminhando..."]}),s.jsx("div",{className:"mt-4 flex items-center justify-end gap-2",children:s.jsx("button",{type:"button",className:"rounded border border-slate-200 px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800",onClick:ie,disabled:P,children:"Cancelar"})})]}),s.jsx("button",{type:"button",onClick:Mi,className:"inline-flex items-center justify-center rounded-full border border-slate-300 bg-white/80 p-2 text-slate-600 transition hover:bg-slate-100 dark:border-slate-600 dark:bg-slate-800/80 dark:text-slate-100 dark:hover:bg-slate-700/60","aria-label":I?"Ativar modo claro":"Ativar modo escuro",title:I?"Modo claro":"Modo escuro",children:I?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"M12 18.75A6.75 6.75 0 1 0 5.25 12 6.75 6.75 0 0 0 12 18.75Z"}),s.jsx("path",{d:"M12 1.5V3"}),s.jsx("path",{d:"M12 21v1.5"}),s.jsx("path",{d:"m4.22 4.22 1.06 1.06"}),s.jsx("path",{d:"m18.72 18.72 1.06 1.06"}),s.jsx("path",{d:"M1.5 12H3"}),s.jsx("path",{d:"M21 12h1.5"}),s.jsx("path",{d:"m4.22 19.78 1.06-1.06"}),s.jsx("path",{d:"m18.72 5.28 1.06-1.06"})]}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:s.jsx("path",{d:"M12 3a7.5 7.5 0 0 0 10.5 9.5A9 9 0 1 1 12 3Z"})})})]})]})]})}function n1({message:e,mine:t,editingId:r,editText:n,setEditText:a,onStartEdit:l,onSave:i,onCancel:u}){return r===e.id?s.jsxs("div",{children:[s.jsx("textarea",{value:n,onChange:m=>a(m.target.value),className:"w-full border rounded px-2 py-1 text-sm text-slate-800",rows:2}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-blue-600 text-white text-xs hover:bg-blue-700",onClick:()=>i(e,n),children:"Salvar"}),s.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 text-xs hover:bg-slate-50",onClick:()=>u(),children:"Cancelar"})]})]}):s.jsxs("div",{children:[s.jsx("div",{className:"whitespace-pre-wrap break-words",style:{overflowWrap:"anywhere",wordBreak:"break-word"},children:r1(e.content||"")}),e.editedAt&&s.jsx("div",{className:"text-[10px] opacity-70",children:"(editado)"})]})}function Vu({read:e,title:t}){const r=e?"#ffffff":"#94a3b8",n=e?"rgba(0,0,0,0.35)":"none",a=2.2,l=e?3.2:0;return s.jsx("span",{title:t,"aria-label":t,className:"inline-flex items-center ml-1",children:s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M7 13l-2 2 3 3 2-2-3-3z",fill:r,opacity:"0.0"}),e&&s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M1.5 13.5l4 4 7-7",stroke:n,strokeWidth:l,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M8.5 13.5l4 4 9-9",stroke:n,strokeWidth:l,strokeLinecap:"round",strokeLinejoin:"round"})]}),s.jsx("path",{d:"M1.5 13.5l4 4 7-7",stroke:r,strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M8.5 13.5l4 4 9-9",stroke:r,strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round"})]})})}function Va({url:e,name:t,size:r=28,status:n,showStatus:a=!1}){const[l,i]=c.useState(!1),u={position:"relative",width:r,height:r,display:"inline-block"},f={width:r,height:r,borderRadius:"50%",objectFit:"cover",flexShrink:0,display:"block"},m=(t||"U").trim().slice(0,2).toUpperCase(),v=(()=>{const C=String(n||"").toLowerCase();return C==="online"?"#16a34a":C==="busy"||C==="ocupado"?"#dc2626":C==="away"||C==="ausente"?"#f59e0b":"#94a3b8"})(),b=Math.max(8,Math.floor(r*.32)),N={position:"absolute",right:-1,bottom:-1,width:b,height:b,borderRadius:"50%",background:v,border:"2px solid rgba(255,255,255,0.95)",boxShadow:"0 0 0 1px rgba(15,23,42,0.08)"};return s.jsxs("span",{style:u,children:[e&&!l?s.jsx("img",{src:zt(e),alt:t||"avatar",style:f,onError:()=>i(!0)}):s.jsx("div",{style:{...f,background:"#cbd5e1",color:"#334155",display:"grid",placeItems:"center",fontSize:Math.max(10,Math.floor(r*.42)),fontWeight:"bold"},children:m}),a&&s.jsx("span",{style:N})]})}function s1(){return s.jsx(_0,{})}function a1(){const e=wn(),t=c.useMemo(()=>new URLSearchParams(e.search),[e.search]),[r,n]=c.useState(t.get("to")||""),[a]=c.useState(t.get("name")||""),[l,i]=c.useState("idle"),[u,f]=c.useState(""),[m,v]=c.useState({loading:!0,data:null,error:""}),[b,N]=c.useState({registered:!1}),[C,D]=c.useState({phase:"idle",reason:""}),[A,I]=c.useState(0),k=c.useRef(null),x=c.useRef(null),y=c.useRef(null);c.useEffect(()=>{(async()=>{try{const P=await H.get("/phone/me");v({loading:!1,data:P,error:""})}catch(P){v({loading:!1,data:null,error:P.message||"Falha ao carregar SIP"})}})()},[]),c.useEffect(()=>{const P=ee=>{var me;return N({registered:!!((me=ee==null?void 0:ee.detail)!=null&&me.registered)})};window.addEventListener("sip:reg",P);try{N({registered:localStorage.getItem("sip_registered")==="1"})}catch{}return()=>window.removeEventListener("sip:reg",P)},[]);function E(){_(),I(0),k.current=setInterval(()=>I(P=>P+1),1e3)}function _(){try{clearInterval(k.current)}catch{}k.current=null}async function U(){f("");const P=String(r||"").replace(/\D/g,"");if(P.length<2){f("Informe um nmero/ramal vlido");return}try{const ee=y.current||$w();if(!ee){f("SIP no inicializado/registrado"),i("error");return}y.current=ee,i("calling"),D({phase:"progress",reason:""}),await ee.call(P,{onProgress:()=>D({phase:"progress",reason:""}),onAccepted:()=>{i("in-call"),D({phase:"accepted",reason:""}),E()},onEnded:()=>{i("ended"),D({phase:"ended",reason:""}),_()},onFailed:$=>{var Se;const re=($==null?void 0:$.response)&&($.response.status_code||((Se=$.response)==null?void 0:Se.statusCode)),xe=($==null?void 0:$.cause)||($==null?void 0:$.message)||"";i("error"),D({phase:"failed",reason:re?`${re} ${xe}`.trim():xe||"Falha SIP"}),_(),f(re?`Falha SIP: ${re} ${xe||""}`.trim():"Falha SIP ou destino ocupado")},onTrack:$=>{try{x.current&&(x.current.srcObject=$)}catch{}}})||i("ended")}catch(ee){f(ee.message||"Falha ao iniciar chamada"),i("error")}}function V(){var P,ee;try{(ee=(P=y.current)==null?void 0:P.hangup)==null||ee.call(P)}catch{}i("ended"),_()}const Q=(()=>{var ee,me,$;return String(r||"").replace(/\D/g,"").length>=2&&!!b.registered&&!!((ee=m==null?void 0:m.data)!=null&&ee.hasPassword&&((me=m==null?void 0:m.data)!=null&&me.domain)&&(($=m==null?void 0:m.data)!=null&&$.extension))})();function O(P){var ee,me;if(l==="in-call"||l==="calling")try{(me=(ee=y.current)==null?void 0:ee.dtmf)==null||me.call(ee,P)}catch{}else n($=>($||"")+String(P))}return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Telefonia"}),s.jsx("div",{className:"flex-1 p-4",children:s.jsxs("div",{className:"max-w-xl mx-auto bg-white/80 dark:bg-slate-800/70 backdrop-blur border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-6 shadow-sm",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Discador"}),a&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 mb-2",children:["Contato: ",s.jsx("span",{className:"font-medium",children:a})]}),s.jsx("div",{className:"mb-3",children:m.loading?s.jsx("div",{className:"text-xs text-slate-500",children:"Carregando configurao SIP..."}):m.error?s.jsx("div",{className:"p-2 rounded border border-red-300 bg-red-50 text-sm text-red-700",children:m.error}):!m.data||!m.data.hasPassword?s.jsx("div",{className:"p-2 rounded border border-yellow-300 bg-yellow-50 text-sm text-yellow-800",children:"Sua conta SIP ainda no est configurada. Solicite ao administrador para cadastrar domnio, ramal e senha."}):s.jsxs("div",{className:"p-2 rounded border border-green-300 bg-green-50 text-sm text-green-800",children:["Conta SIP configurada: ",s.jsx("span",{className:"font-medium",children:m.data.domain}),"  Ramal ",s.jsx("span",{className:"font-medium",children:m.data.extension})]})}),s.jsxs("div",{className:"mb-2 text-xs text-slate-600",children:["SIP registro: ",b.registered?"registrado":"no registrado"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{value:r,onChange:P=>n(P.target.value),placeholder:"Nmero/Ramal",className:"flex-1 border rounded px-3 py-2"}),s.jsx("button",{disabled:!Q||l==="calling"||l==="in-call",className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",onClick:U,children:"Ligar"}),s.jsx("button",{disabled:!(l==="calling"||l==="in-call"),className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:V,children:"Desligar"})]}),u&&s.jsx("div",{className:"mt-2 text-sm text-red-600",children:u}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 max-w-xs",children:[["1","2","3","4","5","6","7","8","9","*","0","#"].map(P=>s.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>O(P),children:P},P)),s.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50 col-span-2",onClick:()=>n(""),children:"Limpar"}),s.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>n(P=>String(P||"").slice(0,-1)),children:""})]}),s.jsxs("div",{className:"mt-4 text-xs text-slate-600 dark:text-slate-300",children:["Status: ",l," ",l==="in-call"&&`(${Math.floor(A/60).toString().padStart(2,"0")}:${(A%60).toString().padStart(2,"0")})`]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs mb-1 text-slate-500",children:"udio remoto"}),s.jsx("audio",{ref:x,autoPlay:!0,playsInline:!0})]})]})})]})}function l1(){const e=pr(),[t,r]=c.useState([]),[n,a]=c.useState(!0),[l,i]=c.useState(""),[u,f]=c.useState("Reunio"),[m,v]=c.useState(""),[b,N]=c.useState(!0),[C,D]=c.useState(""),[A,I]=c.useState(""),[k,x]=c.useState(""),[y,E]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const O=await H.get("/meetings");r(O)}catch(O){i(O.message||"Falha ao carregar reunies")}finally{a(!1)}})()},[]);async function _(O){var P;(P=O==null?void 0:O.preventDefault)==null||P.call(O),i(""),E(!0);try{const ee=k.split(",").map(xe=>xe.trim()).filter(Boolean).map(xe=>({email:xe})),me={title:u||"Reunio",description:m||void 0,isInstant:b,scheduledStart:!b&&C?new Date(C).toISOString():void 0,scheduledEnd:!b&&A?new Date(A).toISOString():void 0,participants:ee},$=await H.post("/meetings",me),re=await H.get("/meetings");r(re),f("Reunio"),v(""),N(!0),D(""),I(""),x(""),$!=null&&$.code&&($!=null&&$.isInstant)&&e(`/telefonia?to=${$.code}&name=${encodeURIComponent($.title)}`)}catch(ee){i(ee.message||"Falha ao criar reunio")}finally{E(!1)}}async function U(O){const P=prompt("Informe e-mails separados por vrgula:");if(P)try{const ee=P.split(",").map($=>$.trim()).filter(Boolean).map($=>({email:$}));await H.post(`/meetings/${O}/participants`,{participants:ee});const me=await H.get("/meetings");r(me)}catch(ee){alert(ee.message||"Falha ao adicionar convidados")}}function V(O,P){e(`/telefonia?to=${O}&name=${encodeURIComponent(P||"Reunio")}`)}function Q(O){try{navigator.clipboard.writeText(O),alert("Copiado!")}catch{alert(O)}}return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Reunies"}),s.jsxs("div",{className:"flex-1 p-4 space-y-6",children:[s.jsxs("form",{onSubmit:_,className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Nova reunio"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Ttulo"}),s.jsx("input",{value:u,onChange:O=>f(O.target.value),className:"border rounded px-3 py-2"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm mt-6 md:mt-0",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:O=>N(O.target.checked)}),"Instantnea"]}),!b&&s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Incio"}),s.jsx("input",{type:"datetime-local",value:C,onChange:O=>D(O.target.value),className:"border rounded px-3 py-2"})]}),s.jsxs("label",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Fim"}),s.jsx("input",{type:"datetime-local",value:A,onChange:O=>I(O.target.value),className:"border rounded px-3 py-2"})]})]}),s.jsxs("label",{className:"md:col-span-2 flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Descrio (opcional)"}),s.jsx("textarea",{value:m,onChange:O=>v(O.target.value),className:"border rounded px-3 py-2",rows:2})]}),s.jsxs("label",{className:"md:col-span-2 flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Convidados (e-mails, separados por vrgula)"}),s.jsx("input",{value:k,onChange:O=>x(O.target.value),className:"border rounded px-3 py-2",placeholder:"exemplo@dominio.com, outro@dominio.com"})]})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("button",{type:"submit",disabled:y,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:y?"Criando...":"Criar"}),l&&s.jsx("span",{className:"text-sm text-red-600",children:l})]})]}),s.jsxs("div",{className:"max-w-4xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Minhas reunies"}),n?s.jsx("div",{className:"text-sm text-slate-600",children:"Carregando..."}):t.length===0?s.jsx("div",{className:"text-sm text-slate-600",children:"Nenhuma reunio encontrada"}):s.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(O=>s.jsxs("li",{className:"py-3 flex items-center gap-3 justify-between",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"font-medium truncate",children:[O.title," ",s.jsxs("span",{className:"text-xs text-slate-500",children:["#",O.code]})]}),s.jsxs("div",{className:"text-xs text-slate-500 truncate",children:[O.isInstant?"Instantnea":"Agendada",O.scheduledStart?`  ${new Date(O.scheduledStart).toLocaleString()}`:""]})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>V(O.code,O.title),children:"Entrar"}),s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>U(O.id),children:"Convidar"}),s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>e(`/reunioes/${O.id}`),children:"Detalhes"}),s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>Q(O.code),children:"Copiar cdigo"})]})]},O.id))})]})]})]})}function o1(){const{id:e}=l0(),t=pr(),[r,n]=c.useState(null),[a,l]=c.useState(""),[i,u]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const v=await H.get(`/meetings/${e}`);n(v)}catch(v){l(v.message||"Falha ao carregar")}finally{u(!1)}})()},[e]);function f(v){try{navigator.clipboard.writeText(v)}catch{}}async function m(){const v=prompt("Informe e-mails separados por vrgula:");if(v)try{const b=v.split(",").map(C=>C.trim()).filter(Boolean).map(C=>({email:C}));await H.post(`/meetings/${e}/participants`,{participants:b});const N=await H.get(`/meetings/${e}`);n(N)}catch(b){alert(b.message||"Falha ao adicionar")}}return i?s.jsx("div",{className:"p-4",children:"Carregando..."}):a?s.jsx("div",{className:"p-4 text-red-600",children:a}):r?s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Detalhes da reunio"}),s.jsxs("div",{className:"flex-1 p-4 space-y-4",children:[s.jsxs("div",{className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsxs("div",{className:"text-xl font-semibold",children:[r.title," ",s.jsxs("span",{className:"text-xs text-slate-500",children:["#",r.code]})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[r.isInstant?"Instantnea":"Agendada",r.scheduledStart?`  ${new Date(r.scheduledStart).toLocaleString()}`:""]}),r.description&&s.jsx("div",{className:"mt-2 text-sm",children:r.description}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:()=>t(`/telefonia?to=${r.code}&name=${encodeURIComponent(r.title)}`),children:"Entrar"}),s.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:()=>f(r.code),children:"Copiar cdigo"}),s.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:m,children:"Convidar"})]})]}),s.jsxs("div",{className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Participantes"}),s.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.participants.map(v=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:v.name||v.email}),s.jsx("div",{className:"text-xs text-slate-500",children:v.email})]}),s.jsx("div",{className:"flex items-center gap-2",children:v.inviteToken&&s.jsx("button",{className:"px-2 py-1 text-xs rounded border border-slate-300 dark:border-slate-600",onClick:()=>f(`${window.location.origin}/join/${v.inviteToken}`),children:"Copiar link"})})]},v.id))})]})]})]}):s.jsx("div",{className:"p-4",children:"No encontrado"})}const i1="http://localhost:3001/api";async function u1(e){const t=await fetch(e);if(!t.ok)throw new Error(await t.text());return t.json()}function c1(){const{token:e}=l0();pr();const[t,r]=c.useState(null),[n,a]=c.useState("");if(c.useEffect(()=>{(async()=>{try{const f=await u1(`${i1}/meetings/invite/${e}`);r(f)}catch(f){a(f.message||"Convite invlido")}})()},[e]),n)return s.jsxs("div",{className:"p-6 max-w-xl mx-auto text-center",children:[s.jsx("div",{className:"text-xl font-semibold mb-2",children:"Convite invlido"}),s.jsx("div",{className:"text-slate-600",children:String(n)})]});if(!t)return s.jsx("div",{className:"p-6 max-w-xl mx-auto text-center",children:"Carregando..."});const{meeting:l,participant:i}=t,u=`/telefonia?to=${l.code}&name=${encodeURIComponent(l.title)}`;return s.jsx("div",{className:"p-6 max-w-xl mx-auto",children:s.jsxs("div",{className:"bg-white/80 border border-slate-200 rounded-xl p-6 shadow-sm",children:[s.jsx("div",{className:"text-xl font-semibold",children:"Convite para reunio"}),s.jsx("div",{className:"mt-2 text-slate-700",children:l.title}),l.scheduledStart&&s.jsx("div",{className:"text-sm text-slate-500",children:new Date(l.scheduledStart).toLocaleString()}),s.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:["Convidado: ",i.name||i.email||"Convidado"]}),s.jsxs("div",{className:"mt-6 flex gap-3",children:[s.jsx("a",{href:u,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Abrir no app"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(l.code).then(()=>alert("Cdigo copiado"))},className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",children:"Copiar cdigo"})]}),s.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Se necessrio, faa login para entrar."})]})})}function d1(){const e=pr(),[t,r]=c.useState([]),[n,a]=c.useState(""),[l,i]=c.useState(!0),[u,f]=c.useState("");c.useEffect(()=>{(async()=>{try{const v=await H.get("/users/all");r(v)}catch(v){f(v.message||"Falha ao carregar contatos")}finally{i(!1)}})()},[]);const m=t.filter(v=>(v.name+" "+(v.email||"")).toLowerCase().includes(n.toLowerCase()));return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Contatos"}),s.jsx("div",{className:"flex-1 p-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto bg-white/80 dark:bg-slate-800/70 backdrop-blur border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("div",{className:"flex items-center gap-2 mb-3",children:s.jsx("input",{value:n,onChange:v=>a(v.target.value),placeholder:"Buscar por nome ou e-mail",className:"flex-1 border rounded px-3 py-2"})}),l?s.jsx("div",{className:"text-sm text-slate-600",children:"Carregando..."}):u?s.jsx("div",{className:"text-sm text-red-600",children:u}):s.jsxs("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[m.map(v=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[v.avatarUrl?s.jsx("img",{src:zt(v.avatarUrl),alt:v.name,className:"w-8 h-8 rounded-full object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-300"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:v.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:v.email})]})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[v.phone&&s.jsx("span",{className:"text-xs text-slate-500 hidden md:inline",children:v.phone}),s.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700/60",onClick:()=>{const b=new URLSearchParams;v.phone&&b.set("to",v.phone),b.set("name",v.name),b.set("id",v.id),e(`/telefonia?${b.toString()}`)},children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M2.25 6.75c0-1.24 1.01-2.25 2.25-2.25h3c.97 0 1.8.62 2.1 1.54l.86 2.58a2.25 2.25 0 0 1-.57 2.31l-1.21 1.21a12.06 12.06 0 0 0 4.88 4.88l1.21-1.21a2.25 2.25 0  1  2.31-.57l2.58.86c.92.3 1.54 1.13 1.54 2.1v3c0 1.24-1.01 2.25-2.25 2.25H18c-8.28 0-15-6.72-15-15v-3Z"})}),"Ligar"]})]})]},v.id)),m.length===0&&s.jsx("li",{className:"py-6 text-sm text-slate-500 text-center",children:"Nenhum contato encontrado"})]})]})})]})}function f1(){var wa,ba,ka,Yl;const e=Us(),[t,r]=c.useState("usuarios"),[n,a]=c.useState(""),[l,i]=c.useState([]),[u,f]=c.useState(""),[m,v]=c.useState(""),[b,N]=c.useState(""),[C,D]=c.useState(""),[A,I]=c.useState(""),[k,x]=c.useState(!1),[y,E]=c.useState(""),[_,U]=c.useState(null),[V,Q]=c.useState(!1),[O,P]=c.useState(""),[ee,me]=c.useState(""),$=h=>(h||"").replace(/\D/g,""),re=h=>{const w=$(h).slice(0,11);return w.length<=2?w:w.length<=6?`(${w.slice(0,2)}) ${w.slice(2)}`:w.length===10?`(${w.slice(0,2)}) ${w.slice(2,6)}-${w.slice(6)}`:w.length>=11?`(${w.slice(0,2)}) ${w.slice(2,7)}-${w.slice(7)}`:w},[xe,Se]=c.useState([]),[nt,W]=c.useState(""),[B,ne]=c.useState(null),[T,J]=c.useState([]),[ce,ie]=c.useState(""),[fe,he]=c.useState(!1),[He,ze]=c.useState(""),[qe,Ur]=c.useState([]),[ae,Dl]=c.useState(!1),[Ue,_l]=c.useState(null),[Mr,Xn]=c.useState(""),[bn,Al]=c.useState(!1),[st,es]=c.useState(null);function K(h,w="info",F=3e3){es({message:h,type:w});try{F&&setTimeout(()=>es(null),F)}catch{}}const Jt=c.useCallback(h=>{if(!h)return"";try{return new Date(h).toLocaleString("pt-BR")}catch{return h}},[]),vt=c.useCallback(h=>{const w=Number(h);if(!Number.isFinite(w)||w<0)return"";if(w===0)return"0 B";const F=["B","KB","MB","GB","TB"],G=Math.min(F.length-1,Math.floor(Math.log(w)/Math.log(1024))),te=w/Math.pow(1024,G);return`${te>=10?te.toFixed(0):te.toFixed(1)} ${F[G]}`},[]),[kn,ts]=c.useState(""),[mr,jn]=c.useState(""),[Yt,rs]=c.useState(""),[_t,gr]=c.useState(""),[Rl,Xt]=c.useState([]),[$r,ns]=c.useState(null),[Nn,Br]=c.useState(""),[ss,Sn]=c.useState(!1),[Ys,Xs]=c.useState(""),Ll=c.useRef(null),le=c.useRef(null),dt=c.useMemo(()=>({autoEnabled:!1,time:"02:00",retentionDays:7,lastAutoRunAt:null,lastManualRunAt:null,lastManualResult:null,lastAutoResult:null,lastRestoreAt:null,lastRestoreName:null,lastRestoreActor:null}),[]),[ea,Mi]=c.useState([]),[Re,En]=c.useState(dt),[Cn,ta]=c.useState(!1),[Pl,ra]=c.useState(!1),[Dn,Il]=c.useState(""),[Tl,na]=c.useState(""),[sa,Fl]=c.useState(""),[aa,_n]=c.useState(!1),[er,xr]=c.useState(()=>{try{return localStorage.getItem("chat_bg")||"default"}catch{return"default"}}),[An,vr]=c.useState(""),[as,ls]=c.useState(""),[at,Y]=c.useState("");function os(h,w){if(!(typeof window>"u"))try{const F=Array.isArray(h)?h:[];if(w){const G=F.find(te=>te.id===w);if(G!=null&&G.url){localStorage.setItem("notif_sound_url",G.url),window.dispatchEvent(new Event("chat:alertSoundUpdated"));return}}localStorage.removeItem("notif_sound_url"),window.dispatchEvent(new Event("chat:alertSoundUpdated"))}catch{}}async function zr({silent:h}={}){try{const w=await H.get("/admin/config");rs((w==null?void 0:w.chatIconUrl)||""),gr((w==null?void 0:w.chatWallpaperUrl)||"");const F=Array.isArray(w==null?void 0:w.alertSounds)?w.alertSounds:[];Xt(F),ns((w==null?void 0:w.activeAlertSoundId)||null),os(F,(w==null?void 0:w.activeAlertSoundId)||null)}catch(w){h||K(w.message||"Falha ao carregar configuraes","error")}}c.useEffect(()=>{try{const h=localStorage.getItem("chat_icon");h&&(ts(h.startsWith("data:")?h:""),jn(h.startsWith("data:")?"":h))}catch{}(async()=>{try{const h=await(await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/public")).json();h!=null&&h.chatIconUrl&&rs(h.chatIconUrl),h!=null&&h.chatWallpaperUrl&&gr(h.chatWallpaperUrl)}catch{}})(),(async()=>{try{await zr({silent:!0})}catch{}})()},[]);function la(h){var G;const w=(G=h.target.files)==null?void 0:G[0];if(!w)return;if(!w.type.startsWith("image/")){K("Selecione uma imagem","error");return}const F=new FileReader;F.onload=()=>{ts(String(F.result)),jn("")},F.readAsDataURL(w)}function yt(h){var w,F,G;(w=h==null?void 0:h.preventDefault)==null||w.call(h);try{const te=(mr==null?void 0:mr.trim())||kn;if(!te){K("Defina uma imagem ou URL","error");return}localStorage.setItem("chat_icon",te);try{window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}try{localStorage.setItem("chat_bg",er||"default"),(G=(F=document.body)==null?void 0:F.setAttribute)==null||G.call(F,"data-chat-bg",er||"default"),window.dispatchEvent(new Event("chat:bgUpdated"))}catch{}K("Configuraes salvas","success")}catch{K("Falha ao salvar configuraes","error")}}async function oa(h){if(!h)return;const w=new FormData;w.append("icon",h);try{const F=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/icon",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:w});if(!F.ok){const te=await F.text();throw new Error(te||"Falha no upload")}const G=await F.json();if(G!=null&&G.chatIconUrl){rs(G.chatIconUrl),K("cone global atualizado","success");try{localStorage.setItem("chat_icon",G.chatIconUrl),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}}}catch(F){K(F.message||"Falha ao enviar cone","error")}}async function yr(h){if(!h)return;const w=new FormData;w.append("wallpaper",h);try{const F=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/wallpaper",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:w});if(!F.ok){const te=await F.text();throw new Error(te||"Falha no upload")}const G=await F.json();if(G!=null&&G.chatWallpaperUrl){gr(G.chatWallpaperUrl),document.documentElement.style.setProperty("--chat-wallpaper",`url('${G.chatWallpaperUrl}')`);try{localStorage.setItem("chat_wallpaper",G.chatWallpaperUrl),window.dispatchEvent(new Event("chat:wallpaperUpdated"))}catch{}K("Papel de parede global atualizado","success")}}catch(F){K(F.message||"Falha ao enviar papel de parede","error")}}async function is(){try{if(!_t){K("Nenhum papel de parede para salvar","error");return}const h=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({chatWallpaperUrl:_t})});if(!h.ok){const w=await h.text();throw new Error(w||"Falha ao salvar")}K("Papel de parede salvo para todos","success")}catch(h){K(h.message||"Falha ao salvar papel de parede","error")}}async function wr(){try{if(!(typeof window<"u"?window.confirm("Excluir papel de parede global?"):!0))return;const w=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/wallpaper",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}});if(!w.ok){const F=await w.text();throw new Error(F||"Falha ao excluir")}gr("");try{localStorage.removeItem("chat_wallpaper"),document.documentElement.style.removeProperty("--chat-wallpaper"),window.dispatchEvent(new Event("chat:wallpaperUpdated"))}catch{}K("Papel de parede global excludo","success")}catch(h){K(h.message||"Falha ao excluir papel de parede","error")}}const br=c.useCallback(async()=>{ta(!0);try{const h=await H.get("/admin/backup");Mi(Array.isArray(h==null?void 0:h.backups)?h.backups:[]);const w={...dt,...(h==null?void 0:h.settings)||{}};En(w)}catch(h){K(h.message||"Falha ao carregar backups","error")}finally{ta(!1)}},[dt]);async function us(){ra(!0);try{await H.post("/admin/backup/run",{}),K("Backup criado com sucesso","success"),await br()}catch(h){K(h.message||"Falha ao executar backup","error")}finally{ra(!1)}}async function cs(h){if(!h)return;let w=!0;if(typeof window<"u"&&(w=window.confirm(`Restaurar o backup "${h}"? Esta ao substituir mensagens e arquivos atuais.`)),!!w){Il(h);try{await H.post("/admin/backup/restore",{name:h,confirm:!0}),K("Backup restaurado com sucesso","success")}catch(F){K(F.message||"Falha ao restaurar backup","error")}finally{Il(""),await br()}}}async function tr(h){if(!h)return;let w=!0;if(typeof window<"u"&&(w=window.confirm(`Excluir backup "${h}"?`)),!!w){na(h);try{await H.delete(`/admin/backup/${encodeURIComponent(h)}`),K("Backup excludo","success")}catch(F){K(F.message||"Falha ao excluir backup","error")}finally{na(""),await br()}}}async function ia(h){if(h){Fl(h);try{const w=await fetch(`${Qt}/admin/backup/download/${encodeURIComponent(h)}`,{headers:{Authorization:`Bearer ${jt()||""}`}});if(!w.ok){const Le=await w.text();throw new Error(Le||"Falha ao preparar download")}const F=await w.blob(),G=window.URL.createObjectURL(F),te=document.createElement("a");te.href=G,te.download=`${h}.zip`,document.body.appendChild(te),te.click(),document.body.removeChild(te),window.URL.revokeObjectURL(G)}catch(w){K(w.message||"Falha ao baixar backup","error")}finally{Fl("")}}}async function Vr(h){var w;(w=h==null?void 0:h.preventDefault)==null||w.call(h),_n(!0);try{const F={autoEnabled:Re.autoEnabled,time:Re.time,retentionDays:Re.retentionDays},G=await H.post("/admin/backup/settings",F),te={...dt,...(G==null?void 0:G.settings)||F};En(te),K("Configuraes de backup salvas","success")}catch(F){K(F.message||"Falha ao salvar configuraes de backup","error")}finally{_n(!1)}}c.useEffect(()=>{t==="configuracoes"&&br()},[t,br]);function ds(){var h,w;try{(w=(h=Ll.current)==null?void 0:h.click)==null||w.call(h)}catch{}}async function Rn(h){var F,G;const w=(G=(F=h==null?void 0:h.target)==null?void 0:F.files)==null?void 0:G[0];if(w){if(w.type&&!w.type.startsWith("audio/")){K("Selecione um arquivo de udio","error"),h!=null&&h.target&&(h.target.value="");return}Sn(!0);try{const te=new FormData;te.append("sound",w);const Le=(Nn||"").trim();Le&&te.append("name",Le);const Te=await H.upload("/admin/config/alert-sounds",te),Qr=Array.isArray(Te==null?void 0:Te.alertSounds)?Te.alertSounds:[];Xt(Qr),ns((Te==null?void 0:Te.activeAlertSoundId)||null),os(Qr,(Te==null?void 0:Te.activeAlertSoundId)||null),Le&&Br(""),K("Som enviado","success")}catch(te){K(te.message||"Falha ao enviar som","error")}finally{Sn(!1),h!=null&&h.target&&(h.target.value="")}}}async function ua(h){try{const w=await H.post(`/admin/config/alert-sounds/${h||"none"}/activate`,{}),F=Array.isArray(w==null?void 0:w.alertSounds)?w.alertSounds:[];Xt(F),ns((w==null?void 0:w.activeAlertSoundId)||null),os(F,(w==null?void 0:w.activeAlertSoundId)||null),K(h?"Som de alerta atualizado":"Bip padro ativado","success")}catch(w){K(w.message||"Falha ao atualizar som de alerta","error")}}async function $i(h){if(h)try{if(typeof window<"u"&&!window.confirm("Excluir este som de alerta?"))return;Xs(h);const w=await H.del(`/admin/config/alert-sounds/${h}`),F=Array.isArray(w==null?void 0:w.alertSounds)?w.alertSounds:[];Xt(F),ns((w==null?void 0:w.activeAlertSoundId)||null),os(F,(w==null?void 0:w.activeAlertSoundId)||null),K("Som excludo","success")}catch(w){K(w.message||"Falha ao excluir som","error")}finally{Xs("")}}function Ol(h){var w,F;if(!h){K("Som indisponvel","error");return}try{(F=(w=le.current)==null?void 0:w.pause)==null||F.call(w),le.current=new Audio(h),le.current.onended=()=>{le.current=null},le.current.play().catch(()=>{K("No foi possvel reproduzir o som","error")})}catch{K("No foi possvel reproduzir o som","error")}}async function ca(h){var w;(w=h==null?void 0:h.preventDefault)==null||w.call(h);try{const F=(An||"").trim(),G=(as||"").trim(),te=(at||"").trim();if(!F){K("Informe a senha atual","error");return}if(G.length<6){K("Nova senha deve ter 6+ caracteres","error");return}if(G!==te){K("Confirmao no confere","error");return}await H.post("/users/me/password",{current:F,password:G}),vr(""),ls(""),Y(""),K("Senha do admin alterada","success")}catch(F){K(F.message||"Falha ao alterar senha","error")}}c.useEffect(()=>{(async()=>{try{const h=await H.get("/users");i(Array.isArray(h)?h:[])}catch(h){a(w=>w?w+"  Usurios: "+(h.message||"falha"):"Usurios: "+(h.message||"falha"))}})()},[]),c.useEffect(()=>{(async()=>{try{const h=await H.get("/groups/all?includeDMs=false");Se(Array.isArray(h)?h:[])}catch(h){a(w=>w?w+"  Grupos: "+(h.message||"falha"):"Grupos: "+(h.message||"falha"))}})()},[]);const Ul=c.useMemo(()=>{const h=y.trim().toLowerCase();return h?l.filter(w=>`${w.name} ${w.email}`.toLowerCase().includes(h)):l},[l,y]),da=c.useMemo(()=>l.filter(h=>!T.some(w=>w.userId===h.id)),[l,T]),fa=c.useMemo(()=>{const h=ce.trim().toLowerCase();return h?da.filter(w=>`${w.name} ${w.email}`.toLowerCase().includes(h)):da},[da,ce]);async function ha(){try{const h=await H.get("/users");i(Array.isArray(h)?h:[])}catch{}}async function Bi(h){var Le;(Le=h==null?void 0:h.preventDefault)==null||Le.call(h),a("");const w=re(C),F=$(w),G=(A||"").trim();if(F&&(F.length<10||F.length>11))return a("Telefone invlido (use DDD + nmero).");const te={name:u.trim(),email:m.trim(),password:b,isAdmin:!!k,phone:F?w:null,address:G||null};if(!te.name||te.name.length<2)return a("Informe um nome vlido.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(te.email))return a("E-mail invlido.");if(!te.password||te.password.length<6)return a("Senha com 6+ caracteres.");try{await H.post("/users",te),await ha(),f(""),v(""),N(""),D(""),I(""),x(!1)}catch(Te){a(Te.message||"Falha ao criar usurio")}}function zi(h){U({...h}),P("")}function pa(){V||(U(null),P(""))}async function Vi(h){var w;if((w=h==null?void 0:h.preventDefault)==null||w.call(h),!!_){Q(!0),a("");try{const F=re(_.phone||""),G=$(F);if(G&&(G.length<10||G.length>11))throw new Error("Telefone invlido (use DDD + nmero).");const te={name:(_.name||"").trim(),email:(_.email||"").trim(),phone:G?F:null,address:(_.address||"").trim()||null,isAdmin:!!_.isAdmin,isBlocked:!!_.isBlocked};if(await H.patch(`/users/${_.id}`,te),O&&O.trim().length>=6)if(e!=null&&e.id&&_.id===e.id){if(!ee.trim())throw new Error("Informe a senha atual para alterar a sua senha.");await H.post("/users/me/password",{current:ee.trim(),password:O.trim()})}else await H.post(`/users/${_.id}/password`,{password:O.trim()});await ha(),pa()}catch(F){a(F.message||"Falha ao salvar usurio")}finally{Q(!1)}}}async function Ln(h){if(confirm("Excluir este usurio?"))try{await H.del(`/users/${h}`),i(w=>w.filter(F=>F.id!==h)),K("Usurio excludo","success")}catch(w){K(w.message||"Falha ao excluir","error")}}function Wi(h){_l(h.id),Xn("")}function fs(){_l(null),Xn("")}async function Ml(){if(!(!Ue||!Mr)){Al(!0);try{await H.post(`/groups/${Mr}/members`,{userId:Ue}),(B==null?void 0:B.id)===Mr&&await ve(),fs(),K("Usurio adicionado ao grupo","success")}catch(h){K(h.message||"Falha ao adicionar ao grupo","error")}finally{Al(!1)}}}async function $l(h){var F;(F=h==null?void 0:h.preventDefault)==null||F.call(h),a("");const w=(nt||"").trim();if(w.length<2)return a("Informe um nome de grupo com 2+ caracteres.");try{await H.post("/groups",{name:w});const G=await H.get("/groups/all?includeDMs=false");Se(Array.isArray(G)?G:[]),W("")}catch(G){a(G.message||"Falha ao criar grupo")}}const[Pn,kr]=c.useState([]),[Bl,zl]=c.useState(""),[Hi,ma]=c.useState(!1),[ga,Wr]=c.useState(""),[ge,Vl]=c.useState(""),[xa,ft]=c.useState(""),[jr,Hr]=c.useState(""),[In,Wl]=c.useState(""),[Tn,At]=c.useState(!1),[hs,Nr]=c.useState(null),[rr,qr]=c.useState({domain:"",extension:"",password:""});async function $t(){ma(!0),Wr("");try{const h=await H.get("/phone");kr(Array.isArray(h)?h:[])}catch(h){Wr(h.message||"Falha ao carregar contas SIP")}finally{ma(!1)}}c.useEffect(()=>{(async()=>{try{await $t()}catch{}})()},[]);async function Hl(h){var w;(w=h==null?void 0:h.preventDefault)==null||w.call(h),At(!0);try{const F=(ge||"").trim(),G=(xa||"").trim(),te=(jr||"").trim(),Le=(In||"").trim();if(!F||!G||!te){K("Informe usurio, domnio e ramal.","error");return}await H.patch(`/phone/${F}`,{domain:G,extension:te,...Le?{password:Le}:{}}),await $t(),Vl(""),ft(""),Hr(""),Wl(""),K("Conta SIP salva","success")}catch(F){K(F.message||"Falha ao salvar conta SIP","error")}finally{At(!1)}}function va(h){Nr(h.user.id),qr({domain:h.domain||"",extension:h.extension||"",password:""})}function ql(){Nr(null),qr({domain:"",extension:"",password:""})}async function ps(){if(hs){At(!0);try{const h={domain:(rr.domain||"").trim(),extension:(rr.extension||"").trim()};if(!h.domain||!h.extension){K("Domnio e ramal so obrigatrios.","error");return}(rr.password||"").trim()&&(h.password=(rr.password||"").trim()),await H.patch(`/phone/${hs}`,h),await $t(),ql(),K("Conta SIP atualizada","success")}catch(h){K(h.message||"Falha ao atualizar conta SIP","error")}finally{At(!1)}}}async function Ql(h){try{await H.post(`/phone/${h}/disconnect`,{}),await $t(),K("Desconectado","success")}catch(w){K(w.message||"Falha ao desconectar","error")}}async function ms(h){try{if(typeof window<"u"&&!window.confirm("Excluir ramal/conta SIP deste usurio?"))return;await H.delete(`/phone/${h}`),await $t(),K("Ramal excludo","success")}catch(w){K(w.message||"Falha ao excluir ramal","error")}}async function nr(h){ne(h),ie(""),ze(""),Ur([]);try{const w=await H.get(`/groups/${h.id}/members`);J(Array.isArray(w)?w:[])}catch(w){J([]),a(w.message||"Falha ao carregar membros")}}async function Gl(h){if(h)try{if((B==null?void 0:B.id)===h){if(T.length>0){K("Remova todos os membros antes de excluir o grupo.","error");return}}else try{const w=await H.get(`/groups/${h}/members`);if(Array.isArray(w)&&w.length>0){K("Remova todos os membros antes de excluir o grupo.","error");return}}catch{}if(typeof window<"u"&&!window.confirm("Excluir este grupo? Esta ao no pode ser desfeita."))return;await H.delete(`/groups/${h}`),Se(w=>w.filter(F=>F.id!==h)),(B==null?void 0:B.id)===h&&(ne(null),J([])),K("Grupo excludo","success")}catch(w){K(w.message||"Falha ao excluir grupo","error")}}async function ve(){if(B)try{const h=await H.get(`/groups/${B.id}/members`);J(Array.isArray(h)?h:[])}catch{}}async function qi(){if(!(!B||!He)){he(!0);try{await H.post(`/groups/${B.id}/members`,{userId:He}),ze(""),await ve()}catch(h){K(h.message||"Falha ao adicionar membro","error")}finally{he(!1)}}}async function Kl(h){if(B)try{await H.delete(`/groups/${B.id}/members/${h}`),J(w=>w.filter(F=>F.userId!==h))}catch(w){K(w.message||"Falha ao remover","error")}}function Zl(h){Ur(w=>w.includes(h)?w.filter(F=>F!==h):[...w,h])}function Qi(){Ur(T.map(h=>h.userId))}function ya(){Ur([])}async function Jl(){if(!(!B||!qe.length)&&!(typeof window<"u"&&!window.confirm(`Remover ${qe.length} membro(s) de ${B.name}?`))){Dl(!0);try{const h=qe.map(te=>H.delete(`/groups/${B.id}/members/${te}`)),w=await Promise.allSettled(h),F=w.filter(te=>te.status==="fulfilled").length,G=w.length-F;F&&await ve(),ya(),G?K(`Removidos: ${F}. Falhas: ${G}.`,"error"):K(`Removidos: ${F}.`,"success")}catch(h){K(h.message||"Falha ao remover seleo","error")}finally{Dl(!1)}}}return s.jsxs("div",{className:"p-4 overflow-auto h-full",children:[st&&s.jsx("div",{className:`fixed bottom-4 right-4 z-50 px-4 py-2 rounded shadow border text-sm ${st.type==="success"?"bg-green-50 text-green-800 border-green-200":st.type==="error"?"bg-red-50 text-red-800 border-red-200":"bg-slate-50 text-slate-800 border-slate-200"}`,children:st.message}),s.jsx("h2",{className:"text-2xl font-semibold",children:"Admin"}),s.jsx("div",{className:"mt-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>r("usuarios"),className:`px-2 py-2 -mb-px border-b-2 ${t==="usuarios"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Usurios"}),s.jsx("button",{onClick:()=>r("grupos"),className:`px-2 py-2 -mb-px border-b-2 ${t==="grupos"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Grupos"}),s.jsx("button",{onClick:()=>r("telefonia"),className:`px-2 py-2 -mb-px border-b-2 ${t==="telefonia"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Telefonia"}),s.jsx("button",{onClick:()=>r("configuracoes"),className:`px-2 py-2 -mb-px border-b-2 ${t==="configuracoes"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Configuraes"})]})}),n&&s.jsx("div",{className:"mt-3 rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2",children:n}),t==="usuarios"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[s.jsxs("form",{onSubmit:Bi,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2",children:[s.jsx("h4",{className:"font-medium",children:"Novo Usurio"}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome",value:u,onChange:h=>f(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"E-mail",value:m,onChange:h=>v(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Telefone (opcional)",value:C,onChange:h=>D(re(h.target.value))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Endereo (opcional)",value:A,onChange:h=>I(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha",type:"password",value:b,onChange:h=>N(h.target.value)}),s.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:h=>x(h.target.checked)})," Admin"]}),s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Criar"})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium",children:"Lista"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar...",value:y,onChange:h=>E(h.target.value)}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:ha,children:"Atualizar"})]})]}),Ul.length?s.jsx("ul",{className:"mt-2 divide-y divide-slate-200",children:Ul.map(h=>s.jsxs("li",{className:"py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:h.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:h.email}),s.jsxs("div",{className:"text-xs text-slate-500",children:[h.isAdmin?"admin":"",h.isBlocked?(h.isAdmin?"  ":"")+"bloqueado":""]})]}),s.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>zi(h),children:"Editar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>Ln(h.id),children:"Excluir"}),s.jsx("div",{className:"relative inline-block",children:Ue===h.id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:Mr,onChange:w=>Xn(w.target.value),children:[s.jsx("option",{value:"",children:"Escolha o grupo"}),xe.map(w=>s.jsx("option",{value:w.id,children:w.name},w.id))]}),s.jsx("button",{className:"px-2 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",disabled:!Mr||bn,onClick:Ml,children:bn?"Adicionando...":"Adicionar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:fs,children:"Cancelar"})]}):s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>Wi(h),children:"Adicionar ao grupo"})})]})]},h.id))}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum usurio encontrado."})]})]}),t==="grupos"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[s.jsxs("form",{onSubmit:$l,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2",children:[s.jsx("h4",{className:"font-medium",children:"Novo Grupo"}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome do grupo",value:nt,onChange:h=>W(h.target.value)}),s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Criar"})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium",children:"Lista"}),s.jsxs("div",{className:"text-xs text-slate-500",children:[xe.length," grupo(s)"]})]}),xe.length?s.jsx("ul",{className:"mt-2 space-y-1",children:xe.map(h=>s.jsx("li",{className:`px-2 py-1 rounded border cursor-pointer ${(B==null?void 0:B.id)===h.id?"border-blue-400 bg-blue-50":"border-slate-200 hover:bg-slate-50"}`,onClick:()=>nr(h),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"truncate",children:h.name}),(()=>{const w=(B==null?void 0:B.id)===h.id&&T.length>0;return s.jsx("button",{type:"button",className:`px-2 py-1 text-sm rounded border ml-3 border-red-300 text-red-700 ${w?"opacity-50 cursor-not-allowed":"hover:bg-red-50"}`,disabled:w,title:w?"Remova todos os membros antes de excluir":"Excluir",onClick:F=>{F.stopPropagation(),w||Gl(h.id)},children:"Excluir"})})()]})},h.id))}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum grupo encontrado."})]}),B&&s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium",children:["Membros  ",B.name]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:`text-xs rounded border px-2 py-1 border-red-300 text-red-700 ${T.length>0?"opacity-50 cursor-not-allowed":"hover:bg-red-50"}`,disabled:T.length>0,title:T.length>0?"Remova todos os membros antes de excluir":"Excluir grupo",onClick:()=>{T.length===0&&Gl(B.id)},children:"Excluir grupo"}),s.jsx("button",{type:"button",className:"text-xs rounded border px-2 py-1 hover:bg-slate-50",onClick:Qi,children:"Selecionar todos"}),s.jsx("button",{type:"button",className:"text-xs rounded border px-2 py-1 hover:bg-slate-50",onClick:ya,children:"Limpar seleo"}),s.jsx("button",{type:"button",className:"text-xs rounded bg-red-600 text-white px-2 py-1 disabled:opacity-60",disabled:!qe.length||ae,onClick:Jl,children:ae?"Removendo...":"Remover seleo"}),s.jsx("button",{type:"button",className:"text-xs text-slate-600 underline",onClick:ve,children:"Atualizar"})]})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("input",{className:"border rounded px-2 py-1 text-sm flex-1",placeholder:"Buscar usurio...",value:ce,onChange:h=>ie(h.target.value)}),s.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:He,onChange:h=>ze(h.target.value),children:[s.jsx("option",{value:"",children:"Selecionar usurio"}),fa.map(h=>s.jsxs("option",{value:h.id,children:[h.name,"  ",h.email]},h.id))]}),s.jsx("button",{type:"button",className:"px-3 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",disabled:!He||fe,onClick:qi,children:fe?"Adicionando...":"Adicionar"})]}),T.length?s.jsx("ul",{className:"mt-3 divide-y divide-slate-200",children:T.map(h=>{var w,F;return s.jsxs("li",{className:"py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:qe.includes(h.userId),onChange:()=>Zl(h.userId)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium truncate",children:((w=h.user)==null?void 0:w.name)||h.userId}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:(F=h.user)==null?void 0:F.email})]})]}),s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>Kl(h.userId),children:"Remover"})]},h.userId)})}):s.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"Sem membros ainda."})]})]}),t==="telefonia"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[s.jsxs("form",{onSubmit:Hl,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2 md:col-span-1",children:[s.jsx("h4",{className:"font-medium",children:"Nova/Atualizar conta SIP"}),s.jsxs("select",{className:"border rounded px-3 py-2",value:ge,onChange:h=>Vl(h.target.value),children:[s.jsx("option",{value:"",children:"Selecione o usurio"}),l.map(h=>s.jsxs("option",{value:h.id,children:[h.name,"  ",h.email]},h.id))]}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Domnio (ex.: sip.empresa.com)",value:xa,onChange:h=>ft(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Ramal/Extenso",value:jr,onChange:h=>Hr(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha (opcional para manter)",type:"password",value:In,onChange:h=>Wl(h.target.value)}),s.jsx("button",{disabled:Tn,className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700 disabled:opacity-60",children:Tn?"Salvando...":"Salvar conta SIP"})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium",children:"Contas SIP"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{className:"border rounded px-2 py-1 text-sm w-64 shrink-0",placeholder:"Buscar por nome, e-mail, ramal, domnio",value:Bl,onChange:h=>zl(h.target.value)}),s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:$t,children:"Atualizar"})]})]}),ga&&s.jsx("div",{className:"mt-2 rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2 text-sm",children:ga}),Hi?s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Carregando..."}):Pn.length?s.jsx("ul",{className:"mt-2 divide-y divide-slate-200",children:Pn.filter(h=>{var G,te;const w=Bl.trim().toLowerCase();return w?`${((G=h.user)==null?void 0:G.name)||""} ${((te=h.user)==null?void 0:te.email)||""} ${h.extension||""} ${h.domain||""}`.toLowerCase().includes(w):!0}).map(h=>{var w,F,G,te;return s.jsx("li",{className:"py-2",children:hs===h.user.id?s.jsxs("div",{className:"grid md:grid-cols-6 gap-2 items-center",children:[s.jsxs("div",{className:"md:col-span-2 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:(w=h.user)==null?void 0:w.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:(F=h.user)==null?void 0:F.email})]}),s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Domnio",value:rr.domain,onChange:Le=>qr(Te=>({...Te,domain:Le.target.value}))}),s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Ramal",value:rr.extension,onChange:Le=>qr(Te=>({...Te,extension:Le.target.value}))}),s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Senha (opcional)",type:"password",value:rr.password,onChange:Le=>qr(Te=>({...Te,password:Le.target.value}))}),s.jsxs("div",{className:"flex items-center gap-2 justify-end whitespace-nowrap",children:[s.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:ql,disabled:Tn,children:"Cancelar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",onClick:ps,disabled:Tn,children:"Salvar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>ms(h.user.id),disabled:Tn,children:"Excluir"})]})]}):s.jsxs("div",{className:"grid md:grid-cols-6 gap-2 items-center",children:[s.jsxs("div",{className:"md:col-span-2 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:(G=h.user)==null?void 0:G.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:(te=h.user)==null?void 0:te.email})]}),s.jsx("div",{className:"text-sm truncate",children:h.domain}),s.jsx("div",{className:"text-sm",children:h.extension}),s.jsx("div",{className:"text-xs",children:s.jsx("span",{className:`px-2 py-0.5 rounded-full border ${h.regRegistered?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:h.regRegistered?"registrado":h.regStatus||"desconectado"})}),s.jsxs("div",{className:"flex items-center gap-3 justify-end whitespace-nowrap",children:[s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>va(h),children:"Editar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-amber-300 text-amber-700 hover:bg-amber-50",onClick:()=>Ql(h.user.id),children:"Desconectar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>ms(h.user.id),children:"Excluir"})]})]})},h.id)})}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhuma conta SIP encontrada."})]})]}),t==="configuracoes"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4 items-start",children:[s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 lg:col-span-3",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Backups do chat"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Gera cpias do banco de dados e da pasta de uploads. Restaurar um backup substitui dados atuais."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",onClick:us,disabled:Pl,children:Pl?"Executando...":"Executar backup agora"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border hover:bg-slate-50 disabled:opacity-60",onClick:br,disabled:Cn,children:Cn?"Atualizando...":"Atualizar lista"})]})]}),s.jsxs("form",{onSubmit:Vr,className:"mt-4 space-y-3",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:!!Re.autoEnabled,onChange:h=>En(w=>({...w,autoEnabled:h.target.checked}))}),"Ativar backup automtico dirio"]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-3 md:items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Horrio"}),s.jsx("input",{type:"time",className:"mt-1 border rounded px-3 py-2 w-full",value:Re.time||"02:00",onChange:h=>En(w=>({...w,time:h.target.value})),disabled:!Re.autoEnabled})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Reteno (dias)"}),s.jsx("input",{type:"number",min:"0",max:"365",className:"mt-1 border rounded px-3 py-2 w-full",value:Re.retentionDays??7,onChange:h=>En(w=>({...w,retentionDays:Math.max(0,Number(h.target.value))})),disabled:!Re.autoEnabled})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:aa,children:aa?"Salvando...":"Salvar agendamento"})})]}),s.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[s.jsxs("div",{children:["ltimo backup manual: ",Jt(Re.lastManualRunAt)," ",((wa=Re.lastManualResult)==null?void 0:wa.ok)===!1?`(erro: ${((ba=Re.lastManualResult)==null?void 0:ba.error)||"desconhecido"})`:""]}),s.jsxs("div",{children:["ltimo backup automtico: ",Jt(Re.lastAutoRunAt)," ",((ka=Re.lastAutoResult)==null?void 0:ka.ok)===!1?`(erro: ${((Yl=Re.lastAutoResult)==null?void 0:Yl.error)||"desconhecido"})`:""]}),s.jsxs("div",{children:["ltima restaurao: ",Jt(Re.lastRestoreAt)," ",Re.lastRestoreName?`(${Re.lastRestoreName})`:""]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium",children:"Backups disponveis"}),Cn?s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Carregando backups..."}):ea.length?s.jsx("div",{className:"mt-2 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm border border-slate-200 rounded",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Nome"}),s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Criado em"}),s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Tamanho"}),s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Origem"}),s.jsx("th",{className:"px-3 py-2 text-right font-medium text-slate-600",children:"Aes"})]})}),s.jsx("tbody",{children:ea.map(h=>{var w;return s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"px-3 py-2 font-mono text-xs md:text-sm",children:h.name}),s.jsx("td",{className:"px-3 py-2",children:Jt(h.createdAt)}),s.jsx("td",{className:"px-3 py-2",children:vt(h.size)}),s.jsx("td",{className:"px-3 py-2",children:((w=h==null?void 0:h.meta)==null?void 0:w.reason)==="auto"?"Automtico":"Manual"}),s.jsx("td",{className:"px-3 py-2",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border hover:bg-slate-50 disabled:opacity-60",onClick:()=>ia(h.name),disabled:sa===h.name,children:sa===h.name?"Baixando...":"Download"}),s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",onClick:()=>cs(h.name),disabled:Dn===h.name,children:Dn===h.name?"Restaurando...":"Restaurar"}),s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:()=>tr(h.name),disabled:Tl===h.name,children:Tl===h.name?"Excluindo...":"Excluir"})]})})]},h.name)})})]})}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum backup encontrado ainda."})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 lg:col-span-2",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Chat da organizao (Global)"}),s.jsxs("div",{className:"mt-3 grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"cone do chat"}),s.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[Yt?s.jsx("img",{src:Yt,alt:"global",className:"w-12 h-12 rounded-full object-cover border"}):s.jsx("div",{className:"w-12 h-12 rounded-full border bg-slate-100"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"cfg-file-global",className:"hidden",type:"file",accept:"image/*",onChange:h=>{var w;return oa((w=h.target.files)==null?void 0:w[0])}}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var h;return(h=document.getElementById("cfg-file-global"))==null?void 0:h.click()},children:"Enviar"}),Yt&&s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>{try{localStorage.setItem("chat_icon",Yt),window.dispatchEvent(new Event("chat:iconUpdated")),K("Aplicado cone global neste navegador","success")}catch{}},children:"Aplicar local"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Papel de parede (conversas)"}),s.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[s.jsx("div",{className:"w-28 h-16 rounded border bg-slate-100 overflow-hidden",children:s.jsx("div",{className:"w-full h-full chat-bg",style:{"--chat-wallpaper":_t?`url('${_t}')`:void 0}})}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("input",{id:"cfg-file-wallpaper",className:"hidden",type:"file",accept:"image/*",onChange:h=>{var w;return yr((w=h.target.files)==null?void 0:w[0])}}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var h;return(h=document.getElementById("cfg-file-wallpaper"))==null?void 0:h.click()},children:"Enviar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-green-300 text-green-700 hover:bg-green-50",onClick:is,disabled:!_t,children:"Salvar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>{try{if(!_t){K("Nenhum wallpaper para aplicar","error");return}localStorage.setItem("chat_wallpaper",_t),document.documentElement.style.setProperty("--chat-wallpaper",`url('${_t}')`),window.dispatchEvent(new Event("chat:wallpaperUpdated")),K("Aplicado localmente","success")}catch{}},disabled:!_t,children:"Aplicar local"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:wr,disabled:!_t,children:"Excluir"})]})]}),s.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Afeta todos os usurios. A aplicao local funciona apenas neste navegador."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("h4",{className:"font-medium",children:"Sons de alerta"}),s.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Faa upload de arquivos de udio (mp3, wav, ogg) para usar como alerta padro do chat."}),s.jsxs("div",{className:"mt-3 flex flex-col md:flex-row md:items-end gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Nome (opcional)"}),s.jsx("input",{className:"mt-1 border rounded px-3 py-2 w-full",placeholder:"Ex.: Alerta ping",value:Nn,onChange:h=>Br(h.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{ref:Ll,type:"file",accept:"audio/*",className:"hidden",onChange:Rn}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50 disabled:opacity-60",onClick:ds,disabled:ss,children:ss?"Enviando...":"Enviar som"}),ss&&s.jsx("span",{className:"text-xs text-slate-500",children:"Aguarde..."})]})]}),Rl.length?s.jsx("ul",{className:"mt-3 divide-y divide-slate-200",children:Rl.map(h=>s.jsxs("li",{className:"py-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:h.name||"Som"}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:h.url})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:()=>Ol(h.url),children:"Ouvir"}),$r===h.id?s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-50 text-blue-700 border border-blue-200",children:"Ativo"}):s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>ua(h.id),children:"Definir"}),s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:()=>$i(h.id),disabled:Ys===h.id,children:Ys===h.id?"Excluindo...":"Excluir"})]})]},h.id))}):s.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"Nenhum som cadastrado ainda."}),s.jsx("div",{className:"mt-3",children:s.jsx("button",{type:"button",className:"text-xs text-slate-600 underline disabled:opacity-60",onClick:()=>ua(null),disabled:!$r,children:"Usar bip padro"})})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Aparncia Local"}),s.jsxs("form",{onSubmit:yt,className:"mt-2 flex flex-col gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"cone local"}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsx("input",{id:"cfg-file",className:"hidden",type:"file",accept:"image/*",onChange:la}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var h;return(h=document.getElementById("cfg-file"))==null?void 0:h.click()},children:"Escolher"}),(kn||mr)&&s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>{ts(""),jn("")},children:"Limpar"})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Preview"}),kn||mr?s.jsx("img",{src:kn||mr,alt:"cone",className:"mt-1 w-10 h-10 rounded-full object-cover border"}):s.jsx("div",{className:"mt-1 w-10 h-10 rounded-full border bg-slate-100"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"URL (opcional)"}),s.jsx("input",{className:"border rounded px-3 py-2 w-full",placeholder:"https://...",value:mr,onChange:h=>{jn(h.target.value),h.target.value&&ts("")}})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Tema do papel de parede"}),s.jsxs("select",{className:"mt-1 border rounded px-3 py-2 w-full",value:er,onChange:h=>xr(h.target.value),children:[s.jsx("option",{value:"default",children:"Padro"}),s.jsx("option",{value:"whatsapp",children:"WhatsApp"})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-2",children:s.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Salvar local"})})]})]}),s.jsxs("form",{onSubmit:ca,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2 lg:col-span-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Conta do administrador"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-2 mt-2",children:[s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha atual",type:"password",value:An,onChange:h=>vr(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nova senha (6+)",type:"password",value:as,onChange:h=>ls(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Confirmar nova senha",type:"password",value:at,onChange:h=>Y(h.target.value)})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Alterar senha"})})]})]}),_&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/30 grid place-items-center",onClick:pa,children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded border border-slate-200 p-4",onClick:h=>h.stopPropagation(),children:[s.jsx("h4",{className:"text-lg font-medium mb-2",children:"Editar Usurio"}),s.jsxs("form",{onSubmit:Vi,className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome",value:_.name||"",onChange:h=>U(w=>({...w,name:h.target.value}))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"E-mail",value:_.email||"",onChange:h=>U(w=>({...w,email:h.target.value}))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Telefone",value:_.phone||"",onChange:h=>U(w=>({...w,phone:re(h.target.value)}))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Endereo",value:_.address||"",onChange:h=>U(w=>({...w,address:h.target.value}))}),s.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!_.isAdmin,onChange:h=>U(w=>({...w,isAdmin:h.target.checked}))})," Admin"]}),s.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!_.isBlocked,onChange:h=>U(w=>({...w,isBlocked:h.target.checked}))})," Bloqueado"]}),(e==null?void 0:e.id)&&_.id===e.id&&s.jsx("input",{className:"border rounded px-3 py-2 md:col-span-2",placeholder:"Senha atual (obrigatria para trocar a sua senha)",type:"password",value:ee,onChange:h=>me(h.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2 md:col-span-2",placeholder:"Nova senha (opcional, 6+)",type:"password",value:O,onChange:h=>P(h.target.value)}),s.jsxs("div",{className:"md:col-span-2 flex items-center justify-end gap-2 mt-2",children:[s.jsx("button",{type:"button",className:"px-3 py-2 rounded border",onClick:pa,disabled:V,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:V,children:V?"Salvando...":"Salvar"})]})]})]})})]})}function h1(){const[e,t]=c.useState(""),[r,n]=c.useState(""),[a,l]=c.useState(""),[i,u]=c.useState(null),[f,m]=c.useState(""),[v,b]=c.useState(""),[N,C]=c.useState(""),[D,A]=c.useState(""),[I,k]=c.useState(""),[x,y]=c.useState(""),E=c.useRef(null),_=c.useRef(""),U=$=>($||"").replace(/\D/g,""),V=$=>{const re=U($).slice(0,11);return re.length<=2?re:re.length<=6?`(${re.slice(0,2)}) ${re.slice(2)}`:re.length===10?`(${re.slice(0,2)}) ${re.slice(2,6)}-${re.slice(6)}`:re.length>=11?`(${re.slice(0,2)}) ${re.slice(2,7)}-${re.slice(7)}`:re},Q=()=>{if(_.current){if(typeof URL<"u"&&typeof URL.revokeObjectURL=="function")try{URL.revokeObjectURL(_.current)}catch{}_.current=""}};c.useEffect(()=>()=>{Q()},[]),c.useEffect(()=>{(async()=>{try{const $=await H.get("/users/me");t($.name||""),n($.phone?V($.phone):""),l($.address||"");const re=$.avatarUrl||"";b(re),m(re)}catch{y("Falha ao carregar perfil")}})()},[]);const O=()=>{var $;($=E.current)==null||$.click()},P=$=>{var xe;const re=((xe=$.target.files)==null?void 0:xe[0])||null;if(u(re),Q(),re)try{const Se=URL.createObjectURL(re);_.current=Se,m(Se)}catch{m(v)}else m(v)};async function ee($){$.preventDefault(),k(""),y("");try{const re=V(r),xe=U(re);if(xe&&(xe.length<10||xe.length>11))throw new Error("Telefone invalido (use DDD + numero).");const Se=(e||"").trim(),nt=(a||"").trim(),W={phone:xe?re:null,address:nt||null};if(Se&&(W.name=Se),i){await H.patch("/users/me",W);const B=new FormData;B.append("avatar",i),await H.uploadPatch("/users/me",B)}else await H.patch("/users/me",W);try{const B=await H.get("/users/me"),ne=B.avatarUrl||"";t(B.name||""),n(B.phone?V(B.phone):""),l(B.address||""),Q(),b(ne),m(ne),u(null),E.current&&(E.current.value="");const T=jt();T&&d0(T,B);try{window.dispatchEvent(new Event("chat:userUpdated"))}catch{}}catch{}k("Perfil atualizado!")}catch(re){y(re.message||"Erro ao salvar")}}async function me($){$.preventDefault(),k(""),y("");try{await H.post("/users/me/password",{current:N,password:D}),C(""),A(""),k("Senha alterada!")}catch(re){y(re.message||"Erro ao alterar senha")}}return s.jsxs("div",{className:"p-4 overflow-auto h-full",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Meu perfil"}),I&&s.jsx("div",{className:"text-green-600 text-sm mt-2",children:I}),x&&s.jsx("div",{className:"text-red-600 text-sm mt-2",children:x}),s.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-[260px,1fr]",children:[s.jsxs("section",{className:"bg-white p-4 rounded border border-slate-200 flex flex-col items-center gap-3 text-center",children:[s.jsx("div",{className:"w-28 h-28 md:w-32 md:h-32 rounded-full border border-slate-200 dark:border-slate-700 overflow-hidden bg-slate-100 flex items-center justify-center text-slate-500",children:f?s.jsx("img",{src:f,alt:"avatar",className:"w-full h-full object-cover",onError:()=>m("")}):s.jsx("span",{className:"text-sm",children:"Sem foto"})}),s.jsx("button",{type:"button",onClick:O,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 text-sm rounded border border-slate-300 hover:bg-slate-50",children:"Alterar foto"}),s.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:P}),i&&s.jsx("div",{className:"w-full text-xs text-slate-500 truncate",children:i.name}),s.jsx("p",{className:"text-xs text-slate-500",children:"Utilize imagens quadradas para melhor resultado."})]}),s.jsxs("form",{onSubmit:ee,className:"bg-white p-4 rounded border border-slate-200 grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Nome"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:e,onChange:$=>t($.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Telefone"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:r,onChange:$=>n(V($.target.value))})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Endereco"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:a,onChange:$=>l($.target.value)})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Salvar"})})]})]}),s.jsxs("form",{onSubmit:me,className:"mt-4 bg-white p-4 rounded border border-slate-200 grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Senha atual"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",type:"password",value:N,onChange:$=>C($.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Nova senha"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",type:"password",value:D,onChange:$=>A($.target.value)})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-slate-700 text-white px-3 py-2 hover:bg-slate-800",children:"Alterar senha"})})]})]})}function p1({children:e}){return jt()?e:s.jsx(Oc,{to:"/login",replace:!0})}function m1({children:e}){const t=jt(),r=Us();return t?r!=null&&r.isAdmin?e:s.jsx(Oc,{to:"/",replace:!0}):s.jsx(Oc,{to:"/login",replace:!0})}Xm(document.getElementById("root")).render(s.jsx(yi.StrictMode,{children:s.jsx(Oy,{children:s.jsxs(Ay,{children:[s.jsx(bt,{path:"/login",element:s.jsx(zw,{})}),s.jsx(bt,{path:"/register",element:s.jsx(Vw,{})}),s.jsx(bt,{path:"/join/:token",element:s.jsx(c1,{})}),s.jsxs(bt,{path:"/",element:s.jsx(p1,{children:s.jsx(Bw,{})}),children:[s.jsx(bt,{index:!0,element:s.jsx(_0,{})}),s.jsx(bt,{path:"conversas",element:s.jsx(s1,{})}),s.jsx(bt,{path:"telefonia",element:s.jsx(a1,{})}),s.jsx(bt,{path:"reunioes",element:s.jsx(l1,{})}),s.jsx(bt,{path:"reunioes/:id",element:s.jsx(o1,{})}),s.jsx(bt,{path:"contatos",element:s.jsx(d1,{})}),s.jsx(bt,{path:"admin",element:s.jsx(m1,{children:s.jsx(f1,{})})}),s.jsx(bt,{path:"profile",element:s.jsx(h1,{})})]})]})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{try{navigator.serviceWorker.register("/sw.js")}catch(e){console.error("Falha ao registrar o Service Worker",e)}});
