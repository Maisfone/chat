function xg(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function gg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wp={exports:{}},ec={},Hp={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),vg=Symbol.for("react.portal"),yg=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),bg=Symbol.for("react.profiler"),jg=Symbol.for("react.provider"),kg=Symbol.for("react.context"),Ng=Symbol.for("react.forward_ref"),Sg=Symbol.for("react.suspense"),Cg=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),dh=Symbol.iterator;function Dg(e){return e===null||typeof e!="object"?null:(e=dh&&e[dh]||e["@@iterator"],typeof e=="function"?e:null)}var qp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qp=Object.assign,Gp={};function wa(e,t,n){this.props=e,this.context=t,this.refs=Gp,this.updater=n||qp}wa.prototype.isReactComponent={};wa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Kp(){}Kp.prototype=wa.prototype;function Ld(e,t,n){this.props=e,this.context=t,this.refs=Gp,this.updater=n||qp}var Pd=Ld.prototype=new Kp;Pd.constructor=Ld;Qp(Pd,wa.prototype);Pd.isPureReactComponent=!0;var fh=Array.isArray,Zp=Object.prototype.hasOwnProperty,Id={current:null},Jp={key:!0,ref:!0,__self:!0,__source:!0};function Yp(e,t,n){var r,a={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Zp.call(t,r)&&!Jp.hasOwnProperty(r)&&(a[r]=t[r]);var d=arguments.length-2;if(d===1)a.children=n;else if(1<d){for(var h=Array(d),m=0;m<d;m++)h[m]=arguments[m+2];a.children=h}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)a[r]===void 0&&(a[r]=d[r]);return{$$typeof:cl,type:e,key:o,ref:i,props:a,_owner:Id.current}}function _g(e,t){return{$$typeof:cl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Td(e){return typeof e=="object"&&e!==null&&e.$$typeof===cl}function Ag(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var hh=/\/+/g;function Hc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ag(""+e.key):t.toString(36)}function hi(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case cl:case vg:i=!0}}if(i)return i=e,a=a(i),e=r===""?"."+Hc(i,0):r,fh(a)?(n="",e!=null&&(n=e.replace(hh,"$&/")+"/"),hi(a,t,n,"",function(m){return m})):a!=null&&(Td(a)&&(a=_g(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(hh,"$&/")+"/")+e)),t.push(a)),1;if(i=0,r=r===""?".":r+":",fh(e))for(var d=0;d<e.length;d++){o=e[d];var h=r+Hc(o,d);i+=hi(o,t,n,h,a)}else if(h=Dg(e),typeof h=="function")for(e=h.call(e),d=0;!(o=e.next()).done;)o=o.value,h=r+Hc(o,d++),i+=hi(o,t,n,h,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ql(e,t,n){if(e==null)return e;var r=[],a=0;return hi(e,r,"","",function(o){return t.call(n,o,a++)}),r}function Rg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},pi={transition:null},Lg={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:pi,ReactCurrentOwner:Id};de.Children={map:ql,forEach:function(e,t,n){ql(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ql(e,function(){t++}),t},toArray:function(e){return ql(e,function(t){return t})||[]},only:function(e){if(!Td(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=wa;de.Fragment=yg;de.Profiler=bg;de.PureComponent=Ld;de.StrictMode=wg;de.Suspense=Sg;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lg;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qp({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Id.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)Zp.call(t,h)&&!Jp.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){d=Array(h);for(var m=0;m<h;m++)d[m]=arguments[m+2];r.children=d}return{$$typeof:cl,type:e.type,key:a,ref:o,props:r,_owner:i}};de.createContext=function(e){return e={$$typeof:kg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jg,_context:e},e.Consumer=e};de.createElement=Yp;de.createFactory=function(e){var t=Yp.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Ng,render:e}};de.isValidElement=Td;de.lazy=function(e){return{$$typeof:Eg,_payload:{_status:-1,_result:e},_init:Rg}};de.memo=function(e,t){return{$$typeof:Cg,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=pi.transition;pi.transition={};try{e()}finally{pi.transition=t}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(e,t){return pt.current.useCallback(e,t)};de.useContext=function(e){return pt.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};de.useEffect=function(e,t){return pt.current.useEffect(e,t)};de.useId=function(){return pt.current.useId()};de.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return pt.current.useMemo(e,t)};de.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};de.useRef=function(e){return pt.current.useRef(e)};de.useState=function(e){return pt.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return pt.current.useTransition()};de.version="18.2.0";Hp.exports=de;var c=Hp.exports;const Vo=gg(c),Pg=xg({__proto__:null,default:Vo},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig=c,Tg=Symbol.for("react.element"),Fg=Symbol.for("react.fragment"),Mg=Object.prototype.hasOwnProperty,$g=Ig.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Og={key:!0,ref:!0,__self:!0,__source:!0};function Xp(e,t,n){var r,a={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Mg.call(t,r)&&!Og.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Tg,type:e,key:o,ref:i,props:a,_owner:$g.current}}ec.Fragment=Fg;ec.jsx=Xp;ec.jsxs=Xp;Wp.exports=ec;var s=Wp.exports,em={exports:{}},Pt={},tm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,V){var ee=W.length;W.push(V);e:for(;0<ee;){var le=ee-1>>>1,ye=W[le];if(0<a(ye,V))W[le]=V,W[ee]=ye,ee=le;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var V=W[0],ee=W.pop();if(ee!==V){W[0]=ee;e:for(var le=0,ye=W.length,Tt=ye>>>1;le<Tt;){var ct=2*(le+1)-1,Zt=W[ct],Ke=ct+1,Le=W[Ke];if(0>a(Zt,ee))Ke<ye&&0>a(Le,Zt)?(W[le]=Le,W[Ke]=ee,le=Ke):(W[le]=Zt,W[ct]=ee,le=ct);else if(Ke<ye&&0>a(Le,ee))W[le]=Le,W[Ke]=ee,le=Ke;else break e}}return V}function a(W,V){var ee=W.sortIndex-V.sortIndex;return ee!==0?ee:W.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,d=i.now();e.unstable_now=function(){return i.now()-d}}var h=[],m=[],v=1,b=null,k=3,D=!1,A=!1,P=!1,U=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var V=n(m);V!==null;){if(V.callback===null)r(m);else if(V.startTime<=W)r(m),V.sortIndex=V.expirationTime,t(h,V);else break;V=n(m)}}function C(W){if(P=!1,w(W),!A)if(n(h)!==null)A=!0,ce(R);else{var V=n(m);V!==null&&je(C,V.startTime-W)}}function R(W,V){A=!1,P&&(P=!1,j(H),H=-1),D=!0;var ee=k;try{for(w(V),b=n(h);b!==null&&(!(b.expirationTime>V)||W&&!re());){var le=b.callback;if(typeof le=="function"){b.callback=null,k=b.priorityLevel;var ye=le(b.expirationTime<=V);V=e.unstable_now(),typeof ye=="function"?b.callback=ye:b===n(h)&&r(h),w(V)}else r(h);b=n(h)}if(b!==null)var Tt=!0;else{var ct=n(m);ct!==null&&je(C,ct.startTime-V),Tt=!1}return Tt}finally{b=null,k=ee,D=!1}}var O=!1,I=null,H=-1,B=5,_=-1;function re(){return!(e.unstable_now()-_<B)}function Z(){if(I!==null){var W=e.unstable_now();_=W;var V=!0;try{V=I(!0,W)}finally{V?F():(O=!1,I=null)}}else O=!1}var F;if(typeof g=="function")F=function(){g(Z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,se=Y.port2;Y.port1.onmessage=Z,F=function(){se.postMessage(null)}}else F=function(){U(Z,0)};function ce(W){I=W,O||(O=!0,F())}function je(W,V){H=U(function(){W(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){A||D||(A=!0,ce(R))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(W){switch(k){case 1:case 2:case 3:var V=3;break;default:V=k}var ee=k;k=V;try{return W()}finally{k=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,V){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=k;k=W;try{return V()}finally{k=ee}},e.unstable_scheduleCallback=function(W,V,ee){var le=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,W){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ee+ye,W={id:v++,callback:V,priorityLevel:W,startTime:ee,expirationTime:ye,sortIndex:-1},ee>le?(W.sortIndex=ee,t(m,W),n(h)===null&&W===n(m)&&(P?(j(H),H=-1):P=!0,je(C,ee-le))):(W.sortIndex=ye,t(h,W),A||D||(A=!0,ce(R))),W},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(W){var V=k;return function(){var ee=k;k=V;try{return W.apply(this,arguments)}finally{k=ee}}}})(nm);tm.exports=nm;var Ug=tm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=c,Lt=Ug;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sm=new Set,Wo={};function ks(e,t){ha(e,t),ha(e+"Capture",t)}function ha(e,t){for(Wo[e]=t,e=0;e<t.length;e++)sm.add(t[e])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=Object.prototype.hasOwnProperty,Bg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ph={},mh={};function zg(e){return Du.call(mh,e)?!0:Du.call(ph,e)?!1:Bg.test(e)?mh[e]=!0:(ph[e]=!0,!1)}function Vg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wg(e,t,n,r){if(t===null||typeof t>"u"||Vg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,n,r,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nt[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nt[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nt[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nt[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nt[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nt[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nt[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nt[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nt[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fd=/[\-:]([a-z])/g;function Md(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fd,Md);nt[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fd,Md);nt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fd,Md);nt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nt[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});nt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nt[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function $d(e,t,n,r){var a=nt.hasOwnProperty(t)?nt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wg(t,n,a,r)&&(n=null),r||a===null?zg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var sr=rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Ks=Symbol.for("react.fragment"),Od=Symbol.for("react.strict_mode"),_u=Symbol.for("react.profiler"),am=Symbol.for("react.provider"),om=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),Au=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),Bd=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),lm=Symbol.for("react.offscreen"),xh=Symbol.iterator;function go(e){return e===null||typeof e!="object"?null:(e=xh&&e[xh]||e["@@iterator"],typeof e=="function"?e:null)}var Fe=Object.assign,qc;function _o(e){if(qc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qc=t&&t[1]||""}return`
`+qc+e}var Qc=!1;function Gc(e,t){if(!e||Qc)return"";Qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var r=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){r=m}e.call(t.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),o=r.stack.split(`
`),i=a.length-1,d=o.length-1;1<=i&&0<=d&&a[i]!==o[d];)d--;for(;1<=i&&0<=d;i--,d--)if(a[i]!==o[d]){if(i!==1||d!==1)do if(i--,d--,0>d||a[i]!==o[d]){var h=`
`+a[i].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=i&&0<=d);break}}}finally{Qc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_o(e):""}function Hg(e){switch(e.tag){case 5:return _o(e.type);case 16:return _o("Lazy");case 13:return _o("Suspense");case 19:return _o("SuspenseList");case 0:case 2:case 15:return e=Gc(e.type,!1),e;case 11:return e=Gc(e.type.render,!1),e;case 1:return e=Gc(e.type,!0),e;default:return""}}function Lu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ks:return"Fragment";case Gs:return"Portal";case _u:return"Profiler";case Od:return"StrictMode";case Au:return"Suspense";case Ru:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case om:return(e.displayName||"Context")+".Consumer";case am:return(e._context.displayName||"Context")+".Provider";case Ud:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bd:return t=e.displayName||null,t!==null?t:Lu(e.type)||"Memo";case vr:t=e._payload,e=e._init;try{return Lu(e(t))}catch{}}return null}function qg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lu(t);case 8:return t===Od?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function im(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qg(e){var t=im(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gl(e){e._valueTracker||(e._valueTracker=Qg(e))}function cm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=im(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pu(e,t){var n=t.checked;return Fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Tr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function um(e,t){t=t.checked,t!=null&&$d(e,"checked",t,!1)}function Iu(e,t){um(e,t);var n=Tr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tu(e,t.type,Tr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Tu(e,t,n){(t!=="number"||_i(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ao=Array.isArray;function oa(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Tr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Fu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Ao(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tr(n)}}function dm(e,t){var n=Tr(t.value),r=Tr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function wh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kl,hm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kl=Kl||document.createElement("div"),Kl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ho(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gg=["Webkit","ms","Moz","O"];Object.keys(Io).forEach(function(e){Gg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Io[t]=Io[e]})});function pm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Io.hasOwnProperty(e)&&Io[e]?(""+t).trim():t+"px"}function mm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=pm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Kg=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(e,t){if(t){if(Kg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function Ou(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=null;function zd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bu=null,la=null,ia=null;function bh(e){if(e=fl(e)){if(typeof Bu!="function")throw Error(z(280));var t=e.stateNode;t&&(t=ac(t),Bu(e.stateNode,e.type,t))}}function xm(e){la?ia?ia.push(e):ia=[e]:la=e}function gm(){if(la){var e=la,t=ia;if(ia=la=null,bh(e),t)for(e=0;e<t.length;e++)bh(t[e])}}function vm(e,t){return e(t)}function ym(){}var Kc=!1;function wm(e,t,n){if(Kc)return e(t,n);Kc=!0;try{return vm(e,t,n)}finally{Kc=!1,(la!==null||ia!==null)&&(ym(),gm())}}function qo(e,t){var n=e.stateNode;if(n===null)return null;var r=ac(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var zu=!1;if(er)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){zu=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{zu=!1}function Zg(e,t,n,r,a,o,i,d,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(v){this.onError(v)}}var To=!1,Ai=null,Ri=!1,Vu=null,Jg={onError:function(e){To=!0,Ai=e}};function Yg(e,t,n,r,a,o,i,d,h){To=!1,Ai=null,Zg.apply(Jg,arguments)}function Xg(e,t,n,r,a,o,i,d,h){if(Yg.apply(this,arguments),To){if(To){var m=Ai;To=!1,Ai=null}else throw Error(z(198));Ri||(Ri=!0,Vu=m)}}function Ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jh(e){if(Ns(e)!==e)throw Error(z(188))}function ev(e){var t=e.alternate;if(!t){if(t=Ns(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return jh(a),e;if(o===r)return jh(a),t;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,d=a.child;d;){if(d===n){i=!0,n=a,r=o;break}if(d===r){i=!0,r=a,n=o;break}d=d.sibling}if(!i){for(d=o.child;d;){if(d===n){i=!0,n=o,r=a;break}if(d===r){i=!0,r=o,n=a;break}d=d.sibling}if(!i)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function jm(e){return e=ev(e),e!==null?km(e):null}function km(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=km(e);if(t!==null)return t;e=e.sibling}return null}var Nm=Lt.unstable_scheduleCallback,kh=Lt.unstable_cancelCallback,tv=Lt.unstable_shouldYield,nv=Lt.unstable_requestPaint,Be=Lt.unstable_now,rv=Lt.unstable_getCurrentPriorityLevel,Vd=Lt.unstable_ImmediatePriority,Sm=Lt.unstable_UserBlockingPriority,Li=Lt.unstable_NormalPriority,sv=Lt.unstable_LowPriority,Cm=Lt.unstable_IdlePriority,tc=null,Nn=null;function av(e){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(tc,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:iv,ov=Math.log,lv=Math.LN2;function iv(e){return e>>>=0,e===0?32:31-(ov(e)/lv|0)|0}var Zl=64,Jl=4194304;function Ro(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var d=i&~a;d!==0?r=Ro(d):(o&=i,o!==0&&(r=Ro(o)))}else i=n&~a,i!==0?r=Ro(i):o!==0&&(r=Ro(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ln(t),a=1<<n,r|=e[n],t&=~a;return r}function cv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uv(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-ln(o),d=1<<i,h=a[i];h===-1?(!(d&n)||d&r)&&(a[i]=cv(d,t)):h<=t&&(e.expiredLanes|=d),o&=~d}}function Wu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Em(){var e=Zl;return Zl<<=1,!(Zl&4194240)&&(Zl=64),e}function Zc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ul(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=n}function dv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ln(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function Wd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var we=0;function Dm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _m,Hd,Am,Rm,Lm,Hu=!1,Yl=[],Sr=null,Cr=null,Er=null,Qo=new Map,Go=new Map,wr=[],fv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(e,t){switch(e){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Qo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(t.pointerId)}}function yo(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=fl(t),t!==null&&Hd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function hv(e,t,n,r,a){switch(t){case"focusin":return Sr=yo(Sr,e,t,n,r,a),!0;case"dragenter":return Cr=yo(Cr,e,t,n,r,a),!0;case"mouseover":return Er=yo(Er,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Qo.set(o,yo(Qo.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Go.set(o,yo(Go.get(o)||null,e,t,n,r,a)),!0}return!1}function Pm(e){var t=hs(e.target);if(t!==null){var n=Ns(t);if(n!==null){if(t=n.tag,t===13){if(t=bm(n),t!==null){e.blockedOn=t,Lm(e.priority,function(){Am(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Uu=r,n.target.dispatchEvent(r),Uu=null}else return t=fl(n),t!==null&&Hd(t),e.blockedOn=n,!1;t.shift()}return!0}function Sh(e,t,n){mi(e)&&n.delete(t)}function pv(){Hu=!1,Sr!==null&&mi(Sr)&&(Sr=null),Cr!==null&&mi(Cr)&&(Cr=null),Er!==null&&mi(Er)&&(Er=null),Qo.forEach(Sh),Go.forEach(Sh)}function wo(e,t){e.blockedOn===t&&(e.blockedOn=null,Hu||(Hu=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,pv)))}function Ko(e){function t(a){return wo(a,e)}if(0<Yl.length){wo(Yl[0],e);for(var n=1;n<Yl.length;n++){var r=Yl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sr!==null&&wo(Sr,e),Cr!==null&&wo(Cr,e),Er!==null&&wo(Er,e),Qo.forEach(t),Go.forEach(t),n=0;n<wr.length;n++)r=wr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<wr.length&&(n=wr[0],n.blockedOn===null);)Pm(n),n.blockedOn===null&&wr.shift()}var ca=sr.ReactCurrentBatchConfig,Ii=!0;function mv(e,t,n,r){var a=we,o=ca.transition;ca.transition=null;try{we=1,qd(e,t,n,r)}finally{we=a,ca.transition=o}}function xv(e,t,n,r){var a=we,o=ca.transition;ca.transition=null;try{we=4,qd(e,t,n,r)}finally{we=a,ca.transition=o}}function qd(e,t,n,r){if(Ii){var a=qu(e,t,n,r);if(a===null)ou(e,t,r,Ti,n),Nh(e,r);else if(hv(a,e,t,n,r))r.stopPropagation();else if(Nh(e,r),t&4&&-1<fv.indexOf(e)){for(;a!==null;){var o=fl(a);if(o!==null&&_m(o),o=qu(e,t,n,r),o===null&&ou(e,t,r,Ti,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else ou(e,t,r,null,n)}}var Ti=null;function qu(e,t,n,r){if(Ti=null,e=zd(r),e=hs(e),e!==null)if(t=Ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ti=e,null}function Im(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rv()){case Vd:return 1;case Sm:return 4;case Li:case sv:return 16;case Cm:return 536870912;default:return 16}default:return 16}}var jr=null,Qd=null,xi=null;function Tm(){if(xi)return xi;var e,t=Qd,n=t.length,r,a="value"in jr?jr.value:jr.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===a[o-r];r++);return xi=a.slice(e,1<r?1-r:void 0)}function gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xl(){return!0}function Ch(){return!1}function It(e){function t(n,r,a,o,i){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xl:Ch,this.isPropagationStopped=Ch,this}return Fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),t}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gd=It(ba),dl=Fe({},ba,{view:0,detail:0}),gv=It(dl),Jc,Yc,bo,nc=Fe({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bo&&(bo&&e.type==="mousemove"?(Jc=e.screenX-bo.screenX,Yc=e.screenY-bo.screenY):Yc=Jc=0,bo=e),Jc)},movementY:function(e){return"movementY"in e?e.movementY:Yc}}),Eh=It(nc),vv=Fe({},nc,{dataTransfer:0}),yv=It(vv),wv=Fe({},dl,{relatedTarget:0}),Xc=It(wv),bv=Fe({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),jv=It(bv),kv=Fe({},ba,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nv=It(kv),Sv=Fe({},ba,{data:0}),Dh=It(Sv),Cv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ev={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _v(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dv[e])?!!t[e]:!1}function Kd(){return _v}var Av=Fe({},dl,{key:function(e){if(e.key){var t=Cv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ev[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kd,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rv=It(Av),Lv=Fe({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_h=It(Lv),Pv=Fe({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kd}),Iv=It(Pv),Tv=Fe({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fv=It(Tv),Mv=Fe({},nc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$v=It(Mv),Ov=[9,13,27,32],Zd=er&&"CompositionEvent"in window,Fo=null;er&&"documentMode"in document&&(Fo=document.documentMode);var Uv=er&&"TextEvent"in window&&!Fo,Fm=er&&(!Zd||Fo&&8<Fo&&11>=Fo),Ah=" ",Rh=!1;function Mm(e,t){switch(e){case"keyup":return Ov.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $m(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zs=!1;function Bv(e,t){switch(e){case"compositionend":return $m(t);case"keypress":return t.which!==32?null:(Rh=!0,Ah);case"textInput":return e=t.data,e===Ah&&Rh?null:e;default:return null}}function zv(e,t){if(Zs)return e==="compositionend"||!Zd&&Mm(e,t)?(e=Tm(),xi=Qd=jr=null,Zs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fm&&t.locale!=="ko"?null:t.data;default:return null}}var Vv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vv[e.type]:t==="textarea"}function Om(e,t,n,r){xm(r),t=Fi(t,"onChange"),0<t.length&&(n=new Gd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mo=null,Zo=null;function Wv(e){Zm(e,0)}function rc(e){var t=Xs(e);if(cm(t))return e}function Hv(e,t){if(e==="change")return t}var Um=!1;if(er){var eu;if(er){var tu="oninput"in document;if(!tu){var Ph=document.createElement("div");Ph.setAttribute("oninput","return;"),tu=typeof Ph.oninput=="function"}eu=tu}else eu=!1;Um=eu&&(!document.documentMode||9<document.documentMode)}function Ih(){Mo&&(Mo.detachEvent("onpropertychange",Bm),Zo=Mo=null)}function Bm(e){if(e.propertyName==="value"&&rc(Zo)){var t=[];Om(t,Zo,e,zd(e)),wm(Wv,t)}}function qv(e,t,n){e==="focusin"?(Ih(),Mo=t,Zo=n,Mo.attachEvent("onpropertychange",Bm)):e==="focusout"&&Ih()}function Qv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rc(Zo)}function Gv(e,t){if(e==="click")return rc(t)}function Kv(e,t){if(e==="input"||e==="change")return rc(t)}function Zv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:Zv;function Jo(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Du.call(t,a)||!un(e[a],t[a]))return!1}return!0}function Th(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fh(e,t){var n=Th(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Th(n)}}function zm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vm(){for(var e=window,t=_i();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_i(e.document)}return t}function Jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jv(e){var t=Vm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zm(n.ownerDocument.documentElement,n)){if(r!==null&&Jd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=Fh(n,o);var i=Fh(n,r);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yv=er&&"documentMode"in document&&11>=document.documentMode,Js=null,Qu=null,$o=null,Gu=!1;function Mh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gu||Js==null||Js!==_i(r)||(r=Js,"selectionStart"in r&&Jd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$o&&Jo($o,r)||($o=r,r=Fi(Qu,"onSelect"),0<r.length&&(t=new Gd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Js)))}function ei(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ys={animationend:ei("Animation","AnimationEnd"),animationiteration:ei("Animation","AnimationIteration"),animationstart:ei("Animation","AnimationStart"),transitionend:ei("Transition","TransitionEnd")},nu={},Wm={};er&&(Wm=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function sc(e){if(nu[e])return nu[e];if(!Ys[e])return e;var t=Ys[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wm)return nu[e]=t[n];return e}var Hm=sc("animationend"),qm=sc("animationiteration"),Qm=sc("animationstart"),Gm=sc("transitionend"),Km=new Map,$h="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Km.set(e,t),ks(t,[e])}for(var ru=0;ru<$h.length;ru++){var su=$h[ru],Xv=su.toLowerCase(),ey=su[0].toUpperCase()+su.slice(1);Mr(Xv,"on"+ey)}Mr(Hm,"onAnimationEnd");Mr(qm,"onAnimationIteration");Mr(Qm,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(Gm,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ty=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function Oh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Xg(r,t,void 0,e),e.currentTarget=null}function Zm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var d=r[i],h=d.instance,m=d.currentTarget;if(d=d.listener,h!==o&&a.isPropagationStopped())break e;Oh(a,d,m),o=h}else for(i=0;i<r.length;i++){if(d=r[i],h=d.instance,m=d.currentTarget,d=d.listener,h!==o&&a.isPropagationStopped())break e;Oh(a,d,m),o=h}}}if(Ri)throw e=Vu,Ri=!1,Vu=null,e}function Ee(e,t){var n=t[Xu];n===void 0&&(n=t[Xu]=new Set);var r=e+"__bubble";n.has(r)||(Jm(t,e,2,!1),n.add(r))}function au(e,t,n){var r=0;t&&(r|=4),Jm(n,e,r,t)}var ti="_reactListening"+Math.random().toString(36).slice(2);function Yo(e){if(!e[ti]){e[ti]=!0,sm.forEach(function(n){n!=="selectionchange"&&(ty.has(n)||au(n,!1,e),au(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ti]||(t[ti]=!0,au("selectionchange",!1,t))}}function Jm(e,t,n,r){switch(Im(t)){case 1:var a=mv;break;case 4:a=xv;break;default:a=qd}n=a.bind(null,t,n,e),a=void 0,!zu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ou(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var d=r.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var h=i.tag;if((h===3||h===4)&&(h=i.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;i=i.return}for(;d!==null;){if(i=hs(d),i===null)return;if(h=i.tag,h===5||h===6){r=o=i;continue e}d=d.parentNode}}r=r.return}wm(function(){var m=o,v=zd(n),b=[];e:{var k=Km.get(e);if(k!==void 0){var D=Gd,A=e;switch(e){case"keypress":if(gi(n)===0)break e;case"keydown":case"keyup":D=Rv;break;case"focusin":A="focus",D=Xc;break;case"focusout":A="blur",D=Xc;break;case"beforeblur":case"afterblur":D=Xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Iv;break;case Hm:case qm:case Qm:D=jv;break;case Gm:D=Fv;break;case"scroll":D=gv;break;case"wheel":D=$v;break;case"copy":case"cut":case"paste":D=Nv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=_h}var P=(t&4)!==0,U=!P&&e==="scroll",j=P?k!==null?k+"Capture":null:k;P=[];for(var g=m,w;g!==null;){w=g;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,j!==null&&(C=qo(g,j),C!=null&&P.push(Xo(g,C,w)))),U)break;g=g.return}0<P.length&&(k=new D(k,A,null,n,v),b.push({event:k,listeners:P}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",k&&n!==Uu&&(A=n.relatedTarget||n.fromElement)&&(hs(A)||A[tr]))break e;if((D||k)&&(k=v.window===v?v:(k=v.ownerDocument)?k.defaultView||k.parentWindow:window,D?(A=n.relatedTarget||n.toElement,D=m,A=A?hs(A):null,A!==null&&(U=Ns(A),A!==U||A.tag!==5&&A.tag!==6)&&(A=null)):(D=null,A=m),D!==A)){if(P=Eh,C="onMouseLeave",j="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(P=_h,C="onPointerLeave",j="onPointerEnter",g="pointer"),U=D==null?k:Xs(D),w=A==null?k:Xs(A),k=new P(C,g+"leave",D,n,v),k.target=U,k.relatedTarget=w,C=null,hs(v)===m&&(P=new P(j,g+"enter",A,n,v),P.target=w,P.relatedTarget=U,C=P),U=C,D&&A)t:{for(P=D,j=A,g=0,w=P;w;w=qs(w))g++;for(w=0,C=j;C;C=qs(C))w++;for(;0<g-w;)P=qs(P),g--;for(;0<w-g;)j=qs(j),w--;for(;g--;){if(P===j||j!==null&&P===j.alternate)break t;P=qs(P),j=qs(j)}P=null}else P=null;D!==null&&Uh(b,k,D,P,!1),A!==null&&U!==null&&Uh(b,U,A,P,!0)}}e:{if(k=m?Xs(m):window,D=k.nodeName&&k.nodeName.toLowerCase(),D==="select"||D==="input"&&k.type==="file")var R=Hv;else if(Lh(k))if(Um)R=Kv;else{R=Qv;var O=qv}else(D=k.nodeName)&&D.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(R=Gv);if(R&&(R=R(e,m))){Om(b,R,n,v);break e}O&&O(e,k,m),e==="focusout"&&(O=k._wrapperState)&&O.controlled&&k.type==="number"&&Tu(k,"number",k.value)}switch(O=m?Xs(m):window,e){case"focusin":(Lh(O)||O.contentEditable==="true")&&(Js=O,Qu=m,$o=null);break;case"focusout":$o=Qu=Js=null;break;case"mousedown":Gu=!0;break;case"contextmenu":case"mouseup":case"dragend":Gu=!1,Mh(b,n,v);break;case"selectionchange":if(Yv)break;case"keydown":case"keyup":Mh(b,n,v)}var I;if(Zd)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else Zs?Mm(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(Fm&&n.locale!=="ko"&&(Zs||H!=="onCompositionStart"?H==="onCompositionEnd"&&Zs&&(I=Tm()):(jr=v,Qd="value"in jr?jr.value:jr.textContent,Zs=!0)),O=Fi(m,H),0<O.length&&(H=new Dh(H,e,null,n,v),b.push({event:H,listeners:O}),I?H.data=I:(I=$m(n),I!==null&&(H.data=I)))),(I=Uv?Bv(e,n):zv(e,n))&&(m=Fi(m,"onBeforeInput"),0<m.length&&(v=new Dh("onBeforeInput","beforeinput",null,n,v),b.push({event:v,listeners:m}),v.data=I))}Zm(b,t)})}function Xo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fi(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=qo(e,n),o!=null&&r.unshift(Xo(e,o,a)),o=qo(e,t),o!=null&&r.push(Xo(e,o,a))),e=e.return}return r}function qs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uh(e,t,n,r,a){for(var o=t._reactName,i=[];n!==null&&n!==r;){var d=n,h=d.alternate,m=d.stateNode;if(h!==null&&h===r)break;d.tag===5&&m!==null&&(d=m,a?(h=qo(n,o),h!=null&&i.unshift(Xo(n,h,d))):a||(h=qo(n,o),h!=null&&i.push(Xo(n,h,d)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var ny=/\r\n?/g,ry=/\u0000|\uFFFD/g;function Bh(e){return(typeof e=="string"?e:""+e).replace(ny,`
`).replace(ry,"")}function ni(e,t,n){if(t=Bh(t),Bh(e)!==t&&n)throw Error(z(425))}function Mi(){}var Ku=null,Zu=null;function Ju(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yu=typeof setTimeout=="function"?setTimeout:void 0,sy=typeof clearTimeout=="function"?clearTimeout:void 0,zh=typeof Promise=="function"?Promise:void 0,ay=typeof queueMicrotask=="function"?queueMicrotask:typeof zh<"u"?function(e){return zh.resolve(null).then(e).catch(oy)}:Yu;function oy(e){setTimeout(function(){throw e})}function lu(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ko(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ko(t)}function Dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ja=Math.random().toString(36).slice(2),kn="__reactFiber$"+ja,el="__reactProps$"+ja,tr="__reactContainer$"+ja,Xu="__reactEvents$"+ja,ly="__reactListeners$"+ja,iy="__reactHandles$"+ja;function hs(e){var t=e[kn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tr]||n[kn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vh(e);e!==null;){if(n=e[kn])return n;e=Vh(e)}return t}e=n,n=e.parentNode}return null}function fl(e){return e=e[kn]||e[tr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function ac(e){return e[el]||null}var ed=[],ea=-1;function $r(e){return{current:e}}function De(e){0>ea||(e.current=ed[ea],ed[ea]=null,ea--)}function Ce(e,t){ea++,ed[ea]=e.current,e.current=t}var Fr={},it=$r(Fr),jt=$r(!1),vs=Fr;function pa(e,t){var n=e.type.contextTypes;if(!n)return Fr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function kt(e){return e=e.childContextTypes,e!=null}function $i(){De(jt),De(it)}function Wh(e,t,n){if(it.current!==Fr)throw Error(z(168));Ce(it,t),Ce(jt,n)}function Ym(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(z(108,qg(e)||"Unknown",a));return Fe({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fr,vs=it.current,Ce(it,e),Ce(jt,jt.current),!0}function Hh(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=Ym(e,t,vs),r.__reactInternalMemoizedMergedChildContext=e,De(jt),De(it),Ce(it,e)):De(jt),Ce(jt,n)}var Kn=null,oc=!1,iu=!1;function Xm(e){Kn===null?Kn=[e]:Kn.push(e)}function cy(e){oc=!0,Xm(e)}function Or(){if(!iu&&Kn!==null){iu=!0;var e=0,t=we;try{var n=Kn;for(we=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kn=null,oc=!1}catch(a){throw Kn!==null&&(Kn=Kn.slice(e+1)),Nm(Vd,Or),a}finally{we=t,iu=!1}}return null}var ta=[],na=0,Ui=null,Bi=0,Vt=[],Wt=0,ys=null,Jn=1,Yn="";function us(e,t){ta[na++]=Bi,ta[na++]=Ui,Ui=e,Bi=t}function e0(e,t,n){Vt[Wt++]=Jn,Vt[Wt++]=Yn,Vt[Wt++]=ys,ys=e;var r=Jn;e=Yn;var a=32-ln(r)-1;r&=~(1<<a),n+=1;var o=32-ln(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Jn=1<<32-ln(t)+a|n<<a|r,Yn=o+e}else Jn=1<<o|n<<a|r,Yn=e}function Yd(e){e.return!==null&&(us(e,1),e0(e,1,0))}function Xd(e){for(;e===Ui;)Ui=ta[--na],ta[na]=null,Bi=ta[--na],ta[na]=null;for(;e===ys;)ys=Vt[--Wt],Vt[Wt]=null,Yn=Vt[--Wt],Vt[Wt]=null,Jn=Vt[--Wt],Vt[Wt]=null}var Rt=null,At=null,Re=!1,on=null;function t0(e,t){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,At=Dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ys!==null?{id:Jn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,At=null,!0):!1;default:return!1}}function td(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nd(e){if(Re){var t=At;if(t){var n=t;if(!qh(e,t)){if(td(e))throw Error(z(418));t=Dr(n.nextSibling);var r=Rt;t&&qh(e,t)?t0(r,n):(e.flags=e.flags&-4097|2,Re=!1,Rt=e)}}else{if(td(e))throw Error(z(418));e.flags=e.flags&-4097|2,Re=!1,Rt=e}}}function Qh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function ri(e){if(e!==Rt)return!1;if(!Re)return Qh(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ju(e.type,e.memoizedProps)),t&&(t=At)){if(td(e))throw n0(),Error(z(418));for(;t;)t0(e,t),t=Dr(t.nextSibling)}if(Qh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){At=Dr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}At=null}}else At=Rt?Dr(e.stateNode.nextSibling):null;return!0}function n0(){for(var e=At;e;)e=Dr(e.nextSibling)}function ma(){At=Rt=null,Re=!1}function ef(e){on===null?on=[e]:on.push(e)}var uy=sr.ReactCurrentBatchConfig;function rn(e,t){if(e&&e.defaultProps){t=Fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var zi=$r(null),Vi=null,ra=null,tf=null;function nf(){tf=ra=Vi=null}function rf(e){var t=zi.current;De(zi),e._currentValue=t}function rd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ua(e,t){Vi=e,tf=ra=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Gt(e){var t=e._currentValue;if(tf!==e)if(e={context:e,memoizedValue:t,next:null},ra===null){if(Vi===null)throw Error(z(308));ra=e,Vi.dependencies={lanes:0,firstContext:e}}else ra=ra.next=e;return t}var ps=null;function sf(e){ps===null?ps=[e]:ps.push(e)}function r0(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,sf(t)):(n.next=a.next,a.next=n),t.interleaved=n,nr(e,r)}function nr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yr=!1;function af(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _r(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,nr(e,n)}return a=r.interleaved,a===null?(t.next=t,sf(r)):(t.next=a.next,a.next=t),r.interleaved=t,nr(e,n)}function vi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}function Gh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wi(e,t,n,r){var a=e.updateQueue;yr=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var h=d,m=h.next;h.next=null,i===null?o=m:i.next=m,i=h;var v=e.alternate;v!==null&&(v=v.updateQueue,d=v.lastBaseUpdate,d!==i&&(d===null?v.firstBaseUpdate=m:d.next=m,v.lastBaseUpdate=h))}if(o!==null){var b=a.baseState;i=0,v=m=h=null,d=o;do{var k=d.lane,D=d.eventTime;if((r&k)===k){v!==null&&(v=v.next={eventTime:D,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var A=e,P=d;switch(k=t,D=n,P.tag){case 1:if(A=P.payload,typeof A=="function"){b=A.call(D,b,k);break e}b=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=P.payload,k=typeof A=="function"?A.call(D,b,k):A,k==null)break e;b=Fe({},b,k);break e;case 2:yr=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,k=a.effects,k===null?a.effects=[d]:k.push(d))}else D={eventTime:D,lane:k,tag:d.tag,payload:d.payload,callback:d.callback,next:null},v===null?(m=v=D,h=b):v=v.next=D,i|=k;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;k=d,d=k.next,k.next=null,a.lastBaseUpdate=k,a.shared.pending=null}}while(!0);if(v===null&&(h=b),a.baseState=h,a.firstBaseUpdate=m,a.lastBaseUpdate=v,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);bs|=i,e.lanes=i,e.memoizedState=b}}function Kh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(z(191,a));a.call(r)}}}var a0=new rm.Component().refs;function sd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lc={isMounted:function(e){return(e=e._reactInternals)?Ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ht(),a=Rr(e),o=Xn(r,a);o.payload=t,n!=null&&(o.callback=n),t=_r(e,o,a),t!==null&&(cn(t,e,a,r),vi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ht(),a=Rr(e),o=Xn(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=_r(e,o,a),t!==null&&(cn(t,e,a,r),vi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ht(),r=Rr(e),a=Xn(n,r);a.tag=2,t!=null&&(a.callback=t),t=_r(e,a,r),t!==null&&(cn(t,e,r,n),vi(t,e,r))}};function Zh(e,t,n,r,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Jo(n,r)||!Jo(a,o):!0}function o0(e,t,n){var r=!1,a=Fr,o=t.contextType;return typeof o=="object"&&o!==null?o=Gt(o):(a=kt(t)?vs:it.current,r=t.contextTypes,o=(r=r!=null)?pa(e,a):Fr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Jh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lc.enqueueReplaceState(t,t.state,null)}function ad(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=a0,af(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Gt(o):(o=kt(t)?vs:it.current,a.context=pa(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(sd(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&lc.enqueueReplaceState(a,a.state,null),Wi(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function jo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var d=a.refs;d===a0&&(d=a.refs={}),i===null?delete d[o]:d[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function si(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yh(e){var t=e._init;return t(e._payload)}function l0(e){function t(j,g){if(e){var w=j.deletions;w===null?(j.deletions=[g],j.flags|=16):w.push(g)}}function n(j,g){if(!e)return null;for(;g!==null;)t(j,g),g=g.sibling;return null}function r(j,g){for(j=new Map;g!==null;)g.key!==null?j.set(g.key,g):j.set(g.index,g),g=g.sibling;return j}function a(j,g){return j=Lr(j,g),j.index=0,j.sibling=null,j}function o(j,g,w){return j.index=w,e?(w=j.alternate,w!==null?(w=w.index,w<g?(j.flags|=2,g):w):(j.flags|=2,g)):(j.flags|=1048576,g)}function i(j){return e&&j.alternate===null&&(j.flags|=2),j}function d(j,g,w,C){return g===null||g.tag!==6?(g=mu(w,j.mode,C),g.return=j,g):(g=a(g,w),g.return=j,g)}function h(j,g,w,C){var R=w.type;return R===Ks?v(j,g,w.props.children,C,w.key):g!==null&&(g.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===vr&&Yh(R)===g.type)?(C=a(g,w.props),C.ref=jo(j,g,w),C.return=j,C):(C=Ni(w.type,w.key,w.props,null,j.mode,C),C.ref=jo(j,g,w),C.return=j,C)}function m(j,g,w,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=xu(w,j.mode,C),g.return=j,g):(g=a(g,w.children||[]),g.return=j,g)}function v(j,g,w,C,R){return g===null||g.tag!==7?(g=gs(w,j.mode,C,R),g.return=j,g):(g=a(g,w),g.return=j,g)}function b(j,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=mu(""+g,j.mode,w),g.return=j,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ql:return w=Ni(g.type,g.key,g.props,null,j.mode,w),w.ref=jo(j,null,g),w.return=j,w;case Gs:return g=xu(g,j.mode,w),g.return=j,g;case vr:var C=g._init;return b(j,C(g._payload),w)}if(Ao(g)||go(g))return g=gs(g,j.mode,w,null),g.return=j,g;si(j,g)}return null}function k(j,g,w,C){var R=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return R!==null?null:d(j,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ql:return w.key===R?h(j,g,w,C):null;case Gs:return w.key===R?m(j,g,w,C):null;case vr:return R=w._init,k(j,g,R(w._payload),C)}if(Ao(w)||go(w))return R!==null?null:v(j,g,w,C,null);si(j,w)}return null}function D(j,g,w,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return j=j.get(w)||null,d(g,j,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ql:return j=j.get(C.key===null?w:C.key)||null,h(g,j,C,R);case Gs:return j=j.get(C.key===null?w:C.key)||null,m(g,j,C,R);case vr:var O=C._init;return D(j,g,w,O(C._payload),R)}if(Ao(C)||go(C))return j=j.get(w)||null,v(g,j,C,R,null);si(g,C)}return null}function A(j,g,w,C){for(var R=null,O=null,I=g,H=g=0,B=null;I!==null&&H<w.length;H++){I.index>H?(B=I,I=null):B=I.sibling;var _=k(j,I,w[H],C);if(_===null){I===null&&(I=B);break}e&&I&&_.alternate===null&&t(j,I),g=o(_,g,H),O===null?R=_:O.sibling=_,O=_,I=B}if(H===w.length)return n(j,I),Re&&us(j,H),R;if(I===null){for(;H<w.length;H++)I=b(j,w[H],C),I!==null&&(g=o(I,g,H),O===null?R=I:O.sibling=I,O=I);return Re&&us(j,H),R}for(I=r(j,I);H<w.length;H++)B=D(I,j,H,w[H],C),B!==null&&(e&&B.alternate!==null&&I.delete(B.key===null?H:B.key),g=o(B,g,H),O===null?R=B:O.sibling=B,O=B);return e&&I.forEach(function(re){return t(j,re)}),Re&&us(j,H),R}function P(j,g,w,C){var R=go(w);if(typeof R!="function")throw Error(z(150));if(w=R.call(w),w==null)throw Error(z(151));for(var O=R=null,I=g,H=g=0,B=null,_=w.next();I!==null&&!_.done;H++,_=w.next()){I.index>H?(B=I,I=null):B=I.sibling;var re=k(j,I,_.value,C);if(re===null){I===null&&(I=B);break}e&&I&&re.alternate===null&&t(j,I),g=o(re,g,H),O===null?R=re:O.sibling=re,O=re,I=B}if(_.done)return n(j,I),Re&&us(j,H),R;if(I===null){for(;!_.done;H++,_=w.next())_=b(j,_.value,C),_!==null&&(g=o(_,g,H),O===null?R=_:O.sibling=_,O=_);return Re&&us(j,H),R}for(I=r(j,I);!_.done;H++,_=w.next())_=D(I,j,H,_.value,C),_!==null&&(e&&_.alternate!==null&&I.delete(_.key===null?H:_.key),g=o(_,g,H),O===null?R=_:O.sibling=_,O=_);return e&&I.forEach(function(Z){return t(j,Z)}),Re&&us(j,H),R}function U(j,g,w,C){if(typeof w=="object"&&w!==null&&w.type===Ks&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ql:e:{for(var R=w.key,O=g;O!==null;){if(O.key===R){if(R=w.type,R===Ks){if(O.tag===7){n(j,O.sibling),g=a(O,w.props.children),g.return=j,j=g;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===vr&&Yh(R)===O.type){n(j,O.sibling),g=a(O,w.props),g.ref=jo(j,O,w),g.return=j,j=g;break e}n(j,O);break}else t(j,O);O=O.sibling}w.type===Ks?(g=gs(w.props.children,j.mode,C,w.key),g.return=j,j=g):(C=Ni(w.type,w.key,w.props,null,j.mode,C),C.ref=jo(j,g,w),C.return=j,j=C)}return i(j);case Gs:e:{for(O=w.key;g!==null;){if(g.key===O)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(j,g.sibling),g=a(g,w.children||[]),g.return=j,j=g;break e}else{n(j,g);break}else t(j,g);g=g.sibling}g=xu(w,j.mode,C),g.return=j,j=g}return i(j);case vr:return O=w._init,U(j,g,O(w._payload),C)}if(Ao(w))return A(j,g,w,C);if(go(w))return P(j,g,w,C);si(j,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(j,g.sibling),g=a(g,w),g.return=j,j=g):(n(j,g),g=mu(w,j.mode,C),g.return=j,j=g),i(j)):n(j,g)}return U}var xa=l0(!0),i0=l0(!1),hl={},Sn=$r(hl),tl=$r(hl),nl=$r(hl);function ms(e){if(e===hl)throw Error(z(174));return e}function of(e,t){switch(Ce(nl,t),Ce(tl,e),Ce(Sn,hl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mu(t,e)}De(Sn),Ce(Sn,t)}function ga(){De(Sn),De(tl),De(nl)}function c0(e){ms(nl.current);var t=ms(Sn.current),n=Mu(t,e.type);t!==n&&(Ce(tl,e),Ce(Sn,n))}function lf(e){tl.current===e&&(De(Sn),De(tl))}var Ie=$r(0);function Hi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cu=[];function cf(){for(var e=0;e<cu.length;e++)cu[e]._workInProgressVersionPrimary=null;cu.length=0}var yi=sr.ReactCurrentDispatcher,uu=sr.ReactCurrentBatchConfig,ws=0,Te=null,Qe=null,Je=null,qi=!1,Oo=!1,rl=0,dy=0;function at(){throw Error(z(321))}function uf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function df(e,t,n,r,a,o){if(ws=o,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yi.current=e===null||e.memoizedState===null?my:xy,e=n(r,a),Oo){o=0;do{if(Oo=!1,rl=0,25<=o)throw Error(z(301));o+=1,Je=Qe=null,t.updateQueue=null,yi.current=gy,e=n(r,a)}while(Oo)}if(yi.current=Qi,t=Qe!==null&&Qe.next!==null,ws=0,Je=Qe=Te=null,qi=!1,t)throw Error(z(300));return e}function ff(){var e=rl!==0;return rl=0,e}function bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Te.memoizedState=Je=e:Je=Je.next=e,Je}function Kt(){if(Qe===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=Je===null?Te.memoizedState:Je.next;if(t!==null)Je=t,Qe=e;else{if(e===null)throw Error(z(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Je===null?Te.memoizedState=Je=e:Je=Je.next=e}return Je}function sl(e,t){return typeof t=="function"?t(e):t}function du(e){var t=Kt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Qe,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var d=i=null,h=null,m=o;do{var v=m.lane;if((ws&v)===v)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var b={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(d=h=b,i=r):h=h.next=b,Te.lanes|=v,bs|=v}m=m.next}while(m!==null&&m!==o);h===null?i=r:h.next=d,un(r,t.memoizedState)||(bt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Te.lanes|=o,bs|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fu(e){var t=Kt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);un(o,t.memoizedState)||(bt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function u0(){}function d0(e,t){var n=Te,r=Kt(),a=t(),o=!un(r.memoizedState,a);if(o&&(r.memoizedState=a,bt=!0),r=r.queue,hf(p0.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,al(9,h0.bind(null,n,r,a,t),void 0,null),Ye===null)throw Error(z(349));ws&30||f0(n,t,a)}return a}function f0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function h0(e,t,n,r){t.value=n,t.getSnapshot=r,m0(t)&&x0(e)}function p0(e,t,n){return n(function(){m0(t)&&x0(e)})}function m0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function x0(e){var t=nr(e,1);t!==null&&cn(t,e,1,-1)}function Xh(e){var t=bn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:e},t.queue=e,e=e.dispatch=py.bind(null,Te,e),[t.memoizedState,e]}function al(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function g0(){return Kt().memoizedState}function wi(e,t,n,r){var a=bn();Te.flags|=e,a.memoizedState=al(1|t,n,void 0,r===void 0?null:r)}function ic(e,t,n,r){var a=Kt();r=r===void 0?null:r;var o=void 0;if(Qe!==null){var i=Qe.memoizedState;if(o=i.destroy,r!==null&&uf(r,i.deps)){a.memoizedState=al(t,n,o,r);return}}Te.flags|=e,a.memoizedState=al(1|t,n,o,r)}function ep(e,t){return wi(8390656,8,e,t)}function hf(e,t){return ic(2048,8,e,t)}function v0(e,t){return ic(4,2,e,t)}function y0(e,t){return ic(4,4,e,t)}function w0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function b0(e,t,n){return n=n!=null?n.concat([e]):null,ic(4,4,w0.bind(null,t,e),n)}function pf(){}function j0(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function k0(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function N0(e,t,n){return ws&21?(un(n,t)||(n=Em(),Te.lanes|=n,bs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=n)}function fy(e,t){var n=we;we=n!==0&&4>n?n:4,e(!0);var r=uu.transition;uu.transition={};try{e(!1),t()}finally{we=n,uu.transition=r}}function S0(){return Kt().memoizedState}function hy(e,t,n){var r=Rr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C0(e))E0(t,n);else if(n=r0(e,t,n,r),n!==null){var a=ht();cn(n,e,r,a),D0(n,t,r)}}function py(e,t,n){var r=Rr(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C0(e))E0(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,d=o(i,n);if(a.hasEagerState=!0,a.eagerState=d,un(d,i)){var h=t.interleaved;h===null?(a.next=a,sf(t)):(a.next=h.next,h.next=a),t.interleaved=a;return}}catch{}finally{}n=r0(e,t,a,r),n!==null&&(a=ht(),cn(n,e,r,a),D0(n,t,r))}}function C0(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function E0(e,t){Oo=qi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function D0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}var Qi={readContext:Gt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},my={readContext:Gt,useCallback:function(e,t){return bn().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:ep,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wi(4194308,4,w0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wi(4194308,4,e,t)},useInsertionEffect:function(e,t){return wi(4,2,e,t)},useMemo:function(e,t){var n=bn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=hy.bind(null,Te,e),[r.memoizedState,e]},useRef:function(e){var t=bn();return e={current:e},t.memoizedState=e},useState:Xh,useDebugValue:pf,useDeferredValue:function(e){return bn().memoizedState=e},useTransition:function(){var e=Xh(!1),t=e[0];return e=fy.bind(null,e[1]),bn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Te,a=bn();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),Ye===null)throw Error(z(349));ws&30||f0(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,ep(p0.bind(null,r,o,e),[e]),r.flags|=2048,al(9,h0.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bn(),t=Ye.identifierPrefix;if(Re){var n=Yn,r=Jn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xy={readContext:Gt,useCallback:j0,useContext:Gt,useEffect:hf,useImperativeHandle:b0,useInsertionEffect:v0,useLayoutEffect:y0,useMemo:k0,useReducer:du,useRef:g0,useState:function(){return du(sl)},useDebugValue:pf,useDeferredValue:function(e){var t=Kt();return N0(t,Qe.memoizedState,e)},useTransition:function(){var e=du(sl)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:u0,useSyncExternalStore:d0,useId:S0,unstable_isNewReconciler:!1},gy={readContext:Gt,useCallback:j0,useContext:Gt,useEffect:hf,useImperativeHandle:b0,useInsertionEffect:v0,useLayoutEffect:y0,useMemo:k0,useReducer:fu,useRef:g0,useState:function(){return fu(sl)},useDebugValue:pf,useDeferredValue:function(e){var t=Kt();return Qe===null?t.memoizedState=e:N0(t,Qe.memoizedState,e)},useTransition:function(){var e=fu(sl)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:u0,useSyncExternalStore:d0,useId:S0,unstable_isNewReconciler:!1};function va(e,t){try{var n="",r=t;do n+=Hg(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function od(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vy=typeof WeakMap=="function"?WeakMap:Map;function _0(e,t,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ki||(Ki=!0,xd=r),od(e,t)},n}function A0(e,t,n){n=Xn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){od(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){od(e,t),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function tp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vy;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ly.bind(null,e,t,n),t.then(e,e))}function np(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rp(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xn(-1,1),t.tag=2,_r(n,t,1))),n.lanes|=1),e)}var yy=sr.ReactCurrentOwner,bt=!1;function ft(e,t,n,r){t.child=e===null?i0(t,null,n,r):xa(t,e.child,n,r)}function sp(e,t,n,r,a){n=n.render;var o=t.ref;return ua(t,a),r=df(e,t,n,r,o,a),n=ff(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,rr(e,t,a)):(Re&&n&&Yd(t),t.flags|=1,ft(e,t,r,a),t.child)}function ap(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!jf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,R0(e,t,o,r,a)):(e=Ni(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Jo,n(i,r)&&e.ref===t.ref)return rr(e,t,a)}return t.flags|=1,e=Lr(o,r),e.ref=t.ref,e.return=t,t.child=e}function R0(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(Jo(o,r)&&e.ref===t.ref)if(bt=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,rr(e,t,a)}return ld(e,t,n,r,a)}function L0(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(aa,_t),_t|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(aa,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ce(aa,_t),_t|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ce(aa,_t),_t|=r;return ft(e,t,a,n),t.child}function P0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ld(e,t,n,r,a){var o=kt(n)?vs:it.current;return o=pa(t,o),ua(t,a),n=df(e,t,n,r,o,a),r=ff(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,rr(e,t,a)):(Re&&r&&Yd(t),t.flags|=1,ft(e,t,n,a),t.child)}function op(e,t,n,r,a){if(kt(n)){var o=!0;Oi(t)}else o=!1;if(ua(t,a),t.stateNode===null)bi(e,t),o0(t,n,r),ad(t,n,r,a),r=!0;else if(e===null){var i=t.stateNode,d=t.memoizedProps;i.props=d;var h=i.context,m=n.contextType;typeof m=="object"&&m!==null?m=Gt(m):(m=kt(n)?vs:it.current,m=pa(t,m));var v=n.getDerivedStateFromProps,b=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function";b||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d!==r||h!==m)&&Jh(t,i,r,m),yr=!1;var k=t.memoizedState;i.state=k,Wi(t,r,i,a),h=t.memoizedState,d!==r||k!==h||jt.current||yr?(typeof v=="function"&&(sd(t,n,v,r),h=t.memoizedState),(d=yr||Zh(t,n,d,r,k,h,m))?(b||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=m,r=d):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,s0(e,t),d=t.memoizedProps,m=t.type===t.elementType?d:rn(t.type,d),i.props=m,b=t.pendingProps,k=i.context,h=n.contextType,typeof h=="object"&&h!==null?h=Gt(h):(h=kt(n)?vs:it.current,h=pa(t,h));var D=n.getDerivedStateFromProps;(v=typeof D=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d!==b||k!==h)&&Jh(t,i,r,h),yr=!1,k=t.memoizedState,i.state=k,Wi(t,r,i,a);var A=t.memoizedState;d!==b||k!==A||jt.current||yr?(typeof D=="function"&&(sd(t,n,D,r),A=t.memoizedState),(m=yr||Zh(t,n,m,r,k,A,h)||!1)?(v||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,A,h),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,A,h)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=A),i.props=r,i.state=A,i.context=h,r=m):(typeof i.componentDidUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),r=!1)}return id(e,t,n,r,o,a)}function id(e,t,n,r,a,o){P0(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return a&&Hh(t,n,!1),rr(e,t,o);r=t.stateNode,yy.current=t;var d=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=xa(t,e.child,null,o),t.child=xa(t,null,d,o)):ft(e,t,d,o),t.memoizedState=r.state,a&&Hh(t,n,!0),t.child}function I0(e){var t=e.stateNode;t.pendingContext?Wh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wh(e,t.context,!1),of(e,t.containerInfo)}function lp(e,t,n,r,a){return ma(),ef(a),t.flags|=256,ft(e,t,n,r),t.child}var cd={dehydrated:null,treeContext:null,retryLane:0};function ud(e){return{baseLanes:e,cachePool:null,transitions:null}}function T0(e,t,n){var r=t.pendingProps,a=Ie.current,o=!1,i=(t.flags&128)!==0,d;if((d=i)||(d=e!==null&&e.memoizedState===null?!1:(a&2)!==0),d?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ce(Ie,a&1),e===null)return nd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=dc(i,r,0,null),e=gs(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ud(n),t.memoizedState=cd,e):mf(t,i));if(a=e.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return wy(e,t,i,r,d,a,n);if(o){o=r.fallback,i=t.mode,a=e.child,d=a.sibling;var h={mode:"hidden",children:r.children};return!(i&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Lr(a,h),r.subtreeFlags=a.subtreeFlags&14680064),d!==null?o=Lr(d,o):(o=gs(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?ud(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=cd,r}return o=e.child,e=o.sibling,r=Lr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function mf(e,t){return t=dc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ai(e,t,n,r){return r!==null&&ef(r),xa(t,e.child,null,n),e=mf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wy(e,t,n,r,a,o,i){if(n)return t.flags&256?(t.flags&=-257,r=hu(Error(z(422))),ai(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=dc({mode:"visible",children:r.children},a,0,null),o=gs(o,a,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&xa(t,e.child,null,i),t.child.memoizedState=ud(i),t.memoizedState=cd,o);if(!(t.mode&1))return ai(e,t,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var d=r.dgst;return r=d,o=Error(z(419)),r=hu(o,r,void 0),ai(e,t,i,r)}if(d=(i&e.childLanes)!==0,bt||d){if(r=Ye,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,nr(e,a),cn(r,e,a,-1))}return bf(),r=hu(Error(z(421))),ai(e,t,i,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Py.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,At=Dr(a.nextSibling),Rt=t,Re=!0,on=null,e!==null&&(Vt[Wt++]=Jn,Vt[Wt++]=Yn,Vt[Wt++]=ys,Jn=e.id,Yn=e.overflow,ys=t),t=mf(t,r.children),t.flags|=4096,t)}function ip(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),rd(e.return,t,n)}function pu(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function F0(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(ft(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ip(e,n,t);else if(e.tag===19)ip(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ce(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Hi(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),pu(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Hi(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}pu(t,!0,n,null,o);break;case"together":pu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=Lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function by(e,t,n){switch(t.tag){case 3:I0(t),ma();break;case 5:c0(t);break;case 1:kt(t.type)&&Oi(t);break;case 4:of(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ce(zi,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?T0(e,t,n):(Ce(Ie,Ie.current&1),e=rr(e,t,n),e!==null?e.sibling:null);Ce(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return F0(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ce(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,L0(e,t,n)}return rr(e,t,n)}var M0,dd,$0,O0;M0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dd=function(){};$0=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ms(Sn.current);var o=null;switch(n){case"input":a=Pu(e,a),r=Pu(e,r),o=[];break;case"select":a=Fe({},a,{value:void 0}),r=Fe({},r,{value:void 0}),o=[];break;case"textarea":a=Fu(e,a),r=Fu(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Mi)}$u(n,r);var i;n=null;for(m in a)if(!r.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var d=a[m];for(i in d)d.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Wo.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in r){var h=r[m];if(d=a!=null?a[m]:void 0,r.hasOwnProperty(m)&&h!==d&&(h!=null||d!=null))if(m==="style")if(d){for(i in d)!d.hasOwnProperty(i)||h&&h.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in h)h.hasOwnProperty(i)&&d[i]!==h[i]&&(n||(n={}),n[i]=h[i])}else n||(o||(o=[]),o.push(m,n)),n=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&Ee("scroll",e),o||d===h||(o=[])):(o=o||[]).push(m,h))}n&&(o=o||[]).push("style",n);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};O0=function(e,t,n,r){n!==r&&(t.flags|=4)};function ko(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jy(e,t,n){var r=t.pendingProps;switch(Xd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return kt(t.type)&&$i(),ot(t),null;case 3:return r=t.stateNode,ga(),De(jt),De(it),cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,on!==null&&(yd(on),on=null))),dd(e,t),ot(t),null;case 5:lf(t);var a=ms(nl.current);if(n=t.type,e!==null&&t.stateNode!=null)$0(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return ot(t),null}if(e=ms(Sn.current),ri(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[kn]=t,r[el]=o,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(a=0;a<Lo.length;a++)Ee(Lo[a],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":gh(r,o),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",r);break;case"textarea":yh(r,o),Ee("invalid",r)}$u(n,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="children"?typeof d=="string"?r.textContent!==d&&(o.suppressHydrationWarning!==!0&&ni(r.textContent,d,e),a=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&ni(r.textContent,d,e),a=["children",""+d]):Wo.hasOwnProperty(i)&&d!=null&&i==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Gl(r),vh(r,o,!0);break;case"textarea":Gl(r),wh(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Mi)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[kn]=t,e[el]=r,M0(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ou(n,r),n){case"dialog":Ee("cancel",e),Ee("close",e),a=r;break;case"iframe":case"object":case"embed":Ee("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lo.length;a++)Ee(Lo[a],e);a=r;break;case"source":Ee("error",e),a=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),a=r;break;case"details":Ee("toggle",e),a=r;break;case"input":gh(e,r),a=Pu(e,r),Ee("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Fe({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":yh(e,r),a=Fu(e,r),Ee("invalid",e);break;default:a=r}$u(n,a),d=a;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?mm(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&hm(e,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ho(e,h):typeof h=="number"&&Ho(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Wo.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ee("scroll",e):h!=null&&$d(e,o,h,i))}switch(n){case"input":Gl(e),vh(e,r,!1);break;case"textarea":Gl(e),wh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Tr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?oa(e,!!r.multiple,o,!1):r.defaultValue!=null&&oa(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Mi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)O0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=ms(nl.current),ms(Sn.current),ri(t)){if(r=t.stateNode,n=t.memoizedProps,r[kn]=t,(o=r.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:ni(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ni(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=t,t.stateNode=r}return ot(t),null;case 13:if(De(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&At!==null&&t.mode&1&&!(t.flags&128))n0(),ma(),t.flags|=98560,o=!1;else if(o=ri(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[kn]=t}else ma(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),o=!1}else on!==null&&(yd(on),on=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Ge===0&&(Ge=3):bf())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return ga(),dd(e,t),e===null&&Yo(t.stateNode.containerInfo),ot(t),null;case 10:return rf(t.type._context),ot(t),null;case 17:return kt(t.type)&&$i(),ot(t),null;case 19:if(De(Ie),o=t.memoizedState,o===null)return ot(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)ko(o,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Hi(e),i!==null){for(t.flags|=128,ko(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ce(Ie,Ie.current&1|2),t.child}e=e.sibling}o.tail!==null&&Be()>ya&&(t.flags|=128,r=!0,ko(o,!1),t.lanes=4194304)}else{if(!r)if(e=Hi(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ko(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Re)return ot(t),null}else 2*Be()-o.renderingStartTime>ya&&n!==1073741824&&(t.flags|=128,r=!0,ko(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Be(),t.sibling=null,n=Ie.current,Ce(Ie,r?n&1|2:n&1),t):(ot(t),null);case 22:case 23:return wf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_t&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function ky(e,t){switch(Xd(t),t.tag){case 1:return kt(t.type)&&$i(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ga(),De(jt),De(it),cf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lf(t),null;case 13:if(De(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(Ie),null;case 4:return ga(),null;case 10:return rf(t.type._context),null;case 22:case 23:return wf(),null;case 24:return null;default:return null}}var oi=!1,lt=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,J=null;function sa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(e,t,r)}else n.current=null}function fd(e,t,n){try{n()}catch(r){Me(e,t,r)}}var cp=!1;function Sy(e,t){if(Ku=Ii,e=Vm(),Jd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,d=-1,h=-1,m=0,v=0,b=e,k=null;t:for(;;){for(var D;b!==n||a!==0&&b.nodeType!==3||(d=i+a),b!==o||r!==0&&b.nodeType!==3||(h=i+r),b.nodeType===3&&(i+=b.nodeValue.length),(D=b.firstChild)!==null;)k=b,b=D;for(;;){if(b===e)break t;if(k===n&&++m===a&&(d=i),k===o&&++v===r&&(h=i),(D=b.nextSibling)!==null)break;b=k,k=b.parentNode}b=D}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zu={focusedElem:e,selectionRange:n},Ii=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var A=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var P=A.memoizedProps,U=A.memoizedState,j=t.stateNode,g=j.getSnapshotBeforeUpdate(t.elementType===t.type?P:rn(t.type,P),U);j.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(C){Me(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return A=cp,cp=!1,A}function Uo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&fd(t,n,o)}a=a.next}while(a!==r)}}function cc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function U0(e){var t=e.alternate;t!==null&&(e.alternate=null,U0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kn],delete t[el],delete t[Xu],delete t[ly],delete t[iy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function B0(e){return e.tag===5||e.tag===3||e.tag===4}function up(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||B0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mi));else if(r!==4&&(e=e.child,e!==null))for(pd(e,t,n),e=e.sibling;e!==null;)pd(e,t,n),e=e.sibling}function md(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(md(e,t,n),e=e.sibling;e!==null;)md(e,t,n),e=e.sibling}var et=null,sn=!1;function gr(e,t,n){for(n=n.child;n!==null;)z0(e,t,n),n=n.sibling}function z0(e,t,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(tc,n)}catch{}switch(n.tag){case 5:lt||sa(n,t);case 6:var r=et,a=sn;et=null,gr(e,t,n),et=r,sn=a,et!==null&&(sn?(e=et,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(sn?(e=et,n=n.stateNode,e.nodeType===8?lu(e.parentNode,n):e.nodeType===1&&lu(e,n),Ko(e)):lu(et,n.stateNode));break;case 4:r=et,a=sn,et=n.stateNode.containerInfo,sn=!0,gr(e,t,n),et=r,sn=a;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&fd(n,t,i),a=a.next}while(a!==r)}gr(e,t,n);break;case 1:if(!lt&&(sa(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){Me(n,t,d)}gr(e,t,n);break;case 21:gr(e,t,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,gr(e,t,n),lt=r):gr(e,t,n);break;default:gr(e,t,n)}}function dp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ny),t.forEach(function(r){var a=Iy.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,i=t,d=i;e:for(;d!==null;){switch(d.tag){case 5:et=d.stateNode,sn=!1;break e;case 3:et=d.stateNode.containerInfo,sn=!0;break e;case 4:et=d.stateNode.containerInfo,sn=!0;break e}d=d.return}if(et===null)throw Error(z(160));z0(o,i,a),et=null,sn=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(m){Me(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)V0(t,e),t=t.sibling}function V0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),wn(e),r&4){try{Uo(3,e,e.return),cc(3,e)}catch(P){Me(e,e.return,P)}try{Uo(5,e,e.return)}catch(P){Me(e,e.return,P)}}break;case 1:nn(t,e),wn(e),r&512&&n!==null&&sa(n,n.return);break;case 5:if(nn(t,e),wn(e),r&512&&n!==null&&sa(n,n.return),e.flags&32){var a=e.stateNode;try{Ho(a,"")}catch(P){Me(e,e.return,P)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&um(a,o),Ou(d,i);var m=Ou(d,o);for(i=0;i<h.length;i+=2){var v=h[i],b=h[i+1];v==="style"?mm(a,b):v==="dangerouslySetInnerHTML"?hm(a,b):v==="children"?Ho(a,b):$d(a,v,b,m)}switch(d){case"input":Iu(a,o);break;case"textarea":dm(a,o);break;case"select":var k=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?oa(a,!!o.multiple,D,!1):k!==!!o.multiple&&(o.defaultValue!=null?oa(a,!!o.multiple,o.defaultValue,!0):oa(a,!!o.multiple,o.multiple?[]:"",!1))}a[el]=o}catch(P){Me(e,e.return,P)}}break;case 6:if(nn(t,e),wn(e),r&4){if(e.stateNode===null)throw Error(z(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(P){Me(e,e.return,P)}}break;case 3:if(nn(t,e),wn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(t.containerInfo)}catch(P){Me(e,e.return,P)}break;case 4:nn(t,e),wn(e);break;case 13:nn(t,e),wn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(vf=Be())),r&4&&dp(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(lt=(m=lt)||v,nn(t,e),lt=m):nn(t,e),wn(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!v&&e.mode&1)for(J=e,v=e.child;v!==null;){for(b=J=v;J!==null;){switch(k=J,D=k.child,k.tag){case 0:case 11:case 14:case 15:Uo(4,k,k.return);break;case 1:sa(k,k.return);var A=k.stateNode;if(typeof A.componentWillUnmount=="function"){r=k,n=k.return;try{t=r,A.props=t.memoizedProps,A.state=t.memoizedState,A.componentWillUnmount()}catch(P){Me(r,n,P)}}break;case 5:sa(k,k.return);break;case 22:if(k.memoizedState!==null){hp(b);continue}}D!==null?(D.return=k,J=D):hp(b)}v=v.sibling}e:for(v=null,b=e;;){if(b.tag===5){if(v===null){v=b;try{a=b.stateNode,m?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=b.stateNode,h=b.memoizedProps.style,i=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=pm("display",i))}catch(P){Me(e,e.return,P)}}}else if(b.tag===6){if(v===null)try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(P){Me(e,e.return,P)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;v===b&&(v=null),b=b.return}v===b&&(v=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:nn(t,e),wn(e),r&4&&dp(e);break;case 21:break;default:nn(t,e),wn(e)}}function wn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(B0(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ho(a,""),r.flags&=-33);var o=up(e);md(e,o,a);break;case 3:case 4:var i=r.stateNode.containerInfo,d=up(e);pd(e,d,i);break;default:throw Error(z(161))}}catch(h){Me(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cy(e,t,n){J=e,W0(e)}function W0(e,t,n){for(var r=(e.mode&1)!==0;J!==null;){var a=J,o=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||oi;if(!i){var d=a.alternate,h=d!==null&&d.memoizedState!==null||lt;d=oi;var m=lt;if(oi=i,(lt=h)&&!m)for(J=a;J!==null;)i=J,h=i.child,i.tag===22&&i.memoizedState!==null?pp(a):h!==null?(h.return=i,J=h):pp(a);for(;o!==null;)J=o,W0(o),o=o.sibling;J=a,oi=d,lt=m}fp(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,J=o):fp(e)}}function fp(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lt||cc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!lt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Kh(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kh(t,i,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var b=v.dehydrated;b!==null&&Ko(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}lt||t.flags&512&&hd(t)}catch(k){Me(t,t.return,k)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function hp(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function pp(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{cc(4,t)}catch(h){Me(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(h){Me(t,a,h)}}var o=t.return;try{hd(t)}catch(h){Me(t,o,h)}break;case 5:var i=t.return;try{hd(t)}catch(h){Me(t,i,h)}}}catch(h){Me(t,t.return,h)}if(t===e){J=null;break}var d=t.sibling;if(d!==null){d.return=t.return,J=d;break}J=t.return}}var Ey=Math.ceil,Gi=sr.ReactCurrentDispatcher,xf=sr.ReactCurrentOwner,Qt=sr.ReactCurrentBatchConfig,me=0,Ye=null,He=null,tt=0,_t=0,aa=$r(0),Ge=0,ol=null,bs=0,uc=0,gf=0,Bo=null,wt=null,vf=0,ya=1/0,Gn=null,Ki=!1,xd=null,Ar=null,li=!1,kr=null,Zi=0,zo=0,gd=null,ji=-1,ki=0;function ht(){return me&6?Be():ji!==-1?ji:ji=Be()}function Rr(e){return e.mode&1?me&2&&tt!==0?tt&-tt:uy.transition!==null?(ki===0&&(ki=Em()),ki):(e=we,e!==0||(e=window.event,e=e===void 0?16:Im(e.type)),e):1}function cn(e,t,n,r){if(50<zo)throw zo=0,gd=null,Error(z(185));ul(e,n,r),(!(me&2)||e!==Ye)&&(e===Ye&&(!(me&2)&&(uc|=n),Ge===4&&br(e,tt)),Nt(e,r),n===1&&me===0&&!(t.mode&1)&&(ya=Be()+500,oc&&Or()))}function Nt(e,t){var n=e.callbackNode;uv(e,t);var r=Pi(e,e===Ye?tt:0);if(r===0)n!==null&&kh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&kh(n),t===1)e.tag===0?cy(mp.bind(null,e)):Xm(mp.bind(null,e)),ay(function(){!(me&6)&&Or()}),n=null;else{switch(Dm(r)){case 1:n=Vd;break;case 4:n=Sm;break;case 16:n=Li;break;case 536870912:n=Cm;break;default:n=Li}n=Y0(n,H0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function H0(e,t){if(ji=-1,ki=0,me&6)throw Error(z(327));var n=e.callbackNode;if(da()&&e.callbackNode!==n)return null;var r=Pi(e,e===Ye?tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ji(e,r);else{t=r;var a=me;me|=2;var o=Q0();(Ye!==e||tt!==t)&&(Gn=null,ya=Be()+500,xs(e,t));do try{Ay();break}catch(d){q0(e,d)}while(!0);nf(),Gi.current=o,me=a,He!==null?t=0:(Ye=null,tt=0,t=Ge)}if(t!==0){if(t===2&&(a=Wu(e),a!==0&&(r=a,t=vd(e,a))),t===1)throw n=ol,xs(e,0),br(e,r),Nt(e,Be()),n;if(t===6)br(e,r);else{if(a=e.current.alternate,!(r&30)&&!Dy(a)&&(t=Ji(e,r),t===2&&(o=Wu(e),o!==0&&(r=o,t=vd(e,o))),t===1))throw n=ol,xs(e,0),br(e,r),Nt(e,Be()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:ds(e,wt,Gn);break;case 3:if(br(e,r),(r&130023424)===r&&(t=vf+500-Be(),10<t)){if(Pi(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ht(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Yu(ds.bind(null,e,wt,Gn),t);break}ds(e,wt,Gn);break;case 4:if(br(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-ln(r);o=1<<i,i=t[i],i>a&&(a=i),r&=~o}if(r=a,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ey(r/1960))-r,10<r){e.timeoutHandle=Yu(ds.bind(null,e,wt,Gn),r);break}ds(e,wt,Gn);break;case 5:ds(e,wt,Gn);break;default:throw Error(z(329))}}}return Nt(e,Be()),e.callbackNode===n?H0.bind(null,e):null}function vd(e,t){var n=Bo;return e.current.memoizedState.isDehydrated&&(xs(e,t).flags|=256),e=Ji(e,t),e!==2&&(t=wt,wt=n,t!==null&&yd(t)),e}function yd(e){wt===null?wt=e:wt.push.apply(wt,e)}function Dy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!un(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function br(e,t){for(t&=~gf,t&=~uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function mp(e){if(me&6)throw Error(z(327));da();var t=Pi(e,0);if(!(t&1))return Nt(e,Be()),null;var n=Ji(e,t);if(e.tag!==0&&n===2){var r=Wu(e);r!==0&&(t=r,n=vd(e,r))}if(n===1)throw n=ol,xs(e,0),br(e,t),Nt(e,Be()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ds(e,wt,Gn),Nt(e,Be()),null}function yf(e,t){var n=me;me|=1;try{return e(t)}finally{me=n,me===0&&(ya=Be()+500,oc&&Or())}}function js(e){kr!==null&&kr.tag===0&&!(me&6)&&da();var t=me;me|=1;var n=Qt.transition,r=we;try{if(Qt.transition=null,we=1,e)return e()}finally{we=r,Qt.transition=n,me=t,!(me&6)&&Or()}}function wf(){_t=aa.current,De(aa)}function xs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sy(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Xd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$i();break;case 3:ga(),De(jt),De(it),cf();break;case 5:lf(r);break;case 4:ga();break;case 13:De(Ie);break;case 19:De(Ie);break;case 10:rf(r.type._context);break;case 22:case 23:wf()}n=n.return}if(Ye=e,He=e=Lr(e.current,null),tt=_t=t,Ge=0,ol=null,gf=uc=bs=0,wt=Bo=null,ps!==null){for(t=0;t<ps.length;t++)if(n=ps[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=a,r.next=i}n.pending=r}ps=null}return e}function q0(e,t){do{var n=He;try{if(nf(),yi.current=Qi,qi){for(var r=Te.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}qi=!1}if(ws=0,Je=Qe=Te=null,Oo=!1,rl=0,xf.current=null,n===null||n.return===null){Ge=1,ol=t,He=null;break}e:{var o=e,i=n.return,d=n,h=t;if(t=tt,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,v=d,b=v.tag;if(!(v.mode&1)&&(b===0||b===11||b===15)){var k=v.alternate;k?(v.updateQueue=k.updateQueue,v.memoizedState=k.memoizedState,v.lanes=k.lanes):(v.updateQueue=null,v.memoizedState=null)}var D=np(i);if(D!==null){D.flags&=-257,rp(D,i,d,o,t),D.mode&1&&tp(o,m,t),t=D,h=m;var A=t.updateQueue;if(A===null){var P=new Set;P.add(h),t.updateQueue=P}else A.add(h);break e}else{if(!(t&1)){tp(o,m,t),bf();break e}h=Error(z(426))}}else if(Re&&d.mode&1){var U=np(i);if(U!==null){!(U.flags&65536)&&(U.flags|=256),rp(U,i,d,o,t),ef(va(h,d));break e}}o=h=va(h,d),Ge!==4&&(Ge=2),Bo===null?Bo=[o]:Bo.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var j=_0(o,h,t);Gh(o,j);break e;case 1:d=h;var g=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ar===null||!Ar.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=A0(o,d,t);Gh(o,C);break e}}o=o.return}while(o!==null)}K0(n)}catch(R){t=R,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function Q0(){var e=Gi.current;return Gi.current=Qi,e===null?Qi:e}function bf(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Ye===null||!(bs&268435455)&&!(uc&268435455)||br(Ye,tt)}function Ji(e,t){var n=me;me|=2;var r=Q0();(Ye!==e||tt!==t)&&(Gn=null,xs(e,t));do try{_y();break}catch(a){q0(e,a)}while(!0);if(nf(),me=n,Gi.current=r,He!==null)throw Error(z(261));return Ye=null,tt=0,Ge}function _y(){for(;He!==null;)G0(He)}function Ay(){for(;He!==null&&!tv();)G0(He)}function G0(e){var t=J0(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?K0(e):He=t,xf.current=null}function K0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ky(n,t),n!==null){n.flags&=32767,He=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,He=null;return}}else if(n=jy(n,t,_t),n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);Ge===0&&(Ge=5)}function ds(e,t,n){var r=we,a=Qt.transition;try{Qt.transition=null,we=1,Ry(e,t,n,r)}finally{Qt.transition=a,we=r}return null}function Ry(e,t,n,r){do da();while(kr!==null);if(me&6)throw Error(z(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(dv(e,o),e===Ye&&(He=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||li||(li=!0,Y0(Li,function(){return da(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Qt.transition,Qt.transition=null;var i=we;we=1;var d=me;me|=4,xf.current=null,Sy(e,n),V0(n,e),Jv(Zu),Ii=!!Ku,Zu=Ku=null,e.current=n,Cy(n),nv(),me=d,we=i,Qt.transition=o}else e.current=n;if(li&&(li=!1,kr=e,Zi=a),o=e.pendingLanes,o===0&&(Ar=null),av(n.stateNode),Nt(e,Be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ki)throw Ki=!1,e=xd,xd=null,e;return Zi&1&&e.tag!==0&&da(),o=e.pendingLanes,o&1?e===gd?zo++:(zo=0,gd=e):zo=0,Or(),null}function da(){if(kr!==null){var e=Dm(Zi),t=Qt.transition,n=we;try{if(Qt.transition=null,we=16>e?16:e,kr===null)var r=!1;else{if(e=kr,kr=null,Zi=0,me&6)throw Error(z(331));var a=me;for(me|=4,J=e.current;J!==null;){var o=J,i=o.child;if(J.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var m=d[h];for(J=m;J!==null;){var v=J;switch(v.tag){case 0:case 11:case 15:Uo(8,v,o)}var b=v.child;if(b!==null)b.return=v,J=b;else for(;J!==null;){v=J;var k=v.sibling,D=v.return;if(U0(v),v===m){J=null;break}if(k!==null){k.return=D,J=k;break}J=D}}}var A=o.alternate;if(A!==null){var P=A.child;if(P!==null){A.child=null;do{var U=P.sibling;P.sibling=null,P=U}while(P!==null)}}J=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,J=i;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Uo(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,J=j;break e}J=o.return}}var g=e.current;for(J=g;J!==null;){i=J;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,J=w;else e:for(i=g;J!==null;){if(d=J,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:cc(9,d)}}catch(R){Me(d,d.return,R)}if(d===i){J=null;break e}var C=d.sibling;if(C!==null){C.return=d.return,J=C;break e}J=d.return}}if(me=a,Or(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(tc,e)}catch{}r=!0}return r}finally{we=n,Qt.transition=t}}return!1}function xp(e,t,n){t=va(n,t),t=_0(e,t,1),e=_r(e,t,1),t=ht(),e!==null&&(ul(e,1,t),Nt(e,t))}function Me(e,t,n){if(e.tag===3)xp(e,e,n);else for(;t!==null;){if(t.tag===3){xp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){e=va(n,e),e=A0(t,e,1),t=_r(t,e,1),e=ht(),t!==null&&(ul(t,1,e),Nt(t,e));break}}t=t.return}}function Ly(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&n,Ye===e&&(tt&n)===n&&(Ge===4||Ge===3&&(tt&130023424)===tt&&500>Be()-vf?xs(e,0):gf|=n),Nt(e,t)}function Z0(e,t){t===0&&(e.mode&1?(t=Jl,Jl<<=1,!(Jl&130023424)&&(Jl=4194304)):t=1);var n=ht();e=nr(e,t),e!==null&&(ul(e,t,n),Nt(e,n))}function Py(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Z0(e,n)}function Iy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),Z0(e,n)}var J0;J0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)bt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return bt=!1,by(e,t,n);bt=!!(e.flags&131072)}else bt=!1,Re&&t.flags&1048576&&e0(t,Bi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bi(e,t),e=t.pendingProps;var a=pa(t,it.current);ua(t,n),a=df(null,t,r,e,a,n);var o=ff();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,af(t),a.updater=lc,t.stateNode=a,a._reactInternals=t,ad(t,r,e,n),t=id(null,t,r,!0,o,n)):(t.tag=0,Re&&o&&Yd(t),ft(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bi(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Fy(r),e=rn(r,e),a){case 0:t=ld(null,t,r,e,n);break e;case 1:t=op(null,t,r,e,n);break e;case 11:t=sp(null,t,r,e,n);break e;case 14:t=ap(null,t,r,rn(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:rn(r,a),ld(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:rn(r,a),op(e,t,r,a,n);case 3:e:{if(I0(t),e===null)throw Error(z(387));r=t.pendingProps,o=t.memoizedState,a=o.element,s0(e,t),Wi(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=va(Error(z(423)),t),t=lp(e,t,r,n,a);break e}else if(r!==a){a=va(Error(z(424)),t),t=lp(e,t,r,n,a);break e}else for(At=Dr(t.stateNode.containerInfo.firstChild),Rt=t,Re=!0,on=null,n=i0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ma(),r===a){t=rr(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return c0(t),e===null&&nd(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Ju(r,a)?i=null:o!==null&&Ju(r,o)&&(t.flags|=32),P0(e,t),ft(e,t,i,n),t.child;case 6:return e===null&&nd(t),null;case 13:return T0(e,t,n);case 4:return of(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xa(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:rn(r,a),sp(e,t,r,a,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,Ce(zi,r._currentValue),r._currentValue=i,o!==null)if(un(o.value,i)){if(o.children===a.children&&!jt.current){t=rr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){i=o.child;for(var h=d.firstContext;h!==null;){if(h.context===r){if(o.tag===1){h=Xn(-1,n&-n),h.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?h.next=h:(h.next=v.next,v.next=h),m.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),rd(o.return,n,t),d.lanes|=n;break}h=h.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(z(341));i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),rd(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ft(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ua(t,n),a=Gt(a),r=r(a),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,a=rn(r,t.pendingProps),a=rn(r.type,a),ap(e,t,r,a,n);case 15:return R0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:rn(r,a),bi(e,t),t.tag=1,kt(r)?(e=!0,Oi(t)):e=!1,ua(t,n),o0(t,r,a),ad(t,r,a,n),id(null,t,r,!0,e,n);case 19:return F0(e,t,n);case 22:return L0(e,t,n)}throw Error(z(156,t.tag))};function Y0(e,t){return Nm(e,t)}function Ty(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,n,r){return new Ty(e,t,n,r)}function jf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fy(e){if(typeof e=="function")return jf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ud)return 11;if(e===Bd)return 14}return 2}function Lr(e,t){var n=e.alternate;return n===null?(n=qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ni(e,t,n,r,a,o){var i=2;if(r=e,typeof e=="function")jf(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ks:return gs(n.children,a,o,t);case Od:i=8,a|=8;break;case _u:return e=qt(12,n,t,a|2),e.elementType=_u,e.lanes=o,e;case Au:return e=qt(13,n,t,a),e.elementType=Au,e.lanes=o,e;case Ru:return e=qt(19,n,t,a),e.elementType=Ru,e.lanes=o,e;case lm:return dc(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case am:i=10;break e;case om:i=9;break e;case Ud:i=11;break e;case Bd:i=14;break e;case vr:i=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=qt(i,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function gs(e,t,n,r){return e=qt(7,e,r,t),e.lanes=n,e}function dc(e,t,n,r){return e=qt(22,e,r,t),e.elementType=lm,e.lanes=n,e.stateNode={isHidden:!1},e}function mu(e,t,n){return e=qt(6,e,null,t),e.lanes=n,e}function xu(e,t,n){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function My(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function kf(e,t,n,r,a,o,i,d,h){return e=new My(e,t,n,d,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=qt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},af(o),e}function $y(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function X0(e){if(!e)return Fr;e=e._reactInternals;e:{if(Ns(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(kt(n))return Ym(e,n,t)}return t}function ex(e,t,n,r,a,o,i,d,h){return e=kf(n,r,!0,e,a,o,i,d,h),e.context=X0(null),n=e.current,r=ht(),a=Rr(n),o=Xn(r,a),o.callback=t??null,_r(n,o,a),e.current.lanes=a,ul(e,a,r),Nt(e,r),e}function fc(e,t,n,r){var a=t.current,o=ht(),i=Rr(a);return n=X0(n),t.context===null?t.context=n:t.pendingContext=n,t=Xn(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_r(a,t,i),e!==null&&(cn(e,a,i,o),vi(e,a,i)),i}function Yi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nf(e,t){gp(e,t),(e=e.alternate)&&gp(e,t)}function Oy(){return null}var tx=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sf(e){this._internalRoot=e}hc.prototype.render=Sf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));fc(e,t,null,null)};hc.prototype.unmount=Sf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;js(function(){fc(null,e,null,null)}),t[tr]=null}};function hc(e){this._internalRoot=e}hc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wr.length&&t!==0&&t<wr[n].priority;n++);wr.splice(n,0,e),n===0&&Pm(e)}};function Cf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vp(){}function Uy(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var m=Yi(i);o.call(m)}}var i=ex(t,r,e,0,null,!1,!1,"",vp);return e._reactRootContainer=i,e[tr]=i.current,Yo(e.nodeType===8?e.parentNode:e),js(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var d=r;r=function(){var m=Yi(h);d.call(m)}}var h=kf(e,0,!1,null,null,!1,!1,"",vp);return e._reactRootContainer=h,e[tr]=h.current,Yo(e.nodeType===8?e.parentNode:e),js(function(){fc(t,h,n,r)}),h}function mc(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var d=a;a=function(){var h=Yi(i);d.call(h)}}fc(t,i,e,a)}else i=Uy(n,t,e,a,r);return Yi(i)}_m=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ro(t.pendingLanes);n!==0&&(Wd(t,n|1),Nt(t,Be()),!(me&6)&&(ya=Be()+500,Or()))}break;case 13:js(function(){var r=nr(e,1);if(r!==null){var a=ht();cn(r,e,1,a)}}),Nf(e,1)}};Hd=function(e){if(e.tag===13){var t=nr(e,134217728);if(t!==null){var n=ht();cn(t,e,134217728,n)}Nf(e,134217728)}};Am=function(e){if(e.tag===13){var t=Rr(e),n=nr(e,t);if(n!==null){var r=ht();cn(n,e,t,r)}Nf(e,t)}};Rm=function(){return we};Lm=function(e,t){var n=we;try{return we=e,t()}finally{we=n}};Bu=function(e,t,n){switch(t){case"input":if(Iu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ac(r);if(!a)throw Error(z(90));cm(r),Iu(r,a)}}}break;case"textarea":dm(e,n);break;case"select":t=n.value,t!=null&&oa(e,!!n.multiple,t,!1)}};vm=yf;ym=js;var By={usingClientEntryPoint:!1,Events:[fl,Xs,ac,xm,gm,yf]},No={findFiberByHostInstance:hs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zy={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jm(e),e===null?null:e.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||Oy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ii.isDisabled&&ii.supportsFiber)try{tc=ii.inject(zy),Nn=ii}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=By;Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cf(t))throw Error(z(200));return $y(e,t,null,n)};Pt.createRoot=function(e,t){if(!Cf(e))throw Error(z(299));var n=!1,r="",a=tx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=kf(e,1,!1,null,null,n,!1,r,a),e[tr]=t.current,Yo(e.nodeType===8?e.parentNode:e),new Sf(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=jm(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return js(e)};Pt.hydrate=function(e,t,n){if(!pc(t))throw Error(z(200));return mc(null,e,t,!0,n)};Pt.hydrateRoot=function(e,t,n){if(!Cf(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",i=tx;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=ex(t,null,e,1,n??null,a,!1,o,i),e[tr]=t.current,Yo(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new hc(t)};Pt.render=function(e,t,n){if(!pc(t))throw Error(z(200));return mc(null,e,t,!1,n)};Pt.unmountComponentAtNode=function(e){if(!pc(e))throw Error(z(40));return e._reactRootContainer?(js(function(){mc(null,null,e,!1,function(){e._reactRootContainer=null,e[tr]=null})}),!0):!1};Pt.unstable_batchedUpdates=yf;Pt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!pc(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return mc(e,t,n,!1,r)};Pt.version="18.2.0-next-9e3b772b8-20220608";function nx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nx)}catch(e){console.error(e)}}nx(),em.exports=Pt;var Vy=em.exports,rx,yp=Vy;rx=yp.createRoot,yp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}var Nr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nr||(Nr={}));const wp="popstate";function Wy(e){e===void 0&&(e={});function t(r,a){let{pathname:o,search:i,hash:d}=r.location;return wd("",{pathname:o,search:i,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Xi(a)}return qy(t,n,null,e)}function ze(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hy(){return Math.random().toString(36).substr(2,8)}function bp(e,t){return{usr:e.state,key:e.key,idx:t}}function wd(e,t,n,r){return n===void 0&&(n=null),ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ka(t):t,{state:n,key:t&&t.key||r||Hy()})}function Xi(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ka(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qy(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,i=a.history,d=Nr.Pop,h=null,m=v();m==null&&(m=0,i.replaceState(ll({},i.state,{idx:m}),""));function v(){return(i.state||{idx:null}).idx}function b(){d=Nr.Pop;let U=v(),j=U==null?null:U-m;m=U,h&&h({action:d,location:P.location,delta:j})}function k(U,j){d=Nr.Push;let g=wd(P.location,U,j);m=v()+1;let w=bp(g,m),C=P.createHref(g);try{i.pushState(w,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(C)}o&&h&&h({action:d,location:P.location,delta:1})}function D(U,j){d=Nr.Replace;let g=wd(P.location,U,j);m=v();let w=bp(g,m),C=P.createHref(g);i.replaceState(w,"",C),o&&h&&h({action:d,location:P.location,delta:0})}function A(U){let j=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof U=="string"?U:Xi(U);return g=g.replace(/ $/,"%20"),ze(j,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,j)}let P={get action(){return d},get location(){return e(a,i)},listen(U){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(wp,b),h=U,()=>{a.removeEventListener(wp,b),h=null}},createHref(U){return t(a,U)},createURL:A,encodeLocation(U){let j=A(U);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:k,replace:D,go(U){return i.go(U)}};return P}var jp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(jp||(jp={}));function Qy(e,t,n){return n===void 0&&(n="/"),Gy(e,t,n)}function Gy(e,t,n,r){let a=typeof t=="string"?ka(t):t,o=Ef(a.pathname||"/",n);if(o==null)return null;let i=ax(e);Ky(i);let d=null;for(let h=0;d==null&&h<i.length;++h){let m=lw(o);d=sw(i[h],m)}return d}function ax(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(o,i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};h.relativePath.startsWith("/")&&(ze(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let m=Pr([r,h.relativePath]),v=n.concat(h);o.children&&o.children.length>0&&(ze(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),ax(o.children,t,v,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:nw(m,o.index),routesMeta:v})};return e.forEach((o,i)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,i);else for(let h of ox(o.path))a(o,i,h)}),t}function ox(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let i=ox(r.join("/")),d=[];return d.push(...i.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...i),d.map(h=>e.startsWith("/")&&h===""?"/":h)}function Ky(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rw(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zy=/^:[\w-]+$/,Jy=3,Yy=2,Xy=1,ew=10,tw=-2,kp=e=>e==="*";function nw(e,t){let n=e.split("/"),r=n.length;return n.some(kp)&&(r+=tw),t&&(r+=Yy),n.filter(a=>!kp(a)).reduce((a,o)=>a+(Zy.test(o)?Jy:o===""?Xy:ew),r)}function rw(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function sw(e,t,n){let{routesMeta:r}=e,a={},o="/",i=[];for(let d=0;d<r.length;++d){let h=r[d],m=d===r.length-1,v=o==="/"?t:t.slice(o.length)||"/",b=aw({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},v),k=h.route;if(!b)return null;Object.assign(a,b.params),i.push({params:a,pathname:Pr([o,b.pathname]),pathnameBase:dw(Pr([o,b.pathnameBase])),route:k}),b.pathnameBase!=="/"&&(o=Pr([o,b.pathnameBase]))}return i}function aw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ow(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((m,v,b)=>{let{paramName:k,isOptional:D}=v;if(k==="*"){let P=d[b]||"";i=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const A=d[b];return D&&!A?m[k]=void 0:m[k]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:i,pattern:e}}function ow(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),sx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function lw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ef(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function iw(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?ka(e):e;return{pathname:n?n.startsWith("/")?n:cw(n,t):t,search:fw(r),hash:hw(a)}}function cw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function gu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uw(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Df(e,t){let n=uw(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _f(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=ka(e):(a=ll({},e),ze(!a.pathname||!a.pathname.includes("?"),gu("?","pathname","search",a)),ze(!a.pathname||!a.pathname.includes("#"),gu("#","pathname","hash",a)),ze(!a.search||!a.search.includes("#"),gu("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,d;if(i==null)d=n;else{let b=t.length-1;if(!r&&i.startsWith("..")){let k=i.split("/");for(;k[0]==="..";)k.shift(),b-=1;a.pathname=k.join("/")}d=b>=0?t[b]:"/"}let h=iw(a,d),m=i&&i!=="/"&&i.endsWith("/"),v=(o||i===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(m||v)&&(h.pathname+="/"),h}const Pr=e=>e.join("/").replace(/\/\/+/g,"/"),dw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function pw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lx=["post","put","patch","delete"];new Set(lx);const mw=["get",...lx];new Set(mw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},il.apply(this,arguments)}const Af=c.createContext(null),xw=c.createContext(null),Ur=c.createContext(null),xc=c.createContext(null),Dn=c.createContext({outlet:null,matches:[],isDataRoute:!1}),ix=c.createContext(null);function gw(e,t){let{relative:n}=t===void 0?{}:t;Na()||ze(!1);let{basename:r,navigator:a}=c.useContext(Ur),{hash:o,pathname:i,search:d}=dx(e,{relative:n}),h=i;return r!=="/"&&(h=i==="/"?r:Pr([r,i])),a.createHref({pathname:h,search:d,hash:o})}function Na(){return c.useContext(xc)!=null}function Br(){return Na()||ze(!1),c.useContext(xc).location}function cx(e){c.useContext(Ur).static||c.useLayoutEffect(e)}function _n(){let{isDataRoute:e}=c.useContext(Dn);return e?Lw():vw()}function vw(){Na()||ze(!1);let e=c.useContext(Af),{basename:t,future:n,navigator:r}=c.useContext(Ur),{matches:a}=c.useContext(Dn),{pathname:o}=Br(),i=JSON.stringify(Df(a,n.v7_relativeSplatPath)),d=c.useRef(!1);return cx(()=>{d.current=!0}),c.useCallback(function(m,v){if(v===void 0&&(v={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let b=_f(m,JSON.parse(i),o,v.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:Pr([t,b.pathname])),(v.replace?r.replace:r.push)(b,v.state,v)},[t,r,i,o,e])}const yw=c.createContext(null);function ww(e){let t=c.useContext(Dn).outlet;return t&&c.createElement(yw.Provider,{value:e},t)}function ux(){let{matches:e}=c.useContext(Dn),t=e[e.length-1];return t?t.params:{}}function dx(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=c.useContext(Ur),{matches:a}=c.useContext(Dn),{pathname:o}=Br(),i=JSON.stringify(Df(a,r.v7_relativeSplatPath));return c.useMemo(()=>_f(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function bw(e,t){return jw(e,t)}function jw(e,t,n,r){Na()||ze(!1);let{navigator:a}=c.useContext(Ur),{matches:o}=c.useContext(Dn),i=o[o.length-1],d=i?i.params:{};i&&i.pathname;let h=i?i.pathnameBase:"/";i&&i.route;let m=Br(),v;if(t){var b;let U=typeof t=="string"?ka(t):t;h==="/"||(b=U.pathname)!=null&&b.startsWith(h)||ze(!1),v=U}else v=m;let k=v.pathname||"/",D=k;if(h!=="/"){let U=h.replace(/^\//,"").split("/");D="/"+k.replace(/^\//,"").split("/").slice(U.length).join("/")}let A=Qy(e,{pathname:D}),P=Ew(A&&A.map(U=>Object.assign({},U,{params:Object.assign({},d,U.params),pathname:Pr([h,a.encodeLocation?a.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?h:Pr([h,a.encodeLocation?a.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,r);return t&&P?c.createElement(xc.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Nr.Pop}},P):P}function kw(){let e=Rw(),t=pw(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),n?c.createElement("pre",{style:a},n):null,null)}const Nw=c.createElement(kw,null);class Sw extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?c.createElement(Dn.Provider,{value:this.props.routeContext},c.createElement(ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Cw(e){let{routeContext:t,match:n,children:r}=e,a=c.useContext(Af);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(Dn.Provider,{value:t},r)}function Ew(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,d=(a=n)==null?void 0:a.errors;if(d!=null){let v=i.findIndex(b=>b.route.id&&(d==null?void 0:d[b.route.id])!==void 0);v>=0||ze(!1),i=i.slice(0,Math.min(i.length,v+1))}let h=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let v=0;v<i.length;v++){let b=i[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(m=v),b.route.id){let{loaderData:k,errors:D}=n,A=b.route.loader&&k[b.route.id]===void 0&&(!D||D[b.route.id]===void 0);if(b.route.lazy||A){h=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((v,b,k)=>{let D,A=!1,P=null,U=null;n&&(D=d&&b.route.id?d[b.route.id]:void 0,P=b.route.errorElement||Nw,h&&(m<0&&k===0?(Pw("route-fallback"),A=!0,U=null):m===k&&(A=!0,U=b.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,k+1)),g=()=>{let w;return D?w=P:A?w=U:b.route.Component?w=c.createElement(b.route.Component,null):b.route.element?w=b.route.element:w=v,c.createElement(Cw,{match:b,routeContext:{outlet:v,matches:j,isDataRoute:n!=null},children:w})};return n&&(b.route.ErrorBoundary||b.route.errorElement||k===0)?c.createElement(Sw,{location:n.location,revalidation:n.revalidation,component:P,error:D,children:g(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):g()},null)}var fx=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fx||{}),hx=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(hx||{});function Dw(e){let t=c.useContext(Af);return t||ze(!1),t}function _w(e){let t=c.useContext(xw);return t||ze(!1),t}function Aw(e){let t=c.useContext(Dn);return t||ze(!1),t}function px(e){let t=Aw(),n=t.matches[t.matches.length-1];return n.route.id||ze(!1),n.route.id}function Rw(){var e;let t=c.useContext(ix),n=_w(),r=px();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Lw(){let{router:e}=Dw(fx.UseNavigateStable),t=px(hx.UseNavigateStable),n=c.useRef(!1);return cx(()=>{n.current=!0}),c.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,il({fromRouteId:t},o)))},[e,t])}const Np={};function Pw(e,t,n){Np[e]||(Np[e]=!0)}function Iw(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function bd(e){let{to:t,replace:n,state:r,relative:a}=e;Na()||ze(!1);let{future:o,static:i}=c.useContext(Ur),{matches:d}=c.useContext(Dn),{pathname:h}=Br(),m=_n(),v=_f(t,Df(d,o.v7_relativeSplatPath),h,a==="path"),b=JSON.stringify(v);return c.useEffect(()=>m(JSON.parse(b),{replace:n,state:r,relative:a}),[m,b,a,n,r]),null}function Tw(e){return ww(e.context)}function Et(e){ze(!1)}function Fw(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Nr.Pop,navigator:o,static:i=!1,future:d}=e;Na()&&ze(!1);let h=t.replace(/^\/*/,"/"),m=c.useMemo(()=>({basename:h,navigator:o,static:i,future:il({v7_relativeSplatPath:!1},d)}),[h,d,o,i]);typeof r=="string"&&(r=ka(r));let{pathname:v="/",search:b="",hash:k="",state:D=null,key:A="default"}=r,P=c.useMemo(()=>{let U=Ef(v,h);return U==null?null:{location:{pathname:U,search:b,hash:k,state:D,key:A},navigationType:a}},[h,v,b,k,D,A,a]);return P==null?null:c.createElement(Ur.Provider,{value:m},c.createElement(xc.Provider,{children:n,value:P}))}function Mw(e){let{children:t,location:n}=e;return bw(jd(t),n)}new Promise(()=>{});function jd(e,t){t===void 0&&(t=[]);let n=[];return c.Children.forEach(e,(r,a)=>{if(!c.isValidElement(r))return;let o=[...t,a];if(r.type===c.Fragment){n.push.apply(n,jd(r.props.children,o));return}r.type!==Et&&ze(!1),!r.props.index||!r.props.children||ze(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=jd(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kd.apply(this,arguments)}function $w(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Ow(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Uw(e,t){return e.button===0&&(!t||t==="_self")&&!Ow(e)}const Bw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zw="6";try{window.__reactRouterVersion=zw}catch{}const Vw="startTransition",Sp=Pg[Vw];function Ww(e){let{basename:t,children:n,future:r,window:a}=e,o=c.useRef();o.current==null&&(o.current=Wy({window:a,v5Compat:!0}));let i=o.current,[d,h]=c.useState({action:i.action,location:i.location}),{v7_startTransition:m}=r||{},v=c.useCallback(b=>{m&&Sp?Sp(()=>h(b)):h(b)},[h,m]);return c.useLayoutEffect(()=>i.listen(v),[i,v]),c.useEffect(()=>Iw(r),[r]),c.createElement(Fw,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:i,future:r})}const Hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fs=c.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:o,replace:i,state:d,target:h,to:m,preventScrollReset:v,viewTransition:b}=t,k=$w(t,Bw),{basename:D}=c.useContext(Ur),A,P=!1;if(typeof m=="string"&&qw.test(m)&&(A=m,Hw))try{let w=new URL(window.location.href),C=m.startsWith("//")?new URL(w.protocol+m):new URL(m),R=Ef(C.pathname,D);C.origin===w.origin&&R!=null?m=R+C.search+C.hash:P=!0}catch{}let U=gw(m,{relative:a}),j=Qw(m,{replace:i,state:d,target:h,preventScrollReset:v,relative:a,viewTransition:b});function g(w){r&&r(w),w.defaultPrevented||j(w)}return c.createElement("a",kd({},k,{href:A||U,onClick:P||o?r:g,ref:n,target:h}))});var Cp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cp||(Cp={}));var Ep;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ep||(Ep={}));function Qw(e,t){let{target:n,replace:r,state:a,preventScrollReset:o,relative:i,viewTransition:d}=t===void 0?{}:t,h=_n(),m=Br(),v=dx(e,{relative:i});return c.useCallback(b=>{if(Uw(b,n)){b.preventDefault();let k=r!==void 0?r:Xi(m)===Xi(v);h(e,{replace:k,state:a,preventScrollReset:o,relative:i,viewTransition:d})}},[m,h,v,r,a,n,e,o,i,d])}const gc="chat_auth";function mx(e,t){localStorage.setItem(gc,JSON.stringify({token:e,user:t}))}function Ue(){const e=localStorage.getItem(gc);if(!e)return null;try{return JSON.parse(e).token}catch{return null}}function fa(){const e=localStorage.getItem(gc);if(!e)return null;try{return JSON.parse(e).user}catch{return null}}function xx(){localStorage.removeItem(gc)}function Gw(){try{if(typeof window<"u"){const{origin:e,location:t}=window,n=(t==null?void 0:t.hostname)||"";return n==="localhost"||n==="127.0.0.1"?"http://localhost:3000/api":`${String(e).replace(/\/$/,"")}/api`}}catch{}return"http://localhost:3000/api"}const zt=Gw(),gx=zt.replace(/\/?api$/,"");function Kw(e){const t=`${zt}${e}`,n=t.includes("?")?"&":"?";return`${t}${n}_=${Date.now()}`}const Q={get:e=>fetch(Kw(e),{headers:{Authorization:`Bearer ${Ue()}`},cache:"no-store"}).then(jn),post:(e,t)=>fetch(`${zt}${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue()}`},body:JSON.stringify(t)}).then(jn),put:(e,t)=>fetch(`${zt}${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue()}`},body:JSON.stringify(t)}).then(jn),patch:(e,t)=>fetch(`${zt}${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue()}`},body:JSON.stringify(t)}).then(jn),del:e=>fetch(`${zt}${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Ue()}`}}).then(jn),upload:(e,t)=>fetch(`${zt}${e}`,{method:"POST",headers:{Authorization:`Bearer ${Ue()}`},body:t}).then(jn),uploadPatch:(e,t)=>fetch(`${zt}${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${Ue()}`},body:t}).then(jn),delete:e=>fetch(`${zt}${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Ue()}`}}).then(jn)},Zw={post:(e,t)=>fetch(`${zt}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(jn),upload:(e,t)=>fetch(`${zt}${e}`,{method:"POST",body:t}).then(jn)};function Dt(e){return!e||/^https?:\/\//i.test(e)?e:`${gx.replace(/\/$/,"")}${e}`}async function jn(e){if(e.status===304)return null;if(!e.ok){const n=await e.text();let r;try{r=JSON.parse(n).error||n}catch{r=n}if(e.status===401){try{xx()}catch{}try{typeof window<"u"&&window.location.assign("/login")}catch{}throw new Error(r||"Sesso expirada. Faa login novamente.")}throw new Error(r||"Erro de requisio")}return(e.headers.get("content-type")||"").includes("application/json")?e.json():e.text()}const En=Object.create(null);En.open="0";En.close="1";En.ping="2";En.pong="3";En.message="4";En.upgrade="5";En.noop="6";const Si=Object.create(null);Object.keys(En).forEach(e=>{Si[En[e]]=e});const Nd={type:"error",data:"parser error"},vx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",yx=typeof ArrayBuffer=="function",wx=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Rf=({type:e,data:t},n,r)=>vx&&t instanceof Blob?n?r(t):Dp(t,r):yx&&(t instanceof ArrayBuffer||wx(t))?n?r(t):Dp(new Blob([t]),r):r(En[e]+(t||"")),Dp=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function _p(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let vu;function Jw(e,t){if(vx&&e.data instanceof Blob)return e.data.arrayBuffer().then(_p).then(t);if(yx&&(e.data instanceof ArrayBuffer||wx(e.data)))return t(_p(e.data));Rf(e,!1,n=>{vu||(vu=new TextEncoder),t(vu.encode(n))})}const Ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Po=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Ap.length;e++)Po[Ap.charCodeAt(e)]=e;const Yw=e=>{let t=e.length*.75,n=e.length,r,a=0,o,i,d,h;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const m=new ArrayBuffer(t),v=new Uint8Array(m);for(r=0;r<n;r+=4)o=Po[e.charCodeAt(r)],i=Po[e.charCodeAt(r+1)],d=Po[e.charCodeAt(r+2)],h=Po[e.charCodeAt(r+3)],v[a++]=o<<2|i>>4,v[a++]=(i&15)<<4|d>>2,v[a++]=(d&3)<<6|h&63;return m},Xw=typeof ArrayBuffer=="function",Lf=(e,t)=>{if(typeof e!="string")return{type:"message",data:bx(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:e1(e.substring(1),t)}:Si[n]?e.length>1?{type:Si[n],data:e.substring(1)}:{type:Si[n]}:Nd},e1=(e,t)=>{if(Xw){const n=Yw(e);return bx(n,t)}else return{base64:!0,data:e}},bx=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},jx="",t1=(e,t)=>{const n=e.length,r=new Array(n);let a=0;e.forEach((o,i)=>{Rf(o,!1,d=>{r[i]=d,++a===n&&t(r.join(jx))})})},n1=(e,t)=>{const n=e.split(jx),r=[];for(let a=0;a<n.length;a++){const o=Lf(n[a],t);if(r.push(o),o.type==="error")break}return r};function r1(){return new TransformStream({transform(e,t){Jw(e,n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let yu;function ci(e){return e.reduce((t,n)=>t+n.length,0)}function ui(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function s1(e,t){yu||(yu=new TextDecoder);const n=[];let r=0,a=-1,o=!1;return new TransformStream({transform(i,d){for(n.push(i);;){if(r===0){if(ci(n)<1)break;const h=ui(n,1);o=(h[0]&128)===128,a=h[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(ci(n)<2)break;const h=ui(n,2);a=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),r=3}else if(r===2){if(ci(n)<8)break;const h=ui(n,8),m=new DataView(h.buffer,h.byteOffset,h.length),v=m.getUint32(0);if(v>Math.pow(2,21)-1){d.enqueue(Nd);break}a=v*Math.pow(2,32)+m.getUint32(4),r=3}else{if(ci(n)<a)break;const h=ui(n,a);d.enqueue(Lf(o?h:yu.decode(h),t)),r=0}if(a===0||a>e){d.enqueue(Nd);break}}}})}const kx=4;function qe(e){if(e)return a1(e)}function a1(e){for(var t in qe.prototype)e[t]=qe.prototype[t];return e}qe.prototype.on=qe.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};qe.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};qe.prototype.off=qe.prototype.removeListener=qe.prototype.removeAllListeners=qe.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===t||r.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};qe.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,a=n.length;r<a;++r)n[r].apply(this,t)}return this};qe.prototype.emitReserved=qe.prototype.emit;qe.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};qe.prototype.hasListeners=function(e){return!!this.listeners(e).length};const vc=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Ht=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),o1="arraybuffer";function Nx(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const l1=Ht.setTimeout,i1=Ht.clearTimeout;function yc(e,t){t.useNativeTimers?(e.setTimeoutFn=l1.bind(Ht),e.clearTimeoutFn=i1.bind(Ht)):(e.setTimeoutFn=Ht.setTimeout.bind(Ht),e.clearTimeoutFn=Ht.clearTimeout.bind(Ht))}const c1=1.33;function u1(e){return typeof e=="string"?d1(e):Math.ceil((e.byteLength||e.size)*c1)}function d1(e){let t=0,n=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Sx(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function f1(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function h1(e){let t={},n=e.split("&");for(let r=0,a=n.length;r<a;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class p1 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Pf extends qe{constructor(t){super(),this.writable=!1,yc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new p1(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Lf(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=f1(t);return n.length?"?"+n:""}}class m1 extends Pf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};n1(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,t1(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Sx()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Cx=!1;try{Cx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const x1=Cx;function g1(){}class v1 extends m1{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Cn extends qe{constructor(t,n,r){super(),this.createRequest=t,yc(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Nx(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Cn.requestsCount++,Cn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=g1,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Cn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Cn.requestsCount=0;Cn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Rp);else if(typeof addEventListener=="function"){const e="onpagehide"in Ht?"pagehide":"unload";addEventListener(e,Rp,!1)}}function Rp(){for(let e in Cn.requests)Cn.requests.hasOwnProperty(e)&&Cn.requests[e].abort()}const y1=function(){const e=Ex({xdomain:!1});return e&&e.responseType!==null}();class w1 extends v1{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=y1&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Cn(Ex,this.uri(),t)}}function Ex(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||x1))return new XMLHttpRequest}catch{}if(!t)try{return new Ht[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Dx=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class b1 extends Pf{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Dx?{}:Nx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;Rf(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}a&&vc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Sx()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const wu=Ht.WebSocket||Ht.MozWebSocket;class j1 extends b1{createSocket(t,n,r){return Dx?new wu(t,n,r):n?new wu(t,n):new wu(t)}doWrite(t,n){this.ws.send(n)}}class k1 extends Pf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=s1(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),a=r1();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{r.read().then(({done:d,value:h})=>{d||(this.onPacket(h),o())}).catch(d=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;this._writer.write(r).then(()=>{a&&vc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const N1={websocket:j1,webtransport:k1,polling:w1},S1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,C1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Sd(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let a=S1.exec(e||""),o={},i=14;for(;i--;)o[C1[i]]=a[i]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=E1(o,o.path),o.queryKey=D1(o,o.query),o}function E1(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function D1(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,o){a&&(n[a]=o)}),n}const Cd=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ci=[];Cd&&addEventListener("offline",()=>{Ci.forEach(e=>e())},!1);class Ir extends qe{constructor(t,n){if(super(),this.binaryType=o1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Sd(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Sd(n.host).host);yc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=h1(this.opts.query)),Cd&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ci.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=kx,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ir.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ir.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(n+=u1(a)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,vc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,a){if(typeof n=="function"&&(a=n,n=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Ir.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Cd&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Ci.indexOf(this._offlineEventListener);r!==-1&&Ci.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ir.protocol=kx;class _1 extends Ir{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Ir.priorWebsocketSuccess=!1;const a=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",b=>{if(!r)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ir.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(v(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const k=new Error("probe error");k.transport=n.name,this.emitReserved("upgradeError",k)}}))};function o(){r||(r=!0,v(),n.close(),n=null)}const i=b=>{const k=new Error("probe error: "+b);k.transport=n.name,o(),this.emitReserved("upgradeError",k)};function d(){i("transport closed")}function h(){i("socket closed")}function m(b){n&&b.name!==n.name&&o()}const v=()=>{n.removeListener("open",a),n.removeListener("error",i),n.removeListener("close",d),this.off("close",h),this.off("upgrading",m)};n.once("open",a),n.once("error",i),n.once("close",d),this.once("close",h),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let A1=class extends _1{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>N1[a]).filter(a=>!!a)),super(t,r)}};function R1(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Sd(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const L1=typeof ArrayBuffer=="function",P1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,_x=Object.prototype.toString,I1=typeof Blob=="function"||typeof Blob<"u"&&_x.call(Blob)==="[object BlobConstructor]",T1=typeof File=="function"||typeof File<"u"&&_x.call(File)==="[object FileConstructor]";function If(e){return L1&&(e instanceof ArrayBuffer||P1(e))||I1&&e instanceof Blob||T1&&e instanceof File}function Ei(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Ei(e[n]))return!0;return!1}if(If(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ei(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ei(e[n]))return!0;return!1}function F1(e){const t=[],n=e.data,r=e;return r.data=Ed(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ed(e,t){if(!e)return e;if(If(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ed(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ed(e[r],t));return n}return e}function M1(e,t){return e.data=Dd(e.data,t),delete e.attachments,e}function Dd(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Dd(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Dd(e[n],t));return e}const $1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],O1=5;var he;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(he||(he={}));class U1{constructor(t){this.replacer=t}encode(t){return(t.type===he.EVENT||t.type===he.ACK)&&Ei(t)?this.encodeAsBinary({type:t.type===he.EVENT?he.BINARY_EVENT:he.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===he.BINARY_EVENT||t.type===he.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=F1(t),r=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(r),a}}function Lp(e){return Object.prototype.toString.call(e)==="[object Object]"}class Tf extends qe{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===he.BINARY_EVENT;r||n.type===he.BINARY_ACK?(n.type=r?he.EVENT:he.ACK,this.reconstructor=new B1(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(If(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(he[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===he.BINARY_EVENT||r.type===he.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const i=t.substring(o,n);if(i!=Number(i)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(i)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const o=n+1;for(;++n;){const i=t.charAt(n);if(i==null||Number(i)!=i){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(Tf.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case he.CONNECT:return Lp(n);case he.DISCONNECT:return n===void 0;case he.CONNECT_ERROR:return typeof n=="string"||Lp(n);case he.EVENT:case he.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&$1.indexOf(n[0])===-1);case he.ACK:case he.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class B1{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=M1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const z1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Tf,Encoder:U1,get PacketType(){return he},protocol:O1},Symbol.toStringTag,{value:"Module"}));function an(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const V1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ax extends qe{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[an(t,"open",this.onopen.bind(this)),an(t,"packet",this.onpacket.bind(this)),an(t,"error",this.onerror.bind(this)),an(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,a,o;if(V1.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:he.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const v=this.ids++,b=n.pop();this._registerAckCallback(v,b),i.id=v}const d=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,h=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!d||(h?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,n){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);n.call(this,new Error("operation has timed out"))},a),i=(...d)=>{this.io.clearTimeoutFn(o),n.apply(this,d)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...n){return new Promise((r,a)=>{const o=(i,d)=>i?a(i):r(d);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>r!==this._queue[0]?void 0:(a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:he.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case he.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case he.EVENT:case he.BINARY_EVENT:this.onevent(t);break;case he.ACK:case he.BINARY_ACK:this.onack(t);break;case he.DISCONNECT:this.ondisconnect();break;case he.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...a){r||(r=!0,n.packet({type:he.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:he.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Sa(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Sa.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Sa.prototype.reset=function(){this.attempts=0};Sa.prototype.setMin=function(e){this.ms=e};Sa.prototype.setMax=function(e){this.max=e};Sa.prototype.setJitter=function(e){this.jitter=e};class _d extends qe{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,yc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Sa({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||z1;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new A1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=an(n,"open",function(){r.onopen(),t&&t()}),o=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},i=an(n,"error",o);if(this._timeout!==!1){const d=this._timeout,h=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),n.close()},d);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(a),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(an(t,"ping",this.onping.bind(this)),an(t,"data",this.ondata.bind(this)),an(t,"error",this.onerror.bind(this)),an(t,"close",this.onclose.bind(this)),an(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){vc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Ax(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const So={};function Di(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=R1(e,t.path||"/socket.io"),r=n.source,a=n.id,o=n.path,i=So[a]&&o in So[a].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let h;return d?h=new _d(r,t):(So[a]||(So[a]=new _d(r,t)),h=So[a]),n.query&&!t.query&&(t.query=n.queryKey),h.socket(n.path,t)}Object.assign(Di,{Manager:_d,Socket:Ax,io:Di,connect:Di});let bu;function Zn(){if(!bu){const e=gx||(typeof window<"u"?window.location.origin:"");bu=Di(e,{path:"/socket.io",withCredentials:!1,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3})}return bu}async function W1(){if(typeof window<"u"&&window.JsSIP)return window.JsSIP;await new Promise((e,t)=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/jssip@3/dist/jssip.min.js",n.async=!0,n.onload=()=>e(),n.onerror=()=>t(new Error("Falha ao carregar JsSIP via CDN")),document.head.appendChild(n)});try{window.JsSIP.debug.enable("JsSIP:*")}catch{}return window.JsSIP}async function H1({wsUrl:e,domain:t,extension:n,password:r,iceServers:a}){const o=await W1(),d={sockets:[new o.WebSocketInterface(e)],uri:`sip:${n}@${t}`,authorization_user:n,password:r,register:!0,register_expires:300,session_timers:!1},h=new o.UA(d);let m=null,v=!1;function b(g,w){h.on(g,w)}function k(){return new Promise(g=>{const w=()=>{v=!0,R(),g()},C=()=>{R(),g()};function R(){try{h.off("registered",w)}catch{}try{h.off("registrationFailed",C)}catch{}}h.on("registered",w),h.on("registrationFailed",C);try{h.start()}catch{g()}})}function D(){return v}function A(g,{onProgress:w,onAccepted:C,onEnded:R,onFailed:O,onTrack:I,audioDeviceId:H}={}){return new Promise((B,_)=>{const Z={eventHandlers:{progress:F=>{w&&w(F)},failed:F=>{m=null,O&&O(F),B(!1)},ended:F=>{m=null,R&&R(F),B(!1)},confirmed:F=>{C&&C(F),B(!0)}},mediaConstraints:{audio:H?{deviceId:{exact:H}}:!0,video:!1},pcConfig:{iceServers:a||[],iceTransportPolicy:"all"}};try{m=h.call(/^sip:/i.test(g)?g:`sip:${g}@${t}`,Z);try{m.connection.addEventListener("track",F=>{const[Y]=F.streams;I&&I(Y)}),m.connection.addEventListener("iceconnectionstatechange",()=>{})}catch{}}catch(F){_(F)}})}async function P(g){try{if(!m||!m.connection)return!1;const C=(await navigator.mediaDevices.getUserMedia({audio:g?{deviceId:{exact:g}}:!0})).getAudioTracks()[0];if(!C)return!1;const R=m.connection.getSenders().find(O=>O.track&&O.track.kind==="audio");return R&&await R.replaceTrack(C),!0}catch{return!1}}function U(g){var w;try{(w=m==null?void 0:m.sendDTMF)==null||w.call(m,String(g||"").substring(0,1))}catch{}}function j(){try{m==null||m.terminate()}catch{}m=null}return{ua:h,start:k,isRegistered:D,call:A,hangup:j,on:b,dtmf:U,setAudioDevice:P}}let fe=null,Co=!1,Eo=null,ju=null;const ku="[SIP]";function Do(e){try{localStorage.setItem("sip_registered",e?"1":"0"),window.dispatchEvent(new CustomEvent("sip:reg",{detail:{registered:e}}))}catch{}}function Nu(e=3e3){ju||(ju=setTimeout(()=>{ju=null;try{Rx().catch(()=>{})}catch{}},e))}function q1(){const e=[];try{const t="stun:202106.maisfone.com.br:3478";t&&t.split(",").map(o=>o.trim()).filter(Boolean).forEach(o=>e.push({urls:o}));const n=void 0,r=void 0,a=void 0}catch{}return e.length||e.push({urls:"stun:stun.l.google.com:19302"}),e}async function Rx(){return Co?fe:Eo||(Eo=(async()=>{var e;try{const t="wss://202106.maisfone.com.br:7443/ws",n=await Q.get("/phone/me").catch(r=>(console.warn(`${ku} Falha ao carregar /phone/me:`,(r==null?void 0:r.message)||r),null));if(!n||!n.hasPassword||!n.domain||!n.extension)return console.warn(`${ku} Conta SIP incompleta ou sem senha; aguardando configurao.`),Co=!0,null;if(fe=await H1({wsUrl:t,domain:n.domain,extension:n.extension,password:n.password||"",iceServers:q1()}),!fe)return console.warn(`${ku} createSipManager no retornou instncia (verifique URL e rede).`),Co=!0,null;if(fe!=null&&fe.on){try{fe.on("registered",()=>Do(!0))}catch{}try{fe.on("unregistered",()=>Do(!1))}catch{}try{fe.on("registrationFailed",()=>{Do(!1),Nu(5e3)})}catch{}try{fe.on("disconnected",()=>{Do(!1),Nu(3e3)})}catch{}}await fe.start(),Do(!!((e=fe==null?void 0:fe.isRegistered)!=null&&e.call(fe)));try{document.addEventListener("visibilitychange",()=>{var r,a;(r=fe==null?void 0:fe.isRegistered)!=null&&r.call(fe)||(a=fe.start)==null||a.call(fe).catch(()=>{})})}catch{}try{window.addEventListener("online",()=>{var r;(r=fe==null?void 0:fe.start)==null||r.call(fe).catch(()=>{})})}catch{}try{setInterval(()=>{var r;try{(r=fe==null?void 0:fe.ua)!=null&&r.register&&fe.ua.register()}catch{}},24e4)}catch{}return Co=!0,fe}catch{return Co=!1,Nu(5e3),null}finally{Eo=null}})(),Eo)}function Q1(){return fe}function G1(){var Jt,Ln;const e=_n(),t=Br(),n=fa(),r=M=>{try{M?localStorage.setItem("notif_sound_url",M):localStorage.removeItem("notif_sound_url"),window.dispatchEvent(new Event("chat:alertSoundUpdated"))}catch{}},[a,o]=c.useState(0);c.useEffect(()=>{const M=()=>o(ae=>ae+1);return window.addEventListener("chat:userUpdated",M),()=>window.removeEventListener("chat:userUpdated",M)},[]),c.useEffect(()=>{const M=()=>{const ge=localStorage.getItem("chat_wallpaper")||"";ge?document.documentElement.style.setProperty("--chat-wallpaper",`url('${ge}')`):document.documentElement.style.removeProperty("--chat-wallpaper")},ae=ge=>r(ge);return M(),window.addEventListener("chat:wallpaperUpdated",M),(async()=>{try{const ge=`${window.location.origin}/api`.replace(/\/$/,""),$e=await fetch(`${ge}/admin/config/public?_=${Date.now()}`,{cache:"no-store"});if(!$e.ok)return;const _e=await $e.json();if(!!!localStorage.getItem("chat_wallpaper")&&(_e!=null&&_e.chatWallpaperUrl)&&document.documentElement.style.setProperty("--chat-wallpaper",`url('${_e.chatWallpaperUrl}')`),_e&&Object.prototype.hasOwnProperty.call(_e,"alertSoundUrl")&&ae((_e==null?void 0:_e.alertSoundUrl)||""),_e&&Object.prototype.hasOwnProperty.call(_e,"chatIconUrl")){const gt=(_e==null?void 0:_e.chatIconUrl)||"";_(gt);try{gt?localStorage.setItem("chat_icon",gt):localStorage.removeItem("chat_icon"),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}}}catch{}})(),()=>window.removeEventListener("chat:wallpaperUpdated",M)},[]),c.useEffect(()=>{const M=Zn(),ae=(ge={})=>{r((ge==null?void 0:ge.url)||"")},xe=(ge={})=>{const $e=(ge==null?void 0:ge.url)||"";_($e);try{$e?localStorage.setItem("chat_icon",$e):localStorage.removeItem("chat_icon"),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}};return M.on("config:alert-sound",ae),M.on("config:chat-icon",xe),()=>{M.off("config:alert-sound",ae),M.off("config:chat-icon",xe)}},[]),c.useEffect(()=>{Rx().catch(()=>{})},[]);const i=c.useCallback(()=>{try{xx()}catch{}h(!1),e("/login",{replace:!0}),setTimeout(()=>{window.location.pathname!=="/login"&&window.location.assign("/login")},75)},[e]),[d,h]=c.useState(!1),[m,v]=c.useState(()=>localStorage.getItem("chat_status")||"online"),b=M=>{v(M),localStorage.setItem("chat_status",M)},k=()=>{if(typeof window>"u")return"auto";try{const M=localStorage.getItem("theme");if(M==="light"||M==="dark"||M==="auto")return M}catch{}return"auto"},D=()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[A,P]=c.useState(k),[U,j]=c.useState(D),g=A==="auto"?U:A,w=g==="dark",[C,R]=c.useState(()=>localStorage.getItem("chat_bg")||"whatsapp"),O=()=>{if(typeof window>"u")return!1;try{return localStorage.getItem("sidebar_mini")==="1"}catch{return!1}},[I,H]=c.useState(O),[B,_]=c.useState(()=>localStorage.getItem("chat_icon")||""),re=c.useRef(null),[Z,F]=c.useState(!1),[Y,se]=c.useState(""),[ce,je]=c.useState(""),W=c.useRef(null),V=c.useCallback(M=>{W.current=M},[]),ee=I?"w-16 md:w-16":"w-64 md:w-64",le=I?"px-2 py-3":"p-4",ye=I?"gap-1":"gap-2",Zt=`inline-flex items-center rounded-full border border-slate-300 bg-white/80 shadow-sm transition-colors text-slate-600 hover:bg-slate-100 hover:text-slate-900 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-300 dark:hover:bg-slate-800 ${I?"w-9 h-9 justify-center px-0 py-0":"gap-2 px-3 py-1"}`,Ke="text-xs font-semibold whitespace-nowrap",Le=()=>{H(M=>{const ae=!M;try{localStorage.setItem("sidebar_mini",ae?"1":"0")}catch{}return ae})},An=c.useCallback(()=>{},[]),dn=M=>{P(M);try{window.dispatchEvent(new Event("chat:themeChanged"))}catch{}};c.useEffect(()=>{const M=document.documentElement,ae=document.body,xe=g==="dark";M.classList.toggle("dark",xe),ae.classList.toggle("dark",xe)},[g]),c.useEffect(()=>{if(typeof window>"u")return;const M=window.matchMedia("(prefers-color-scheme: dark)"),ae=xe=>{j(xe.matches?"dark":"light")};return ae(M),M.addEventListener?(M.addEventListener("change",ae),()=>M.removeEventListener("change",ae)):(M.addListener(ae),()=>M.removeListener(ae))},[]),c.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem("theme",A)}catch{}},[A]),c.useEffect(()=>{const M=document.body;try{M.setAttribute("data-chat-bg",C)}catch{}localStorage.setItem("chat_bg",C)},[C]),c.useEffect(()=>{const M=()=>_(localStorage.getItem("chat_icon")||""),ae=()=>R(localStorage.getItem("chat_bg")||"whatsapp");return window.addEventListener("chat:iconUpdated",M),window.addEventListener("chat:bgUpdated",ae),()=>{window.removeEventListener("chat:iconUpdated",M),window.removeEventListener("chat:bgUpdated",ae)}},[]),c.useEffect(()=>{var xe;const M=Zn(),ae=(xe=fa())==null?void 0:xe.id;if(ae)try{M.emit("presence:online",{userId:ae,status:m})}catch{}},[n==null?void 0:n.id]),c.useEffect(()=>{var xe;const M=Zn();if((xe=fa())!=null&&xe.id)try{M.emit("presence:set",{status:m})}catch{}},[m]),c.useEffect(()=>{if(!d)return;const M=ae=>{const xe=W.current;xe&&(xe.contains(ae.target)||h(!1))};return document.addEventListener("mousedown",M),document.addEventListener("touchstart",M),()=>{document.removeEventListener("mousedown",M),document.removeEventListener("touchstart",M)}},[d]);const Ne=async M=>{var xe,ge;const ae=(xe=M.target.files)==null?void 0:xe[0];if(ae){if(!((ge=ae.type)!=null&&ge.startsWith("image/"))){je("Escolha um arquivo de imagem"),M.target.value="";return}se(""),je(""),F(!0);try{const $e=new FormData;$e.append("avatar",ae);const _e=await Q.uploadPatch("/users/me",$e),G=(_e==null?void 0:_e.user)||_e;if(G!=null&&G.avatarUrl){try{const gt=localStorage.getItem("chat_auth");if(gt){const Yt=JSON.parse(gt);Yt.user={...Yt.user||{},avatarUrl:G.avatarUrl},localStorage.setItem("chat_auth",JSON.stringify(Yt))}}catch{}window.dispatchEvent(new Event("chat:userUpdated")),se("Foto atualizada com sucesso")}else se("Foto atualizada");h(!1)}catch($e){je(($e==null?void 0:$e.message)||"Falha ao enviar foto")}finally{F(!1),M.target.value=""}}},Ss=()=>{var M;je(""),se(""),(M=re.current)==null||M.click()},Rn="bg-white text-slate-900 border-slate-200 shadow-lg dark:bg-slate-950/95 dark:text-slate-100 dark:border-slate-800 dark:shadow-slate-950/30 backdrop-blur-sm",xt=w?"border-slate-700":"border-slate-200",ar=w?"text-slate-200":"text-slate-600",Ze=w?"text-slate-100":"text-slate-900",ut=M=>s.jsxs("div",{className:`${M} w-64 rounded shadow-lg p-3 z-50 border ${Rn}`,style:{backgroundColor:w?"var(--chat-dark-panel)":void 0,color:w?"#f8fafc":void 0},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:"Preferencias"}),s.jsx("button",{type:"button",onClick:()=>h(!1),className:"inline-flex w-6 h-6 items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Fechar menu",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:s.jsx("path",{d:"m6.225 4.811 13.964 13.964-1.061 1.06L5.164 5.871l1.061-1.06Zm11.55 0 1.06 1.06L4.87 19.386l-1.06-1.06L17.776 4.81Z"})})})]}),s.jsx("div",{className:`mt-3 border-t ${xt}`}),s.jsx("div",{className:`px-1.5 py-1 text-xs ${ar}`,children:"Status"}),s.jsx("div",{className:"flex flex-wrap gap-2 px-1.5 py-1",children:["online","ausente","offline"].map(ae=>{const xe=ae==="online"?"Online":ae==="ausente"?"Ausente":"Offline",ge=ae===m?ae==="online"?w?"bg-emerald-900 text-emerald-100 border-emerald-600":"bg-green-100 text-green-700 border-green-200":ae==="ausente"?w?"bg-amber-900 text-amber-100 border-amber-600":"bg-yellow-100 text-yellow-700 border-yellow-200":w?"bg-slate-800 text-slate-100 border-slate-600":"bg-slate-200 text-slate-900 border-slate-200":w?"border border-transparent bg-slate-900/40 text-slate-200 hover:border-slate-600":"border border-transparent bg-slate-50 text-slate-700 hover:border-slate-200";return s.jsx("button",{type:"button",onClick:()=>b(ae),className:`px-2 py-1 rounded text-sm border ${ge}`,children:xe},ae)})}),s.jsx("div",{className:`mt-2 border-t ${xt}`}),s.jsx("div",{className:`px-1.5 py-1 text-xs ${ar}`,children:"Tema"}),s.jsx("div",{className:"flex flex-wrap gap-2 px-1.5 py-1",children:[{key:"light",label:"Claro"},{key:"dark",label:"Escuro"},{key:"auto",label:"Sistema"}].map(ae=>{const xe=A===ae.key,ge=ae.key==="dark"?"bg-slate-800 text-white":ae.key==="auto"?"bg-blue-600 text-white":"bg-slate-100 text-slate-900";return s.jsx("button",{type:"button",onClick:()=>dn(ae.key),className:`px-2 py-1 rounded text-sm border ${xe?`${ge} border-transparent`:"bg-transparent text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-900/30 border-transparent"}`,children:ae.label},ae.key)})}),s.jsx("div",{className:`mt-2 border-t ${xt}`}),s.jsx("div",{className:`px-1.5 py-1 text-xs ${ar}`,children:"Foto"}),s.jsxs("button",{type:"button",onClick:()=>{Ss()},className:"w-full inline-flex items-center justify-center gap-2 px-2 py-1.5 rounded border border-slate-300 bg-white text-slate-900 hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100 dark:hover:bg-slate-800/60 disabled:opacity-50",disabled:Z,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:s.jsx("path",{d:"M9 3.75A.75.75 0 0 1 9.75 3h4.5a.75.75 0 0 1 .707.493l.401 1.12h2.192A1.95 1.95 0 0 1 19.5 6.563l.75 2.25A2.25 2.25 0 0 1 21 9.75v7.5A3.75 3.75 0 0 1 17.25 21h-10.5A3.75 3.75 0 0 1 3 17.25v-7.5a2.25 2.25 0 0 1 .75-1.688l.75-2.25A1.95 1.95 0 0 1 6.45 4.5h2.192l.401-1.12A.75.75 0 0 1 9 3.75ZM12 8.25a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9Zm0 1.5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Z"})}),s.jsx("span",{children:Z?"Enviando...":"Alterar foto"})]}),s.jsx("div",{className:`mt-2 border-t ${xt}`}),s.jsxs("div",{className:"flex flex-col gap-1 px-1.5 py-1",children:[s.jsx("button",{type:"button",onClick:()=>{h(!1),e("/")},className:`px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-800/60 text-left ${Ze}`,children:"Ir para Chat"}),(n==null?void 0:n.isAdmin)&&s.jsx("button",{type:"button",onClick:()=>{h(!1),e("/admin")},className:`px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-800/60 text-left ${Ze}`,children:"Ir para Admin"}),s.jsx("button",{type:"button",onClick:()=>{h(!1),e("/profile")},className:`px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-800/60 text-left ${Ze}`,children:"Editar perfil"}),s.jsx("button",{type:"button",onClick:i,className:"px-2 py-1.5 text-sm text-red-600 rounded hover:bg-red-50 dark:hover:bg-red-900/30 text-left",children:"Sair"})]})]}),fn=I?"w-8 h-8":"w-6 h-6",hn=M=>{const ae=M==="/conversas"?t.pathname==="/"||t.pathname==="/conversas":t.pathname===M;return`${`relative flex w-full items-center gap-3 rounded-2xl text-sm font-medium transition duration-150 ${I?"px-2 py-3":"px-3 py-2"}`} ${ae?w?"bg-slate-800/90 text-slate-100 shadow-lg shadow-slate-900/40":"bg-slate-100 text-slate-900 shadow-lg shadow-slate-200/60":w?"text-slate-400 hover:text-white hover:bg-slate-900/40":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}`};return s.jsxs("div",{className:"flex h-screen overflow-x-hidden bg-slate-50 dark:bg-slate-950 dark:text-slate-100",children:[s.jsxs("aside",{className:`${ee} flex-shrink-0 ${le} flex flex-col z-40 ${w?"bg-slate-950 border-r border-slate-800 text-slate-100":"bg-white border-r border-slate-200 text-slate-900"}`,children:[s.jsxs("div",{className:`flex items-center justify-between ${ye}`,children:[I?B?s.jsx("img",{src:B,alt:"cone do chat",className:"w-8 h-8 rounded-full object-cover"}):s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-slate-700 dark:text-slate-200",children:s.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z",fill:"currentColor"})}):s.jsxs("div",{className:"flex items-center gap-2",children:[B&&s.jsx("img",{src:B,alt:"cone",className:"w-6 h-6 rounded object-cover"}),s.jsx("h3",{className:"font-semibold text-xl tracking-tight",children:"Chat"})]}),s.jsxs("button",{type:"button",onClick:Le,className:Zt,title:I?"Expandir menu lateral":"Recolher menu lateral","aria-label":I?"Expandir menu lateral":"Recolher menu lateral",children:[I?s.jsx("span",{className:"sr-only",children:"Expandir menu lateral"}):s.jsx("span",{className:Ke,children:"Recolher"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:`h-4 w-4 transition-transform ${I?"rotate-180":""}`,children:s.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M12 5l7 7-7 7"})})]})]}),!I&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1 dark:text-slate-400",children:["Ol, ",n==null?void 0:n.name]}),s.jsxs("nav",{className:"mt-4 flex flex-col gap-2 rounded-3xl bg-slate-50/90 p-1 shadow-inner shadow-slate-900/10 backdrop-blur dark:bg-slate-900/70 dark:shadow-none",children:[s.jsxs("div",{className:"relative group",children:[s.jsxs(fs,{title:"Conversas",className:hn("/conversas"),to:"/conversas",onClick:An,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`${fn}`,children:s.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z"})}),!I&&s.jsx("span",{children:"Conversas"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Conversas"})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs(fs,{title:"Telefonia",className:hn("/telefonia"),to:"/telefonia",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`${fn}`,children:s.jsx("path",{d:"M2.25 6.75c0-1.24 1.01-2.25 2.25-2.25h3c.97 0 1.8.62 2.1 1.54l.86 2.58a2.25 2.25 0 0 1-.57 2.31l-1.21 1.21a12.06 12.06 0 0 0 4.88 4.88l1.21-1.21a2.25 2.25 0 0 1 2.31-.57l2.58.86c.92.3 1.54 1.13 1.54 2.1v3c0 1.24-1.01 2.25-2.25 2.25H18c-8.28 0-15-6.72-15-15v-3Z"})}),!I&&s.jsx("span",{children:"Telefonia"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Telefonia"})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs(fs,{title:"Reunies",className:hn("/reunioes"),to:"/reunioes",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`${fn}`,children:s.jsx("path",{d:"M6.75 2a.75.75 0 0 1 .75.75V4h9V2.75a.75.75 0 0 1 1.5 0V4h.75A2.25 2.25 0 0 1 21 6.25v11A2.25 2.25 0 0 1 18.75 19.5H5.25A2.25 2.25 0 0 1 3 17.25v-11A2.25 2.25 0 0 1 5.25 4H6V2.75a.75.75 0 0 1 .75-.75Zm12 6H5.25a.75.75 0 0 0-.75.75V9h15V8.75a.75.75 0 0 0-.75-.75ZM19.5 10.5h-15V17.25c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V10.5Zm-9.75 2.25a.75.75 0 0 1 .102 1.493L9.75 14.25h-2.5a.75.75 0 0 1-.102-1.493l.102-.007h2.5Zm6 0a.75.75 0 0 1 .102 1.493l-.102.007h-3.5a.75.75 0 0 1-.102-1.493l.102-.007h3.5Z"})}),!I&&s.jsx("span",{children:"Reunies"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Reunies"})]}),(n==null?void 0:n.isAdmin)&&s.jsxs("div",{className:"relative group",children:[s.jsxs(fs,{title:"Admin",className:hn("/admin"),to:"/admin",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`${fn}`,children:s.jsx("path",{d:"M12 2.25 3.75 6v5.25c0 5.108 3.66 9.837 8.625 10.5 4.965-.663 8.625-5.392 8.625-10.5V6L12 2.25Zm0 5.25a2.25 2.25 0 1 1 0 4.5 2.25 0 0 1 0-4.5Zm0 12a7.5 7.5 0 0 1-6-3.09c.03-1.982 4.5-3.06 6-3.06s5.97 1.078 6 3.06A7.5 7.5 0 0 1 12 19.5Z"})}),!I&&s.jsx("span",{children:"Admin"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Admin"})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs(fs,{title:"Contatos",className:hn("/contatos"),to:"/contatos",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`${fn}`,children:s.jsx("path",{d:"M5.25 3A2.25 2.25 0 0 0 3 5.25v13.5A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V5.25A2.25 2.25 0 0 0 18.75 3H5.25Zm6.75 4.5a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm0 6c2.209 0 4.5 1.122 4.5 2.5V17H7.5v-1c0-1.378 2.291-2.5 4.5-2.5Z"})}),!I&&s.jsx("span",{children:"Contatos"})]}),I&&s.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Contatos"})]})]}),s.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("input",{ref:re,type:"file",accept:"image/*",className:"hidden",onChange:Ne}),I?s.jsxs("div",{ref:V,className:"flex flex-col items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>h(M=>!M),className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 hover:ring-2 hover:ring-blue-500/30","aria-label":"Abrir menu do perfil",children:[s.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:n!=null&&n.avatarUrl?s.jsx("img",{src:n.avatarUrl,alt:"avatar",className:"w-full h-full object-cover",onError:M=>{M.currentTarget.style.display="none"}}):s.jsx("div",{className:"w-full h-full bg-slate-300"})}),s.jsx("span",{className:`absolute bottom-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white dark:border-slate-800 ${m==="online"?"bg-green-500":m==="ausente"?"bg-yellow-500":"bg-slate-400"}`})]}),d&&ut("fixed top-4 left-5")]}),Z&&s.jsx("span",{className:"text-[10px] text-slate-500",children:"Enviando..."}),Y&&s.jsx("span",{className:"text-[10px] text-green-600 text-center max-w-[64px]",children:Y}),ce&&s.jsx("span",{className:"text-[10px] text-red-600 text-center max-w-[64px]",children:ce})]}):s.jsxs("div",{ref:V,className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>h(M=>!M),className:"w-full inline-flex items-center gap-3 rounded border border-slate-300 dark:border-slate-600 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left text-slate-900 dark:text-slate-100","aria-expanded":d,children:[s.jsxs("span",{className:"relative",children:[s.jsx("span",{className:"w-12 h-12 rounded-full border border-slate-300 dark:border-slate-600 overflow-hidden bg-slate-200 block",children:n!=null&&n.avatarUrl?s.jsx("img",{src:n.avatarUrl,alt:"avatar",className:"w-full h-full object-cover",onError:M=>{M.currentTarget.style.display="none"}}):s.jsx("span",{className:"w-full h-full flex items-center justify-center text-sm text-slate-500 dark:text-slate-200",children:((Ln=(Jt=n==null?void 0:n.name)==null?void 0:Jt.slice(0,2))==null?void 0:Ln.toUpperCase())||"ME"})}),s.jsx("span",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white dark:border-slate-800 ${m==="online"?"bg-green-500":m==="ausente"?"bg-yellow-500":m==="ocupado"?"bg-red-500":"bg-slate-400"}`})]}),s.jsxs("span",{className:"flex-1 min-w-0 text-left",children:[s.jsx("span",{className:"block font-semibold text-sm truncate text-slate-900 dark:text-slate-100",children:(n==null?void 0:n.name)||"Meu perfil"}),s.jsxs("span",{className:"block text-xs text-slate-500 dark:text-slate-300 capitalize truncate",children:["Status: ",m]})]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${d?"rotate-180":""}`,children:s.jsx("path",{d:"M12 15.75a.75.75 0 0 1-.53-.22l-4.5-4.5a.75.75 0 1 1 1.06-1.06L12 13.94l3.97-3.97a.75.75 0 0 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-.53.22Z"})})]}),d&&ut("absolute right-0 bottom-full mb-2")]})]})]}),s.jsx("main",{className:"flex-1 overflow-hidden",children:s.jsx(Tw,{})})]})}function Pp({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"})})}function K1({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}function Z1({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}function Qs({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function J1({className:e="w-5 h-5"}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",children:[s.jsx("circle",{cx:"5",cy:"12",r:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"}),s.jsx("circle",{cx:"19",cy:"12",r:"2"})]})}function Y1({className:e="w-5 h-5"}){return s.jsx("span",{className:e,role:"img","aria-label":"emoji",children:""})}function Su({className:e="w-4 h-4",filled:t=!1}){return t?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:e,children:s.jsx("path",{d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l1.63 3.918 4.254.372c1.164.102 1.636 1.545.749 2.32l-3.244 2.76 1.003 4.135c.274 1.127-.964 1.997-1.96 1.4L12 15.64 8.356 18.116c-.996.598-2.234-.273-1.96-1.4l1.003-4.135-3.244-2.76c-.887-.775-.415-2.218.749-2.32l4.254-.372 1.63-3.918z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:s.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l1.4 3.36a.562.562 0 00.46.345l3.633.314a.562.562 0 01.32.98l-2.77 2.357a.562.562 0 00-.182.536l.82 3.493a.562.562 0 01-.84.61l-3.1-1.87a.562.562 0 00-.586 0l-3.1 1.87a.562.562 0 01-.84-.61l.82-3.493a.562.562 0 00-.182-.536l-2.77-2.357a.562.562 0 01.32-.98l3.633-.314a.562.562 0 00.46-.345l1.4-3.36z"})})}function Ad({className:e="w-5 h-5"}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.065 7-9.542 7s-8.268-2.943-9.542-7z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function Rd({className:e="w-5 h-5"}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0112 19c-4.477 0-8.268-2.943-9.542-7a11.05 11.05 0 012.909-4.516"}),s.jsx("path",{d:"M9.88 9.88a3 3 0 104.24 4.24"}),s.jsx("path",{d:"M3 3l18 18"}),s.jsx("path",{d:"M10.73 5.08A10.95 10.95 0 0112 5c4.477 0 8.268 2.943 9.542 7a11.07 11.07 0 01-2.232 3.592"})]})}function Ip({className:e="w-4 h-4"}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:e,children:s.jsx("path",{d:"M11 3h2v7l2 2-5 5v3h-2v-3l-5-5 3-3 2 2V3z"})})}function Tp({className:e="w-4 h-4"}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11a6 6 0 0 0-4.775-5.891"}),s.jsx("path",{d:"M9.399 4.6A6.022 6.022 0 0 0 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h6"}),s.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"}),s.jsx("path",{d:"M3 3l18 18"})]})}function Fp({className:e="w-4 h-4"}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M3 6h18v12H3z"}),s.jsx("path",{d:"M7 6l3 6h4l3-6"}),s.jsx("path",{d:"M9 16h6"})]})}function Mp({className:e="w-4 h-4"}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"9"}),s.jsx("path",{d:"M9.5 12.5l1.5 1.5 3.5-3.5"})]})}function X1(){const e=_n(),t=Br(),[n,r]=c.useState(""),[a,o]=c.useState(""),[i,d]=c.useState(!1),[h,m]=c.useState(!1),[v,b]=c.useState(""),[k,D]=c.useState(!1),[A,P]=c.useState(""),[U,j]=c.useState(!1),[g,w]=c.useState(""),[C,R]=c.useState(""),[O,I]=c.useState(""),[H,B]=c.useState(!1),_="",[re,Z]=c.useState(_);c.useEffect(()=>{try{const se=localStorage.getItem("theme"),ce=se==="dark"||se==="light"?se:matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",je=document.documentElement,W=document.body,V=ce==="dark";je.classList.toggle("dark",V),W.classList.toggle("dark",V);const ee=localStorage.getItem("rememberedEmail");ee&&(r(ee),d(!0))}catch{}},[]),c.useEffect(()=>{(async()=>{try{const ce=typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api",je=await fetch(`${String(ce).replace(/\/$/,"")}/admin/config/public?_=${Date.now()}`,{cache:"no-store"});if(!je.ok)return;const W=await je.json();Object.prototype.hasOwnProperty.call(W||{},"loginLogoUrl")&&Z((W==null?void 0:W.loginLogoUrl)||"")}catch{Z(_)}})()},[]),c.useEffect(()=>{try{new URLSearchParams((t==null?void 0:t.search)||"").get("registered")==="1"?b("Conta criada com sucesso! Faa login com suas credenciais."):b("")}catch{b("")}},[t]),c.useEffect(()=>{U&&(w(n||""),R(""),I(""))},[U,n]);async function F(se){se.preventDefault(),D(!0),b(""),P("");try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(n))throw new Error("Informe um e-mail vlido");if(!a||a.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const je=await Q.post("/auth/login",{email:n,password:a});mx(je.token,je.user);try{i?localStorage.setItem("rememberedEmail",n):localStorage.removeItem("rememberedEmail")}catch{}e("/")}catch(ce){P(ce.message||"Falha no login")}finally{D(!1)}}async function Y(se){se.preventDefault(),R(""),I("");try{const ce=(g||"").trim();if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(ce))throw new Error("Informe um e-mail vlido");B(!0);const W=await Q.post("/auth/forgot-password",{email:ce});R((W==null?void 0:W.message)||"Se o e-mail estiver cadastrado, voc receber uma nova senha.")}catch(ce){I((ce==null?void 0:ce.message)||"No foi possvel processar a solicitao. Tente novamente.")}finally{B(!1)}}return s.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-100",children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[s.jsx("div",{className:"absolute -top-32 -left-24 h-72 w-72 rounded-full bg-emerald-500/30 blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-8rem] right-[-6rem] h-96 w-96 rounded-full bg-blue-500/25 blur-3xl"}),s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.18),transparent_55%)]"}),s.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(135deg,rgba(15,23,42,0.6),rgba(15,23,42,0.9))]"})]}),s.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-6 py-12",children:s.jsxs("div",{className:"grid w-full max-w-5xl gap-12 rounded-[2.5rem] border border-white/5 bg-white/5 p-8 shadow-[0_20px_70px_-30px_rgba(15,23,42,0.9)] backdrop-blur-lg lg:grid-cols-[1.1fr_1fr] lg:p-12",children:[s.jsxs("div",{className:"hidden flex-col justify-between lg:flex",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("span",{className:"inline-flex items-center gap-2 w-fit rounded-full border border-white/10 bg-white/5 px-4 py-1 text-sm text-slate-200",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400 animate-pulse"}),"Plataforma omnichannel"]}),s.jsx("h1",{className:"text-4xl font-semibold leading-tight text-white",children:"Conecte sua equipe e Participe de Grupos"}),s.jsx("p",{className:"text-lg text-slate-300",children:"Nosso chat interno conecta toda a equipe em tempo real, facilitando a troca de ideias e decises rpidas. Comunicao simples, gil e segura para aumentar a produtividade e fortalecer a colaborao."})]}),s.jsxs("div",{className:"mt-10 flex flex-col gap-4 text-sm text-slate-200/80",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-300",children:"01"}),"Respostas rapidas e consistentes em todos os atendimentos."]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-cyan-500/20 text-cyan-200",children:"02"}),"Monitoramento em tempo real e historico completo das conversas."]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-500/20 text-blue-200",children:"03"}),"Seguranca e privacidade alinhadas as melhores praticas do mercado."]})]})]}),s.jsxs("form",{onSubmit:F,className:"relative flex flex-col gap-6 rounded-3xl border border-white/10 bg-white/90 p-8 text-slate-900 shadow-2xl backdrop-blur dark:bg-slate-900/85 dark:text-slate-100",noValidate:!0,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[re?s.jsx("img",{src:re,alt:"Logo",className:"h-10 w-auto",draggable:!1}):s.jsx("div",{className:"h-10 w-10 rounded-lg border border-white/10 bg-white/10"}),s.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-300"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("h2",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"Bem-vindo de volta"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Acesse sua conta para continuar acompanhando suas conversas."})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"E-mail"}),s.jsx("input",{id:"email",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-emerald-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"voce@empresa.com",type:"email",autoComplete:"email",autoFocus:!0,required:!0,value:n,onChange:se=>r(se.target.value)})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-14 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-emerald-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Insira sua senha",type:h?"text":"password",autoComplete:"current-password",minLength:6,required:!0,value:a,onChange:se=>o(se.target.value)}),s.jsx("button",{type:"button",onClick:()=>m(se=>!se),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center gap-2 rounded-lg border border-transparent px-3 text-xs font-medium text-emerald-600 transition hover:border-emerald-200 hover:bg-emerald-50 hover:text-emerald-700 dark:text-emerald-300 dark:hover:border-emerald-500/50 dark:hover:bg-emerald-500/10","aria-label":h?"Ocultar senha":"Mostrar senha",children:h?s.jsx(Rd,{className:"w-4 h-4"}):s.jsx(Ad,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:se=>d(se.target.checked),className:"h-4 w-4 rounded border-slate-300 text-emerald-500 focus:ring-emerald-400 dark:border-slate-600"}),"Lembrar de mim"]}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 flex flex-col items-end gap-0.5 text-right",children:s.jsx("button",{type:"button",className:"text-emerald-500 underline underline-offset-2 hover:text-emerald-400",onClick:()=>j(!0),children:"Esqueci minha senha"})})]}),v&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-emerald-300/60 bg-emerald-50 px-3 py-2 text-sm text-emerald-700 dark:border-emerald-500/40 dark:bg-emerald-500/10 dark:text-emerald-200",children:[s.jsx("span",{className:"text-base",children:"?"}),s.jsx("span",{children:v})]}),A&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-300/60 bg-red-50/80 px-3 py-2 text-sm text-red-600 dark:border-red-500/40 dark:bg-red-500/10 dark:text-red-200",children:[s.jsx("span",{className:"text-base",children:"??"}),s.jsx("span",{children:A})]}),s.jsx("button",{type:"submit",disabled:k,className:"inline-flex h-12 items-center justify-center rounded-2xl bg-gradient-to-r from-emerald-500 via-cyan-500 to-blue-500 px-6 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:shadow-2xl hover:shadow-emerald-500/40 disabled:opacity-60 disabled:shadow-none",children:k?"Entrando...":"Entrar"}),s.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-300",children:["No tem conta?"," ",s.jsx(fs,{className:"font-medium text-emerald-600 transition hover:text-emerald-500 dark:text-emerald-300 dark:hover:text-emerald-200",to:"/register",children:"Criar cadastro"})]}),s.jsx("p",{className:"text-center text-[11px] text-slate-400 dark:text-slate-500",children:"Ao continuar voce concorda com os termos de uso e politica de privacidade da plataforma."})]})]})}),U&&s.jsx("div",{className:"fixed inset-0 z-20 flex items-center justify-center bg-slate-950/60 backdrop-blur-sm px-4",children:s.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/90 p-6 text-slate-100 shadow-[0_20px_70px_-40px_rgba(0,0,0,1)]",children:[s.jsx("button",{type:"button",className:"absolute right-3 top-3 text-slate-400 hover:text-white","aria-label":"Fechar",onClick:()=>j(!1),children:s.jsx(Qs,{})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Recuperar senha"}),s.jsx("p",{className:"text-sm text-slate-300 mb-4",children:"Informe o e-mail cadastrado para receber uma nova senha temporria."}),s.jsxs("form",{onSubmit:Y,className:"space-y-3",children:[s.jsx("input",{className:"w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm outline-none focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/40",placeholder:"seuemail@empresa.com",type:"email",value:g,onChange:se=>w(se.target.value)}),s.jsx("button",{type:"submit",disabled:H,className:"w-full rounded-2xl bg-teal-500/90 px-4 py-2.5 font-semibold text-white shadow-lg shadow-teal-500/30 transition hover:bg-teal-400 disabled:cursor-not-allowed disabled:opacity-60",children:H?"Enviando...":"Enviar nova senha"}),C&&s.jsx("div",{className:"rounded-xl border border-emerald-300/40 bg-emerald-500/10 px-3 py-2 text-emerald-100 text-sm",children:C}),O&&s.jsx("div",{className:"rounded-xl border border-rose-300/40 bg-rose-500/10 px-3 py-2 text-rose-100 text-sm",children:O})]})]})})]})}function eb(){const e=_n(),t="",[n,r]=c.useState(t),[a,o]=c.useState(""),[i,d]=c.useState(""),[h,m]=c.useState(""),[v,b]=c.useState(""),[k,D]=c.useState(!0),[A,P]=c.useState(!1),[U,j]=c.useState(!1),[g,w]=c.useState(!1),[C,R]=c.useState(null),[O,I]=c.useState(""),[H,B]=c.useState("");c.useEffect(()=>()=>{O&&URL.revokeObjectURL(O)},[O]),c.useEffect(()=>{(async()=>{try{const F=typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api",Y=await fetch(`${String(F).replace(/\/$/,"")}/admin/config/public?_=${Date.now()}`,{cache:"no-store"});if(!Y.ok)return;const se=await Y.json();Object.prototype.hasOwnProperty.call(se||{},"loginLogoUrl")&&r((se==null?void 0:se.loginLogoUrl)||"")}catch{r(t)}})()},[]);async function _(Z){if(Z.preventDefault(),!k){B("Confirme que leu e aceita os termos de uso.");return}if(B(""),h!==v){B("As senhas no conferem.");return}w(!0);try{const F=new FormData;F.append("name",a.trim()),F.append("email",i.trim()),F.append("password",h),C&&F.append("avatar",C),await Zw.upload("/auth/register",F),e("/login?registered=1")}catch(F){B(F.message||"Falha no cadastro. Tente novamente.")}finally{w(!1)}}function re(Z){var Y;const F=((Y=Z.target.files)==null?void 0:Y[0])||null;R(F),O&&URL.revokeObjectURL(O),I(F?URL.createObjectURL(F):"")}return s.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-100",children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[s.jsx("div",{className:"absolute -top-28 -left-36 h-80 w-80 rounded-full bg-cyan-400/25 blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-7rem] right-[-6rem] h-96 w-96 rounded-full bg-emerald-500/25 blur-3xl"}),s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(14,165,233,0.18),transparent_60%)]"}),s.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(135deg,rgba(15,23,42,0.65),rgba(15,23,42,0.92))]"})]}),s.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-6 py-12",children:s.jsxs("div",{className:"grid w-full max-w-5xl gap-10 rounded-[2.5rem] border border-white/5 bg-white/5 p-8 shadow-[0_22px_80px_-28px_rgba(14,116,144,0.8)] backdrop-blur-lg lg:grid-cols-[1.05fr_1fr] lg:p-12",children:[s.jsxs("div",{className:"hidden flex-col justify-between lg:flex",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("span",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-1 text-sm text-slate-200",children:[s.jsx("span",{className:"h-2 w-2 animate-pulse rounded-full bg-emerald-400"}),"Crie sua conta em minutos"]}),s.jsx("h1",{className:"text-4xl font-semibold leading-tight text-white",children:"Personalize seu atendimento com o poder do sistema omnichannel"}),s.jsx("p",{className:"text-lg text-slate-300",children:"Gestao de equipes, dashboards inteligentes e integracoes prontas para canais que o seu cliente ama usar."})]}),s.jsxs("ul",{className:"mt-10 space-y-4 text-sm text-slate-200/80",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-200",children:"?"}),"Fluxos automaticos e organizacao de filas de atendimento."]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-cyan-500/20 text-cyan-200",children:"?"}),"Biblioteca de templates, etiquetas e respostas salvas."]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500/20 text-blue-200",children:"?"}),"Times ilimitados, usuarios convidados e permissoes customizadas."]})]})]}),s.jsxs("form",{onSubmit:_,className:"relative flex flex-col gap-5 rounded-3xl border border-white/10 bg-white/90 p-8 text-slate-900 shadow-2xl backdrop-blur dark:bg-slate-900/85 dark:text-slate-100",noValidate:!0,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[n?s.jsx("img",{src:n,alt:"Logo",className:"h-10 w-auto",draggable:!1}):s.jsx("div",{className:"h-10 w-10 rounded-lg border border-white/10 bg-white/10"}),s.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-300",children:"Novo portal de atendimento"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("h2",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"Criar conta"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Preencha os dados abaixo para ativar seu espao de trabalho."})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Nome completo"}),s.jsx("input",{id:"name",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Como devemos te chamar?",value:a,onChange:Z=>o(Z.target.value),required:!0})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"E-mail corporativo"}),s.jsx("input",{id:"email",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"voce@empresa.com",type:"email",autoComplete:"email",value:i,onChange:Z=>d(Z.target.value),required:!0})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-14 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Crie uma senha",type:A?"text":"password",minLength:8,value:h,onChange:Z=>m(Z.target.value),required:!0}),s.jsx("button",{type:"button",onClick:()=>P(Z=>!Z),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center rounded-lg border border-transparent px-3 text-xs font-medium text-cyan-600 transition hover:border-cyan-200 hover:bg-cyan-50 hover:text-cyan-700 dark:text-cyan-200 dark:hover:border-cyan-400/50 dark:hover:bg-cyan-500/10","aria-label":A?"Ocultar senha":"Mostrar senha",children:A?s.jsx(Rd,{className:"w-4 h-4"}):s.jsx(Ad,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"confirm",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Confirmar senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirm",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-14 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Repita a senha",type:U?"text":"password",minLength:8,value:v,onChange:Z=>b(Z.target.value),required:!0}),s.jsx("button",{type:"button",onClick:()=>j(Z=>!Z),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center rounded-lg border border-transparent px-3 text-xs font-medium text-cyan-600 transition hover:border-cyan-200 hover:bg-cyan-50 hover:text-cyan-700 dark:text-cyan-200 dark:hover:border-cyan-400/50 dark:hover:bg-cyan-500/10","aria-label":U?"Ocultar confirmacao":"Mostrar confirmacao",children:U?s.jsx(Rd,{className:"w-4 h-4"}):s.jsx(Ad,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Foto de perfil (opcional)"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:O?s.jsx("img",{src:O,alt:"Pr-visualizao do avatar",className:"h-full w-full object-cover"}):s.jsx("div",{className:"grid h-full w-full place-items-center text-xs text-slate-400 dark:text-slate-500",children:"sem foto"})}),s.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-cyan-200 hover:text-cyan-600 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-cyan-500/60 dark:hover:text-cyan-300",children:[s.jsx("span",{children:"Carregar imagem"}),s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:re})]})]})]}),s.jsxs("label",{className:"mt-1 inline-flex items-start gap-3 text-xs text-slate-500 dark:text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:Z=>D(Z.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300 text-cyan-500 focus:ring-cyan-400 dark:border-slate-600"}),s.jsx("span",{children:"Li e concordo com os termos de uso, poltica de privacidade e boas prticas do sistema omnichannel."})]}),H&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-300/60 bg-red-50/80 px-3 py-2 text-sm text-red-600 dark:border-red-500/40 dark:bg-red-500/10 dark:text-red-200",children:[s.jsx("span",{className:"text-base",children:"??"}),s.jsx("span",{children:H})]}),s.jsx("button",{type:"submit",disabled:g,className:"inline-flex h-12 items-center justify-center rounded-2xl bg-gradient-to-r from-cyan-500 via-emerald-500 to-blue-500 px-6 text-sm font-semibold text-white shadow-lg shadow-cyan-500/25 transition hover:shadow-2xl hover:shadow-cyan-500/35 disabled:opacity-60 disabled:shadow-none",children:g?"Cadastrando...":"Criar minha conta"}),s.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-300",children:["J possui conta?"," ",s.jsx(fs,{className:"font-medium text-cyan-600 transition hover:text-cyan-500 dark:text-cyan-300 dark:hover:text-cyan-200",to:"/login",children:"Entrar"})]}),s.jsx("p",{className:"text-center text-[11px] text-slate-400 dark:text-slate-500",children:"Suporte 24/7 e implementao assistida inclusos para novos clientes."})]})]})})]})}const tb="BLX4iWgrhNgMUBR7yYLSu_LLHgE0ZbrFlrY9UBd3hGAfXc6SrOTcsVf2tdI1hJEzcXG3cg8NFIkNmvDXIK8sKm0",$p={attached:!1};function nb(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=atob(n),a=new Uint8Array(r.length);for(let o=0;o<r.length;o+=1)a[o]=r.charCodeAt(o);return a}async function rb(){try{const{key:e}=await Q.get("/push/vapid-public-key");if(e)return e}catch{}return tb}async function Lx(e){if(!e)return null;try{await Q.post("/push/subscribe",{subscription:e})}catch(t){console.error("Falha ao registrar subscription no servidor",t)}return e}function sb(){if(!($p.attached||typeof navigator>"u"||!navigator.serviceWorker))try{navigator.serviceWorker.addEventListener("message",async e=>{var t;if(((t=e==null?void 0:e.data)==null?void 0:t.type)==="push:subscription")try{await Lx(e.data.subscription)}catch{}}),$p.attached=!0}catch{}}async function ab(){if(typeof window>"u"||!("serviceWorker"in navigator)||!("PushManager"in window))return null;sb();const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();if(!t){const n=await rb(),r=nb(n);t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r})}return await Lx(t),t}const ob=["","","","",""],dt=e=>ob.map(t=>`${e}${t}`),lb=[dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt(""),dt("")],ib=["","","","","","","",""],cb=lb.flat(),di={recent:[],caras:["","","","","","","","","","","","","","","","","","","","","","","",""],gestos:["","","","","","","","","","","","","","","",""],amor:["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],diversidade:[...cb,...ib],animais:["","","","","","","","","","","","","","","",""],comida:["","","","","","","","","","","","","","","","","","","","","","","","","","",""],objetos:["","","","","","","","","","","","","","",""],transportes:["","","","","","","","","",""],clima:["","","","","","","","","","","","","","","","","","","",""],natureza:["","","","","","","","","","","","","","","","","","","","",""]},ub=[{key:"recent",label:"Recentes",icon:""},{key:"favoritos",label:"Favoritos",icon:""},{key:"caras",label:"Caras",icon:""},{key:"gestos",label:"Gestos",icon:""},{key:"amor",label:"Amor",icon:""},{key:"diversidade",label:"Diversidade",icon:""},{key:"natureza",label:"Natureza",icon:""},{key:"clima",label:"Clima",icon:""},{key:"animais",label:"Animais",icon:""},{key:"comida",label:"Comida",icon:""},{key:"objetos",label:"Objetos",icon:""},{key:"transportes",label:"Transp.",icon:""}],Op=()=>{if(typeof document>"u")return!1;const e=document.documentElement,t=document.body;return!!(e&&e.classList.contains("dark")||t&&t.classList.contains("dark"))};function db(){const[e,t]=c.useState(()=>Op()),n=c.useCallback(()=>{try{t(Op())}catch{t(!1)}},[]);return c.useEffect(()=>{if(typeof window>"u"||typeof MutationObserver>"u")return;const r=d=>{d.some(h=>h.attributeName==="class")&&n()},a=[],o=document.documentElement,i=document.body;if(o){const d=new MutationObserver(r);d.observe(o,{attributes:!0,attributeFilter:["class"]}),a.push(d)}if(i){const d=new MutationObserver(r);d.observe(i,{attributes:!0,attributeFilter:["class"]}),a.push(d)}return window.addEventListener("chat:themeChanged",n),n(),()=>{a.forEach(d=>d.disconnect()),window.removeEventListener("chat:themeChanged",n)}},[n]),e}function cs(e){return Array.isArray(e)?e:[]}function fb(e){if(!Number.isFinite(e)||e<=0)return"";const t=Math.floor(e),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function Up(e){return e==="image"||e==="gif"}function Bp(e){return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}function hb(e,t){return String(e||"").split(/(@[^\s@]+)/g).map((r,a)=>{if(!r)return null;if(r.startsWith("@")){const o=/^@([^\s@]+)([.,!?;:]*)$/.exec(r);if(o){const i=`@${o[1]}`,d=o[2]||"";return s.jsxs(Vo.Fragment,{children:[s.jsx("span",{className:"rounded bg-blue-100 px-1 text-blue-700 dark:bg-blue-500/20 dark:text-blue-200",children:i}),d]},`${t}-${a}`)}return s.jsx("span",{className:"rounded bg-blue-100 px-1 text-blue-700 dark:bg-blue-500/20 dark:text-blue-200",children:r},`${t}-${a}`)}return s.jsx(Vo.Fragment,{children:r},`${t}-${a}`)})}function pb(e){return e?e.split(/(\*[^*\n]+\*)/g).flatMap((n,r)=>n.startsWith("*")&&n.endsWith("*")&&n.length>2?s.jsx("strong",{children:n.slice(1,-1)},r):hb(n,`m-${r}`)):null}const zp=50,Vp=20,Px=.5,Ix=3,fi=.25,mb=e=>Math.min(Ix,Math.max(Px,e)),xb=["","","","","",""];function gb(e=[]){return[...e].sort((t,n)=>n.count!==t.count?n.count-t.count:(t.emoji||"").localeCompare(n.emoji||""))}function vb(e=[],t,n){const r=new Map((e||[]).map(o=>[o.emoji,{...o}])),a=o=>{if(!o)return;const i=r.get(o);i&&(i.count-=1,i.reactedByMe=!1,i.count<=0?r.delete(o):r.set(o,i))};if(t===n)a(t);else{a(t);const o=r.get(n)||{emoji:n,count:0,reactedByMe:!1};o.count+=1,o.reactedByMe=!0,r.set(n,o)}return gb(Array.from(r.values()))}function Tx(){var ch;const[e,t]=c.useState([]),[n,r]=c.useState([]),[a,o]=c.useState([]),[i,d]=c.useState(null),[h,m]=c.useState([]),[v,b]=c.useState(""),[k,D]=c.useState([]),[A,P]=c.useState(!1),[U,j]=c.useState(""),[g,w]=c.useState(null),[C,R]=c.useState(!1),[O,I]=c.useState(""),[H,B]=c.useState(0),[_,re]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_pins")||"{}")}catch{return{}}}),[Z,F]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_mutes")||"{}")}catch{return{}}}),[Y,se]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_manual_unread")||"{}")}catch{return{}}}),ce=c.useCallback(l=>{try{localStorage.setItem("chat_manual_unread",JSON.stringify(l))}catch{}},[]),je=c.useCallback((l,u)=>{l&&se(p=>{const x={...p||{}};return u?x[l]=u:delete x[l],ce(x),x})},[ce]),W=c.useCallback(l=>{l&&je(l,null)},[je]),V=c.useCallback(l=>!!(l&&(Y!=null&&Y[l])),[Y]),ee=c.useCallback((l=0,u)=>l&&l>0?l:V(u)?1:0,[V]),le=c.useCallback(l=>{if(!l)return null;const u=(e||[]).find(p=>p.id===l);return u||(n||[]).find(p=>p.groupId===l)||null},[e,n]),ye=c.useCallback(l=>{var N,S,E,L;if(!l)return;const u=le(l),p=((N=u==null?void 0:u.lastMessage)==null?void 0:N.id)||((S=u==null?void 0:u.message)==null?void 0:S.id)||(u==null?void 0:u.id)||null,x=((E=u==null?void 0:u.lastMessage)==null?void 0:E.createdAt)||((L=u==null?void 0:u.message)==null?void 0:L.createdAt)||new Date().toISOString();je(l,{messageId:p,createdAt:x})},[le,je]),Tt=c.useCallback(l=>{l&&W(l)},[W]);function ct(l){re(u=>{const p={...u||{}};p[l]=!p[l];try{localStorage.setItem("chat_pins",JSON.stringify(p))}catch{}return p})}function Zt(l){F(u=>{const p={...u||{}};p[l]=!p[l];try{localStorage.setItem("chat_mutes",JSON.stringify(p))}catch{}return p})}const[Ke,Le]=c.useState(null),An=i!=null&&i.id?Y==null?void 0:Y[i.id]:null,dn=c.useRef(null),Ne=db(),Ss=Ne?"bg-white/95 border-slate-200 text-slate-900 shadow-lg":"bg-white border-slate-200 text-slate-900",Rn="text-slate-700 hover:bg-slate-50",xt="text-slate-500",ar=Ne?"bg-slate-950 border-slate-800 text-slate-100":"bg-white border-slate-200 text-slate-900",Ze=Ne?"text-slate-100 hover:bg-slate-800/60":"text-slate-700 hover:bg-slate-50",ut=Ne?"text-slate-300":"text-slate-500",fn=Ne?"bg-slate-950/90 text-slate-100 border-slate-800":"bg-white text-slate-900 border-slate-200",hn="border-slate-200 text-slate-900 dark:border-slate-800 dark:text-slate-100",Jt=Ne?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800",Ln=Ne?"border-b-2 border-blue-400 text-blue-300":"border-b-2 border-blue-600 text-blue-700",M=c.useCallback(l=>{dn.current=l},[]),[ae,xe]=c.useState(null),ge=c.useCallback((l,u=2e3)=>{if(l){if(xe(l),gn.current)try{clearTimeout(gn.current)}catch{}gn.current=setTimeout(()=>{xe(p=>p===l?null:p),gn.current=null},u)}},[]),$e=c.useCallback(l=>{if(!l||typeof document>"u")return!1;const u=document.getElementById(`msg-${l}`);if(!u)return!1;try{u.scrollIntoView({behavior:"smooth",block:"center"})}catch{}return ge(l),!0},[ge]),[_e,G]=c.useState(""),[gt,Yt]=c.useState(""),[rt,wc]=c.useState(""),[Pn,zr]=c.useState(!1),Ca=c.useRef(null),bc=c.useRef(null),[Cs,Vr]=c.useState({left:4,bottom:120,width:360,maxHeight:416}),Wr=c.useRef(null);function Ft(){try{const l=Ca.current,u=Wr.current,p=typeof window<"u"?window.innerWidth:800,x=typeof window<"u"?window.innerHeight:600,N=4,S=4,E=Math.min(26*16,x-N*2),L=pe=>pe&&pe.getBoundingClientRect?pe.getBoundingClientRect():null,$=L(u),ne=L(l);if($||ne){const pe=$?Math.min(420,Math.max(320,$.width||420)):Math.min(420,Math.max(320,p*.95)),Oe=Math.min(pe,p-N*2),X=$?$.left:ne?ne.left:N,ie=N,ve=$?$.top:ne?ne.top:x/2,yt=Math.max(N,x-ve+S);Vr({left:ie,bottom:yt,width:Oe,maxHeight:E})}else Vr({left:N,bottom:120,width:Math.min(420,Math.max(320,p*.95)),maxHeight:E})}catch{}zr(!0)}c.useEffect(()=>{if(!Pn)return;const l=u=>{var x,N;const p=u.target;p&&((x=bc.current)!=null&&x.contains(p)||(N=Ca.current)!=null&&N.contains(p))||zr(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[Pn]);const[oe,Xe]=c.useState({open:!1,type:null,id:null,groupId:null,x:0,y:0}),Hr=c.useRef(null),[pn,Es]=c.useState(null),[pl,Ds]=c.useState(!1),[Ea,Da]=c.useState(!1),[_a,In]=c.useState(""),[_s,or]=c.useState(""),ml=c.useCallback(async l=>{if(!(!pn||!l)){In(""),Da(!0);try{const u={type:pn.type||"text",content:pn.content||""};await Q.post(`/messages/${l}`,u),Ds(!1),Es(null)}catch(u){In((u==null?void 0:u.message)||"Falha ao encaminhar mensagem")}finally{Da(!1)}}},[pn]);Vo.useMemo(()=>{try{const l=Object.keys(di).filter(x=>x!=="recent"&&x!=="bandeiras"),u=[];l.forEach(x=>{(di[x]||[]).forEach(N=>u.push(N))});const p=new Set;return u.filter(x=>p.has(x)?!1:(p.add(x),!0))}catch{return[]}},[]);const[qr,Aa]=c.useState("caras"),[As,Ra]=c.useState(()=>{try{const l=localStorage.getItem("chat_recent_emojis"),u=l?JSON.parse(l):[];return Array.isArray(u)?u.slice(0,24):[]}catch{return[]}}),[xl,La]=c.useState(""),[mn,Rs]=c.useState(()=>{try{const l=localStorage.getItem("chat_fav_emojis"),u=l?JSON.parse(l):[];return Array.isArray(u)?u.slice(0,48):[]}catch{return[]}});function gl(l){try{Rs(u=>{const x=(u||[]).includes(l)?(u||[]).filter(N=>N!==l):[l,...(u||[]).filter(N=>N!==l)].slice(0,48);try{localStorage.setItem("chat_fav_emojis",JSON.stringify(x))}catch{}return x})}catch{}}const vl=c.useRef(null),Ve=c.useRef({}),Qr=l=>u=>{u&&(Ve.current[l]=u)},Gr=c.useMemo(()=>{const l=[];(e||[]).forEach(p=>{p!=null&&p.id&&p.id!==(i==null?void 0:i.id)&&l.push({id:p.id,name:p.name||"Grupo",isDM:!1})}),(n||[]).forEach(p=>{var x;p!=null&&p.groupId&&p.groupId!==(i==null?void 0:i.id)&&l.push({id:p.groupId,name:((x=p.other)==null?void 0:x.name)||"Direto",isDM:!0})});const u=new Set;return l.filter(p=>u.has(p.id)?!1:(u.add(p.id),!0))},[e,n,i==null?void 0:i.id]),Pa=c.useMemo(()=>{const l=(_s||"").trim().toLowerCase();return l?Gr.filter(u=>(u.name||"").toLowerCase().includes(l)):Gr},[Gr,_s]);c.useEffect(()=>()=>{if(gn.current){try{clearTimeout(gn.current)}catch{}gn.current=null}},[]);const Ia=["recent","favoritos","caras","gestos","diversidade","amor","natureza","clima","animais","comida","objetos","transportes"],yl=(l=[])=>!Array.isArray(l)||l.length===0?[]:Array.isArray(l[0])?l:[l];c.useEffect(()=>{if(!Pn)return;const l=vl.current;if(!l)return;let u=!1;const p=()=>{u||(u=!0,requestAnimationFrame(()=>{try{let x=qr;for(const N of Ia){const S=Ve.current[N];if(!S)continue;S.offsetTop-l.scrollTop<=32&&(x=N)}x&&x!==qr&&Aa(x)}finally{u=!1}}))};return l.addEventListener("scroll",p,{passive:!0}),()=>l.removeEventListener("scroll",p)},[Pn,xl,qr]);const lr=c.useRef(null),Tn=c.useRef(null),Kr=c.useRef(null),Ls=c.useRef(!1),[ir,Mt]=c.useState(!1),[Ta,$t]=c.useState(""),[jc,wl]=c.useState(0),[Fn,Mn]=c.useState(null),St=c.useRef(null),Fa=c.useRef({}),[Zr,Jr]=c.useState(null),[xn,Ps]=c.useState(!1),[$n,Ma]=c.useState(!1),bl=c.useRef({}),jl=c.useRef(null),kl=c.useCallback(()=>{const l=Kr.current;if(l)try{l.scrollTop=l.scrollHeight}catch{}},[]),$a=c.useRef(null),Oa=c.useRef(null),vt=c.useRef(null),K=fa(),kc=_n(),[cr,Ua]=c.useState(null),[Ct,Ba]=c.useState(""),On=c.useRef(null),Is=c.useRef(null),gn=c.useRef(null),[Yr,Un]=c.useState(null),za=c.useRef(null),[Va,ur]=c.useState(""),[Ts,Ot]=c.useState(!1),Wa=c.useRef([]),[Bn,Fs]=c.useState(null),[Xr,Ms]=c.useState(1),$s=c.useCallback(l=>{Ms(u=>mb(u+l))},[]),es=c.useCallback(()=>{Fs(null),Ms(1)},[]),Nl=c.useCallback(l=>{Fs(l),Ms(1)},[]),Nc=c.useCallback(l=>{if(!Bn)return;l.preventDefault();const u=l.deltaY<0?fi:-fi;$s(u)},[Bn,$s]),[ts,ns]=c.useState(!1),Ha=c.useRef(null);c.useEffect(()=>{Wa.current=k},[k]),c.useEffect(()=>()=>{Wa.current.forEach(l=>{if(l!=null&&l.preview)try{URL.revokeObjectURL(l.preview)}catch{}})},[]),c.useEffect(()=>{if(!Bn)return;const l=u=>{u.key==="Escape"&&es()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[Bn,es]);function Sc(l){var u;return{id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,file:l,preview:(u=l==null?void 0:l.type)!=null&&u.startsWith("image/")?URL.createObjectURL(l):null}}function qa(l=[]){if(!l.length)return;const u=l.map(p=>Sc(p));D(p=>[...p,...u])}function rs(l){l.preventDefault(),l.stopPropagation(),A||P(!0)}function Qa(l){l.preventDefault(),l.stopPropagation(),P(!1)}function Ga(l){l.preventDefault(),l.stopPropagation(),P(!1);const u=[],p=l.dataTransfer;if(p!=null&&p.items&&p.items.length)for(let x=0;x<p.items.length;x++){const N=p.items[x];if(N.kind==="file"){const S=N.getAsFile();S&&u.push(S)}}else if(p!=null&&p.files&&p.files.length)for(let x=0;x<p.files.length;x++)u.push(p.files[x]);u.length&&qa(u)}function Sl(l){D(u=>{const p=u.find(x=>x.id===l);if(p!=null&&p.preview)try{URL.revokeObjectURL(p.preview)}catch{}return u.filter(x=>x.id!==l)})}function Cl(){Wa.current.forEach(l=>{if(l!=null&&l.preview)try{URL.revokeObjectURL(l.preview)}catch{}}),D([]);try{Tn.current&&(Tn.current.value="")}catch{}}async function El(l,u="arquivo"){try{const p=typeof Ue=="function"?Ue():null,x=p?{Authorization:`Bearer ${p}`}:{},N=await fetch(l,{mode:"cors",credentials:"same-origin",headers:x});if(!N.ok)throw new Error("Falha ao baixar arquivo");const S=await N.blob(),E=URL.createObjectURL(S),L=document.createElement("a");L.href=E,L.download=u,document.body.appendChild(L),L.click(),L.remove(),setTimeout(()=>URL.revokeObjectURL(E),1500)}catch(p){j((p==null?void 0:p.message)||"No foi possvel baixar o arquivo");try{const x=document.createElement("a");x.href=l,x.rel="noopener noreferrer",x.target="_blank",x.download=u,document.body.appendChild(x),x.click(),x.remove()}catch{}}}c.useEffect(()=>{if(!Ke)return;const l=u=>{const p=dn.current;if(!p){Le(null);return}p.contains(u.target)||Le(null)};return document.addEventListener("mousedown",l),document.addEventListener("touchstart",l),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("touchstart",l)}},[Ke]),c.useEffect(()=>{if(!(oe!=null&&oe.open))return;const l=p=>{const x=Hr.current;if(!x){Xe(N=>({...N,open:!1}));return}x.contains(p.target)||Xe(N=>({...N,open:!1}))},u=p=>{p.key==="Escape"&&Xe(x=>({...x,open:!1}))};return document.addEventListener("mousedown",l),document.addEventListener("touchstart",l),document.addEventListener("keydown",u),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("touchstart",l),document.removeEventListener("keydown",u)}},[oe==null?void 0:oe.open]),c.useEffect(()=>{if(!ts)return;const l=p=>{const x=Ha.current;if(!x){ns(!1);return}x.contains(p.target)||ns(!1)},u=p=>{p.key==="Escape"&&ns(!1)};return document.addEventListener("mousedown",l),document.addEventListener("touchstart",l),document.addEventListener("keydown",u),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("touchstart",l),document.removeEventListener("keydown",u)}},[ts]);const dr=typeof window<"u"&&"Notification"in window,Dl=(()=>{if(!dr)return"default";try{return Notification.permission}catch{return"default"}})(),[Os,Ka]=c.useState(Dl==="granted"),Za=c.useRef(typeof document<"u"?document.title:"Chat"),vn=c.useRef(null),Ut=c.useRef({url:"",buffer:null}),[Ja,Ya]=c.useState(()=>{try{return!document.hidden&&document.hasFocus()}catch{return!0}}),zn=!0,[fr,Vn]=c.useState("");c.useEffect(()=>{const l=()=>{try{Ya(!document.hidden&&document.hasFocus())}catch{Ya(!0)}};return l(),window.addEventListener("focus",l),window.addEventListener("blur",l),document.addEventListener("visibilitychange",l),()=>{window.removeEventListener("focus",l),window.removeEventListener("blur",l),document.removeEventListener("visibilitychange",l)}},[]),c.useEffect(()=>{if(!dr||!Os)return;let l=!1;return(async()=>{try{await ab(),l||Vn("")}catch(u){l||Vn((u==null?void 0:u.message)||"Falha ao registrar push")}})(),()=>{l=!0}},[dr,Os]),c.useEffect(()=>{const l=()=>{try{const u=localStorage.getItem("notif_sound_url")||"";u?Ut.current.url!==u&&(Ut.current={url:u,buffer:null}):Ut.current={url:"",buffer:null}}catch{}};return l(),window.addEventListener("chat:alertSoundUpdated",l),()=>window.removeEventListener("chat:alertSoundUpdated",l)},[]),c.useEffect(()=>{if(!dr)return;let l=!1;const u=()=>{try{const p=Notification.permission;l||Ka(p==="granted")}catch{}};u();try{Notification.permission==="default"&&Notification.requestPermission().then(p=>{l||Ka(p==="granted")})}catch{}return window.addEventListener("focus",u),document.addEventListener("visibilitychange",u),()=>{l=!0,window.removeEventListener("focus",u),document.removeEventListener("visibilitychange",u)}},[dr]);function Cc(l){const u=pr(l);return/\.(png|jpe?g|webp|gif|bmp|svg)$/i.test(String(u||""))}function Bt(l){return l?Up(l.type)?!0:l.type==="sticker"?Cc(l.content):!1:!1}function _l(l){const u=K==null?void 0:K.id;return!u||!l||!Array.isArray(l.mentions)?!1:l.mentions.some(p=>(p==null?void 0:p.userId)===u)}const Xa=c.useCallback((l,u)=>{if(u==null){Mt(!1),$t(""),St.current=null,Mn(null);return}const p=String(l||"").slice(0,u),x=p.lastIndexOf("@");if(x<0){Mt(!1),$t(""),St.current=null,Mn(null);return}if(x>0&&!/\s/.test(p[x-1])){Mt(!1),$t(""),St.current=null,Mn(null);return}const N=p.slice(x+1);if(/\s/.test(N)||N.length>32){Mt(!1),$t(""),St.current=null,Mn(null);return}St.current={start:x,caret:u},$t(N),wl(0),Mt(!0);try{const S=lr.current,E=Wr.current;if(S&&E){const L=S.getBoundingClientRect(),$=E.getBoundingClientRect(),ne=Math.max(0,L.left-$.left),ue=Math.max(180,L.width);Mn({left:ne,width:ue})}}catch{}},[]),Al=c.useCallback(l=>{const u=(l==null?void 0:l.user)||l,p=(u==null?void 0:u.name)||"";if(!p)return;const x=St.current,N=lr.current,S=N&&typeof N.selectionStart=="number"?N.selectionStart:x==null?void 0:x.caret;if(!x||S===null||S===void 0)return;const E=String(v||"").slice(0,x.start),L=String(v||"").slice(S),$=`${E}@${p} ${L}`;b($),Mt(!1),$t(""),St.current=null,Mn(null),requestAnimationFrame(()=>{if(!N)return;const ne=E.length+p.length+2;try{N.focus(),N.setSelectionRange(ne,ne)}catch{}})},[v]);function eo(l){return l?l.type==="text"?l.content||"":Bt(l)?"Imagem":l.type==="audio"?"udio":"Anexo":""}function Se(l){if(typeof l=="number")return Number.isFinite(l)?l:0;if(typeof l=="string"&&l){const u=Date.parse(l);return Number.isNaN(u)?0:u}return 0}function to(l,u=0){var N;const p=u||0;return l&&(Se(l._arrivedAt)||Se(l.createdAt)||Se((N=l.group)==null?void 0:N.createdAt))||p}function Rl(l,u){var ue,pe;if(!l)return l;const p=l.lastMessage||l.latestMessage||l.message||l.lastMessagePreview||null,x=Se(l._lastAt)||Se(l.lastAt)||Se(l.lastMessageAt)||Se(p==null?void 0:p.createdAt)||Se(p==null?void 0:p.timestamp)||Se(l.updatedAt)||Se(l.createdAt)||u||0;let N=l._lastPreview!==void 0&&l._lastPreview!==null?l._lastPreview:l.lastPreview!==void 0&&l.lastPreview!==null?l.lastPreview:l.preview!==void 0&&l.preview!==null?l.preview:"";if(!N&&p){const Oe=p.type||p.messageType||"text";Oe==="text"?N=p.content||"":Up(Oe)||Bt(p)?N="Imagem":Oe==="audio"?N="udio":N="Anexo";const X=((ue=p.author)==null?void 0:ue.id)||p.authorId||p.userId||null;N&&X&&X===(K==null?void 0:K.id)&&(N=`Voc: ${N}`)}const S=Se(l._lastReceivedAt)||Se(l.lastIncomingAt)||Se(l.lastReceivedAt)||Se(l.lastSeenAt)||0,E=((pe=p==null?void 0:p.author)==null?void 0:pe.id)||(p==null?void 0:p.authorId)||(p==null?void 0:p.userId)||null,$=(E&&(K!=null&&K.id)?E!==K.id:!!(p!=null&&p.from))?x:S,ne=to(l,u);return{...l,_lastAt:x,_lastPreview:N,_lastReceivedAt:$,_arrivedAt:ne}}const hr=c.useCallback(l=>{const u=Date.now();return(l||[]).map((p,x)=>Rl(p,u-x))},[Rl]),Ll=c.useCallback(l=>{if(!l)return 0;const u=Se(l._lastAt),p=Se(l._lastReceivedAt);return Math.max(u,p)},[]);function Us(l,{mine:u=!1}={}){if(!l||!l.groupId)return;const p=(()=>{try{return new Date(l.createdAt||Date.now()).getTime()}catch{return Date.now()}})();let x=eo(l);u&&x&&(x=`Voc: ${x}`);const N=(i==null?void 0:i.id)===l.groupId,S=!u&&_l(l);t(E=>(E||[]).map(L=>{if(!L||L.id!==l.groupId)return L;const $=Se(L._lastReceivedAt),ne={...L,_lastAt:p,_lastPreview:x,_lastReceivedAt:u?$:p};return N?(ne._unread=0,ne._mentions=0):u||(ne._unread=(L._unread||0)+1),!N&&S&&(ne._mentions=(L._mentions||0)+1),ne})),r(E=>(E||[]).map(L=>{if(!L||L.groupId!==l.groupId)return L;const $=Se(L._lastReceivedAt),ne={...L,_lastAt:p,_lastPreview:x,_lastReceivedAt:u?$:p};return N?ne._unread=0:u||(ne._unread=(L._unread||0)+1),ne}))}function pr(l){try{if(!l)return"";try{const N=new URL(l,typeof window<"u"?window.location.origin:"http://localhost").searchParams.get("name");if(N)return N}catch{}const p=String(l).split("?")[0].split("/").pop()||"";return decodeURIComponent(p)}catch{return String(l||"")}}function Ec(l){var u,p;try{if(!Os)return;const x=((u=l==null?void 0:l.author)==null?void 0:u.name)||"Mensagem",N=eo(l),S=(p=l==null?void 0:l.author)!=null&&p.avatarUrl?Dt(l.author.avatarUrl):void 0,E=new Notification(x,{body:N,icon:S});E.onclick=()=>{var L,$,ne,ue;try{(L=window==null?void 0:window.focus)==null||L.call(window)}catch{}try{d({id:l.groupId,name:(($=l.group)==null?void 0:$.name)||"Direto",avatarUrl:((ne=l.group)==null?void 0:ne.avatarUrl)||((ue=l.author)==null?void 0:ue.avatarUrl)||void 0}),yn()}catch{}try{E.close()}catch{}},setTimeout(()=>{try{E.close()}catch{}},8e3)}catch{}}async function Pl(){try{const l=window.AudioContext||window.webkitAudioContext;if(!l)return;vn.current||(vn.current=new l);const u=vn.current;try{const N=localStorage.getItem("notif_sound_url")||"";if(N){if(Ut.current.url!==N||!Ut.current.buffer){const $=await(await fetch(N)).arrayBuffer(),ne=await u.decodeAudioData($.slice(0));Ut.current={url:N,buffer:ne}}const S=u.createBufferSource();S.buffer=Ut.current.buffer;const E=u.createGain();E.gain.setValueAtTime(1e-4,u.currentTime),E.gain.exponentialRampToValueAtTime(.6,u.currentTime+.01),E.gain.exponentialRampToValueAtTime(1e-4,u.currentTime+Math.min(1.2,S.buffer.duration)),S.connect(E).connect(u.destination),S.start();return}}catch{}const p=u.createOscillator(),x=u.createGain();p.type="sine",p.frequency.value=880,x.gain.setValueAtTime(1e-4,u.currentTime),x.gain.exponentialRampToValueAtTime(.4,u.currentTime+.01),x.gain.exponentialRampToValueAtTime(1e-4,u.currentTime+.45),p.connect(x).connect(u.destination),p.start(),p.stop(u.currentTime+.5)}catch{}}c.useEffect(()=>{function l(){var u,p;try{(p=(u=vn.current)==null?void 0:u.resume)==null||p.call(u)}catch{}try{window.removeEventListener("click",l),window.removeEventListener("keydown",l),window.removeEventListener("touchstart",l)}catch{}}return window.addEventListener("click",l),window.addEventListener("keydown",l),window.addEventListener("touchstart",l),()=>{try{window.removeEventListener("click",l),window.removeEventListener("keydown",l),window.removeEventListener("touchstart",l)}catch{}}},[]),c.useEffect(()=>{try{const l=(e||[]).reduce((u,p)=>u+ee(p._unread||0,p.id),0)+(n||[]).reduce((u,p)=>u+ee(p._unread||0,p.groupId),0);l>0?document.title=`(${l}) ${Za.current}`:document.title=Za.current}catch{}},[e,n,ee]);const[Wn,Bs]=c.useState(""),[Hn,no]=c.useState([]),[ro,ss]=c.useState(-1),[f,y]=c.useState(!1),[T,q]=c.useState(!1),[te,be]=c.useState("self"),[ke,Il]=c.useState(null),[Ae,Fx]=c.useState(null),[Ff,Mf]=c.useState([]),[Mx,$f]=c.useState(!1),[Of,Uf]=c.useState(""),[Bf,zf]=c.useState([]),[Vf,Tl]=c.useState([]),[$x,Wf]=c.useState(!1),[Hf,qf]=c.useState(""),[zs,Vs]=c.useState("perfil"),[Dc,Qf]=c.useState(""),[so,Gf]=c.useState(""),[ao,Kf]=c.useState(""),[_c,Fl]=c.useState(""),[oo,Ml]=c.useState(null),[Ac,Zf]=c.useState(""),[Rc,Jf]=c.useState(""),[Yf,as]=c.useState(""),[Xf,qn]=c.useState(""),[eh,Lc]=c.useState([]),[Pc,Ic]=c.useState({}),os=c.useMemo(()=>{if(!ir)return[];const l=Bp(Ta),u=(Vf||[]).map(x=>x.user||x);return(l?u.filter(x=>Bp((x==null?void 0:x.name)||"").includes(l)):u).slice(0,8)},[ir,Ta,Vf]);function Ws(l){var u;return!!((u=Pc==null?void 0:Pc[(i==null?void 0:i.id)||""])!=null&&u[l])}const th=c.useRef(null),[ls,Ox]=c.useState(()=>{try{return typeof window>"u"?!0:window.innerWidth>=1024}catch{return!0}}),[$l,lo]=c.useState(!1),[nh,rh]=c.useState(!1),yn=c.useCallback(()=>{try{typeof window<"u"&&window.innerWidth<1024&&lo(!1)}catch{}},[lo]);c.useEffect(()=>{if(typeof window>"u")return;const l=()=>{try{const u=window.innerWidth>=1024;Ox(u)}catch{}};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const[io,Ux]=c.useState(()=>{try{return localStorage.getItem("chat_groups_collapsed")==="1"}catch{}return!1}),[co,Bx]=c.useState(()=>{try{return localStorage.getItem("chat_people_collapsed")==="1"}catch{}return!1});c.useEffect(()=>{try{localStorage.setItem("chat_groups_collapsed",io?"1":"0")}catch{}},[io]),c.useEffect(()=>{try{localStorage.setItem("chat_people_collapsed",co?"1":"0")}catch{}},[co]);async function Tc(l){if(!(!(i!=null&&i.id)||!(l!=null&&l.id)))try{Ws(l.id)?(await Q.del(`/messages/${l.id}/favorite`),Ic(u=>{const p={...u||{}},x={...p[i.id]||{}};return delete x[l.id],p[i.id]=x,p}),Lc(u=>u.filter(p=>p.id!==l.id))):(await Q.post(`/messages/${l.id}/favorite`,{}),Ic(u=>({...u,[i.id]:{...(u||{})[i.id]||{},[l.id]:!0}})),Lc(u=>u!=null&&u.some(p=>p.id===l.id)?u:[l,...u||[]]))}catch{}}const zx=c.useCallback(async(l,u)=>{var E;if(!(l!=null&&l.id)||!u||!(K!=null&&K.id))return;const p=l.id,x=(l.reactionSummary||[]).map(L=>({...L})),N=(E=x.find(L=>L.reactedByMe))==null?void 0:E.emoji,S=vb(x,N,u);m(L=>L.map($=>$.id===p?{...$,reactionSummary:S}:$)),Un(null),j("");try{const L=await Q.put(`/messages/${p}/reaction`,{emoji:u}),$=(L==null?void 0:L.summary)||[];m(ne=>ne.map(ue=>ue.id===p?{...ue,reactionSummary:$}:ue))}catch(L){m($=>$.map(ne=>ne.id===p?{...ne,reactionSummary:x}:ne)),j((L==null?void 0:L.message)||"Falha ao reagir  mensagem")}},[m,j,Un,K==null?void 0:K.id]),Fc=c.useMemo(()=>{const l={};return(n||[]).forEach(u=>{var p;u!=null&&u.groupId&&((p=u==null?void 0:u.other)!=null&&p.id)&&(l[u.groupId]=u.other.id)}),l},[n]);c.useEffect(()=>{(async()=>{var l;if(i!=null&&i.id)try{const u=cs(await Q.get(`/messages/favorites?groupId=${i.id}`)),p={},x=[];for(const N of u)(l=N==null?void 0:N.message)!=null&&l.id&&(p[N.message.id]=!0,x.push(N.message));Ic(N=>({...N,[i.id]:p})),Lc(x)}catch{}})()},[i==null?void 0:i.id,Z,Fc]);const uo=c.useRef(null);c.useCallback(()=>{try{lo(l=>{const u=!l;return u&&uo.current&&uo.current.focus(),u})}catch{}},[uo]);const[Vx,sh]=c.useState({});c.useEffect(()=>{const l=Zn(),u=K==null?void 0:K.id;if(!u)return;const p=()=>{try{return localStorage.getItem("chat_status")||"online"}catch{return"online"}},x=()=>{try{l.emit("presence:online",{userId:u,status:p()})}catch{}try{l.emit("presence:who")}catch{}},N=(E={})=>{try{const L={};for(const $ of E.users||[])$!=null&&$.userId&&(L[$.userId]=$.status||"online");sh(L)}catch{}},S=(E={})=>{E!=null&&E.userId&&sh(L=>({...L,[E.userId]:E.status||"online"}))};return l.on("presence:snapshot",N),l.on("presence:update",S),l.on("connect",x),x(),()=>{try{l.off("presence:snapshot",N),l.off("presence:update",S),l.off("connect",x)}catch{}}},[K==null?void 0:K.id]);const fo=c.useMemo(()=>{var p;const l=i==null?void 0:i.id;if(!l)return null;const u=n.find(x=>x.groupId===l);return((p=u==null?void 0:u.other)==null?void 0:p.id)||null},[n,i==null?void 0:i.id]),Ol=c.useMemo(()=>{var u;if(fo)return fo;const l=(h||[]).find(p=>{var x,N;return(((x=p.author)==null?void 0:x.id)||p.authorId)&&(((N=p.author)==null?void 0:N.id)||p.authorId)!==(K==null?void 0:K.id)});return l?((u=l.author)==null?void 0:u.id)||l.authorId:null},[fo,h,K==null?void 0:K.id]),Ul=c.useRef(!1),Mc=c.useRef(null),$c=c.useCallback(async({restoreActive:l=!1}={})=>{var u,p,x,N;if(!Ul.current){Ul.current=!0;try{const S=cs(await Q.get("/groups")),E=hr(S),L=cs(await Q.get("/dm")),$=hr(L);if(t(E),r($),l){const ne=localStorage.getItem("chat_active");if(ne){const ue=E.find(Oe=>Oe.id===ne);if(ue)return d(ue),yn(),{normalizedGroups:E,normalizedDms:$};const pe=$.find(Oe=>Oe.groupId===ne);if(pe)return d({id:pe.groupId,name:((u=pe.other)==null?void 0:u.name)||"Direto",avatarUrl:((p=pe.other)==null?void 0:p.avatarUrl)||void 0}),yn(),{normalizedGroups:E,normalizedDms:$}}E[0]?(d(E[0]),yn()):$[0]&&(d({id:$[0].groupId,name:((x=$[0].other)==null?void 0:x.name)||"Direto",avatarUrl:((N=$[0].other)==null?void 0:N.avatarUrl)||void 0}),yn())}return{normalizedGroups:E,normalizedDms:$}}finally{Ul.current=!1}}},[hr,yn]),Oc=c.useRef(0),Bl=c.useCallback(()=>{const u=Date.now(),p=u-Oc.current,x=async()=>{try{await $c()}catch(S){j(E=>E||(S==null?void 0:S.message)||"Falha ao atualizar listas")}};if(p>=1500&&!Ul.current){Oc.current=u,x();return}if(Mc.current)return;const N=Math.max(0,1500-p);Mc.current=setTimeout(async()=>{Mc.current=null,Oc.current=Date.now(),await x()},N)},[$c]);c.useEffect(()=>{(async()=>{try{await $c({restoreActive:!0});const l=cs(await Q.get("/users/all"));o(l)}catch{j("Falha ao carregar listas")}})()},[]),c.useEffect(()=>{const l=th.current;if(!l)return;if(!ls){try{l.style.transform="",l.style.transition="",l.style.display=""}catch{}return}let u=0;const p=()=>{try{if(!$l||(l.style.display!=="flex"&&(l.style.display="flex"),l.style.transition==="none"))return;l.style.transition="",l.style.transform=""}catch{}},x=()=>{cancelAnimationFrame(u),u=requestAnimationFrame(p)};x();const N=new MutationObserver(()=>x());return N.observe(l,{attributes:!0,attributeFilter:["style"]}),()=>{N.disconnect(),cancelAnimationFrame(u)}},[ls,$l]),c.useEffect(()=>{function l(u){var p,x;try{(p=u.stopImmediatePropagation)==null||p.call(u),(x=u.stopPropagation)==null||x.call(u)}catch{}}return window.addEventListener("chat:openDrawer",l,!0),window.addEventListener("chat:closeDrawer",l,!0),()=>{window.removeEventListener("chat:openDrawer",l,!0),window.removeEventListener("chat:closeDrawer",l,!0)}},[]),c.useEffect(()=>{const l=Zn();try{e.forEach(u=>l.emit("group:join",u.id))}catch{}},[e]),c.useEffect(()=>{const l=Zn();try{n.forEach(u=>l.emit("group:join",u.groupId))}catch{}},[n]),c.useEffect(()=>{const l=Zn(),u=K==null?void 0:K.id;if(!u)return;const p=x=>{try{const{groupId:N,userA:S,userB:E}=x||{};if(!N||!(S!=null&&S.id)||!(E!=null&&E.id)||S.id!==u&&E.id!==u)return;const L=S.id===u?E:S,$=Date.now(),ne=to(x,$);r(ue=>(ue||[]).some(pe=>pe.groupId===N)?ue:[...ue||[],{id:N,groupId:N,other:L,_unread:0,_lastAt:$,_arrivedAt:ne}]),l.emit("group:join",N)}catch{}};return l.on("dm:created",p),()=>l.off("dm:created",p)},[K==null?void 0:K.id]),c.useEffect(()=>{const l=Zn();function u(S,E){return((S==null?void 0:S.name)||"").localeCompare((E==null?void 0:E.name)||"","pt-BR",{sensitivity:"base"})}const p=S=>{!(S!=null&&S.id)||S.id===(K==null?void 0:K.id)||o(E=>{if((E||[]).some($=>$.id===S.id))return E;const L=[...E||[],{id:S.id,name:S.name,email:S.email,phone:S.phone,avatarUrl:S.avatarUrl}];return L.sort(u),L})},x=S=>{S!=null&&S.id&&o(E=>{const L=(E||[]).map($=>$.id===S.id?{...$,name:S.name,email:S.email,phone:S.phone,avatarUrl:S.avatarUrl}:$);return L.sort(u),L})},N=({id:S})=>{S&&o(E=>(E||[]).filter(L=>L.id!==S))};return l.on("user:created",p),l.on("user:updated",x),l.on("user:deleted",N),()=>{l.off("user:created",p),l.off("user:updated",x),l.off("user:deleted",N)}},[K==null?void 0:K.id]),c.useEffect(()=>{(async()=>{var l;try{const u=n.filter(x=>x&&x.groupId&&(x._lastAt===void 0||x._lastAt===null||x._lastPreview===void 0));if(!u.length)return;const p={};for(const x of u)try{const S=cs(await Q.get(`/messages/${x.groupId}?take=1`))[0]||null,E=S!=null&&S.createdAt?new Date(S.createdAt).getTime():0,L=(((l=S==null?void 0:S.author)==null?void 0:l.id)||(S==null?void 0:S.authorId))===(K==null?void 0:K.id);let $="";S&&(S.type==="text"?$=S.content||"":Bt(S)?$="Imagem":S.type==="audio"?$="udio":$="Anexo",L&&($=`Voc: ${$}`)),p[x.groupId]={last:E,prev:$,received:L?Se(x._lastReceivedAt):E}}catch{}Object.keys(p).length&&r(x=>x.map(N=>p[N.groupId]!==void 0?{...N,_lastAt:p[N.groupId].last,_lastPreview:p[N.groupId].prev,_lastReceivedAt:p[N.groupId].received}:N))}catch{}})()},[n,K==null?void 0:K.id]);const zl=c.useCallback(async(l,u=null)=>{var L;if(!l)return{items:[],nextCursor:null,hasMore:!1};const p=new URLSearchParams;p.set("take",zp.toString()),u&&p.set("cursor",u);const x=cs(await Q.get(`/messages/${l}?${p.toString()}`)),N=x.slice().reverse(),S=x.length===zp,E=S&&((L=x[x.length-1])==null?void 0:L.id)||null;return{items:N,nextCursor:E,hasMore:S}},[]),Wx=c.useCallback(async()=>{var x;if(!(i!=null&&i.id)||$n||!xn)return;const l=Zr||(((x=h[0])==null?void 0:x.id)??null);if(!l)return;const u=Kr.current,p=u?u.scrollHeight:null;Ls.current=!0,Ma(!0);try{const{items:N,nextCursor:S,hasMore:E}=await zl(i.id,l);m(L=>{const $=new Set((L||[]).map(ue=>ue.id)),ne=N.filter(ue=>!$.has(ue.id));return ne.length?[...ne,...L||[]]:L}),Jr(S),Ps(E),requestAnimationFrame(()=>{const L=Kr.current;L&&p!==null&&(L.scrollTop=L.scrollHeight-p),Ls.current=!1})}catch(N){Ls.current=!1,j((N==null?void 0:N.message)||"Falha ao carregar mensagens antigas")}finally{Ma(!1)}},[i==null?void 0:i.id,zl,Zr,xn,$n,h]);async function Hx(l){var u,p,x,N;j("");try{const S=await Q.get(`/dm/with/${l}`);if(S!=null&&S.groupId){r(E=>(E||[]).map(L=>L.groupId===S.groupId?{...L,other:S.other||L.other}:L)),d({id:S.groupId,name:((u=S.other)==null?void 0:u.name)||"Direto",avatarUrl:((p=S.other)==null?void 0:p.avatarUrl)||void 0}),yn();return}}catch{}try{const S=await Q.post(`/dm/${l}`);if(S!=null&&S.groupId){const E=(n||[]).some(L=>L.groupId===S.groupId);r(L=>{var Oe;const $=L.find(X=>X.groupId===S.groupId),ne=$==null?void 0:$._lastAt,ue=($==null?void 0:$._unread)||0,pe=($==null?void 0:$._arrivedAt)||Se(S==null?void 0:S.createdAt)||Se((Oe=S==null?void 0:S.group)==null?void 0:Oe.createdAt)||Date.now();return $?L.map(X=>X.groupId===S.groupId?{...X,other:S.other,_unread:ue,_lastAt:ne??pe,_arrivedAt:pe}:X):[...L||[],{id:S.groupId,groupId:S.groupId,other:S.other,_unread:ue,_lastAt:ne??pe,_arrivedAt:pe}]}),d({id:S.groupId,name:((x=S.other)==null?void 0:x.name)||"Direto",avatarUrl:((N=S.other)==null?void 0:N.avatarUrl)||void 0}),yn();return}}catch(S){j(S.message||"Falha ao abrir conversa");return}j("Nao foi possivel iniciar a conversa")}c.useEffect(()=>{jl.current=(i==null?void 0:i.id)||null},[i==null?void 0:i.id]),c.useEffect(()=>{if(!i)return;let l=()=>{};return(async()=>{var Oe;const u=i.id;Jr(null),Ps(!1),Ma(!1);const p=bl.current[u];(Oe=p==null?void 0:p.messages)!=null&&Oe.length?(m(p.messages),Jr(p.historyCursor||null),Ps(!!p.historyHasMore)):m([]);const{items:x,nextCursor:N,hasMore:S}=await zl(u);if(jl.current!==u)return;m(X=>{const ie=Array.isArray(X)?X:[];if(!ie.length)return x;const ve=new Set(ie.map(We=>We.id)),yt=[...ie];return x.forEach(We=>{ve.has(We.id)||yt.push(We)}),yt.sort((We,Xt)=>Se(We==null?void 0:We.createdAt)-Se(Xt==null?void 0:Xt.createdAt)),yt}),Jr(N),Ps(S);try{await Q.post(`/messages/${u}/read`,{})}catch{}t(X=>X.map(ie=>ie.id===u?{...ie,_unread:0,_mentions:0}:ie)),r(X=>X.map(ie=>ie.groupId===u?{...ie,_unread:0}:ie));const E=Zn();try{E.off("message:new")}catch{}try{E.off("message:deleted")}catch{}E.emit("group:join",u);const L=X=>{var Xt;const ie=(((Xt=X.author)==null?void 0:Xt.id)||X.authorId)===(K==null?void 0:K.id),ve=X.groupId===u,yt=!!(Z!=null&&Z[X.groupId])||(Fc[X.groupId]?!!(Z!=null&&Z[Fc[X.groupId]]):!1),We=(()=>{try{return(!Ja||document.hidden)&&!ie}catch{return!ie}})();if(ve&&!ie)try{Q.post(`/messages/${u}/read`,{})}catch{}if(We)try{Ec(X)}catch{}Us(X,{mine:ie}),Bl(),ve&&m(is=>{var mo;return(is||[]).some(Qn=>Qn.id===X.id)?is:(mo=X.replyTo)!=null&&mo.id?is.map(Qn=>{var xo;return Qn.id===X.replyTo.id?{...Qn,_count:{replies:(((xo=Qn._count)==null?void 0:xo.replies)||0)+1}}:Qn}).concat(X):[...is,X]});try{!ie&&!yt&&Pl()}catch{}},$=X=>{(X==null?void 0:X.groupId)===u&&m(ie=>ie.map(ve=>ve.id===X.id?X:ve))},ne=X=>{(X==null?void 0:X.groupId)!==u||!(X!=null&&X.messageId)||m(ie=>ie.map(ve=>ve.id===X.messageId?{...ve,reactionSummary:X.summary||[]}:ve))},ue=X=>{try{if(!X||X.groupId!==u)return;const ie=Array.isArray(X.ids)?X.ids:[],ve=X.userId;if(!ve||!ie.length)return;m(yt=>yt.map(We=>ie.includes(We.id)?{...We,reads:(We.reads||[]).some(Xt=>Xt.userId===ve)?We.reads||[]:[...We.reads||[],{userId:ve}]}:We))}catch{}},pe=X=>{X.groupId===u&&m(ie=>ie.map(ve=>ve.id===X.id?{...ve,deletedAt:X.deletedAt}:ve))};E.on("message:new",L),E.on("message:updated",$),E.on("message.reaction.updated",ne),E.on("messages:read",ue),E.on("message:deleted",pe),l=()=>{Le(null),Un(null),E.off("message:new",L),E.off("message:updated",$),E.off("message.reaction.updated",ne),E.off("messages:read",ue),E.off("message:deleted",pe),E.emit("group:leave",u)}})(),()=>l()},[i==null?void 0:i.id,zl]),c.useEffect(()=>{if(i!=null&&i.id)try{localStorage.setItem("chat_active",i.id)}catch{}},[i==null?void 0:i.id]),c.useEffect(()=>{Un(null)},[i==null?void 0:i.id]),c.useEffect(()=>{if(!Yr)return;const l=u=>{const p=u.target,x=p instanceof Element?p.closest("[data-reaction-button]"):null;(x==null?void 0:x.getAttribute("data-reaction-button"))!==Yr&&(za.current&&p instanceof Node&&za.current.contains(p)||Un(null))};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[Yr]),c.useEffect(()=>{kl()},[h,i==null?void 0:i.id,kl]),c.useEffect(()=>{if(!(i!=null&&i.id))return;const l=bl.current,u=Array.isArray(h)?h.slice(-500):[];l[i.id]={messages:u,historyCursor:Zr,historyHasMore:xn,updatedAt:Date.now()};const p=Object.keys(l);p.length>Vp&&p.sort((x,N)=>{var S,E;return(((S=l[x])==null?void 0:S.updatedAt)||0)-(((E=l[N])==null?void 0:E.updatedAt)||0)}).slice(0,p.length-Vp).forEach(x=>{delete l[x]})},[h,i==null?void 0:i.id,Zr,xn]);const[mr,Vl]=c.useState(!1);async function Uc(l){var p,x,N;if(l&&l.preventDefault&&l.preventDefault(),j(""),!i||mr)return;let u=!1;try{Vl(!0);const S=!!(v||"").trim(),E=k.length>0,L=(g==null?void 0:g.id)||null;if(S){const $=v,ne=/^(https?:\/\/\S+)/i.test($),ue=$.toLowerCase(),pe=ne&&/(\.gif($|\?))/i.test(ue),Oe=ne&&/(\.png|\.jpg|\.jpeg|\.webp|\.bmp|\.svg)($|\?)/i.test(ue),X=pe?"gif":Oe?"image":"text",ie=await Q.post(`/messages/${i.id}`,{type:X,content:$,replyToId:L});m(ve=>(ve||[]).some(yt=>yt.id===ie.id)?ve:[...ve,ie]),Us(ie,{mine:!0}),Bl(),b(""),Mt(!1),$t(""),St.current=null,u=!0}if(E){for(const $ of k){const ne=$==null?void 0:$.file;if(!ne)continue;const ue=new FormData;ue.append("file",ne);let pe="file";(p=ne.type)!=null&&p.startsWith("audio")?pe="audio":(x=ne.type)!=null&&x.startsWith("image")&&(pe="image");const Oe=L?`&replyToId=${L}`:"",X=await Q.upload(`/messages/${i.id}/upload?type=${pe}${Oe}`,ue);m(ie=>(ie||[]).some(ve=>ve.id===X.id)?ie:[...ie,X]),Us(X,{mine:!0}),Bl(),u=!0}Cl()}(S||E)&&w(null)}catch(S){j(S.message||"Falha ao enviar mensagem")}finally{if(Vl(!1),u)try{(N=lr.current)==null||N.focus()}catch{}}}function qx(l){w(l)}async function Qx(l){if(confirm("Excluir esta mensagem?"))try{await Q.delete(`/messages/${l.id}`),m(u=>u.map(p=>p.id===l.id?{...p,deletedAt:new Date().toISOString()}:p))}catch(u){j(u.message||"Falha ao excluir")}}function Gx(l){const u=h.find(p=>{var x;return((x=p.replyTo)==null?void 0:x.id)===l.id});u&&$e(u.id)}c.useEffect(()=>{const l=(Wn||"").trim().toLowerCase();if(!l){no([]),ss(-1);return}const u=h.filter(p=>p&&!p.deletedAt&&p.type==="text"&&(p.content||"").toLowerCase().includes(l)).map(p=>p.id);if(no(u),u.length){ss(0);const p=document.getElementById(`msg-${u[0]}`);if(p)try{p.scrollIntoView({behavior:"smooth",block:"center"})}catch{}ge(u[0],1500)}else ss(-1)},[Wn,h,i==null?void 0:i.id,ge]);function Bc(l=!0){if(!Hn.length)return;let u=ro;u<0?u=0:u=(u+(l?1:-1)+Hn.length)%Hn.length,ss(u);const p=Hn[u],x=document.getElementById(`msg-${p}`);if(x)try{x.scrollIntoView({behavior:"smooth",block:"center"})}catch{}ge(p,1500)}function Kx(l){const u=lr.current;if(!u){b(S=>S+l);try{Ra(S=>{const E=[l,...(S||[]).filter(L=>L!==l)].slice(0,24);try{localStorage.setItem("chat_recent_emojis",JSON.stringify(E))}catch{}return E})}catch{}zr(!1);try{La("")}catch{}return}const p=u.selectionStart??v.length,x=u.selectionEnd??v.length,N=v.slice(0,p)+l+v.slice(x);b(N),requestAnimationFrame(()=>{u.focus();const S=p+l.length;try{u.setSelectionRange(S,S)}catch{}});try{Ra(S=>{const E=[l,...(S||[]).filter(L=>L!==l)].slice(0,24);try{localStorage.setItem("chat_recent_emojis",JSON.stringify(E))}catch{}return E})}catch{}zr(!1);try{La("")}catch{}}async function Zx(){if(I(""),!C)try{cr&&oh();const l=await navigator.mediaDevices.getUserMedia({audio:!0});Oa.current=l;const u=window.MediaRecorder&&MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",p=new MediaRecorder(l,{mimeType:u});$a.current=p;const x=[];p.ondataavailable=N=>{N.data&&N.data.size>0&&x.push(N.data)},p.onstop=()=>{try{if(!x.length){I("Nenhum udio foi capturado");return}const N=new Blob(x,{type:u}),S=new File([N],`rec-${Date.now()}.webm`,{type:u});try{Ct&&URL.revokeObjectURL(Ct)}catch{}const E=URL.createObjectURL(N);Ua(S),Ba(E),I("")}catch(N){I(N.message||"Falha ao processar udio")}finally{ah()}},p.start(),Is.current=Date.now(),R(!0),B(0)}catch{I("Acesso ao microfone negado ou indisponvel"),ah()}}function Jx(){var l;try{(l=$a.current)==null||l.stop()}catch{}}function ah(){var l,u;if(R(!1),vt.current){try{clearInterval(vt.current)}catch{}vt.current=null}B(0),Is.current=null;try{(u=(l=Oa.current)==null?void 0:l.getTracks)==null||u.call(l).forEach(p=>p.stop())}catch{}Oa.current=null,$a.current=null}c.useEffect(()=>{if(!C){if(vt.current){try{clearInterval(vt.current)}catch{}vt.current=null}return}const l=Is.current??Date.now();Is.current=l;const u=()=>{const p=Math.max(0,Math.floor((Date.now()-l)/1e3));B(p)};if(u(),vt.current)try{clearInterval(vt.current)}catch{}return vt.current=setInterval(u,1e3),()=>{if(vt.current){try{clearInterval(vt.current)}catch{}vt.current=null}}},[C]),c.useEffect(()=>{const l=On.current;if(l)try{l.pause(),l.currentTime=0}catch{}return Ot(!1),Ct||ur(""),()=>{try{Ct&&URL.revokeObjectURL(Ct)}catch{}}},[Ct]);const Yx=()=>{const l=On.current;if(!l)return;const u=fb(l.duration);ur(u)},Xx=()=>{const l=On.current;if(l)try{l.pause(),l.currentTime=0}catch{}Ot(!1)},eg=()=>{Ot(!1)},tg=()=>{if(mr)return;const l=On.current;l&&(Ts?l.pause():l.play().then(()=>Ot(!0)).catch(()=>Ot(!1)))};async function ng(){if(!(!cr||!(i!=null&&i.id)))try{Vl(!0);const l=new FormData;l.append("file",cr);const u=await Q.upload(`/messages/${i.id}/upload?type=audio`,l);m(x=>x.some(N=>N.id===u.id)?x:[...x,u]),Us(u,{mine:!0}),Bl();const p=On.current;if(p)try{p.pause(),p.currentTime=0}catch{}Ot(!1),Ua(null),I("");try{Ct&&URL.revokeObjectURL(Ct)}catch{}Ba(""),ur("")}catch(l){I((l==null?void 0:l.message)||"Falha ao Enviar udio")}finally{Vl(!1)}}function oh(){const l=On.current;if(l)try{l.pause(),l.currentTime=0}catch{}Ot(!1),Ua(null),I("");try{Ct&&URL.revokeObjectURL(Ct)}catch{}Ba(""),ur("")}function lh(l=ke,{force:u=!1}={}){const p=l||{};if((u||!Dc)&&Qf((p==null?void 0:p.name)||""),(u||!so)&&Gf((p==null?void 0:p.phone)||""),(u||!ao)&&Kf((p==null?void 0:p.address)||""),u||!_c)try{const x=localStorage.getItem("profile_status");Fl(x!==null?x:(p==null?void 0:p.status)||"")}catch{Fl((p==null?void 0:p.status)||"")}}async function ih(l=!1){try{q(!0);const u=await Q.get("/users/me");Il(u||{}),lh(u,{force:l}),qn(""),as("")}catch{qn("Falha ao carregar perfil")}finally{q(!1)}}function rg(){var u;y(!0);const l=i==null?void 0:i.id;if(l){const p=n.find(x=>x.groupId===l);if((u=p==null?void 0:p.other)!=null&&u.id){const x=(a||[]).find(N=>N.id===p.other.id)||p.other;be("contact"),Fx(x||null),(async()=>{try{$f(!0),Uf("");const N=await Q.get(`/users/${p.other.id}/shared-groups`);Mf(Array.isArray(N)?N:[])}catch(N){Uf((N==null?void 0:N.message)||"Falha ao carregar grupos em comum"),Mf([])}finally{$f(!1)}})(),Vs("perfil"),q(!1),qn(""),as("");return}be("group"),Vs("perfil"),q(!1),qn(""),as(""),(async()=>{try{Wf(!0),qf("");const x=await Q.get(`/groups/${l}/participants`);zf(Array.isArray(x)?x:[])}catch(x){qf((x==null?void 0:x.message)||"Falha ao carregar participAes"),zf([])}finally{Wf(!1)}})();return}be("self"),ih(!0)}async function sg(){try{qn(""),as("");const l=new FormData;l.append("name",Dc||""),so!=null&&l.append("phone",so),ao!=null&&l.append("address",ao),oo&&l.append("avatar",oo),await Q.uploadPatch("/users/me",l);try{localStorage.setItem("profile_status",_c||"")}catch{}as("Perfil atualizado"),Ml(null),ih(!0)}catch(l){qn((l==null?void 0:l.message)||"Falha ao salvar perfil")}}async function ag(){try{if(qn(""),as(""),!Ac||!Rc){qn("Preencha senha atual e nova");return}await Q.post("/users/me/password",{current:Ac,password:Rc}),as("Senha atualizada"),Zf(""),Jf("")}catch(l){qn((l==null?void 0:l.message)||"Falha ao alterar senha")}}const[ho,og]=c.useState(!1),[po,lg]=c.useState(!1),ig=c.useMemo(()=>{const l=new Set;return(n||[]).forEach(u=>{u!=null&&u.groupId&&l.add(u.groupId)}),l},[n]),zc=c.useMemo(()=>{const l={};return(e||[]).forEach((u,p)=>{u!=null&&u.id&&(l[u.id]=p)}),l},[e]),cg=c.useMemo(()=>{const l=rt.trim().toLowerCase();let u=l?e.filter(p=>(p.name||"").toLowerCase().includes(l)):e;return u=u.filter(p=>(p==null?void 0:p.id)&&!ig.has(p.id)),ho&&(u=u.filter(p=>!!(_!=null&&_[p.id]))),po&&(u=u.filter(p=>ee(p._unread||0,p.id)>0)),[...u].sort((p,x)=>{const N=!!(_!=null&&_[p.id]),S=!!(_!=null&&_[x.id]);if(N!==S)return N?-1:1;const E=zc[p.id]??Number.MAX_SAFE_INTEGER,L=zc[x.id]??Number.MAX_SAFE_INTEGER;return E-L})},[e,rt,_,ho,po,zc,Ll,ee]),Vc=c.useMemo(()=>{const l={};return(n||[]).forEach(u=>{var x;const p=(x=u==null?void 0:u.other)==null?void 0:x.id;p&&(l[p]=u)}),l},[n]),ug=c.useMemo(()=>{const l={};return(a||[]).forEach((u,p)=>{u!=null&&u.id&&(l[u.id]=p)}),l},[a]),Wc=c.useMemo(()=>{const l={};return(n||[]).forEach((u,p)=>{var N;const x=(N=u==null?void 0:u.other)==null?void 0:N.id;x&&(l[x]=p)}),l},[n]),xr=c.useMemo(()=>{const l=i==null?void 0:i.id;return l?(n||[]).some(u=>u.groupId===l):!1},[i==null?void 0:i.id,n]);c.useEffect(()=>{const l=i==null?void 0:i.id;if(!l||xr){Tl([]);return}const u=Fa.current[l];if(u){Tl(u);return}(async()=>{try{const p=await Q.get(`/groups/${l}/participants`),x=Array.isArray(p)?p.map(N=>N.user||N).filter(Boolean):[];Fa.current[l]=x,Tl(x)}catch{Tl([])}})()},[i==null?void 0:i.id,xr]);const Wl=c.useMemo(()=>i!=null&&i.id?xr?fo||Ol||null:i.id:null,[i==null?void 0:i.id,xr,fo,Ol]),dg=!!(Wl&&(_!=null&&_[Wl])),fg=c.useMemo(()=>{var l;if(!i)return"Selecione um grupo";if(xr){const u=(n||[]).find(x=>x.groupId===i.id),p=(l=u==null?void 0:u.other)==null?void 0:l.name;if(p)return p}return(i==null?void 0:i.name)||"Direto"},[i,xr,n]),hg=c.useMemo(()=>{var l;if(i){if(i.avatarUrl)return i.avatarUrl;if(xr){const u=(n||[]).find(p=>p.groupId===i.id);if((l=u==null?void 0:u.other)!=null&&l.avatarUrl)return u.other.avatarUrl}}},[i,xr,n]),pg=c.useMemo(()=>{const l=rt.trim().toLowerCase();let u=l?a.filter(p=>(p.name||"").toLowerCase().includes(l)):a;return ho&&(u=u.filter(p=>!!(_!=null&&_[p.id]))),po&&(u=u.filter(p=>{const x=Vc[p.id];return ee((x==null?void 0:x._unread)||0,x==null?void 0:x.groupId)>0})),[...u].sort((p,x)=>{const N=!!(_!=null&&_[p.id]),S=!!(_!=null&&_[x.id]);if(N!==S)return N?-1:1;const E=Wc[p.id]??Number.MAX_SAFE_INTEGER,L=Wc[x.id]??Number.MAX_SAFE_INTEGER;return E-L})},[a,n,rt,po,ho,_,Vc,ug,Wc,Ll,ee]);return c.useEffect(()=>{(async()=>{var l;try{const u=(e||[]).filter(x=>x&&x.id&&(x._lastAt===void 0||x._lastAt===null||x._lastPreview===void 0));if(!u.length)return;const p={};for(const x of u)try{const S=cs(await Q.get(`/messages/${x.id}?take=1`))[0]||null,E=S!=null&&S.createdAt?new Date(S.createdAt).getTime():0,L=(((l=S==null?void 0:S.author)==null?void 0:l.id)||(S==null?void 0:S.authorId))===(K==null?void 0:K.id);let $="";S&&(S.type==="text"?$=S.content||"":Bt(S)?$="Imagem":S.type==="audio"?$="udio":$="Anexo",L&&($=`Voc: ${$}`)),p[x.id]={last:E,prev:$,received:L?Se(x._lastReceivedAt):E}}catch{}Object.keys(p).length&&t(x=>(x||[]).map(N=>p[N.id]!==void 0?{...N,_lastAt:p[N.id].last,_lastPreview:p[N.id].prev,_lastReceivedAt:p[N.id].received}:N))}catch{}})()},[e,K==null?void 0:K.id]),s.jsxs("div",{className:"relative flex h-full min-h-full w-full overflow-x-hidden bg-slate-50 dark:bg-slate-950",children:[fr&&s.jsx("div",{className:"absolute left-1/2 top-3 z-50 -translate-x-1/2 rounded bg-amber-100 px-4 py-2 text-sm text-amber-800 shadow",children:fr}),pl&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-700 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Encaminhar mensagem"}),s.jsx("div",{className:"font-medium truncate max-w-[360px]",children:(pn==null?void 0:pn.content)||"(vazia)"})]}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:hover:text-white",onClick:()=>{Ds(!1),Es(null),In(""),or("")},children:s.jsx(Qs,{})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700",children:s.jsx("input",{type:"text",value:_s,onChange:l=>or(l.target.value),placeholder:"Buscar conversa ou usurio",className:"w-full rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),s.jsx("div",{className:"max-h-80 overflow-y-auto divide-y divide-slate-100 dark:divide-slate-800",children:Pa.length?Pa.map(l=>s.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-800",onClick:()=>ml(l.id),disabled:Ea,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:l.name}),!l.isDM&&s.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:"Grupo"})]}),Ea&&s.jsx("span",{className:"text-xs text-slate-500",children:"Enviando..."})]},l.id)):s.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Nenhum destino disponvel."})}),_a&&s.jsx("div",{className:"px-4 py-2 text-sm text-red-600 border-t border-red-100 bg-red-50 dark:border-red-800 dark:bg-red-900/30",children:_a})]})}),Bn&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",onClick:es,children:s.jsxs("div",{className:"relative max-h-[90vh] max-w-[92vw] rounded-lg bg-white p-2 shadow-lg",onClick:l=>l.stopPropagation(),children:[s.jsx("button",{type:"button",onClick:es,className:"absolute right-2 top-2 rounded-full bg-white/90 p-1 text-slate-700 shadow hover:bg-white","aria-label":"Fechar imagem",children:s.jsx(Qs,{})}),s.jsx("div",{className:"max-h-[86vh] max-w-[88vw] overflow-auto flex items-center justify-center",onWheel:Nc,children:s.jsx("img",{src:Bn.url,alt:Bn.name||"imagem",className:"rounded object-contain bg-slate-100",style:{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto",transform:`scale(${Xr})`,transformOrigin:"center"}})}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2 border-t border-slate-200 pt-2 text-xs text-slate-500 dark:border-slate-800 dark:text-slate-400",children:[s.jsxs("span",{children:["Zoom ",Math.round(Xr*100),"%",s.jsx("span",{className:"ml-2 text-[11px] text-slate-400 dark:text-slate-500",children:"(Roda do mouse)"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{type:"button",onClick:()=>$s(-fi),disabled:Xr<=Px,className:"px-2 py-0.5 rounded border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-60 text-[11px]","aria-label":"Diminuir zoom",children:"-"}),s.jsx("button",{type:"button",onClick:()=>Ms(1),disabled:Xr===1,className:"px-2 py-0.5 rounded border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-60 text-[11px]","aria-label":"Resetar zoom",children:"100%"}),s.jsx("button",{type:"button",onClick:()=>$s(fi),disabled:Xr>=Ix,className:"px-2 py-0.5 rounded border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-60 text-[11px]","aria-label":"Aumentar zoom",children:"+"})]})]})]})}),!ls&&$l&&s.jsx("button",{type:"button",className:"fixed inset-0 z-30 bg-slate-900/30 backdrop-blur-[1px] lg:hidden","aria-label":"Fechar lista de conversas",onClick:()=>lo(!1)}),s.jsxs("div",{className:"flex flex-1 min-h-full min-w-0",children:[s.jsxs("aside",{id:"chat-left-pane",ref:th,className:`w-72 xl:w-80 max-w-full flex-shrink-0 flex h-full flex-col border-r ${fn} overflow-y-auto transition-transform duration-200 ease-out ${ls?"":"fixed inset-y-0 left-0 z-40 shadow-xl"} ${$l?"translate-x-0":"-translate-x-full"} lg:static lg:shadow-none lg:translate-x-0`,children:[s.jsxs("div",{className:`px-3 py-2 border-b ${Ne?"border-slate-800 bg-slate-950/50 text-slate-200":"border-slate-200 bg-white text-slate-900"}`,children:[s.jsx("input",{value:rt,onChange:l=>wc(l.target.value),placeholder:"Buscar conversas...",className:`w-full border rounded px-3 py-1.5 text-sm ${Ne?"border-slate-700 bg-slate-900 text-slate-100 placeholder-slate-500":"border-slate-300 bg-white text-slate-900 placeholder-slate-500"}`}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border hover:bg-slate-50",onClick:()=>{var l;try{(l=document.getElementById("people-list"))==null||l.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},children:"Nova conversa"}),s.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:[s.jsx("input",{type:"checkbox",checked:ho,onChange:l=>og(l.target.checked)})," ","Fixadas"]}),s.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:[s.jsx("input",{type:"checkbox",checked:po,onChange:l=>lg(l.target.checked)})," ","No lidas"]})]})]}),s.jsxs("div",{className:`px-3 py-1.5 text-[10px] font-semibold uppercase tracking-wide sticky top-0 z-10 flex items-center justify-between ${Ne?"text-slate-400 bg-slate-950/70 border-slate-800":"text-slate-500 bg-white border-slate-200"}`,children:[s.jsx("span",{children:"Grupos"}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-transform",onClick:()=>Ux(l=>!l),"aria-label":io?"Expandir grupos":"Ocultar grupos",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${io?"-rotate-90":"rotate-0"}`,children:s.jsx("path",{d:"M8.47 4.97a.75.75 0 0 1 1.06 0l6 6a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06L13.94 12 8.47 6.53a.75.75 0 0 1 0-1.06Z"})})})]}),!io&&cg.map(l=>{const u=(l==null?void 0:l._lastAt)||0,p=u?new Date(u).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",x=(l==null?void 0:l._lastPreview)||"";_!=null&&_[l.id],Z!=null&&Z[l.id];const N=ee(l._unread||0,l.id),S=(l==null?void 0:l._mentions)||0;return s.jsxs("button",{onClick:()=>{d(l),yn()},onContextMenu:E=>{E.preventDefault(),E.stopPropagation(),Xe({open:!0,type:"group",id:l.id,groupId:l.id,x:E.clientX,y:E.clientY})},className:`px-3 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/60 border ${(i==null?void 0:i.id)===l.id?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600":"border-transparent hover:border-slate-200 dark:border-transparent dark:hover:border-slate-600"} flex items-center justify-between transition-colors`,title:l.name||"",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"truncate text-left",title:l.name||"",children:l.name}),p&&s.jsx("span",{className:"text-[11px] text-slate-500",children:p})]}),x&&s.jsx("div",{className:"text-slate-500 truncate max-w-[220px] text-xs",title:x,children:x})]}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[S>0&&s.jsx("span",{className:"ml-2 min-w-[20px] h-5 px-1.5 rounded-full bg-amber-500 text-white text-[11px] inline-flex items-center justify-center shadow",title:"Voc foi mencionado","aria-label":"Voc foi mencionado",children:"@"}),N>0&&s.jsx("span",{className:"ml-2 min-w-[22px] h-5 px-1.5 rounded-full bg-blue-600/90 text-white text-[11px] inline-flex items-center justify-center shadow",children:N})]})]},l.id)}),s.jsxs("div",{className:`px-3 py-1.5 text-[10px] font-semibold uppercase tracking-wide border-t sticky top-0 z-10 flex items-center justify-between ${Ne?"text-slate-400 bg-slate-950/70 border-slate-800":"text-slate-500 bg-white border-slate-200"}`,children:[s.jsx("span",{children:"Pessoas"}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-transform",onClick:()=>Bx(l=>!l),"aria-label":co?"Expandir pessoas":"Ocultar pessoas",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${co?"-rotate-90":"rotate-0"}`,children:s.jsx("path",{d:"M8.47 4.97a.75.75 0 0 1 1.06 0l6 6a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06L13.94 12 8.47 6.53a.75.75 0 0 1 0-1.06Z"})})})]}),!co&&s.jsx("div",{id:"people-list",className:"px-3 py-2 flex flex-col gap-1",children:pg.map(l=>{const u=Vc[l.id]||null,p=ee((u==null?void 0:u._unread)||0,u==null?void 0:u.groupId),x=(u==null?void 0:u._lastAt)||0,N=x?new Date(x).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",S=(u==null?void 0:u._lastPreview)||"";_!=null&&_[l.id];const E=!!(i!=null&&i.id&&(u!=null&&u.groupId)&&i.id===u.groupId);return s.jsxs("button",{onClick:()=>Hx(l.id),onContextMenu:L=>{L.preventDefault(),L.stopPropagation(),Xe({open:!0,type:"user",id:l.id,groupId:(u==null?void 0:u.groupId)||null,x:L.clientX,y:L.clientY})},className:`rounded-lg px-2 py-2 flex items-center justify-between gap-2 border transition-colors ${E?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600":"hover:bg-slate-50 dark:hover:bg-slate-700/60 border-transparent hover:border-slate-200 dark:hover:border-slate-600"}`,children:[s.jsxs("span",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(Eu,{url:l.avatarUrl,name:l.name,size:40,status:Vx[l.id]||l.status,showStatus:!0}),s.jsxs("span",{className:"flex flex-col items-start min-w-0",children:[s.jsx("span",{className:"truncate font-medium text-sm",title:l.name||"",children:l.name}),l.status&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full border ${String(l.status).toLowerCase()==="online"?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:l.status}),S&&s.jsx("span",{className:"truncate text-xs text-slate-500 max-w-[180px]",title:S,children:S})]})]}),s.jsxs("span",{className:"flex items-center gap-2 shrink-0",children:[N&&s.jsx("span",{className:"text-[11px] text-slate-500",children:N}),p>0&&s.jsx("span",{className:"min-w-[22px] h-5 px-1.5 rounded-full bg-blue-600/90 text-white text-[11px] inline-flex items-center justify-center shadow",children:p}),!!(_!=null&&_[l.id])&&s.jsx(Su,{className:"w-4 h-4 text-amber-500"})]})]},l.id)})})]}),(oe==null?void 0:oe.open)&&s.jsxs("div",{ref:Hr,className:`fixed z-50 w-48 rounded shadow ${ar} border ${Ne?"shadow-slate-900/60":"shadow-lg"}`,style:{top:Math.max(8,oe.y),left:Math.max(8,oe.x)},role:"menu",children:[oe.type==="user"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{oe!=null&&oe.id&&ct(oe.id),Xe(l=>({...l,open:!1}))},children:[s.jsx(Ip,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:_!=null&&_[oe.id]?"Desafixar":"Fixar"})]}),s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{const l=oe.groupId||oe.id;l&&Zt(l),Xe(u=>({...u,open:!1}))},children:[s.jsx(Tp,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:(()=>{const l=oe.groupId||oe.id;return Z!=null&&Z[l]?"Reativar som":"Silenciar"})()})]}),oe.groupId&&s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{ye(oe.groupId),Xe(l=>({...l,open:!1}))},children:[s.jsx(Fp,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:"Marcar como no lida"})]}),oe.groupId&&V(oe.groupId)&&s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{Tt(oe.groupId),Xe(l=>({...l,open:!1}))},children:[s.jsx(Mp,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:"Marcar como lida"})]})]}),oe.type==="group"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{oe!=null&&oe.id&&ct(oe.id),Xe(l=>({...l,open:!1}))},children:[s.jsx(Ip,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:_!=null&&_[oe.id]?"Desafixar":"Fixar"})]}),s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{oe!=null&&oe.id&&Zt(oe.id),Xe(l=>({...l,open:!1}))},children:[s.jsx(Tp,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:Z!=null&&Z[oe.id]?"Reativar som":"Silenciar"})]}),!!(oe!=null&&oe.id)&&s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{ye(oe.id),Xe(l=>({...l,open:!1}))},children:[s.jsx(Fp,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:"Marcar como no lida"})]}),!!(oe!=null&&oe.id)&&V(oe.id)&&s.jsxs("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm transition-colors ${Ze}`,onClick:()=>{Tt(oe.id),Xe(l=>({...l,open:!1}))},children:[s.jsx(Mp,{className:`w-4 h-4 ${ut}`}),s.jsx("span",{className:"flex-1",children:"Marcar como lida"})]})]})]}),s.jsxs("div",{className:"relative flex-1 flex min-h-0 min-w-0 flex-col chat-bg border-r border-slate-900/40 bg-slate-100 dark:bg-slate-950/80",onDragOver:rs,onDragEnter:rs,onDragLeave:Qa,onDrop:Ga,children:[A&&s.jsx("div",{className:"absolute inset-0 z-20 rounded-xl border-2 border-dashed border-emerald-400 bg-emerald-50/70 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-700 dark:text-emerald-200 text-sm font-medium pointer-events-none",children:"Solte os arquivos aqui para anexar"}),s.jsxs("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 bg-gradient-to-r from-white/80 to-slate-50/80 dark:bg-slate-950/80 dark:border-slate-800 dark:from-slate-900/60 dark:to-slate-800/60 backdrop-blur font-medium flex items-center gap-2 shadow-sm",children:[!ls&&s.jsx("button",{type:"button",className:"lg:hidden inline-flex items-center justify-center rounded border border-slate-300 p-2 text-slate-600 hover:bg-slate-100","aria-label":"Abrir lista de conversas",onClick:()=>lo(!0),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:s.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})}),s.jsxs("button",{type:"button",className:"flex items-center gap-3 min-w-0 truncate text-left hover:underline",onClick:()=>rg(),title:"Abrir perfil",children:[s.jsx(Eu,{url:hg,name:(i==null?void 0:i.name)||"Selecione um grupo",size:36}),s.jsx("span",{className:"truncate font-semibold text-slate-700 dark:text-slate-200",children:fg})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded border border-slate-300 bg-white/90 px-2 py-1 shadow-sm dark:border-slate-600 dark:bg-slate-900/80",children:[!nh&&s.jsx("button",{type:"button",onClick:()=>{rh(!0),setTimeout(()=>{var l;try{(l=uo.current)==null||l.focus()}catch{}},10)},className:"text-slate-500 dark:text-slate-300 hover:text-slate-600 dark:hover:text-slate-100","aria-label":"Abrir busca de mensagens",children:s.jsx(Pp,{className:"h-4 w-4"})}),nh&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pp,{className:"h-4 w-4 text-slate-500 dark:text-slate-300"}),s.jsx("input",{ref:uo,value:Wn,onChange:l=>Bs(l.target.value),placeholder:"Buscar mensagens...",className:"w-64 border-0 bg-transparent text-sm text-slate-900 focus:outline-none focus:ring-0 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-300","aria-label":"Buscar mensagens",onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),Bc(!l.shiftKey))},autoFocus:!0}),s.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-300",children:Wn?Hn.length?`${ro+1}/${Hn.length}`:"0/0":"--"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded text-slate-600 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800/60",title:"Resultado anterior",onClick:()=>Bc(!1),children:s.jsx(K1,{})}),s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded text-slate-600 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800/60",title:"Prximo resultado",onClick:()=>Bc(!0),children:s.jsx(Z1,{})}),Wn&&s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded text-slate-600 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800/60",title:"Limpar busca",onClick:()=>Bs(""),children:s.jsx(Qs,{})})]}),s.jsx("button",{type:"button",onClick:()=>{rh(!1),Bs("")},className:"text-slate-500 dark:text-slate-300 hover:text-slate-600 dark:hover:text-slate-100","aria-label":"Fechar busca",children:s.jsx(Qs,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 text-slate-600 dark:text-slate-200 hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800/60",title:"Mais opes","aria-haspopup":"menu","aria-expanded":ts,onClick:()=>ns(l=>!l),children:s.jsx(J1,{})}),ts&&s.jsx("div",{ref:Ha,className:"absolute right-0 top-10 z-20 w-48 rounded border border-slate-200 bg-white shadow dark:border-slate-700 dark:bg-slate-900",role:"menu",children:s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm text-slate-900 hover:bg-slate-50 dark:text-slate-100 dark:hover:bg-slate-800",onClick:()=>{Wl&&ct(Wl),ns(!1)},role:"menuitem",children:dg?"Desafixar conversa":"Fixar conversa"})})]})]})]}),!i&&s.jsx("div",{className:"flex-1 grid place-items-center p-6",children:s.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-300",children:[s.jsx("div",{className:"mx-auto dark:bg-slate-700 grid place-items-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8 text-slate-400 dark:text-slate-300",children:s.jsx("path",{d:"M19.5 6.75v10.5A2.25 2.25 0 0 1 17.25 19.5H6.75A2.25 2.25 0 0 1 4.5 17.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5A2.25 2.25 0 0 1 19.5 6.75ZM8.25 9A.75.75 0 0 0 7.5 9.75v6a.75.75 0 0 0 1.5 0v-6A.75.75 0 0 0 8.25 9Zm4.5 0a.75.75 0 0 0-.75.75v6a.75.75 0 0 0 1.5 0v-6A.75.75 0 0 0 12.75 9Zm4.5.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"})})}),s.jsx("div",{className:"text-lg font-semibold",children:"Selecione uma conversa"}),s.jsx("div",{className:"text-sm",children:"Escolha um grupo ou contato  esquerda."})]})}),s.jsx("div",{ref:Kr,className:`flex-1 overflow-y-auto overflow-x-hidden overscroll-contain p-4 ${i?"":"hidden"}`,children:s.jsxs("div",{className:"flex min-h-full flex-col",children:[s.jsx("div",{className:"flex-1 min-h-[1px]","aria-hidden":!0}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[i&&(xn||$n)&&s.jsx("div",{className:"flex justify-center pb-2",children:s.jsx("button",{type:"button",onClick:Wx,disabled:$n,className:"px-4 py-1.5 rounded-full border border-slate-300 text-sm text-slate-600 hover:bg-slate-50 disabled:opacity-60 disabled:cursor-not-allowed",children:$n?"Carregando...":"Carregar mensagens anteriores"})}),h.map((l,u)=>{var ve,yt,We,Xt,is,mo,Qn,xo,uh;const p=(((ve=l.author)==null?void 0:ve.id)||l.authorId)===(K==null?void 0:K.id),x=p?"min-w-0 w-fit max-w-[min(75%,_600px)] bg-blue-600 text-white px-4 py-2.5 rounded-2xl rounded-tr-md shadow-md break-words":"min-w-0 w-fit max-w-[min(65%,_560px)] bg-white text-slate-800 px-4 py-2.5 rounded-2xl rounded-tl-md shadow-md border border-slate-200/60 break-words",N=p?"flex justify-end mb-2 items-end gap-1":"flex justify-start mb-2 items-end gap-1",S=h[u-1],E=!S||new Date(S.createdAt).toDateString()!==new Date(l.createdAt).toDateString(),L=(()=>{const Pe=new Date(l.createdAt),en=new Date,tn=st=>new Date(st.getFullYear(),st.getMonth(),st.getDate()),Hs=(tn(Pe)-tn(en))/864e5;return Hs===0?"Hoje":Hs===-1?"Ontem":Pe.toLocaleDateString("pt-BR")})(),$=(An==null?void 0:An.messageId)===l.id&&!!(i!=null&&i.id),ne=(yt=(l.reactionSummary||[]).find(Pe=>Pe.reactedByMe))==null?void 0:yt.emoji,ue=ne||"",pe=!!ne,Oe=p?"right-full -mr-2":"left-full ml-2",X=pe||Yr===l.id,ie=s.jsxs("div",{className:"relative flex items-center",children:[s.jsx("button",{type:"button","data-reaction-button":l.id,onClick:()=>Un(Pe=>Pe===l.id?null:l.id),title:pe?"Alterar reao":"Reagir com emoji",className:`h-7 w-7 flex items-center justify-center rounded-full shadow transition duration-150 text-base ${pe?"text-blue-600":"text-slate-600"} ${X?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"} group-hover:opacity-100 group-hover:pointer-events-auto`,children:ue}),Yr===l.id&&s.jsx("div",{ref:za,className:`absolute -top-12 z-20 flex items-center gap-1 rounded-full border border-slate-200 bg-white px-2 py-1 text-sm shadow-lg dark:border-slate-700 dark:bg-slate-900 ${Oe}`,children:xb.map(Pe=>s.jsx("button",{type:"button",onClick:()=>zx(l,Pe),className:"rounded-full px-2 py-1 text-base leading-none transition hover:bg-slate-100 dark:hover:bg-slate-800",children:Pe},Pe))})]});return s.jsxs("div",{id:`msg-${l.id}`,className:"w-full",children:[E&&s.jsx("div",{className:"max-w-32 mx-auto rounded-full text-center text-xs bg-sky-600  text-slate-100 my-2",children:L}),$&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs bg-amber-50 border border-amber-200 text-amber-700 rounded-full px-3 py-1 mb-2",children:[s.jsx("span",{className:"font-semibold",children:"Mensagens marcadas como no lidas"}),s.jsx("button",{type:"button",className:"text-amber-800 hover:underline font-medium",onClick:()=>W(i==null?void 0:i.id),children:"Marcar como lidas"})]}),s.jsxs("div",{className:`${N} group`,children:[!p&&s.jsx("div",{className:"mr-2",children:s.jsx(Eu,{url:(We=l.author)==null?void 0:We.avatarUrl,name:(Xt=l.author)==null?void 0:Xt.name,size:32})}),p&&ie,s.jsxs("div",{className:`${x} ${ae===l.id?"ring-2 ring-yellow-400":""} ${Wn&&l.type==="text"&&(l.content||"").toLowerCase().includes((Wn||"").toLowerCase())?"outline outline-2 outline-yellow-300":""}`,children:[!p&&s.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600",children:((is=l.author)==null?void 0:is.name)||"Contato"}),l.replyTo&&s.jsxs("button",{type:"button",onClick:()=>$e(l.replyTo.id),className:"mb-1 w-full text-left pl-2 border-l-4 border-blue-400 text-xs text-slate-600 hover:bg-blue-50 focus:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-300 rounded-sm transition dark:hover:bg-slate-800/60 dark:focus:bg-slate-800/90",title:"Abrir mensagem original",children:[s.jsx("div",{className:"font-medium",children:((mo=l.replyTo.author)==null?void 0:mo.name)||"Mensagem"}),s.jsx("div",{className:"truncate opacity-90",children:l.replyTo.type==="text"?l.replyTo.content:Bt(l.replyTo)?"Imagem":l.replyTo.type==="audio"?"udio":"Anexo"})]}),l.deletedAt?s.jsx("div",{className:"italic opacity-70",children:"Mensagem apagada"}):l.type==="text"?s.jsx(yb,{message:l,mine:p,onStartEdit:Pe=>{G(Pe.id),Yt(Pe.content||""),Le(null)},onSave:async(Pe,en)=>{try{const tn=await Q.patch(`/messages/${Pe.id}`,{content:en.trim()});m(Hs=>Hs.map(st=>st.id===Pe.id?tn:st)),G(""),Yt("")}catch(tn){j((tn==null?void 0:tn.message)||"Falha ao editar")}},onCancel:()=>{G(""),Yt("")},editingId:_e,editText:gt,setEditText:Yt}):Bt(l)?(()=>{const Pe=Dt(l.content),en=pr(l.content)||"imagem";return s.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[s.jsx("button",{type:"button",onClick:()=>Nl({url:Pe,name:en}),className:"inline-block max-w-[220px]","aria-label":"Abrir imagem",children:s.jsx("img",{src:Pe,alt:en,className:"max-w-full max-h-60 rounded shadow-sm object-contain bg-slate-100"})}),s.jsx("button",{type:"button",onClick:()=>El(Pe,en),className:"inline-flex items-center gap-1 rounded px-3 py-1 text-xs font-semibold text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-400 transition",children:"Baixar"})]})})():l.type==="audio"?s.jsx("audio",{src:Dt(l.content),controls:!0,className:"w-60"}):s.jsx("a",{className:"underline break-all",href:Dt(l.content),target:"_blank",rel:"noreferrer",title:pr(l.content)||"Abrir anexo",children:pr(l.content)||"Abrir anexo"}),s.jsxs("div",{className:"mt-1 text-[10px] opacity-80 flex items-center gap-2",children:[s.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),p&&(()=>{const Pe=(l.reads||[]).map(st=>st.userId);if(Ol){const st=Pe.includes(Ol),Hl=st?"Visualizada":"Entregue";return s.jsx(Cu,{read:st,title:Hl})}const en=Pe.filter(st=>st&&st!==(K==null?void 0:K.id));if(en.length===0)return s.jsx(Cu,{read:!1,title:"Entregue"});const tn=en.map(st=>{var Hl;return((Hl=(a||[]).find(mg=>mg.id===st))==null?void 0:Hl.name)||""}).filter(Boolean),Hs=tn.length?tn.join(", "):`Visto por ${en.length}`;return s.jsx(Cu,{read:!0,title:Hs})})(),s.jsx("button",{type:"button",title:Ws(l.id)?"Remover favorito":"Favoritar",onClick:()=>Tc(l),className:`${Ws(l.id)?"text-yellow-400":"text-slate-300 hover:text-slate-500"} transition-colors`,children:s.jsx(Su,{className:"w-4 h-4",filled:Ws(l.id)})})]})]}),!p&&ie,s.jsxs("div",{className:"ml-1 relative",ref:Ke===l.id?M:null,children:[s.jsx("button",{type:"button",className:"opacity-0 group-hover:opacity-100 p-1 text-slate-500 hover:text-slate-700",onClick:()=>{Un(null),Le(Ke===l.id?null:l.id)},"aria-label":"Aes",children:"..."}),Ke===l.id&&s.jsxs("div",{className:`absolute right-0 mt-1 rounded shadow text-sm z-10 border ${Ss}`,children:[s.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-1.5 transition-colors ${Rn}`,onClick:()=>{Le(null),qx(l)},children:[s.jsxs("svg",{className:`w-4 h-4 ${xt}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M10 19l-7-7 7-7"}),s.jsx("path",{d:"M3 12h12a6 6 0 0 1 6 6v1"})]}),s.jsx("span",{children:"Responder"})]}),(((Qn=l.author)==null?void 0:Qn.id)||l.authorId)===(K==null?void 0:K.id)&&l.type==="text"&&!l.deletedAt&&s.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-1.5 transition-colors ${Rn}`,onClick:()=>{G(l.id),Yt(l.content||""),Le(null)},children:[s.jsxs("svg",{className:`w-4 h-4 ${xt}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M12 20h9"}),s.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4Z"})]}),s.jsx("span",{children:"Editar"})]}),s.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-1.5 transition-colors ${Rn}`,onClick:()=>{Le(null),Tc(l)},children:[s.jsx(Su,{className:`w-4 h-4 ${Ws(l.id)?"text-yellow-400":xt}`,filled:Ws(l.id)}),s.jsx("span",{children:"Favoritar"})]}),!l.deletedAt&&s.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-1.5 transition-colors ${Rn}`,onClick:()=>{Es(l),In(""),or(""),Ds(!0),Le(null)},children:[s.jsxs("svg",{className:`w-4 h-4 ${xt}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M4 12h12"}),s.jsx("path",{d:"M12 6l6 6-6 6"})]}),s.jsx("span",{children:"Encaminhar"})]}),(((xo=l.author)==null?void 0:xo.id)||l.authorId)===(K==null?void 0:K.id)&&s.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-1.5 transition-colors ${Ne?"text-red-400 hover:bg-red-900/40":"text-red-600 hover:bg-red-50"}`,onClick:()=>{Le(null),Qx(l)},children:[s.jsxs("svg",{className:`w-4 h-4 ${xt}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 6h18"}),s.jsx("path",{d:"M8 6V4h8v2"}),s.jsx("path",{d:"M19 6l-1 14H6L5 6"}),s.jsx("path",{d:"M10 11v6"}),s.jsx("path",{d:"M14 11v6"})]}),s.jsx("span",{children:"Apagar"})]}),((uh=l._count)==null?void 0:uh.replies)>0&&s.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{Le(null),Gx(l)},children:"Ir para respostas"})]})]})]})]},l.id)})]})]})}),g&&s.jsxs("div",{className:"px-3 py-2 border-t border-slate-200 bg-slate-50 flex items-start gap-2",children:[s.jsxs("div",{className:"border-l-4 border-blue-500 pl-2 text-sm text-slate-700 flex-1",children:[s.jsxs("div",{className:"font-medium",children:["Respondendo ",((ch=g.author)==null?void 0:ch.name)||"mensagem"]}),s.jsx("div",{className:"truncate",children:g.type==="text"?g.content:Bt(g)?"Imagem":g.type==="audio"?"udio":"Anexo"})]}),s.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>w(null),children:"Cancelar"}),C&&!((v||"").trim()||k.length)&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",H>0?`${H}s`:"REC"]})]}),cr&&s.jsxs("div",{className:"px-3 py-2 border-t border-slate-200 bg-white dark:bg-slate-900",children:[s.jsx("audio",{ref:On,src:Ct,onLoadedMetadata:Yx,onEnded:Xx,onPause:eg,onPlay:()=>Ot(!0),className:"hidden",preload:"metadata"}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:tg,className:`inline-flex items-center justify-center w-9 h-9 rounded-full transition ${Ts?"bg-red-600 text-white hover:bg-red-500":"bg-slate-200 text-slate-600 hover:bg-slate-300"}`,"aria-label":Ts?"Pausar pr-escuta":"Reproduzir pr-escuta",disabled:mr,children:Ts?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M7 5.25h2.5c.414 0 .75.336.75.75v12a.75.75 0 0 1-.75.75H7a.75.75 0 0 1-.75-.75V6A.75.75 0 0 1 7 5.25Zm7.5 0H17c.414 0 .75.336.75.75v12a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1-.75-.75V6a.75.75 0 0 1 .75-.75Z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M5.87 3.52 18.5 10.3a1.5 1.5 0 0 1 0 2.6L5.87 19.68A1.5 1.5 0 0 1 3.5 18.5V5.5a1.5 1.5 0 0 1 2.37-1.98Z"})})}),s.jsxs("div",{className:"flex flex-col leading-tight text-right min-w-[120px]",children:[s.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Pr-escuta do udio"}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:Va?`Durao ${Va}`:cr?`Tamanho ${(cr.size/(1024*1024)).toFixed(1)} MB`:""})]}),s.jsx("button",{type:"button",onClick:ng,disabled:mr,className:"inline-flex items-center justify-center w-9 h-9 rounded-full bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 transition","aria-label":"Enviar udio",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M2.31 20.87 22 12 2.31 3.13a.75.75 0 0 0-.98.97L4.7 11.1c.1.25.1.53 0 .78l-3.37 7a.75.75 0 0 0 .98.98Z"})})}),s.jsx("button",{type:"button",onClick:oh,className:"inline-flex items-center justify-center w-9 h-9 rounded-full bg-slate-100 text-slate-600 hover:bg-red-50 hover:text-red-600 transition","aria-label":"Excluir udio",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M9 3.75A.75.75 0 0 1 9.75 3h4.5a.75.75 0 0 1 .75.75V5h3a.75.75 0 0 1 0 1.5h-.522l-.73 12.035A2.25 2.25 0 0 1 14.508 20H9.492a2.25 2.25 0 0 1-2.19-1.965L6.57 6.5H6a.75.75 0 0 1 0-1.5h3V3.75Zm1.5 3.75a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Zm4.5 0a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Z"})})})]})]}),k.length>0&&s.jsx("div",{className:"px-3 py-2 border-t border-slate-200 bg-white dark:bg-slate-900 flex flex-wrap gap-3 flex-wrap",children:k.map(l=>{var u,p,x;return s.jsxs("div",{className:"flex items-center gap-3 border border-slate-200 dark:border-slate-700 rounded-lg px-2 py-1.5 bg-slate-50 dark:bg-slate-800/50",children:[l.preview?s.jsx("img",{src:l.preview,alt:l.file.name,className:"w-16 h-16 object-cover rounded border border-slate-200 dark:border-slate-600"}):s.jsx("div",{className:"w-16 h-16 flex items-center justify-center rounded border border-dashed border-slate-300 bg-slate-100 dark:bg-slate-700/40 text-[11px] font-semibold text-slate-600 dark:text-slate-200",children:(u=l.file.type)!=null&&u.startsWith("audio")?"udio":(p=l.file.type)!=null&&p.startsWith("Vdeo")?"Vdeo":(x=l.file.type)!=null&&x.includes("pdf")?"PDF":"Arquivo"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"truncate text-xs font-medium text-slate-700 dark:text-slate-200",title:l.file.name,children:l.file.name}),s.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:[((l.file.size||0)/(1024*1024)).toFixed(2)," MB"]})]}),s.jsx("button",{type:"button",className:"text-slate-500 hover:text-red-600 text-sm",onClick:()=>Sl(l.id),"aria-label":`Remover anexo ${l.file.name}`,children:"Remover"})]},l.id)})}),s.jsxs("form",{ref:Wr,onSubmit:Uc,onDragOver:rs,onDragEnter:rs,onDragLeave:Qa,onDrop:Ga,className:`chat-composer relative flex flex-col gap-2 p-3 border-t border-slate-200/70 bg-white/90 dark:bg-slate-900/70 backdrop-blur ${i?"":"hidden"}`,children:[A&&s.jsx("div",{className:"absolute inset-0 z-10 rounded-xl border-2 border-dashed border-emerald-400 bg-emerald-50/80 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-700 dark:text-emerald-200 text-sm font-medium pointer-events-none",children:"Solte os arquivos aqui para anexar"}),ir&&os.length>0&&s.jsx("div",{className:`absolute bottom-16 z-20 rounded-xl border shadow-lg ${Ne?"border-slate-700 bg-slate-900/90 text-slate-100":"border-slate-200 bg-white text-slate-900"}`,style:{left:(Fn==null?void 0:Fn.left)??12,width:(Fn==null?void 0:Fn.width)??"auto"},children:s.jsx("div",{className:"max-h-52 overflow-y-auto py-1",children:os.map((l,u)=>{const p=l.user||l,x=u===jc;return s.jsxs("button",{type:"button",onClick:()=>Al(p),className:`w-full flex items-center gap-2 px-3 py-2 text-left text-sm ${x?Ne?"bg-slate-700 text-slate-100":"bg-blue-50 text-blue-700":Ne?"hover:bg-slate-800 text-slate-200":"hover:bg-slate-50 text-slate-900"}`,children:[s.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center shrink-0",children:p!=null&&p.avatarUrl?s.jsx("img",{src:Dt(p.avatarUrl),alt:p.name||"avatar",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-[10px] text-slate-500",children:((p==null?void 0:p.name)||"?").slice(0,1).toUpperCase()})}),s.jsx("span",{className:"truncate",children:(p==null?void 0:p.name)||"Usurio"})]},p.id||u)})})}),s.jsxs("div",{className:"flex w-full items-center gap-2 flex-wrap md:flex-nowrap",children:[s.jsx("button",{type:"button",ref:Ca,onClick:()=>Pn?zr(!1):Ft(),title:"Emojis",className:"flex-shrink-0 px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Emojis",children:s.jsx(Y1,{className:"w-5 h-5"})}),s.jsxs("button",{type:"button",onClick:()=>{var l;try{Tn.current&&(Tn.current.value="")}catch{}(l=Tn.current)==null||l.click()},title:"Anexar",className:"inline-flex shrink-0 items-center justify-center p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Anexar",style:{fontSize:0},children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:s.jsx("path",{d:"M21.44 11.05l-9.19 9.19a5 5 0 11-7.07-7.07l9.19-9.19a3 3 0 114.24 4.24l-9.19 9.19a1 1 0 11-1.41-1.41l8.49-8.49"})}),s.jsx("span",{className:"sr-only",children:"Anexar arquivo"})]}),s.jsx("input",{ref:Tn,type:"file",multiple:!0,accept:"*/*",onChange:l=>{const u=Array.from(l.target.files||[]);qa(u)},className:"hidden"}),s.jsx("textarea",{ref:lr,value:v,onChange:l=>{const u=l.target.value;b(u),Xa(u,l.target.selectionStart)},onKeyDown:l=>{if(ir&&os.length){if(l.key==="ArrowDown"){l.preventDefault(),wl(u=>(u+1)%os.length);return}if(l.key==="ArrowUp"){l.preventDefault(),wl(u=>(u-1+os.length)%os.length);return}if(l.key==="Enter"||l.key==="Tab"){l.preventDefault(),Al(os[jc]||null);return}if(l.key==="Escape"){l.preventDefault(),Mt(!1),$t(""),St.current=null;return}}else if(ir&&l.key==="Escape"){l.preventDefault(),Mt(!1),$t(""),St.current=null;return}l.key==="Enter"&&!l.shiftKey&&!l.altKey&&!l.ctrlKey&&!l.metaKey&&!l.isComposing&&(l.preventDefault(),Uc())},onKeyUp:l=>{const u=l.currentTarget.selectionStart;Xa(l.currentTarget.value,u)},onClick:l=>{const u=l.currentTarget.selectionStart;Xa(l.currentTarget.value,u)},onPaste:l=>{var u;try{const p=((u=l.clipboardData)==null?void 0:u.items)||[];for(let x=0;x<p.length;x++){const N=p[x];if(N&&typeof N.type=="string"&&N.type.startsWith("image/")){const S=N.getAsFile();if(S){const E=`paste-${Date.now()}.${(S.type.split("/")[1]||"png").replace(/[^a-z0-9]/gi,"")}`,L=new File([S],E,{type:S.type||"image/png"});qa([L]),l.preventDefault();break}}}}catch{}},placeholder:"Digite sua mensagem... (Enter envia, Shift+Enter quebra linha)",rows:1,className:"flex-1 min-w-0 border border-slate-300 dark:border-slate-700 rounded-xl px-3 py-3 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800 resize-y min-h-[40px]"}),s.jsx("button",{type:"button",onClick:()=>{(v||"").trim()||k.length?mr||Uc():C?Jx():Zx()},className:`${mr?"bg-blue-400 text-white cursor-wait":(v||"").trim()||k.length?"bg-blue-600 text-white hover:bg-blue-700 shadow":C?"bg-red-600 text-white hover:bg-red-700 shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300 shadow"} inline-flex items-center justify-center rounded-full h-10 flex-shrink-0 transition ${C&&!((v||"").trim()||k.length)?"px-4 gap-2":"w-10"}`,title:mr?"Enviando...":(v||"").trim()||k.length?"Enviar":C?"Parar gravao":"Gravar udio",disabled:mr,children:(v||"").trim()||k.length?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M2.31 20.87 22 12 2.31 3.13a.75.75 0 0 0-.98.97L4.7 11.1c.1.25.1.53 0 .78l-3.37 7a.75.75 0 0 0 .98.98Z"})}):C?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M12 14.5a3.5 3.5 0 0 0 3.5-3.5V7a3.5 3.5 0 1 0-7 0v4a3.5 3.5 0 0 0 3.5 3.5Zm5-3.5a5 5 0 0 1-10 0H5a7 7 0 0 0 6 6.92V20h2v-2.08A7 7 0 0 0 19 11h-2Z"})})}),C&&!((v||"").trim()||k.length)&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",H>0?`${H}s`:"REC"]})]}),!!((v||"").trim()||k.length)&&U&&s.jsx("div",{className:"text-sm text-red-600",children:U}),!(v||"").trim()&&!k.length&&O&&s.jsx("div",{className:"text-sm text-red-600",children:O}),Pn&&s.jsxs("div",{ref:bc,className:"fixed mb-2 bg-white border border-slate-200 rounded-md p-2 shadow z-50 overflow-y-auto overflow-x-hidden",style:{left:Math.max(4,Cs.left),bottom:Math.max(4,Cs.bottom||0),width:`${Cs.width||360}px`,maxHeight:`${Cs.maxHeight||416}px`},children:[s.jsx("button",{type:"button",className:"absolute top-2 right-2 p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Fechar",onClick:()=>zr(!1),title:"Fechar",children:s.jsx(Qs,{className:"w-4 h-4"})}),!1,!1,s.jsx("div",{ref:vl,className:"relative max-h-80 overflow-y-auto overflow-x-hidden pr-1",children:Ia.filter(l=>l!=="recent"||As.length>0).filter(l=>l!=="favoritos"||(mn||[]).length>0).filter(l=>l!=="recent"&&l!=="favoritos"?(di[l]||[]).length>0:!0).map(l=>{var u;return s.jsxs("div",{children:[s.jsx("div",{ref:Qr(l),className:"sticky top-0 bg-white text-[11px] text-slate-500 mb-1 mt-1",children:l==="recent"?"Recentes":l==="favoritos"?"Favoritos":((u=ub.find(p=>p.key===l))==null?void 0:u.label)||l}),(()=>{const p=l==="recent"?As:l==="favoritos"?mn||[]:di[l]||[];return yl(p).map((N,S)=>s.jsx("div",{className:"grid grid-cols-7 sm:grid-cols-8 md:grid-cols-10 gap-1 mb-2",children:N.map(E=>s.jsxs("button",{type:"button",onClick:()=>Kx(E),onContextMenu:L=>{L.preventDefault(),gl(E)},className:`relative inline-flex items-center justify-center w-8 h-8 md:w-9 md:h-9 text-2xl leading-none hover:bg-slate-100 dark:hover:bg-slate-700/60 rounded px-1.5 ${(mn||[]).includes(E)?"bg-yellow-50":""}`,children:[(mn||[]).includes(E)&&s.jsx("span",{className:"absolute -top-0.5 -left-0.5 text-[10px] text-yellow-600",children:""}),E]},`sec-${l}-${S}-${E}`))},`row-${l}-${S}`))})()]},`sec-${l}`)})}),qr==="recent"&&As.length===0&&s.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Sem recentes ainda"})]})]})]}),!ls&&f&&s.jsx("button",{type:"button",className:"fixed inset-0 z-30 bg-slate-900/30 backdrop-blur-[1px] lg:hidden","aria-label":"Fechar detalhes",onClick:()=>y(!1)}),f&&s.jsxs("aside",{className:`chat-right-panel flex h-full flex-col transition-transform duration-200 ease-out border-l border-slate-200 dark:border-slate-800 text-slate-900 dark:text-slate-100 ${ls?"w-[360px] max-w-sm flex-shrink-0":"fixed inset-y-0 right-0 z-40 w-full max-w-sm shadow-xl"}`,children:[s.jsxs("div",{className:`px-4 py-3 border-b flex items-center justify-between ${hn}`,children:[s.jsx("div",{className:"font-semibold",children:"Detalhes"}),s.jsx("button",{type:"button",className:Ne?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-700","aria-label":"Fechar detalhes",onClick:()=>y(!1),children:""}),C&&!((v||"").trim()||k.length)&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",H>0?`${H}s`:"REC"]})]}),s.jsx("div",{className:"px-4 pt-2 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("button",{className:`px-3 py-2 ${zs==="perfil"?Ln:Jt}`,onClick:()=>Vs("perfil"),children:"Perfil"}),s.jsx("button",{className:`px-3 py-2 ${zs==="arquivos"?Ln:Jt}`,onClick:()=>Vs("arquivos"),children:"Arquivos"}),s.jsx("button",{className:`px-3 py-2 ${zs==="favoritos"?Ln:Jt}`,onClick:()=>Vs("favoritos"),children:"Favoritos"}),C&&!((v||"").trim()||k.length)&&s.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",H>0?`${H}s`:"REC"]})]})}),s.jsx("div",{className:"p-4 space-y-4 overflow-auto flex-1",children:T?s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-300",children:"Carregando..."}):s.jsxs(s.Fragment,{children:[zs==="perfil"&&s.jsx(s.Fragment,{children:te==="contact"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-200 dark:bg-slate-800 flex items-center justify-center",children:Ae!=null&&Ae.avatarUrl?s.jsx("img",{src:Dt(Ae.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-slate-500 dark:text-slate-300 text-sm",children:"Sem foto"})}),s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"text-center font-semibold truncate",children:(Ae==null?void 0:Ae.name)||"Contato"}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[(Ae==null?void 0:Ae.email)&&s.jsx("div",{className:"px-3 py-1 rounded bg-slate-50 dark:bg-slate-900/60 border border-slate-200 dark:border-slate-700 truncate text-center text-slate-600 dark:text-slate-200",children:Ae.email}),(Ae==null?void 0:Ae.phone)&&s.jsx("div",{className:"px-3 py-1 rounded bg-slate-50 dark:bg-slate-900/60 border border-slate-200 dark:border-slate-700 truncate text-center text-slate-600 dark:text-slate-200",children:Ae.phone})]})]})]}),s.jsxs("div",{className:"mt-3 flex justify-center gap-2",children:[(Ae==null?void 0:Ae.phone)&&s.jsx("button",{type:"button",className:`px-3 py-2 rounded border ${Ne?"border-slate-700 hover:bg-slate-900/40 text-slate-200":"border-slate-300 hover:bg-slate-50 text-slate-700"}`,onClick:()=>{const l=new URLSearchParams;Ae.phone&&l.set("to",Ae.phone),Ae.name&&l.set("name",Ae.name),Ae.id&&l.set("id",Ae.id),kc(`/telefonia?${l.toString()}`)},children:"Ligar"}),s.jsx("button",{type:"button",className:`px-3 py-2 rounded border ${Ne?"border-slate-700 hover:bg-slate-900/40 text-slate-200":"border-slate-300 hover:bg-slate-50 text-slate-700"}`,onClick:()=>Vs("arquivos"),children:"Ver arquivos"})]}),s.jsxs("div",{className:"mt-5",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Grupos em comum"}),Mx?s.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):Of?s.jsx("div",{className:"text-sm text-red-600",children:Of}):Ff.filter(l=>((l==null?void 0:l.name)||"").toUpperCase()!=="DM").length>0?s.jsx("ul",{className:"space-y-1",children:Ff.filter(l=>((l==null?void 0:l.name)||"").toUpperCase()!=="DM").map(l=>s.jsx("li",{children:s.jsx("button",{type:"button",className:"w-full text-left px-2 py-1 rounded border border-slate-200 hover:bg-slate-50",onClick:()=>{d({id:l.id,name:l.name}),yn()},children:l.name})},l.id))}):s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum grupo em comum."})]})]}):te==="group"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:i!=null&&i.avatarUrl?s.jsx("img",{src:Dt(i.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-slate-500 text-sm",children:"Grupo"})}),s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"text-center font-semibold truncate",children:(i==null?void 0:i.name)||"Grupo"})})]}),s.jsxs("div",{className:"mt-5",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Participantes"}),$x?s.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):Hf?s.jsx("div",{className:"text-sm text-red-600",children:Hf}):Bf.length>0?s.jsx("ul",{className:"space-y-1",children:Bf.map(l=>{var u,p,x,N,S;return s.jsxs("li",{className:"flex items-center gap-2 px-2 py-1 rounded border border-slate-200",children:[s.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center shrink-0",children:(u=l.user)!=null&&u.avatarUrl?s.jsx("img",{src:Dt(l.user.avatarUrl),alt:((p=l.user)==null?void 0:p.name)||"participante",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-[10px] text-slate-500",children:(((x=l.user)==null?void 0:x.name)||"?").slice(0,1).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm truncate",children:((N=l.user)==null?void 0:N.name)||"Participante"}),((S=l.user)==null?void 0:S.email)&&s.jsx("div",{className:"text-[11px] text-slate-500 truncate",children:l.user.email})]}),l.role&&s.jsx("span",{className:"text-[11px] text-slate-500 ml-2",children:l.role})]},l.id)})}):s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum participante."})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:oo?s.jsx("img",{src:URL.createObjectURL(oo),alt:"avatar",className:"w-full h-full object-cover"}):ke!=null&&ke.avatarUrl?s.jsx("img",{src:Dt(ke.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-slate-500",children:"Sem foto"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Foto de perfil"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"pfAvatar",type:"file",accept:"image/*",className:"hidden",onChange:l=>{var u;return Ml(((u=l.target.files)==null?void 0:u[0])||null)}}),s.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var l;return(l=document.getElementById("pfAvatar"))==null?void 0:l.click()},children:"Alterar"}),oo&&s.jsx("button",{type:"button",className:"px-2 py-1 rounded text-red-600 hover:bg-red-50",onClick:()=>Ml(null),children:"Remover"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Nome"}),s.jsx("input",{value:Dc,onChange:l=>Qf(l.target.value),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"E-mail"}),s.jsx("input",{value:(ke==null?void 0:ke.email)||"",disabled:!0,className:"w-full border rounded px-3 py-2 bg-slate-50 text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Telefone"}),s.jsx("input",{value:so,onChange:l=>Gf(l.target.value),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Endereo"}),s.jsx("input",{value:ao,onChange:l=>Kf(l.target.value),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Status"}),s.jsx("input",{value:_c,onChange:l=>Fl(l.target.value),placeholder:"Ex.: Disponvel",className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:sg,children:"Salvar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{Ml(null),lh(void 0,{force:!0})},children:"Cancelar"})]})]}),s.jsxs("div",{className:"pt-3 border-t border-slate-200 space-y-2",children:[s.jsx("div",{className:"font-medium text-sm",children:"Alterar senha"}),s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx("input",{type:"password",value:Ac,onChange:l=>Zf(l.target.value),placeholder:"Senha atual",className:"w-full border rounded px-3 py-2"}),s.jsx("input",{type:"password",value:Rc,onChange:l=>Jf(l.target.value),placeholder:"Nova senha",className:"w-full border rounded px-3 py-2"}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-slate-800 text-white hover:bg-slate-900",onClick:ag,children:"Atualizar senha"})})]})]})]})}),zs==="arquivos"&&s.jsxs("div",{className:"space-y-2",children:[h.filter(l=>l.type!=="text"&&!l.deletedAt).map(l=>s.jsxs("div",{className:"flex items-center justify-between border rounded px-3 py-2 text-sm",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:Bt(l)?"Imagem":l.type==="audio"?"udio":"Anexo"}),s.jsx("div",{className:"text-slate-500 truncate max-w-[220px]",children:l.type==="text"?l.content:pr(l.content)||l.content})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsxs("span",{className:"text-[11px] text-slate-500",children:[new Date(l.createdAt).toLocaleDateString("pt-BR")," ",new Date(l.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]}),Bt(l)?s.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>Nl({url:Dt(l.content),name:pr(l.content)||"imagem"}),children:"Abrir"}):s.jsx("a",{className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",href:Dt(l.content),target:"_blank",rel:"noreferrer",children:"Abrir"})]})]},l.id)),h.filter(l=>l.type!=="text"&&!l.deletedAt).length===0&&s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum arquivo nesta conversa."})]}),zs==="favoritos"&&s.jsxs("div",{className:"space-y-2",children:[eh.map(l=>{var u;return s.jsxs("div",{className:"border rounded px-3 py-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium truncate",children:((u=l.author)==null?void 0:u.name)||"Voc"}),s.jsxs("div",{className:"text-[11px] text-slate-500",children:[new Date(l.createdAt).toLocaleDateString("pt-BR")," ",new Date(l.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("div",{className:"mt-1",children:l.type==="text"?l.content:Bt(l)?"Imagem":l.type==="audio"?"udio":"Anexo"}),s.jsx("div",{className:"mt-1",children:s.jsx("button",{className:"text-[12px] text-red-600 hover:underline",onClick:()=>Tc(l),children:"Remover favorito"})})]},l.id)}),eh.length===0&&s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhuma mensagem favoritada nesta conversa."})]}),Yf&&s.jsx("div",{className:"text-green-600 text-sm",children:Yf}),Xf&&s.jsx("div",{className:"text-red-600 text-sm",children:Xf})]})})]})]})]})}function yb({message:e,mine:t,editingId:n,editText:r,setEditText:a,onStartEdit:o,onSave:i,onCancel:d}){return n===e.id?s.jsxs("div",{children:[s.jsx("textarea",{value:r,onChange:m=>a(m.target.value),className:"w-full border rounded px-2 py-1 text-sm text-slate-800 bg-white",rows:2}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-blue-600 text-white text-xs hover:bg-blue-700",onClick:()=>i(e,r),children:"Salvar"}),s.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 text-xs hover:bg-slate-50",onClick:()=>d(),children:"Cancelar"})]})]}):s.jsxs("div",{children:[s.jsx("div",{className:"whitespace-pre-wrap break-words",style:{overflowWrap:"anywhere",wordBreak:"break-word"},children:pb(e.content||"")}),e.editedAt&&s.jsx("div",{className:"text-[10px] opacity-70",children:"(editado)"})]})}function Cu({read:e,title:t}){const n=e?"#ffffff":"#94a3b8",r=e?"rgba(0,0,0,0.35)":"none",a=2.2,o=e?3.2:0;return s.jsx("span",{title:t,"aria-label":t,className:"inline-flex items-center ml-1",children:s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M7 13l-2 2 3 3 2-2-3-3z",fill:n,opacity:"0.0"}),e&&s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M1.5 13.5l4 4 7-7",stroke:r,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M8.5 13.5l4 4 9-9",stroke:r,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round"})]}),s.jsx("path",{d:"M1.5 13.5l4 4 7-7",stroke:n,strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M8.5 13.5l4 4 9-9",stroke:n,strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round"})]})})}function Eu({url:e,name:t,size:n=28,status:r,showStatus:a=!1}){const[o,i]=c.useState(!1),d={position:"relative",width:n,height:n,display:"inline-block"},h={width:n,height:n,borderRadius:"50%",objectFit:"cover",flexShrink:0,display:"block"},m=(t||"U").trim().slice(0,2).toUpperCase(),v=(()=>{const D=String(r||"").toLowerCase();return D==="online"?"#16a34a":D==="busy"||D==="ocupado"?"#dc2626":D==="away"||D==="ausente"?"#f59e0b":"#94a3b8"})(),b=Math.max(8,Math.floor(n*.32)),k={position:"absolute",right:-1,bottom:-1,width:b,height:b,borderRadius:"50%",background:v,border:"2px solid rgba(255,255,255,0.95)",boxShadow:"0 0 0 1px rgba(15,23,42,0.08)"};return s.jsxs("span",{style:d,children:[e&&!o?s.jsx("img",{src:Dt(e),alt:t||"avatar",style:h,onError:()=>i(!0)}):s.jsx("div",{style:{...h,background:"#cbd5e1",color:"#334155",display:"grid",placeItems:"center",fontSize:Math.max(10,Math.floor(n*.42)),fontWeight:"bold"},children:m}),a&&s.jsx("span",{style:k})]})}function wb(){return s.jsx(Tx,{})}function bb(){const e=Br(),t=c.useMemo(()=>new URLSearchParams(e.search),[e.search]),[n,r]=c.useState(t.get("to")||""),[a]=c.useState(t.get("name")||""),[o,i]=c.useState("idle"),[d,h]=c.useState(""),[m,v]=c.useState({loading:!0,data:null,error:""}),[b,k]=c.useState({registered:!1}),[D,A]=c.useState({phase:"idle",reason:""}),[P,U]=c.useState(0),j=c.useRef(null),g=c.useRef(null),w=c.useRef(null);c.useEffect(()=>{(async()=>{try{const _=await Q.get("/phone/me");v({loading:!1,data:_,error:""})}catch(_){v({loading:!1,data:null,error:_.message||"Falha ao carregar SIP"})}})()},[]),c.useEffect(()=>{const _=re=>{var Z;return k({registered:!!((Z=re==null?void 0:re.detail)!=null&&Z.registered)})};window.addEventListener("sip:reg",_);try{k({registered:localStorage.getItem("sip_registered")==="1"})}catch{}return()=>window.removeEventListener("sip:reg",_)},[]),c.useEffect(()=>{Q.post("/phone/me/status",{registered:!!b.registered}).catch(()=>{})},[b.registered]);function C(){R(),U(0),j.current=setInterval(()=>U(_=>_+1),1e3)}function R(){try{clearInterval(j.current)}catch{}j.current=null}async function O(){h("");const _=String(n||"").replace(/\D/g,"");if(_.length<2){h("Informe um nmero/ramal vlido");return}try{const re=w.current||Q1();if(!re){h("SIP no inicializado/registrado"),i("error");return}w.current=re,i("calling"),A({phase:"progress",reason:""}),await re.call(_,{onProgress:()=>A({phase:"progress",reason:""}),onAccepted:()=>{i("in-call"),A({phase:"accepted",reason:""}),C()},onEnded:()=>{i("ended"),A({phase:"ended",reason:""}),R()},onFailed:F=>{var ce;const Y=(F==null?void 0:F.response)&&(F.response.status_code||((ce=F.response)==null?void 0:ce.statusCode)),se=(F==null?void 0:F.cause)||(F==null?void 0:F.message)||"";i("error"),A({phase:"failed",reason:Y?`${Y} ${se}`.trim():se||"Falha SIP"}),R(),h(Y?`Falha SIP: ${Y} ${se||""}`.trim():"Falha SIP ou destino ocupado")},onTrack:F=>{try{g.current&&(g.current.srcObject=F)}catch{}}})||i("ended")}catch(re){h(re.message||"Falha ao iniciar chamada"),i("error")}}function I(){var _,re;try{(re=(_=w.current)==null?void 0:_.hangup)==null||re.call(_)}catch{}i("ended"),R()}const H=(()=>{var re,Z,F;return String(n||"").replace(/\D/g,"").length>=2&&!!b.registered&&!!((re=m==null?void 0:m.data)!=null&&re.hasPassword&&((Z=m==null?void 0:m.data)!=null&&Z.domain)&&((F=m==null?void 0:m.data)!=null&&F.extension))})();function B(_){var re,Z;if(o==="in-call"||o==="calling")try{(Z=(re=w.current)==null?void 0:re.dtmf)==null||Z.call(re,_)}catch{}else r(F=>(F||"")+String(_))}return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Telefonia"}),s.jsx("div",{className:"flex-1 p-4",children:s.jsxs("div",{className:"max-w-xl mx-auto bg-white/80 dark:bg-slate-800/70 backdrop-blur border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-6 shadow-sm",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Discador"}),a&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 mb-2",children:["Contato: ",s.jsx("span",{className:"font-medium",children:a})]}),s.jsx("div",{className:"mb-3",children:m.loading?s.jsx("div",{className:"text-xs text-slate-500",children:"Carregando configurao SIP..."}):m.error?s.jsx("div",{className:"p-2 rounded border border-red-300 bg-red-50 text-sm text-red-700",children:m.error}):!m.data||!m.data.hasPassword?s.jsx("div",{className:"p-2 rounded border border-yellow-300 bg-yellow-50 text-sm text-yellow-800",children:"Sua conta SIP ainda no est configurada. Solicite ao administrador para cadastrar domnio, ramal e senha."}):s.jsxs("div",{className:"p-2 rounded border border-green-300 bg-green-50 text-sm text-green-800",children:["Conta SIP configurada: ",s.jsx("span",{className:"font-medium",children:m.data.domain}),"  Ramal ",s.jsx("span",{className:"font-medium",children:m.data.extension})]})}),s.jsxs("div",{className:"mb-2 text-xs text-slate-600",children:["SIP registro: ",b.registered?"registrado":"no registrado"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{value:n,onChange:_=>r(_.target.value),placeholder:"Nmero/Ramal",className:"flex-1 border rounded px-3 py-2"}),s.jsx("button",{disabled:!H||o==="calling"||o==="in-call",className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",onClick:O,children:"Ligar"}),s.jsx("button",{disabled:!(o==="calling"||o==="in-call"),className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:I,children:"Desligar"})]}),d&&s.jsx("div",{className:"mt-2 text-sm text-red-600",children:d}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 max-w-xs",children:[["1","2","3","4","5","6","7","8","9","*","0","#"].map(_=>s.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>B(_),children:_},_)),s.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50 col-span-2",onClick:()=>r(""),children:"Limpar"}),s.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>r(_=>String(_||"").slice(0,-1)),children:""})]}),s.jsxs("div",{className:"mt-4 text-xs text-slate-600 dark:text-slate-300",children:["Status: ",o," ",o==="in-call"&&`(${Math.floor(P/60).toString().padStart(2,"0")}:${(P%60).toString().padStart(2,"0")})`]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs mb-1 text-slate-500",children:"udio remoto"}),s.jsx("audio",{ref:g,autoPlay:!0,playsInline:!0})]})]})})]})}function jb(){const e=_n(),[t,n]=c.useState([]),[r,a]=c.useState(!0),[o,i]=c.useState(""),[d,h]=c.useState("Reunio"),[m,v]=c.useState(""),[b,k]=c.useState(!0),[D,A]=c.useState(""),[P,U]=c.useState(""),[j,g]=c.useState(""),[w,C]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const B=await Q.get("/meetings");n(B)}catch(B){i(B.message||"Falha ao carregar reunies")}finally{a(!1)}})()},[]);async function R(B){var _;(_=B==null?void 0:B.preventDefault)==null||_.call(B),i(""),C(!0);try{const re=j.split(",").map(se=>se.trim()).filter(Boolean).map(se=>({email:se})),Z={title:d||"Reunio",description:m||void 0,isInstant:b,scheduledStart:!b&&D?new Date(D).toISOString():void 0,scheduledEnd:!b&&P?new Date(P).toISOString():void 0,participants:re},F=await Q.post("/meetings",Z),Y=await Q.get("/meetings");n(Y),h("Reunio"),v(""),k(!0),A(""),U(""),g(""),F!=null&&F.code&&(F!=null&&F.isInstant)&&e(`/telefonia?to=${F.code}&name=${encodeURIComponent(F.title)}`)}catch(re){i(re.message||"Falha ao criar reunio")}finally{C(!1)}}async function O(B){const _=prompt("Informe e-mails separados por vrgula:");if(_)try{const re=_.split(",").map(F=>F.trim()).filter(Boolean).map(F=>({email:F}));await Q.post(`/meetings/${B}/participants`,{participants:re});const Z=await Q.get("/meetings");n(Z)}catch(re){alert(re.message||"Falha ao adicionar convidados")}}function I(B,_){e(`/telefonia?to=${B}&name=${encodeURIComponent(_||"Reunio")}`)}function H(B){try{navigator.clipboard.writeText(B),alert("Copiado!")}catch{alert(B)}}return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Reunies"}),s.jsxs("div",{className:"flex-1 p-4 space-y-6",children:[s.jsxs("form",{onSubmit:R,className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Nova reunio"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Ttulo"}),s.jsx("input",{value:d,onChange:B=>h(B.target.value),className:"border rounded px-3 py-2"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm mt-6 md:mt-0",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:B=>k(B.target.checked)}),"Instantnea"]}),!b&&s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Incio"}),s.jsx("input",{type:"datetime-local",value:D,onChange:B=>A(B.target.value),className:"border rounded px-3 py-2"})]}),s.jsxs("label",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Fim"}),s.jsx("input",{type:"datetime-local",value:P,onChange:B=>U(B.target.value),className:"border rounded px-3 py-2"})]})]}),s.jsxs("label",{className:"md:col-span-2 flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Descrio (opcional)"}),s.jsx("textarea",{value:m,onChange:B=>v(B.target.value),className:"border rounded px-3 py-2",rows:2})]}),s.jsxs("label",{className:"md:col-span-2 flex flex-col text-sm",children:[s.jsx("span",{className:"text-slate-600 mb-1",children:"Convidados (e-mails, separados por vrgula)"}),s.jsx("input",{value:j,onChange:B=>g(B.target.value),className:"border rounded px-3 py-2",placeholder:"exemplo@dominio.com, outro@dominio.com"})]})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("button",{type:"submit",disabled:w,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:w?"Criando...":"Criar"}),o&&s.jsx("span",{className:"text-sm text-red-600",children:o})]})]}),s.jsxs("div",{className:"max-w-4xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Minhas reunies"}),r?s.jsx("div",{className:"text-sm text-slate-600",children:"Carregando..."}):t.length===0?s.jsx("div",{className:"text-sm text-slate-600",children:"Nenhuma reunio encontrada"}):s.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(B=>s.jsxs("li",{className:"py-3 flex items-center gap-3 justify-between",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"font-medium truncate",children:[B.title," ",s.jsxs("span",{className:"text-xs text-slate-500",children:["#",B.code]})]}),s.jsxs("div",{className:"text-xs text-slate-500 truncate",children:[B.isInstant?"Instantnea":"Agendada",B.scheduledStart?`  ${new Date(B.scheduledStart).toLocaleString()}`:""]})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>I(B.code,B.title),children:"Entrar"}),s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>O(B.id),children:"Convidar"}),s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>e(`/reunioes/${B.id}`),children:"Detalhes"}),s.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>H(B.code),children:"Copiar cdigo"})]})]},B.id))})]})]})]})}function kb(){const{id:e}=ux(),t=_n(),[n,r]=c.useState(null),[a,o]=c.useState(""),[i,d]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const v=await Q.get(`/meetings/${e}`);r(v)}catch(v){o(v.message||"Falha ao carregar")}finally{d(!1)}})()},[e]);function h(v){try{navigator.clipboard.writeText(v)}catch{}}async function m(){const v=prompt("Informe e-mails separados por vrgula:");if(v)try{const b=v.split(",").map(D=>D.trim()).filter(Boolean).map(D=>({email:D}));await Q.post(`/meetings/${e}/participants`,{participants:b});const k=await Q.get(`/meetings/${e}`);r(k)}catch(b){alert(b.message||"Falha ao adicionar")}}return i?s.jsx("div",{className:"p-4",children:"Carregando..."}):a?s.jsx("div",{className:"p-4 text-red-600",children:a}):n?s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Detalhes da reunio"}),s.jsxs("div",{className:"flex-1 p-4 space-y-4",children:[s.jsxs("div",{className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsxs("div",{className:"text-xl font-semibold",children:[n.title," ",s.jsxs("span",{className:"text-xs text-slate-500",children:["#",n.code]})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[n.isInstant?"Instantnea":"Agendada",n.scheduledStart?`  ${new Date(n.scheduledStart).toLocaleString()}`:""]}),n.description&&s.jsx("div",{className:"mt-2 text-sm",children:n.description}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:()=>t(`/telefonia?to=${n.code}&name=${encodeURIComponent(n.title)}`),children:"Entrar"}),s.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:()=>h(n.code),children:"Copiar cdigo"}),s.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:m,children:"Convidar"})]})]}),s.jsxs("div",{className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Participantes"}),s.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.participants.map(v=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:v.name||v.email}),s.jsx("div",{className:"text-xs text-slate-500",children:v.email})]}),s.jsx("div",{className:"flex items-center gap-2",children:v.inviteToken&&s.jsx("button",{className:"px-2 py-1 text-xs rounded border border-slate-300 dark:border-slate-600",onClick:()=>h(`${window.location.origin}/join/${v.inviteToken}`),children:"Copiar link"})})]},v.id))})]})]})]}):s.jsx("div",{className:"p-4",children:"No encontrado"})}const Nb="http://localhost:3001/api";async function Sb(e){const t=await fetch(e);if(!t.ok)throw new Error(await t.text());return t.json()}function Cb(){const{token:e}=ux();_n();const[t,n]=c.useState(null),[r,a]=c.useState("");if(c.useEffect(()=>{(async()=>{try{const h=await Sb(`${Nb}/meetings/invite/${e}`);n(h)}catch(h){a(h.message||"Convite invlido")}})()},[e]),r)return s.jsxs("div",{className:"p-6 max-w-xl mx-auto text-center",children:[s.jsx("div",{className:"text-xl font-semibold mb-2",children:"Convite invlido"}),s.jsx("div",{className:"text-slate-600",children:String(r)})]});if(!t)return s.jsx("div",{className:"p-6 max-w-xl mx-auto text-center",children:"Carregando..."});const{meeting:o,participant:i}=t,d=`/telefonia?to=${o.code}&name=${encodeURIComponent(o.title)}`;return s.jsx("div",{className:"p-6 max-w-xl mx-auto",children:s.jsxs("div",{className:"bg-white/80 border border-slate-200 rounded-xl p-6 shadow-sm",children:[s.jsx("div",{className:"text-xl font-semibold",children:"Convite para reunio"}),s.jsx("div",{className:"mt-2 text-slate-700",children:o.title}),o.scheduledStart&&s.jsx("div",{className:"text-sm text-slate-500",children:new Date(o.scheduledStart).toLocaleString()}),s.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:["Convidado: ",i.name||i.email||"Convidado"]}),s.jsxs("div",{className:"mt-6 flex gap-3",children:[s.jsx("a",{href:d,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Abrir no app"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.code).then(()=>alert("Cdigo copiado"))},className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",children:"Copiar cdigo"})]}),s.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Se necessrio, faa login para entrar."})]})})}function Eb(){const e=_n(),[t,n]=c.useState([]),[r,a]=c.useState(""),[o,i]=c.useState(!0),[d,h]=c.useState("");c.useEffect(()=>{(async()=>{try{const v=await Q.get("/users/all");n(v)}catch(v){h(v.message||"Falha ao carregar contatos")}finally{i(!1)}})()},[]);const m=t.filter(v=>(v.name+" "+(v.email||"")).toLowerCase().includes(r.toLowerCase()));return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Contatos"}),s.jsx("div",{className:"flex-1 p-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto bg-white/80 dark:bg-slate-800/70 backdrop-blur border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[s.jsx("div",{className:"flex items-center gap-2 mb-3",children:s.jsx("input",{value:r,onChange:v=>a(v.target.value),placeholder:"Buscar por nome ou e-mail",className:"flex-1 border rounded px-3 py-2"})}),o?s.jsx("div",{className:"text-sm text-slate-600",children:"Carregando..."}):d?s.jsx("div",{className:"text-sm text-red-600",children:d}):s.jsxs("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[m.map(v=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[v.avatarUrl?s.jsx("img",{src:Dt(v.avatarUrl),alt:v.name,className:"w-8 h-8 rounded-full object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-300"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:v.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:v.email})]})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[v.phone&&s.jsx("span",{className:"text-xs text-slate-500 hidden md:inline",children:v.phone}),s.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700/60",onClick:()=>{const b=new URLSearchParams;v.phone&&b.set("to",v.phone),b.set("name",v.name),b.set("id",v.id),e(`/telefonia?${b.toString()}`)},children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:s.jsx("path",{d:"M2.25 6.75c0-1.24 1.01-2.25 2.25-2.25h3c.97 0 1.8.62 2.1 1.54l.86 2.58a2.25 2.25 0 0 1-.57 2.31l-1.21 1.21a12.06 12.06 0 0 0 4.88 4.88l1.21-1.21a2.25 2.25 0  1  2.31-.57l2.58.86c.92.3 1.54 1.13 1.54 2.1v3c0 1.24-1.01 2.25-2.25 2.25H18c-8.28 0-15-6.72-15-15v-3Z"})}),"Ligar"]})]})]},v.id)),m.length===0&&s.jsx("li",{className:"py-6 text-sm text-slate-500 text-center",children:"Nenhum contato encontrado"})]})]})})]})}function Db(){var Bs,Hn,no,ro,ss;const e=fa(),[t,n]=c.useState("usuarios"),[r,a]=c.useState(""),[o,i]=c.useState([]),[d,h]=c.useState(""),[m,v]=c.useState(""),[b,k]=c.useState(""),[D,A]=c.useState(""),[P,U]=c.useState(""),[j,g]=c.useState(!1),[w,C]=c.useState(""),[R,O]=c.useState(null),[I,H]=c.useState(!1),[B,_]=c.useState(""),[re,Z]=c.useState(""),F=f=>(f||"").replace(/\D/g,""),Y=f=>{const y=F(f).slice(0,11);return y.length<=2?y:y.length<=6?`(${y.slice(0,2)}) ${y.slice(2)}`:y.length===10?`(${y.slice(0,2)}) ${y.slice(2,6)}-${y.slice(6)}`:y.length>=11?`(${y.slice(0,2)}) ${y.slice(2,7)}-${y.slice(7)}`:y},[se,ce]=c.useState([]),[je,W]=c.useState(""),[V,ee]=c.useState(null),[le,ye]=c.useState([]),[Tt,ct]=c.useState(""),[Zt,Ke]=c.useState(!1),[Le,An]=c.useState(""),[dn,Ne]=c.useState([]),[Ss,Rn]=c.useState(!1),[xt,ar]=c.useState(null),[Ze,ut]=c.useState(""),[fn,hn]=c.useState(!1),[Jt,Ln]=c.useState(null),[M,ae]=c.useState(null),[xe,ge]=c.useState(!1),[$e,_e]=c.useState("");function G(f,y="info",T=3e3){Ln({message:f,type:y});try{T&&setTimeout(()=>Ln(null),T)}catch{}}const gt=c.useCallback(f=>{if(!f)return"";try{return new Date(f).toLocaleString("pt-BR")}catch{return f}},[]),Yt=c.useCallback(f=>{const y=Number(f);if(!Number.isFinite(y)||y<0)return"";if(y===0)return"0 B";const T=["B","KB","MB","GB","TB"],q=Math.min(T.length-1,Math.floor(Math.log(y)/Math.log(1024))),te=y/Math.pow(1024,q);return`${te>=10?te.toFixed(0):te.toFixed(1)} ${T[q]}`},[]),rt=c.useCallback(f=>{const y=Number(f);return Number.isFinite(y)?y.toLocaleString("pt-BR"):"-"},[]),wc=c.useCallback(f=>{const y=Number(f);return Number.isFinite(y)?y.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1}):"-"},[]),Pn=c.useMemo(()=>{const f=Array.isArray(M==null?void 0:M.recentTimeline)?M.recentTimeline:[],y=Math.max(1,f.reduce((T,q)=>Math.max(T,(q==null?void 0:q.count)||0),0));return{list:f,max:y}},[M]),[zr,Ca]=c.useState(""),[bc,Cs]=c.useState(""),[Vr,Wr]=c.useState(""),[Ft,oe]=c.useState(""),[Xe,Hr]=c.useState(""),[pn,Es]=c.useState(!1),[pl,Ds]=c.useState(!1),[Ea,Da]=c.useState(!1),[_a,In]=c.useState([]),[_s,or]=c.useState(null),[ml,qr]=c.useState(""),[Aa,As]=c.useState(!1),[Ra,xl]=c.useState(""),La=c.useRef(null),mn=c.useRef(null),Rs=c.useMemo(()=>({autoEnabled:!1,time:"02:00",retentionDays:7,lastAutoRunAt:null,lastManualRunAt:null,lastManualResult:null,lastAutoResult:null,lastRestoreAt:null,lastRestoreName:null,lastRestoreActor:null}),[]),[gl,vl]=c.useState([]),[Ve,Qr]=c.useState(Rs),[Gr,Pa]=c.useState(!1),[Ia,yl]=c.useState(!1),[lr,Tn]=c.useState(""),[Kr,Ls]=c.useState(""),[ir,Mt]=c.useState(""),[Ta,$t]=c.useState(!1),[jc,wl]=c.useState(()=>{try{return localStorage.getItem("chat_bg")||"default"}catch{return"default"}}),[Fn,Mn]=c.useState(""),[St,Fa]=c.useState(""),[Zr,Jr]=c.useState("");function xn(f,y){if(!(typeof window>"u"))try{const T=Array.isArray(f)?f:[];if(y){const q=T.find(te=>te.id===y);if(q!=null&&q.url){localStorage.setItem("notif_sound_url",q.url),window.dispatchEvent(new Event("chat:alertSoundUpdated"));return}}localStorage.removeItem("notif_sound_url"),window.dispatchEvent(new Event("chat:alertSoundUpdated"))}catch{}}async function Ps({silent:f}={}){try{const y=await Q.get("/admin/config");Wr((y==null?void 0:y.chatIconUrl)||""),oe((y==null?void 0:y.chatWallpaperUrl)||""),Hr((y==null?void 0:y.loginLogoUrl)||"");const T=Array.isArray(y==null?void 0:y.alertSounds)?y.alertSounds:[];In(T),or((y==null?void 0:y.activeAlertSoundId)||null),xn(T,(y==null?void 0:y.activeAlertSoundId)||null)}catch(y){f||G(y.message||"Falha ao carregar configuraes","error")}}c.useEffect(()=>{try{const f=localStorage.getItem("chat_icon");f&&(Ca(f.startsWith("data:")?f:""),Cs(f.startsWith("data:")?"":f))}catch{}(async()=>{try{const f=await(await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+`/admin/config/public?_=${Date.now()}`,{cache:"no-store"})).json();f!=null&&f.chatIconUrl&&Wr(f.chatIconUrl),f!=null&&f.chatWallpaperUrl&&oe(f.chatWallpaperUrl),Object.prototype.hasOwnProperty.call(f||{},"loginLogoUrl")&&Hr((f==null?void 0:f.loginLogoUrl)||"")}catch{}})(),(async()=>{try{await Ps({silent:!0})}catch{}})()},[]);const $n=c.useCallback(async()=>{_e(""),ge(!0);try{const f=await Q.get("/admin/metrics");ae(f)}catch(f){_e(f.message||"Falha ao carregar metricas"),ae(null)}finally{ge(!1)}},[]);async function Ma(f){if(!f)return;const y=new FormData;y.append("icon",f);try{const T=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/icon",{method:"POST",headers:{Authorization:`Bearer ${Ue()||""}`},body:y});if(!T.ok){const te=await T.text();throw new Error(te||"Falha no upload")}const q=await T.json();if(q!=null&&q.chatIconUrl){Wr(q.chatIconUrl),G("cone global atualizado","success");try{localStorage.setItem("chat_icon",q.chatIconUrl),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}}}catch(T){G(T.message||"Falha ao enviar cone","error")}}async function bl(f){if(!f)return;const y=new FormData;y.append("wallpaper",f);try{const T=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/wallpaper",{method:"POST",headers:{Authorization:`Bearer ${Ue()||""}`},body:y});if(!T.ok){const te=await T.text();throw new Error(te||"Falha no upload")}const q=await T.json();if(q!=null&&q.chatWallpaperUrl){oe(q.chatWallpaperUrl),document.documentElement.style.setProperty("--chat-wallpaper",`url('${q.chatWallpaperUrl}')`);try{localStorage.setItem("chat_wallpaper",q.chatWallpaperUrl),window.dispatchEvent(new Event("chat:wallpaperUpdated"))}catch{}G("Papel de parede global atualizado","success")}}catch(T){G(T.message||"Falha ao enviar papel de parede","error")}}async function jl(f){var T;if(!f)return;if(!((T=f.type)!=null&&T.startsWith("image/"))){G("Selecione uma imagem","error");return}Es(!0);const y=new FormData;y.append("loginLogo",f);try{const q=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/login-logo",{method:"POST",headers:{Authorization:`Bearer ${Ue()||""}`},body:y});if(!q.ok){const be=await q.text();throw new Error(be||"Falha no upload")}const te=await q.json();Hr((te==null?void 0:te.loginLogoUrl)||""),G("Logo do login atualizada","success")}catch(q){G(q.message||"Falha ao enviar logo do login","error")}finally{Es(!1)}}async function kl(){Da(!0);try{const f=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue()||""}`},body:JSON.stringify({loginLogoUrl:Xe||null})});if(!f.ok){const y=await f.text();throw new Error(y||"Falha ao salvar")}G("Logo do login salva","success")}catch(f){G(f.message||"Falha ao salvar logo do login","error")}finally{Da(!1)}}async function $a(){try{if(!Ft){G("Nenhum papel de parede para salvar","error");return}const f=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue()||""}`},body:JSON.stringify({chatWallpaperUrl:Ft})});if(!f.ok){const y=await f.text();throw new Error(y||"Falha ao salvar")}G("Papel de parede salvo para todos","success")}catch(f){G(f.message||"Falha ao salvar papel de parede","error")}}async function Oa(){try{if(!(typeof window<"u"?window.confirm("Excluir Logo da tela de login?"):!0))return;Ds(!0);const y=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/login-logo",{method:"DELETE",headers:{Authorization:`Bearer ${Ue()||""}`}});if(!y.ok){const T=await y.text();throw new Error(T||"Falha ao excluir")}Hr(""),G("Logo do login excluda","success")}catch(f){G(f.message||"Falha ao excluir logo do login","error")}finally{Ds(!1)}}async function vt(){try{if(!(typeof window<"u"?window.confirm("Excluir papel de parede global?"):!0))return;const y=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/wallpaper",{method:"DELETE",headers:{Authorization:`Bearer ${Ue()||""}`}});if(!y.ok){const T=await y.text();throw new Error(T||"Falha ao excluir")}oe("");try{localStorage.removeItem("chat_wallpaper"),document.documentElement.style.removeProperty("--chat-wallpaper"),window.dispatchEvent(new Event("chat:wallpaperUpdated"))}catch{}G("Papel de parede global excludo","success")}catch(f){G(f.message||"Falha ao excluir papel de parede","error")}}const K=c.useCallback(async()=>{Pa(!0);try{const f=await Q.get("/admin/backup");vl(Array.isArray(f==null?void 0:f.backups)?f.backups:[]);const y={...Rs,...(f==null?void 0:f.settings)||{}};Qr(y)}catch(f){G(f.message||"Falha ao carregar backups","error")}finally{Pa(!1)}},[Rs]);async function kc(){yl(!0);try{await Q.post("/admin/backup/run",{}),G("Backup criado com sucesso","success"),await K()}catch(f){G(f.message||"Falha ao executar backup","error")}finally{yl(!1)}}async function cr(f){if(!f)return;let y=!0;if(typeof window<"u"&&(y=window.confirm(`Restaurar o backup "${f}"? Esta ao substituir mensagens e arquivos atuais.`)),!!y){Tn(f);try{await Q.post("/admin/backup/restore",{name:f,confirm:!0}),G("Backup restaurado com sucesso","success")}catch(T){G(T.message||"Falha ao restaurar backup","error")}finally{Tn(""),await K()}}}async function Ua(f){if(!f)return;let y=!0;if(typeof window<"u"&&(y=window.confirm(`Excluir backup "${f}"?`)),!!y){Ls(f);try{await Q.delete(`/admin/backup/${encodeURIComponent(f)}`),G("Backup excludo","success")}catch(T){G(T.message||"Falha ao excluir backup","error")}finally{Ls(""),await K()}}}async function Ct(f){if(f){Mt(f);try{const y=await fetch(`${zt}/admin/backup/download/${encodeURIComponent(f)}`,{headers:{Authorization:`Bearer ${Ue()||""}`}});if(!y.ok){const be=await y.text();throw new Error(be||"Falha ao preparar download")}const T=await y.blob(),q=window.URL.createObjectURL(T),te=document.createElement("a");te.href=q,te.download=`${f}.zip`,document.body.appendChild(te),te.click(),document.body.removeChild(te),window.URL.revokeObjectURL(q)}catch(y){G(y.message||"Falha ao baixar backup","error")}finally{Mt("")}}}async function Ba(f){var y;(y=f==null?void 0:f.preventDefault)==null||y.call(f),$t(!0);try{const T={autoEnabled:Ve.autoEnabled,time:Ve.time,retentionDays:Ve.retentionDays},q=await Q.post("/admin/backup/settings",T),te={...Rs,...(q==null?void 0:q.settings)||T};Qr(te),G("Configuraes de backup salvas","success")}catch(T){G(T.message||"Falha ao salvar configuraes de backup","error")}finally{$t(!1)}}c.useEffect(()=>{t==="Configuracoes"&&K()},[t,K]),c.useEffect(()=>{t==="metricas"&&$n()},[t,$n]);function On(){var f,y;try{(y=(f=La.current)==null?void 0:f.click)==null||y.call(f)}catch{}}async function Is(f){var T,q;const y=(q=(T=f==null?void 0:f.target)==null?void 0:T.files)==null?void 0:q[0];if(y){if(y.type&&!y.type.startsWith("audio/")){G("Selecione um arquivo de udio","error"),f!=null&&f.target&&(f.target.value="");return}As(!0);try{const te=new FormData;te.append("sound",y);const be=(ml||"").trim();be&&te.append("name",be);const ke=await Q.upload("/admin/config/alert-sounds",te),Il=Array.isArray(ke==null?void 0:ke.alertSounds)?ke.alertSounds:[];In(Il),or((ke==null?void 0:ke.activeAlertSoundId)||null),xn(Il,(ke==null?void 0:ke.activeAlertSoundId)||null),be&&qr(""),G("Som enviado","success")}catch(te){G(te.message||"Falha ao enviar som","error")}finally{As(!1),f!=null&&f.target&&(f.target.value="")}}}async function gn(f){try{const y=await Q.post(`/admin/config/alert-sounds/${f||"none"}/activate`,{}),T=Array.isArray(y==null?void 0:y.alertSounds)?y.alertSounds:[];In(T),or((y==null?void 0:y.activeAlertSoundId)||null),xn(T,(y==null?void 0:y.activeAlertSoundId)||null),G(f?"Som de alerta atualizado":"Bip padro ativado","success")}catch(y){G(y.message||"Falha ao atualizar som de alerta","error")}}async function Yr(f){if(f)try{if(typeof window<"u"&&!window.confirm("Excluir este som de alerta?"))return;xl(f);const y=await Q.del(`/admin/config/alert-sounds/${f}`),T=Array.isArray(y==null?void 0:y.alertSounds)?y.alertSounds:[];In(T),or((y==null?void 0:y.activeAlertSoundId)||null),xn(T,(y==null?void 0:y.activeAlertSoundId)||null),G("Som excludo","success")}catch(y){G(y.message||"Falha ao excluir som","error")}finally{xl("")}}function Un(f){var y,T;if(!f){G("Som indisponvel","error");return}try{(T=(y=mn.current)==null?void 0:y.pause)==null||T.call(y),mn.current=new Audio(f),mn.current.onended=()=>{mn.current=null},mn.current.play().catch(()=>{G("No foi possvel reproduzir o som","error")})}catch{G("No foi possvel reproduzir o som","error")}}async function za(f){var y;(y=f==null?void 0:f.preventDefault)==null||y.call(f);try{const T=(Fn||"").trim(),q=(St||"").trim(),te=(Zr||"").trim();if(!T){G("Informe a senha atual","error");return}if(q.length<6){G("Nova senha deve ter 6+ caracteres","error");return}if(q!==te){G("Confirmao no confere","error");return}await Q.post("/users/me/password",{current:T,password:q}),Mn(""),Fa(""),Jr(""),G("Senha do admin alterada","success")}catch(T){G(T.message||"Falha ao alterar senha","error")}}c.useEffect(()=>{(async()=>{try{const f=await Q.get("/users");i(Array.isArray(f)?f:[])}catch(f){a(y=>y?y+"  Usurios: "+(f.message||"falha"):"Usurios: "+(f.message||"falha"))}})()},[]),c.useEffect(()=>{(async()=>{try{const f=await Q.get("/groups/all?includeDMs=false");ce(Array.isArray(f)?f:[])}catch(f){a(y=>y?y+"  Grupos: "+(f.message||"falha"):"Grupos: "+(f.message||"falha"))}})()},[]);const Va=c.useMemo(()=>{const f=w.trim().toLowerCase();return f?o.filter(y=>`${y.name} ${y.email}`.toLowerCase().includes(f)):o},[o,w]),ur=c.useMemo(()=>o.filter(f=>!le.some(y=>y.userId===f.id)),[o,le]),Ts=c.useMemo(()=>{const f=Tt.trim().toLowerCase();return f?ur.filter(y=>`${y.name} ${y.email}`.toLowerCase().includes(f)):ur},[ur,Tt]);async function Ot(){try{const f=await Q.get("/users");i(Array.isArray(f)?f:[])}catch{}}async function Wa(f){var be;(be=f==null?void 0:f.preventDefault)==null||be.call(f),a("");const y=Y(D),T=F(y),q=(P||"").trim();if(T&&(T.length<10||T.length>11))return a("Telefone invlido (use DDD + nmero).");const te={name:d.trim(),email:m.trim(),password:b,isAdmin:!!j,phone:T?y:null,address:q||null};if(!te.name||te.name.length<2)return a("Informe um nome vlido.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(te.email))return a("E-mail invlido.");if(!te.password||te.password.length<6)return a("Senha com 6+ caracteres.");try{await Q.post("/users",te),await Ot(),h(""),v(""),k(""),A(""),U(""),g(!1)}catch(ke){a(ke.message||"Falha ao criar usurio")}}function Bn(f){O({...f}),_("")}function Fs(){I||(O(null),_(""))}async function Xr(f){var y;if((y=f==null?void 0:f.preventDefault)==null||y.call(f),!!R){H(!0),a("");try{const T=Y(R.phone||""),q=F(T);if(q&&(q.length<10||q.length>11))throw new Error("Telefone invlido (use DDD + nmero).");const te={name:(R.name||"").trim(),email:(R.email||"").trim(),phone:q?T:null,address:(R.address||"").trim()||null,isAdmin:!!R.isAdmin,isBlocked:!!R.isBlocked};if(await Q.patch(`/users/${R.id}`,te),B&&B.trim().length>=6)if(e!=null&&e.id&&R.id===e.id){if(!re.trim())throw new Error("Informe a senha atual para alterar a sua senha.");await Q.post("/users/me/password",{current:re.trim(),password:B.trim()})}else await Q.post(`/users/${R.id}/password`,{password:B.trim()});await Ot(),Fs()}catch(T){a(T.message||"Falha ao salvar usurio")}finally{H(!1)}}}async function Ms(f){if(confirm("Excluir este usurio?"))try{await Q.del(`/users/${f}`),i(y=>y.filter(T=>T.id!==f)),G("Usurio excludo","success")}catch(y){G(y.message||"Falha ao excluir","error")}}function $s(f){ar(f.id),ut("")}function es(){ar(null),ut("")}async function Nl(){if(!(!xt||!Ze)){hn(!0);try{await Q.post(`/groups/${Ze}/members`,{userId:xt}),(V==null?void 0:V.id)===Ze&&await hr(),es(),G("Usurio adicionado ao grupo","success")}catch(f){G(f.message||"Falha ao adicionar ao grupo","error")}finally{hn(!1)}}}async function Nc(f){var T;(T=f==null?void 0:f.preventDefault)==null||T.call(f),a("");const y=(je||"").trim();if(y.length<2)return a("Informe um nome de grupo com 2+ caracteres.");try{await Q.post("/groups",{name:y});const q=await Q.get("/groups/all?includeDMs=false");ce(Array.isArray(q)?q:[]),W("")}catch(q){a(q.message||"Falha ao criar grupo")}}const[ts,ns]=c.useState([]),[Ha,Sc]=c.useState(""),[qa,rs]=c.useState(!1),[Qa,Ga]=c.useState(""),[Sl,Cl]=c.useState(""),[El,dr]=c.useState(""),[Dl,Os]=c.useState(""),[Ka,Za]=c.useState(""),[vn,Ut]=c.useState(!1),[Ja,Ya]=c.useState(null),[zn,fr]=c.useState({domain:"",extension:"",password:""});async function Vn(){rs(!0),Ga("");try{const f=await Q.get("/phone");ns(Array.isArray(f)?f:[])}catch(f){Ga(f.message||"Falha ao carregar contas SIP")}finally{rs(!1)}}c.useEffect(()=>{(async()=>{try{await Vn()}catch{}})()},[]);async function Cc(f){var y;(y=f==null?void 0:f.preventDefault)==null||y.call(f),Ut(!0);try{const T=(Sl||"").trim(),q=(El||"").trim(),te=(Dl||"").trim(),be=(Ka||"").trim();if(!T||!q||!te){G("Informe usurio, domnio e ramal.","error");return}await Q.patch(`/phone/${T}`,{domain:q,extension:te,...be?{password:be}:{}}),await Vn(),Cl(""),dr(""),Os(""),Za(""),G("Conta SIP salva","success")}catch(T){G(T.message||"Falha ao salvar conta SIP","error")}finally{Ut(!1)}}function Bt(f){Ya(f.user.id),fr({domain:f.domain||"",extension:f.extension||"",password:""})}function _l(){Ya(null),fr({domain:"",extension:"",password:""})}async function Xa(){if(Ja){Ut(!0);try{const f={domain:(zn.domain||"").trim(),extension:(zn.extension||"").trim()};if(!f.domain||!f.extension){G("Domnio e ramal so obrigatrios.","error");return}(zn.password||"").trim()&&(f.password=(zn.password||"").trim()),await Q.patch(`/phone/${Ja}`,f),await Vn(),_l(),G("Conta SIP atualizada","success")}catch(f){G(f.message||"Falha ao atualizar conta SIP","error")}finally{Ut(!1)}}}async function Al(f){try{await Q.post(`/phone/${f}/disconnect`,{}),await Vn(),G("Desconectado","success")}catch(y){G(y.message||"Falha ao desconectar","error")}}async function eo(f){try{if(typeof window<"u"&&!window.confirm("Excluir ramal/conta SIP deste usurio?"))return;await Q.delete(`/phone/${f}`),await Vn(),G("Ramal excludo","success")}catch(y){G(y.message||"Falha ao excluir ramal","error")}}async function Se(f){ee(f),ct(""),An(""),Ne([]);try{const y=await Q.get(`/groups/${f.id}/members`);ye(Array.isArray(y)?y:[])}catch(y){ye([]),a(y.message||"Falha ao carregar membros")}}async function to(f){if(f)try{if((V==null?void 0:V.id)===f){if(le.length>0){G("Remova todos os membros antes de excluir o grupo.","error");return}}else try{const y=await Q.get(`/groups/${f}/members`);if(Array.isArray(y)&&y.length>0){G("Remova todos os membros antes de excluir o grupo.","error");return}}catch{}if(typeof window<"u"&&!window.confirm("Excluir este grupo? Esta ao no pode ser desfeita."))return;await Q.delete(`/groups/${f}`),ce(y=>y.filter(T=>T.id!==f)),(V==null?void 0:V.id)===f&&(ee(null),ye([])),G("Grupo excludo","success")}catch(y){G(y.message||"Falha ao excluir grupo","error")}}async function Rl(f){if(!(f!=null&&f.id))return;const y=(f.name||"").trim(),q=((typeof window<"u"?window.prompt("Novo nome do grupo:",y):y)||"").trim();if(!(!q||q===y))try{await Q.patch(`/groups/${f.id}`,{name:q}),ce(te=>te.map(be=>be.id===f.id?{...be,name:q}:be)),(V==null?void 0:V.id)===f.id&&ee(te=>({...te,name:q})),G("Grupo renomeado","success")}catch(te){G(te.message||"Falha ao renomear grupo","error")}}async function hr(){if(V)try{const f=await Q.get(`/groups/${V.id}/members`);ye(Array.isArray(f)?f:[])}catch{}}async function Ll(){if(!(!V||!Le)){Ke(!0);try{await Q.post(`/groups/${V.id}/members`,{userId:Le}),An(""),await hr()}catch(f){G(f.message||"Falha ao adicionar membro","error")}finally{Ke(!1)}}}async function Us(f){if(V)try{await Q.delete(`/groups/${V.id}/members/${f}`),ye(y=>y.filter(T=>T.userId!==f))}catch(y){G(y.message||"Falha ao remover","error")}}function pr(f){Ne(y=>y.includes(f)?y.filter(T=>T!==f):[...y,f])}function Ec(){Ne(le.map(f=>f.userId))}function Pl(){Ne([])}async function Wn(){if(!(!V||!dn.length)&&!(typeof window<"u"&&!window.confirm(`Remover ${dn.length} membro(s) de ${V.name}?`))){Rn(!0);try{const f=dn.map(te=>Q.delete(`/groups/${V.id}/members/${te}`)),y=await Promise.allSettled(f),T=y.filter(te=>te.status==="fulfilled").length,q=y.length-T;T&&await hr(),Pl(),q?G(`Removidos: ${T}. Falhas: ${q}.`,"error"):G(`Removidos: ${T}.`,"success")}catch(f){G(f.message||"Falha ao remover seleo","error")}finally{Rn(!1)}}}return s.jsxs("div",{className:"p-4 overflow-auto h-full",children:[Jt&&s.jsx("div",{className:`fixed bottom-4 right-4 z-50 px-4 py-2 rounded shadow border text-sm ${Jt.type==="success"?"bg-green-50 text-green-800 border-green-200":Jt.type==="error"?"bg-red-50 text-red-800 border-red-200":"bg-slate-50 text-slate-800 border-slate-200"}`,children:Jt.message}),s.jsx("h2",{className:"text-2xl font-semibold",children:"Admin"}),s.jsx("div",{className:"mt-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>n("usuarios"),className:`px-2 py-2 -mb-px border-b-2 ${t==="usuarios"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Usurios"}),s.jsx("button",{onClick:()=>n("grupos"),className:`px-2 py-2 -mb-px border-b-2 ${t==="grupos"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Grupos"}),s.jsx("button",{onClick:()=>n("telefonia"),className:`px-2 py-2 -mb-px border-b-2 ${t==="telefonia"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Telefonia"}),s.jsx("button",{onClick:()=>n("metricas"),className:`px-2 py-2 -mb-px border-b-2 ${t==="metricas"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Metricas"}),s.jsx("button",{onClick:()=>n("Configuracoes"),className:`px-2 py-2 -mb-px border-b-2 ${t==="Configuracoes"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Configuraes"})]})}),r&&s.jsx("div",{className:"mt-3 rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2",children:r}),t==="usuarios"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[s.jsxs("form",{onSubmit:Wa,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2",children:[s.jsx("h4",{className:"font-medium",children:"Novo Usurio"}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome",value:d,onChange:f=>h(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"E-mail",value:m,onChange:f=>v(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Telefone (opcional)",value:D,onChange:f=>A(Y(f.target.value))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Endereo (opcional)",value:P,onChange:f=>U(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha",type:"password",value:b,onChange:f=>k(f.target.value)}),s.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:f=>g(f.target.checked)})," Admin"]}),s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Criar"})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium",children:"Lista"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar...",value:w,onChange:f=>C(f.target.value)}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:Ot,children:"Atualizar"})]})]}),Va.length?s.jsx("ul",{className:"mt-2 divide-y divide-slate-200",children:Va.map(f=>s.jsxs("li",{className:"py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:f.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:f.email}),s.jsxs("div",{className:"text-xs text-slate-500",children:[f.isAdmin?"admin":"",f.isBlocked?(f.isAdmin?"  ":"")+"bloqueado":""]})]}),s.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>Bn(f),children:"Editar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>Ms(f.id),children:"Excluir"}),s.jsx("div",{className:"relative inline-block",children:xt===f.id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:Ze,onChange:y=>ut(y.target.value),children:[s.jsx("option",{value:"",children:"Escolha o grupo"}),se.map(y=>s.jsx("option",{value:y.id,children:y.name},y.id))]}),s.jsx("button",{className:"px-2 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",disabled:!Ze||fn,onClick:Nl,children:fn?"Adicionando...":"Adicionar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:es,children:"Cancelar"})]}):s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>$s(f),children:"Adicionar ao grupo"})})]})]},f.id))}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum usurio encontrado."})]})]}),t==="grupos"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 lg:grid-cols-[0.9fr_1fr_1.6fr] gap-4 items-start",children:[s.jsxs("form",{onSubmit:Nc,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Novo Grupo"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Crie um grupo e depois gerencie os membros ao lado."})]}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome do grupo",value:je,onChange:f=>W(f.target.value)}),s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Criar"})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("h4",{className:"font-medium",children:"Lista"}),s.jsxs("div",{className:"text-xs text-slate-500",children:[se.length," grupo(s)"]})]}),se.length?s.jsx("ul",{className:"mt-3 space-y-2 max-h-[420px] overflow-auto pr-1",children:se.map(f=>{const y=(V==null?void 0:V.id)===f.id,T=y&&le.length>0;return s.jsx("li",{className:`px-3 py-2 rounded border cursor-pointer transition ${y?"border-blue-400 bg-blue-50":"border-slate-200 hover:bg-slate-50"}`,onClick:()=>Se(f),children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("div",{className:"min-w-0",children:s.jsx("div",{className:"font-medium truncate",children:f.name})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:q=>{q.stopPropagation(),Rl(f)},children:"Renomear"}),s.jsx("button",{type:"button",className:`px-2 py-1 text-xs rounded border border-red-300 text-red-700 ${T?"opacity-50 cursor-not-allowed":"hover:bg-red-50"}`,disabled:T,title:T?"Remova todos os membros antes de excluir":"Excluir",onClick:q=>{q.stopPropagation(),T||to(f.id)},children:"Excluir"})]})]})},f.id)})}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum grupo encontrado."})]}),s.jsx("div",{className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-3",children:V?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("h4",{className:"font-medium truncate",children:["Membros - ",V.name]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[s.jsx("button",{type:"button",className:`rounded border px-2 py-1 border-red-300 text-red-700 ${le.length>0?"opacity-50 cursor-not-allowed":"hover:bg-red-50"}`,disabled:le.length>0,title:le.length>0?"Remova todos os membros antes de excluir":"Excluir grupo",onClick:()=>{le.length===0&&to(V.id)},children:"Excluir grupo"}),s.jsx("button",{type:"button",className:"rounded border px-2 py-1 hover:bg-slate-50",onClick:Ec,children:"Selecionar todos"}),s.jsx("button",{type:"button",className:"rounded border px-2 py-1 hover:bg-slate-50",onClick:Pl,children:"Limpar selecao"}),s.jsx("button",{type:"button",className:"rounded bg-red-600 text-white px-2 py-1 disabled:opacity-60",disabled:!dn.length||Ss,onClick:Wn,children:Ss?"Removendo...":"Remover selecao"}),s.jsx("button",{type:"button",className:"text-slate-600 underline",onClick:hr,children:"Atualizar"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{className:"border rounded px-2 py-1 text-sm flex-1",placeholder:"Buscar usuario...",value:Tt,onChange:f=>ct(f.target.value)}),s.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:Le,onChange:f=>An(f.target.value),children:[s.jsx("option",{value:"",children:"Selecionar usuario"}),Ts.map(f=>s.jsxs("option",{value:f.id,children:[f.name," - ",f.email]},f.id))]}),s.jsx("button",{type:"button",className:"px-3 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",disabled:!Le||Zt,onClick:Ll,children:Zt?"Adicionando...":"Adicionar"})]}),le.length?s.jsx("div",{className:"max-h-[420px] overflow-auto pr-1",children:s.jsx("ul",{className:"mt-1 divide-y divide-slate-200",children:le.map(f=>{var y,T;return s.jsxs("li",{className:"py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:dn.includes(f.userId),onChange:()=>pr(f.userId)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium truncate",children:((y=f.user)==null?void 0:y.name)||f.userId}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:(T=f.user)==null?void 0:T.email})]})]}),s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>Us(f.userId),children:"Remover"})]},f.userId)})})}):s.jsx("div",{className:"text-sm text-slate-500",children:"Sem membros ainda."})]}):s.jsx("div",{className:"text-sm text-slate-500",children:"Selecione um grupo para ver os membros."})})]}),t==="telefonia"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[s.jsxs("form",{onSubmit:Cc,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2 md:col-span-1",children:[s.jsx("h4",{className:"font-medium",children:"Nova/Atualizar conta SIP"}),s.jsxs("select",{className:"border rounded px-3 py-2",value:Sl,onChange:f=>Cl(f.target.value),children:[s.jsx("option",{value:"",children:"Selecione o usurio"}),o.map(f=>s.jsxs("option",{value:f.id,children:[f.name,"  ",f.email]},f.id))]}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Domnio (ex.: sip.empresa.com)",value:El,onChange:f=>dr(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Ramal/Extenso",value:Dl,onChange:f=>Os(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha (opcional para manter)",type:"password",value:Ka,onChange:f=>Za(f.target.value)}),s.jsx("button",{disabled:vn,className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700 disabled:opacity-60",children:vn?"Salvando...":"Salvar conta SIP"})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium",children:"Contas SIP"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{className:"border rounded px-2 py-1 text-sm w-64 shrink-0",placeholder:"Buscar por nome, e-mail, ramal, domnio",value:Ha,onChange:f=>Sc(f.target.value)}),s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:Vn,children:"Atualizar"})]})]}),Qa&&s.jsx("div",{className:"mt-2 rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2 text-sm",children:Qa}),qa?s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Carregando..."}):ts.length?s.jsx("ul",{className:"mt-2 divide-y divide-slate-200",children:ts.filter(f=>{var q,te;const y=Ha.trim().toLowerCase();return y?`${((q=f.user)==null?void 0:q.name)||""} ${((te=f.user)==null?void 0:te.email)||""} ${f.extension||""} ${f.domain||""}`.toLowerCase().includes(y):!0}).map(f=>{var y,T,q,te;return s.jsx("li",{className:"py-2",children:Ja===f.user.id?s.jsxs("div",{className:"grid md:grid-cols-6 gap-2 items-center",children:[s.jsxs("div",{className:"md:col-span-2 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:(y=f.user)==null?void 0:y.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:(T=f.user)==null?void 0:T.email})]}),s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Domnio",value:zn.domain,onChange:be=>fr(ke=>({...ke,domain:be.target.value}))}),s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Ramal",value:zn.extension,onChange:be=>fr(ke=>({...ke,extension:be.target.value}))}),s.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Senha (opcional)",type:"password",value:zn.password,onChange:be=>fr(ke=>({...ke,password:be.target.value}))}),s.jsxs("div",{className:"flex items-center gap-2 justify-end whitespace-nowrap",children:[s.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:_l,disabled:vn,children:"Cancelar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",onClick:Xa,disabled:vn,children:"Salvar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>eo(f.user.id),disabled:vn,children:"Excluir"})]})]}):s.jsxs("div",{className:"grid md:grid-cols-6 gap-2 items-center",children:[s.jsxs("div",{className:"md:col-span-2 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:(q=f.user)==null?void 0:q.name}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:(te=f.user)==null?void 0:te.email})]}),s.jsx("div",{className:"text-sm truncate",children:f.domain}),s.jsx("div",{className:"text-sm",children:f.extension}),s.jsx("div",{className:"text-xs",children:s.jsx("span",{className:`px-2 py-0.5 rounded-full border ${f.regRegistered?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:f.regRegistered?"registrado":f.regStatus||"desconectado"})}),s.jsxs("div",{className:"flex items-center gap-3 justify-end whitespace-nowrap",children:[s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>Bt(f),children:"Editar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-amber-300 text-amber-700 hover:bg-amber-50",onClick:()=>Al(f.user.id),children:"Desconectar"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>eo(f.user.id),children:"Excluir"})]})]})},f.id)})}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhuma conta SIP encontrada."})]})]}),t==="Configuracoes"&&s.jsxs("section",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4 items-start",children:[s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 lg:col-span-3",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Backups do chat"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Gera cpias do banco de dados e da pasta de uploads. Restaurar um backup substitui dados atuais."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",onClick:kc,disabled:Ia,children:Ia?"Executando...":"Executar backup agora"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border hover:bg-slate-50 disabled:opacity-60",onClick:K,disabled:Gr,children:Gr?"Atualizando...":"Atualizar lista"})]})]}),s.jsxs("form",{onSubmit:Ba,className:"mt-4 space-y-3",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:!!Ve.autoEnabled,onChange:f=>Qr(y=>({...y,autoEnabled:f.target.checked}))}),"Ativar backup automtico dirio"]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-3 md:items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Horrio"}),s.jsx("input",{type:"time",className:"mt-1 border rounded px-3 py-2 w-full",value:Ve.time||"02:00",onChange:f=>Qr(y=>({...y,time:f.target.value})),disabled:!Ve.autoEnabled})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Reteno (dias)"}),s.jsx("input",{type:"number",min:"0",max:"365",className:"mt-1 border rounded px-3 py-2 w-full",value:Ve.retentionDays??7,onChange:f=>Qr(y=>({...y,retentionDays:Math.max(0,Number(f.target.value))})),disabled:!Ve.autoEnabled})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:Ta,children:Ta?"Salvando...":"Salvar agendamento"})})]}),s.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[s.jsxs("div",{children:["ltimo backup manual: ",gt(Ve.lastManualRunAt)," ",((Bs=Ve.lastManualResult)==null?void 0:Bs.ok)===!1?`(erro: ${((Hn=Ve.lastManualResult)==null?void 0:Hn.error)||"desconhecido"})`:""]}),s.jsxs("div",{children:["ltimo backup automtico: ",gt(Ve.lastAutoRunAt)," ",((no=Ve.lastAutoResult)==null?void 0:no.ok)===!1?`(erro: ${((ro=Ve.lastAutoResult)==null?void 0:ro.error)||"desconhecido"})`:""]}),s.jsxs("div",{children:["ltima restaurao: ",gt(Ve.lastRestoreAt)," ",Ve.lastRestoreName?`(${Ve.lastRestoreName})`:""]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium",children:"Backups disponveis"}),Gr?s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Carregando backups..."}):gl.length?s.jsx("div",{className:"mt-2 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm border border-slate-200 rounded",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Nome"}),s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Criado em"}),s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Tamanho"}),s.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Origem"}),s.jsx("th",{className:"px-3 py-2 text-right font-medium text-slate-600",children:"Aes"})]})}),s.jsx("tbody",{children:gl.map(f=>{var y;return s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"px-3 py-2 font-mono text-xs md:text-sm",children:f.name}),s.jsx("td",{className:"px-3 py-2",children:gt(f.createdAt)}),s.jsx("td",{className:"px-3 py-2",children:Yt(f.size)}),s.jsx("td",{className:"px-3 py-2",children:((y=f==null?void 0:f.meta)==null?void 0:y.reason)==="auto"?"Automtico":"Manual"}),s.jsx("td",{className:"px-3 py-2",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border hover:bg-slate-50 disabled:opacity-60",onClick:()=>Ct(f.name),disabled:ir===f.name,children:ir===f.name?"Baixando...":"Download"}),s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",onClick:()=>cr(f.name),disabled:lr===f.name,children:lr===f.name?"Restaurando...":"Restaurar"}),s.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:()=>Ua(f.name),disabled:Kr===f.name,children:Kr===f.name?"Excluindo...":"Excluir"})]})})]},f.name)})})]})}):s.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum backup encontrado ainda."})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 lg:col-span-2 space-y-4",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Marca e aparencia global"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Configuracoes aplicadas para todos os usuarios."})]}),s.jsxs("div",{className:"mt-3 grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"cone do chat"}),s.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[Vr?s.jsx("img",{src:Vr,alt:"global",className:"w-12 h-12 rounded-full object-cover border"}):s.jsx("div",{className:"w-12 h-12 rounded-full border bg-slate-100"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"cfg-file-global",className:"hidden",type:"file",accept:"image/*",onChange:f=>{var y;return Ma((y=f.target.files)==null?void 0:y[0])}}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var f;return(f=document.getElementById("cfg-file-global"))==null?void 0:f.click()},children:"Enviar"}),Vr&&s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>{try{localStorage.setItem("chat_icon",Vr),window.dispatchEvent(new Event("chat:iconUpdated")),G("Aplicado icone global neste navegador","success")}catch{}},children:"Aplicar local"})]})]})]}),s.jsxs("div",{className:"p-3 rounded border border-slate-200 bg-slate-50/60",children:[s.jsx("h4",{className:"font-medium",children:"Logo da tela de login"}),s.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[Xe?s.jsx("img",{src:Xe,alt:"logo de login",className:"w-16 h-16 rounded-xl object-cover border"}):s.jsx("div",{className:"w-16 h-16 rounded-xl border bg-slate-100 grid place-items-center text-xs text-slate-400",children:"Sem logo"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("input",{id:"login-logo-file",className:"hidden",type:"file",accept:"image/*",onChange:f=>{var y;return jl((y=f.target.files)==null?void 0:y[0])}}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50 disabled:opacity-60",onClick:()=>{var f;return(f=document.getElementById("login-logo-file"))==null?void 0:f.click()},disabled:pn,children:pn?"Enviando...":"Enviar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:Oa,disabled:pl,children:pl?"Excluindo...":"Remover (deixar sem logo)"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-green-300 text-green-700 hover:bg-green-50 disabled:opacity-60",onClick:kl,disabled:Ea,children:Ea?"Salvando...":"Salvar"})]})]}),s.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Exibido na pgina de login. Reenvie para substituir."})]}),s.jsxs("div",{className:"p-3 rounded border border-slate-200 bg-slate-50/60",children:[s.jsx("h4",{className:"font-medium",children:"Papel de parede (conversas)"}),s.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[s.jsx("div",{className:"w-28 h-16 rounded border bg-slate-100 overflow-hidden",children:s.jsx("div",{className:"w-full h-full chat-bg",style:{"--chat-wallpaper":Ft?`url('${Ft}')`:void 0}})}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("input",{id:"cfg-file-wallpaper",className:"hidden",type:"file",accept:"image/*",onChange:f=>{var y;return bl((y=f.target.files)==null?void 0:y[0])}}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var f;return(f=document.getElementById("cfg-file-wallpaper"))==null?void 0:f.click()},children:"Enviar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-green-300 text-green-700 hover:bg-green-50",onClick:$a,disabled:!Ft,children:"Salvar"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>{try{if(!Ft){G("Nenhum wallpaper para aplicar","error");return}localStorage.setItem("chat_wallpaper",Ft),document.documentElement.style.setProperty("--chat-wallpaper",`url('${Ft}')`),window.dispatchEvent(new Event("chat:wallpaperUpdated")),G("Aplicado localmente","success")}catch{}},disabled:!Ft,children:"Aplicar local"}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:vt,disabled:!Ft,children:"Excluir"})]})]}),s.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Afeta todos os usurios. A aplicao local funciona apenas neste navegador."})]}),s.jsxs("div",{className:"md:col-span-3 p-4 rounded border border-slate-200 bg-slate-50/60",children:[s.jsx("h4",{className:"font-medium",children:"Sons de alerta"}),s.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Faa upload de arquivos de udio (mp3, wav, ogg) para usar como alerta padro do chat."}),s.jsxs("div",{className:"mt-3 flex flex-col md:flex-row md:items-end gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Nome (opcional)"}),s.jsx("input",{className:"mt-1 border rounded px-3 py-2 w-full",placeholder:"Ex.: Alerta ping",value:ml,onChange:f=>qr(f.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{ref:La,type:"file",accept:"audio/*",className:"hidden",onChange:Is}),s.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50 disabled:opacity-60",onClick:On,disabled:Aa,children:Aa?"Enviando...":"Enviar som"}),Aa&&s.jsx("span",{className:"text-xs text-slate-500",children:"Aguarde..."})]})]}),_a.length?s.jsx("ul",{className:"mt-3 divide-y divide-slate-200",children:_a.map(f=>s.jsxs("li",{className:"py-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:f.name||"Som"}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:f.url})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:()=>Un(f.url),children:"Ouvir"}),_s===f.id?s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-50 text-blue-700 border border-blue-200",children:"Ativo"}):s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>gn(f.id),children:"Definir"}),s.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:()=>Yr(f.id),disabled:Ra===f.id,children:Ra===f.id?"Excluindo...":"Excluir"})]})]},f.id))}):s.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"Nenhum som cadastrado ainda."}),s.jsx("div",{className:"mt-3",children:s.jsx("button",{type:"button",className:"text-xs text-slate-600 underline disabled:opacity-60",onClick:()=>gn(null),disabled:!_s,children:"Usar bip padro"})})]})]})]}),s.jsxs("form",{onSubmit:za,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2 lg:col-span-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Conta do administrador"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-2 mt-2",children:[s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha atual",type:"password",value:Fn,onChange:f=>Mn(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nova senha (6+)",type:"password",value:St,onChange:f=>Fa(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Confirmar nova senha",type:"password",value:Zr,onChange:f=>Jr(f.target.value)})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Alterar senha"})})]})]}),t==="metricas"&&s.jsx("section",{className:"mt-4 space-y-4",children:s.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 space-y-4",children:[s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Metricas do chat"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Monitoramento de carga e atividade das conversas."})]}),s.jsx("button",{type:"button",className:"px-3 py-1 text-sm rounded border border-slate-300 hover:bg-slate-50 disabled:opacity-60",onClick:$n,disabled:xe,children:xe?"Atualizando...":"Atualizar"})]}),$e&&s.jsx("div",{className:"text-sm text-red-600",children:$e}),!M&&xe&&s.jsx("div",{className:"text-sm text-slate-500",children:"Carregando metricas..."}),M&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-slate-50",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Usuarios cadastrados"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.totalUsers)})]}),s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-slate-50",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Grupos registrados"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.totalGroups)})]}),s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-slate-50",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Mensagens totais"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.totalMessages)})]})]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Mensagens ultimas 24h"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.messagesLast24Hours)})]}),s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Mensagens ultima hora"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.messagesLastHour)})]}),s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Media / min (ultima hora)"}),s.jsx("div",{className:"text-2xl font-semibold",children:wc(M.avgMessagesPerMinuteLastHour)})]})]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-slate-50",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Usuarios online agora"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.onlineUsers)})]}),s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-slate-50",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Sessoes ativas"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.onlineSessions)})]}),s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-slate-50",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Grupos ativos (ultima hora)"}),s.jsx("div",{className:"text-2xl font-semibold",children:rt(M.groupsActiveLastHour)})]})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-slate-50 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Ultimos 10 minutos"}),s.jsx("span",{className:"text-xs text-slate-500",children:"Minutos"})]}),s.jsx("div",{className:"space-y-2",children:Pn.list.map(f=>s.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[s.jsx("div",{className:"w-16 text-right text-slate-500",children:f.label}),s.jsx("div",{className:"flex-1 h-2 bg-slate-100 rounded overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500",style:{width:`${f.count/Pn.max*100}%`}})}),s.jsx("div",{className:"w-10 text-right font-semibold text-slate-700",children:f.count})]},f.timestamp))})]}),s.jsxs("div",{className:"p-4 rounded border border-slate-200 bg-white space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Grupos mais ativos (24h)"}),(ss=M.busiestGroups)!=null&&ss.length?s.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:M.busiestGroups.map(f=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"truncate",children:f.name}),s.jsxs("span",{className:"text-xs text-slate-500",children:[rt(f.messages)," msgs"]})]},f.groupId))}):s.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum grupo ativo neste periodo."}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Grupos ativos 24h: ",rt(M.groupsActiveLast24Hours)]})]})]}),M.lastMessage&&s.jsxs("div",{className:"text-xs text-slate-500",children:["Ultima mensagem em ",s.jsx("span",{className:"font-medium text-slate-700",children:M.lastMessage.groupName||"-"})," por ",s.jsx("span",{className:"font-medium text-slate-700",children:M.lastMessage.authorName||"-"})," em ",gt(M.lastMessage.createdAt)]})]})]})}),R&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/30 grid place-items-center",onClick:Fs,children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded border border-slate-200 p-4",onClick:f=>f.stopPropagation(),children:[s.jsx("h4",{className:"text-lg font-medium mb-2",children:"Editar Usurio"}),s.jsxs("form",{onSubmit:Xr,className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome",value:R.name||"",onChange:f=>O(y=>({...y,name:f.target.value}))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"E-mail",value:R.email||"",onChange:f=>O(y=>({...y,email:f.target.value}))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Telefone",value:R.phone||"",onChange:f=>O(y=>({...y,phone:Y(f.target.value)}))}),s.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Endereo",value:R.address||"",onChange:f=>O(y=>({...y,address:f.target.value}))}),s.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!R.isAdmin,onChange:f=>O(y=>({...y,isAdmin:f.target.checked}))})," Admin"]}),s.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!R.isBlocked,onChange:f=>O(y=>({...y,isBlocked:f.target.checked}))})," Bloqueado"]}),(e==null?void 0:e.id)&&R.id===e.id&&s.jsx("input",{className:"border rounded px-3 py-2 md:col-span-2",placeholder:"Senha atual (obrigatria para trocar a sua senha)",type:"password",value:re,onChange:f=>Z(f.target.value)}),s.jsx("input",{className:"border rounded px-3 py-2 md:col-span-2",placeholder:"Nova senha (opcional, 6+)",type:"password",value:B,onChange:f=>_(f.target.value)}),s.jsxs("div",{className:"md:col-span-2 flex items-center justify-end gap-2 mt-2",children:[s.jsx("button",{type:"button",className:"px-3 py-2 rounded border",onClick:Fs,disabled:I,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:I,children:I?"Salvando...":"Salvar"})]})]})]})})]})}function _b(){const[e,t]=c.useState(""),[n,r]=c.useState(""),[a,o]=c.useState(""),[i,d]=c.useState(null),[h,m]=c.useState(""),[v,b]=c.useState(""),[k,D]=c.useState(""),[A,P]=c.useState(""),[U,j]=c.useState(""),[g,w]=c.useState(""),C=c.useRef(null),R=c.useRef(""),O=F=>(F||"").replace(/\D/g,""),I=F=>{const Y=O(F).slice(0,11);return Y.length<=2?Y:Y.length<=6?`(${Y.slice(0,2)}) ${Y.slice(2)}`:Y.length===10?`(${Y.slice(0,2)}) ${Y.slice(2,6)}-${Y.slice(6)}`:Y.length>=11?`(${Y.slice(0,2)}) ${Y.slice(2,7)}-${Y.slice(7)}`:Y},H=()=>{if(R.current){if(typeof URL<"u"&&typeof URL.revokeObjectURL=="function")try{URL.revokeObjectURL(R.current)}catch{}R.current=""}};c.useEffect(()=>()=>{H()},[]),c.useEffect(()=>{(async()=>{try{const F=await Q.get("/users/me");t(F.name||""),r(F.phone?I(F.phone):""),o(F.address||"");const Y=F.avatarUrl||"";b(Y),m(Y)}catch{w("Falha ao carregar perfil")}})()},[]);const B=()=>{var F;(F=C.current)==null||F.click()},_=F=>{var se;const Y=((se=F.target.files)==null?void 0:se[0])||null;if(d(Y),H(),Y)try{const ce=URL.createObjectURL(Y);R.current=ce,m(ce)}catch{m(v)}else m(v)};async function re(F){F.preventDefault(),j(""),w("");try{const Y=I(n),se=O(Y);if(se&&(se.length<10||se.length>11))throw new Error("Telefone invalido (use DDD + numero).");const ce=(e||"").trim(),je=(a||"").trim(),W={phone:se?Y:null,address:je||null};if(ce&&(W.name=ce),i){await Q.patch("/users/me",W);const V=new FormData;V.append("avatar",i),await Q.uploadPatch("/users/me",V)}else await Q.patch("/users/me",W);try{const V=await Q.get("/users/me"),ee=V.avatarUrl||"";t(V.name||""),r(V.phone?I(V.phone):""),o(V.address||""),H(),b(ee),m(ee),d(null),C.current&&(C.current.value="");const le=Ue();le&&mx(le,V);try{window.dispatchEvent(new Event("chat:userUpdated"))}catch{}}catch{}j("Perfil atualizado!")}catch(Y){w(Y.message||"Erro ao salvar")}}async function Z(F){F.preventDefault(),j(""),w("");try{await Q.post("/users/me/password",{current:k,password:A}),D(""),P(""),j("Senha alterada!")}catch(Y){w(Y.message||"Erro ao alterar senha")}}return s.jsxs("div",{className:"p-4 overflow-auto h-full",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Meu perfil"}),U&&s.jsx("div",{className:"text-green-600 text-sm mt-2",children:U}),g&&s.jsx("div",{className:"text-red-600 text-sm mt-2",children:g}),s.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-[260px,1fr]",children:[s.jsxs("section",{className:"bg-white p-4 rounded border border-slate-200 flex flex-col items-center gap-3 text-center",children:[s.jsx("div",{className:"w-28 h-28 md:w-32 md:h-32 rounded-full border border-slate-200 dark:border-slate-700 overflow-hidden bg-slate-100 flex items-center justify-center text-slate-500",children:h?s.jsx("img",{src:h,alt:"avatar",className:"w-full h-full object-cover",onError:()=>m("")}):s.jsx("span",{className:"text-sm",children:"Sem foto"})}),s.jsx("button",{type:"button",onClick:B,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 text-sm rounded border border-slate-300 hover:bg-slate-50",children:"Alterar foto"}),s.jsx("input",{ref:C,type:"file",accept:"image/*",className:"hidden",onChange:_}),i&&s.jsx("div",{className:"w-full text-xs text-slate-500 truncate",children:i.name}),s.jsx("p",{className:"text-xs text-slate-500",children:"Utilize imagens quadradas para melhor resultado."})]}),s.jsxs("form",{onSubmit:re,className:"bg-white p-4 rounded border border-slate-200 grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Nome"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:e,onChange:F=>t(F.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Telefone"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:n,onChange:F=>r(I(F.target.value))})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Endereco"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:a,onChange:F=>o(F.target.value)})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Salvar"})})]})]}),s.jsxs("form",{onSubmit:Z,className:"mt-4 bg-white p-4 rounded border border-slate-200 grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Senha atual"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",type:"password",value:k,onChange:F=>D(F.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Nova senha"}),s.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",type:"password",value:A,onChange:F=>P(F.target.value)})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx("button",{className:"inline-flex items-center justify-center rounded bg-slate-700 text-white px-3 py-2 hover:bg-slate-800",children:"Alterar senha"})})]})]})}function Ab({children:e}){return Ue()?e:s.jsx(bd,{to:"/login",replace:!0})}function Rb({children:e}){const t=Ue(),n=fa();return t?n!=null&&n.isAdmin?e:s.jsx(bd,{to:"/",replace:!0}):s.jsx(bd,{to:"/login",replace:!0})}rx(document.getElementById("root")).render(s.jsx(Vo.StrictMode,{children:s.jsx(Ww,{children:s.jsxs(Mw,{children:[s.jsx(Et,{path:"/login",element:s.jsx(X1,{})}),s.jsx(Et,{path:"/register",element:s.jsx(eb,{})}),s.jsx(Et,{path:"/join/:token",element:s.jsx(Cb,{})}),s.jsxs(Et,{path:"/",element:s.jsx(Ab,{children:s.jsx(G1,{})}),children:[s.jsx(Et,{index:!0,element:s.jsx(Tx,{})}),s.jsx(Et,{path:"conversas",element:s.jsx(wb,{})}),s.jsx(Et,{path:"telefonia",element:s.jsx(bb,{})}),s.jsx(Et,{path:"reunioes",element:s.jsx(jb,{})}),s.jsx(Et,{path:"reunioes/:id",element:s.jsx(kb,{})}),s.jsx(Et,{path:"contatos",element:s.jsx(Eb,{})}),s.jsx(Et,{path:"admin",element:s.jsx(Rb,{children:s.jsx(Db,{})})}),s.jsx(Et,{path:"profile",element:s.jsx(_b,{})})]})]})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{try{navigator.serviceWorker.register("/sw.js")}catch(e){console.error("Falha ao registrar o Service Worker",e)}});
