function J0(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Y0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ah={exports:{}},yi={},Lh={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=Symbol.for("react.element"),X0=Symbol.for("react.portal"),eg=Symbol.for("react.fragment"),tg=Symbol.for("react.strict_mode"),ng=Symbol.for("react.profiler"),rg=Symbol.for("react.provider"),sg=Symbol.for("react.context"),ag=Symbol.for("react.forward_ref"),og=Symbol.for("react.suspense"),lg=Symbol.for("react.memo"),ig=Symbol.for("react.lazy"),af=Symbol.iterator;function ug(e){return e===null||typeof e!="object"?null:(e=af&&e[af]||e["@@iterator"],typeof e=="function"?e:null)}var Ph={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ih=Object.assign,Th={};function Qs(e,t,n){this.props=e,this.context=t,this.refs=Th,this.updater=n||Ph}Qs.prototype.isReactComponent={};Qs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fh(){}Fh.prototype=Qs.prototype;function Qc(e,t,n){this.props=e,this.context=t,this.refs=Th,this.updater=n||Ph}var Gc=Qc.prototype=new Fh;Gc.constructor=Qc;Ih(Gc,Qs.prototype);Gc.isPureReactComponent=!0;var of=Array.isArray,Oh=Object.prototype.hasOwnProperty,Kc={current:null},Uh={key:!0,ref:!0,__self:!0,__source:!0};function Mh(e,t,n){var r,s={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)Oh.call(t,r)&&!Uh.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var d=Array(c),m=0;m<c;m++)d[m]=arguments[m+2];s.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:So,type:e,key:o,ref:l,props:s,_owner:Kc.current}}function cg(e,t){return{$$typeof:So,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zc(e){return typeof e=="object"&&e!==null&&e.$$typeof===So}function dg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lf=/\/+/g;function lu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dg(""+e.key):t.toString(36)}function Al(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case So:case X0:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+lu(l,0):r,of(s)?(n="",e!=null&&(n=e.replace(lf,"$&/")+"/"),Al(s,t,n,"",function(m){return m})):s!=null&&(Zc(s)&&(s=cg(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(lf,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",of(e))for(var c=0;c<e.length;c++){o=e[c];var d=r+lu(o,c);l+=Al(o,t,n,d,s)}else if(d=ug(e),typeof d=="function")for(e=d.call(e),c=0;!(o=e.next()).done;)o=o.value,d=r+lu(o,c++),l+=Al(o,t,n,d,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function dl(e,t,n){if(e==null)return e;var r=[],s=0;return Al(e,r,"","",function(o){return t.call(n,o,s++)}),r}function fg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},Ll={transition:null},hg={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:Ll,ReactCurrentOwner:Kc};ce.Children={map:dl,forEach:function(e,t,n){dl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return dl(e,function(){t++}),t},toArray:function(e){return dl(e,function(t){return t})||[]},only:function(e){if(!Zc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Qs;ce.Fragment=eg;ce.Profiler=ng;ce.PureComponent=Qc;ce.StrictMode=tg;ce.Suspense=og;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hg;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ih({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=Kc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Oh.call(t,d)&&!Uh.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var m=0;m<d;m++)c[m]=arguments[m+2];r.children=c}return{$$typeof:So,type:e.type,key:s,ref:o,props:r,_owner:l}};ce.createContext=function(e){return e={$$typeof:sg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rg,_context:e},e.Consumer=e};ce.createElement=Mh;ce.createFactory=function(e){var t=Mh.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:ag,render:e}};ce.isValidElement=Zc;ce.lazy=function(e){return{$$typeof:ig,_payload:{_status:-1,_result:e},_init:fg}};ce.memo=function(e,t){return{$$typeof:lg,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Ll.transition;Ll.transition={};try{e()}finally{Ll.transition=t}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(e,t){return st.current.useCallback(e,t)};ce.useContext=function(e){return st.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return st.current.useDeferredValue(e)};ce.useEffect=function(e,t){return st.current.useEffect(e,t)};ce.useId=function(){return st.current.useId()};ce.useImperativeHandle=function(e,t,n){return st.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return st.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return st.current.useReducer(e,t,n)};ce.useRef=function(e){return st.current.useRef(e)};ce.useState=function(e){return st.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return st.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return st.current.useTransition()};ce.version="18.2.0";Lh.exports=ce;var u=Lh.exports;const wi=Y0(u),pg=J0({__proto__:null,default:wi},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg=u,gg=Symbol.for("react.element"),xg=Symbol.for("react.fragment"),vg=Object.prototype.hasOwnProperty,yg=mg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wg={key:!0,ref:!0,__self:!0,__source:!0};function $h(e,t,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)vg.call(t,r)&&!wg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:gg,type:e,key:o,ref:l,props:s,_owner:yg.current}}yi.Fragment=xg;yi.jsx=$h;yi.jsxs=$h;Ah.exports=yi;var a=Ah.exports,Bh={exports:{}},bt={},zh={exports:{}},Vh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,W){var X=z.length;z.push(W);e:for(;0<X;){var O=X-1>>>1,ae=z[O];if(0<s(ae,W))z[O]=W,z[X]=ae,X=O;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var W=z[0],X=z.pop();if(X!==W){z[0]=X;e:for(var O=0,ae=z.length,ve=ae>>>1;O<ve;){var pe=2*(O+1)-1,De=z[pe],ue=pe+1,ye=z[ue];if(0>s(De,X))ue<ae&&0>s(ye,De)?(z[O]=ye,z[ue]=X,O=ue):(z[O]=De,z[pe]=X,O=pe);else if(ue<ae&&0>s(ye,X))z[O]=ye,z[ue]=X,O=ue;else break e}}return W}function s(z,W){var X=z.sortIndex-W.sortIndex;return X!==0?X:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],m=[],x=1,w=null,k=3,D=!1,_=!1,A=!1,L=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var W=n(m);W!==null;){if(W.callback===null)r(m);else if(W.startTime<=z)r(m),W.sortIndex=W.expirationTime,t(d,W);else break;W=n(m)}}function E(z){if(A=!1,b(z),!_)if(n(d)!==null)_=!0,ie(R);else{var W=n(m);W!==null&&Ce(E,W.startTime-z)}}function R(z,W){_=!1,A&&(A=!1,j(V),V=-1),D=!0;var X=k;try{for(b(W),w=n(d);w!==null&&(!(w.expirationTime>W)||z&&!ne());){var O=w.callback;if(typeof O=="function"){w.callback=null,k=w.priorityLevel;var ae=O(w.expirationTime<=W);W=e.unstable_now(),typeof ae=="function"?w.callback=ae:w===n(d)&&r(d),b(W)}else r(d);w=n(d)}if(w!==null)var ve=!0;else{var pe=n(m);pe!==null&&Ce(E,pe.startTime-W),ve=!1}return ve}finally{w=null,k=X,D=!1}}var U=!1,$=null,V=-1,B=5,C=-1;function ne(){return!(e.unstable_now()-C<B)}function Z(){if($!==null){var z=e.unstable_now();C=z;var W=!0;try{W=$(!0,z)}finally{W?F():(U=!1,$=null)}}else U=!1}var F;if(typeof g=="function")F=function(){g(Z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,le=Y.port2;Y.port1.onmessage=Z,F=function(){le.postMessage(null)}}else F=function(){L(Z,0)};function ie(z){$=z,U||(U=!0,F())}function Ce(z,W){V=L(function(){z(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){_||D||(_=!0,ie(R))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(z){switch(k){case 1:case 2:case 3:var W=3;break;default:W=k}var X=k;k=W;try{return z()}finally{k=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=k;k=z;try{return W()}finally{k=X}},e.unstable_scheduleCallback=function(z,W,X){var O=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?O+X:O):X=O,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=X+ae,z={id:x++,callback:W,priorityLevel:z,startTime:X,expirationTime:ae,sortIndex:-1},X>O?(z.sortIndex=X,t(m,z),n(d)===null&&z===n(m)&&(A?(j(V),V=-1):A=!0,Ce(E,X-O))):(z.sortIndex=ae,t(d,z),_||D||(_=!0,ie(R))),z},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(z){var W=k;return function(){var X=k;k=W;try{return z.apply(this,arguments)}finally{k=X}}}})(Vh);zh.exports=Vh;var bg=zh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh=u,wt=bg;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hh=new Set,ao={};function Vr(e,t){$s(e,t),$s(e+"Capture",t)}function $s(e,t){for(ao[e]=t,e=0;e<t.length;e++)Hh.add(t[e])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vu=Object.prototype.hasOwnProperty,jg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uf={},cf={};function kg(e){return Vu.call(cf,e)?!0:Vu.call(uf,e)?!1:jg.test(e)?cf[e]=!0:(uf[e]=!0,!1)}function Ng(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sg(e,t,n,r){if(t===null||typeof t>"u"||Ng(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,n,r,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ze[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jc=/[\-:]([a-z])/g;function Yc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jc,Yc);Ze[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jc,Yc);Ze[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jc,Yc);Ze[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xc(e,t,n,r){var s=Ze.hasOwnProperty(t)?Ze[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sg(t,n,s,r)&&(n=null),r||s===null?kg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Dn=Wh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fl=Symbol.for("react.element"),bs=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),ed=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),qh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),td=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),qu=Symbol.for("react.suspense_list"),nd=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),Gh=Symbol.for("react.offscreen"),df=Symbol.iterator;function Pa(e){return e===null||typeof e!="object"?null:(e=df&&e[df]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,iu;function Ha(e){if(iu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);iu=t&&t[1]||""}return`
`+iu+e}var uu=!1;function cu(e,t){if(!e||uu)return"";uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var r=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){r=m}e.call(t.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,c=o.length-1;1<=l&&0<=c&&s[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==o[c]){var d=`
`+s[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=c);break}}}finally{uu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ha(e):""}function Eg(e){switch(e.tag){case 5:return Ha(e.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 2:case 15:return e=cu(e.type,!1),e;case 11:return e=cu(e.type.render,!1),e;case 1:return e=cu(e.type,!0),e;default:return""}}function Qu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case js:return"Fragment";case bs:return"Portal";case Wu:return"Profiler";case ed:return"StrictMode";case Hu:return"Suspense";case qu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qh:return(e.displayName||"Context")+".Consumer";case qh:return(e._context.displayName||"Context")+".Provider";case td:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nd:return t=e.displayName||null,t!==null?t:Qu(e.type)||"Memo";case zn:t=e._payload,e=e._init;try{return Qu(e(t))}catch{}}return null}function Cg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qu(t);case 8:return t===ed?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dg(e){var t=Kh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hl(e){e._valueTracker||(e._valueTracker=Dg(e))}function Zh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Kh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gu(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ff(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jh(e,t){t=t.checked,t!=null&&Xc(e,"checked",t,!1)}function Ku(e,t){Jh(e,t);var n=ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Zu(e,t.type,ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Zu(e,t,n){(t!=="number"||Gl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var qa=Array.isArray;function Ps(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ar(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ju(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(qa(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ar(n)}}function Yh(e,t){var n=ar(t.value),r=ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pl,ep=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pl=pl||document.createElement("div"),pl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function oo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_g=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(e){_g.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Za[t]=Za[e]})});function tp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Za.hasOwnProperty(e)&&Za[e]?(""+t).trim():t+"px"}function np(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Rg=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xu(e,t){if(t){if(Rg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function ec(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=null;function rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nc=null,Is=null,Ts=null;function gf(e){if(e=Do(e)){if(typeof nc!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Si(t),nc(e.stateNode,e.type,t))}}function rp(e){Is?Ts?Ts.push(e):Ts=[e]:Is=e}function sp(){if(Is){var e=Is,t=Ts;if(Ts=Is=null,gf(e),t)for(e=0;e<t.length;e++)gf(t[e])}}function ap(e,t){return e(t)}function op(){}var du=!1;function lp(e,t,n){if(du)return e(t,n);du=!0;try{return ap(e,t,n)}finally{du=!1,(Is!==null||Ts!==null)&&(op(),sp())}}function lo(e,t){var n=e.stateNode;if(n===null)return null;var r=Si(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var rc=!1;if(Nn)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){rc=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{rc=!1}function Ag(e,t,n,r,s,o,l,c,d){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(x){this.onError(x)}}var Ja=!1,Kl=null,Zl=!1,sc=null,Lg={onError:function(e){Ja=!0,Kl=e}};function Pg(e,t,n,r,s,o,l,c,d){Ja=!1,Kl=null,Ag.apply(Lg,arguments)}function Ig(e,t,n,r,s,o,l,c,d){if(Pg.apply(this,arguments),Ja){if(Ja){var m=Kl;Ja=!1,Kl=null}else throw Error(M(198));Zl||(Zl=!0,sc=m)}}function Wr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ip(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xf(e){if(Wr(e)!==e)throw Error(M(188))}function Tg(e){var t=e.alternate;if(!t){if(t=Wr(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return xf(s),e;if(o===r)return xf(s),t;o=o.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,r=o;break}if(c===r){l=!0,r=s,n=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===n){l=!0,n=o,r=s;break}if(c===r){l=!0,r=o,n=s;break}c=c.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function up(e){return e=Tg(e),e!==null?cp(e):null}function cp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cp(e);if(t!==null)return t;e=e.sibling}return null}var dp=wt.unstable_scheduleCallback,vf=wt.unstable_cancelCallback,Fg=wt.unstable_shouldYield,Og=wt.unstable_requestPaint,Te=wt.unstable_now,Ug=wt.unstable_getCurrentPriorityLevel,sd=wt.unstable_ImmediatePriority,fp=wt.unstable_UserBlockingPriority,Jl=wt.unstable_NormalPriority,Mg=wt.unstable_LowPriority,hp=wt.unstable_IdlePriority,bi=null,nn=null;function $g(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(bi,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Vg,Bg=Math.log,zg=Math.LN2;function Vg(e){return e>>>=0,e===0?32:31-(Bg(e)/zg|0)|0}var ml=64,gl=4194304;function Qa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~s;c!==0?r=Qa(c):(o&=l,o!==0&&(r=Qa(o)))}else l=n&~s,l!==0?r=Qa(l):o!==0&&(r=Qa(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function Wg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Wt(o),c=1<<l,d=s[l];d===-1?(!(c&n)||c&r)&&(s[l]=Wg(c,t)):d<=t&&(e.expiredLanes|=c),o&=~c}}function ac(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pp(){var e=ml;return ml<<=1,!(ml&4194240)&&(ml=64),e}function fu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Eo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function qg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function ad(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ge=0;function mp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gp,od,xp,vp,yp,oc=!1,xl=[],Kn=null,Zn=null,Jn=null,io=new Map,uo=new Map,Wn=[],Qg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(e,t){switch(e){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":io.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(t.pointerId)}}function Ta(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Do(t),t!==null&&od(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gg(e,t,n,r,s){switch(t){case"focusin":return Kn=Ta(Kn,e,t,n,r,s),!0;case"dragenter":return Zn=Ta(Zn,e,t,n,r,s),!0;case"mouseover":return Jn=Ta(Jn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return io.set(o,Ta(io.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,uo.set(o,Ta(uo.get(o)||null,e,t,n,r,s)),!0}return!1}function wp(e){var t=Pr(e.target);if(t!==null){var n=Wr(t);if(n!==null){if(t=n.tag,t===13){if(t=ip(n),t!==null){e.blockedOn=t,yp(e.priority,function(){xp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);tc=r,n.target.dispatchEvent(r),tc=null}else return t=Do(n),t!==null&&od(t),e.blockedOn=n,!1;t.shift()}return!0}function wf(e,t,n){Pl(e)&&n.delete(t)}function Kg(){oc=!1,Kn!==null&&Pl(Kn)&&(Kn=null),Zn!==null&&Pl(Zn)&&(Zn=null),Jn!==null&&Pl(Jn)&&(Jn=null),io.forEach(wf),uo.forEach(wf)}function Fa(e,t){e.blockedOn===t&&(e.blockedOn=null,oc||(oc=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,Kg)))}function co(e){function t(s){return Fa(s,e)}if(0<xl.length){Fa(xl[0],e);for(var n=1;n<xl.length;n++){var r=xl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Kn!==null&&Fa(Kn,e),Zn!==null&&Fa(Zn,e),Jn!==null&&Fa(Jn,e),io.forEach(t),uo.forEach(t),n=0;n<Wn.length;n++)r=Wn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wn.length&&(n=Wn[0],n.blockedOn===null);)wp(n),n.blockedOn===null&&Wn.shift()}var Fs=Dn.ReactCurrentBatchConfig,Xl=!0;function Zg(e,t,n,r){var s=ge,o=Fs.transition;Fs.transition=null;try{ge=1,ld(e,t,n,r)}finally{ge=s,Fs.transition=o}}function Jg(e,t,n,r){var s=ge,o=Fs.transition;Fs.transition=null;try{ge=4,ld(e,t,n,r)}finally{ge=s,Fs.transition=o}}function ld(e,t,n,r){if(Xl){var s=lc(e,t,n,r);if(s===null)ju(e,t,r,ei,n),yf(e,r);else if(Gg(s,e,t,n,r))r.stopPropagation();else if(yf(e,r),t&4&&-1<Qg.indexOf(e)){for(;s!==null;){var o=Do(s);if(o!==null&&gp(o),o=lc(e,t,n,r),o===null&&ju(e,t,r,ei,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else ju(e,t,r,null,n)}}var ei=null;function lc(e,t,n,r){if(ei=null,e=rd(r),e=Pr(e),e!==null)if(t=Wr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ip(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ei=e,null}function bp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ug()){case sd:return 1;case fp:return 4;case Jl:case Mg:return 16;case hp:return 536870912;default:return 16}default:return 16}}var qn=null,id=null,Il=null;function jp(){if(Il)return Il;var e,t=id,n=t.length,r,s="value"in qn?qn.value:qn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[o-r];r++);return Il=s.slice(e,1<r?1-r:void 0)}function Tl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vl(){return!0}function bf(){return!1}function jt(e){function t(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?vl:bf,this.isPropagationStopped=bf,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ud=jt(Gs),Co=Le({},Gs,{view:0,detail:0}),Yg=jt(Co),hu,pu,Oa,ji=Le({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oa&&(Oa&&e.type==="mousemove"?(hu=e.screenX-Oa.screenX,pu=e.screenY-Oa.screenY):pu=hu=0,Oa=e),hu)},movementY:function(e){return"movementY"in e?e.movementY:pu}}),jf=jt(ji),Xg=Le({},ji,{dataTransfer:0}),ex=jt(Xg),tx=Le({},Co,{relatedTarget:0}),mu=jt(tx),nx=Le({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),rx=jt(nx),sx=Le({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ax=jt(sx),ox=Le({},Gs,{data:0}),kf=jt(ox),lx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ix={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ux[e])?!!t[e]:!1}function cd(){return cx}var dx=Le({},Co,{key:function(e){if(e.key){var t=lx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ix[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cd,charCode:function(e){return e.type==="keypress"?Tl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fx=jt(dx),hx=Le({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=jt(hx),px=Le({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cd}),mx=jt(px),gx=Le({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),xx=jt(gx),vx=Le({},ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yx=jt(vx),wx=[9,13,27,32],dd=Nn&&"CompositionEvent"in window,Ya=null;Nn&&"documentMode"in document&&(Ya=document.documentMode);var bx=Nn&&"TextEvent"in window&&!Ya,kp=Nn&&(!dd||Ya&&8<Ya&&11>=Ya),Sf=" ",Ef=!1;function Np(e,t){switch(e){case"keyup":return wx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ks=!1;function jx(e,t){switch(e){case"compositionend":return Sp(t);case"keypress":return t.which!==32?null:(Ef=!0,Sf);case"textInput":return e=t.data,e===Sf&&Ef?null:e;default:return null}}function kx(e,t){if(ks)return e==="compositionend"||!dd&&Np(e,t)?(e=jp(),Il=id=qn=null,ks=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kp&&t.locale!=="ko"?null:t.data;default:return null}}var Nx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nx[e.type]:t==="textarea"}function Ep(e,t,n,r){rp(r),t=ti(t,"onChange"),0<t.length&&(n=new ud("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xa=null,fo=null;function Sx(e){Op(e,0)}function ki(e){var t=Es(e);if(Zh(t))return e}function Ex(e,t){if(e==="change")return t}var Cp=!1;if(Nn){var gu;if(Nn){var xu="oninput"in document;if(!xu){var Df=document.createElement("div");Df.setAttribute("oninput","return;"),xu=typeof Df.oninput=="function"}gu=xu}else gu=!1;Cp=gu&&(!document.documentMode||9<document.documentMode)}function _f(){Xa&&(Xa.detachEvent("onpropertychange",Dp),fo=Xa=null)}function Dp(e){if(e.propertyName==="value"&&ki(fo)){var t=[];Ep(t,fo,e,rd(e)),lp(Sx,t)}}function Cx(e,t,n){e==="focusin"?(_f(),Xa=t,fo=n,Xa.attachEvent("onpropertychange",Dp)):e==="focusout"&&_f()}function Dx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ki(fo)}function _x(e,t){if(e==="click")return ki(t)}function Rx(e,t){if(e==="input"||e==="change")return ki(t)}function Ax(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:Ax;function ho(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vu.call(t,s)||!qt(e[s],t[s]))return!1}return!0}function Rf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Af(e,t){var n=Rf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rf(n)}}function _p(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_p(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rp(){for(var e=window,t=Gl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gl(e.document)}return t}function fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Lx(e){var t=Rp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_p(n.ownerDocument.documentElement,n)){if(r!==null&&fd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Af(n,o);var l=Af(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Px=Nn&&"documentMode"in document&&11>=document.documentMode,Ns=null,ic=null,eo=null,uc=!1;function Lf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uc||Ns==null||Ns!==Gl(r)||(r=Ns,"selectionStart"in r&&fd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&ho(eo,r)||(eo=r,r=ti(ic,"onSelect"),0<r.length&&(t=new ud("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ns)))}function yl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ss={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},vu={},Ap={};Nn&&(Ap=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Ni(e){if(vu[e])return vu[e];if(!Ss[e])return e;var t=Ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ap)return vu[e]=t[n];return e}var Lp=Ni("animationend"),Pp=Ni("animationiteration"),Ip=Ni("animationstart"),Tp=Ni("transitionend"),Fp=new Map,Pf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(e,t){Fp.set(e,t),Vr(t,[e])}for(var yu=0;yu<Pf.length;yu++){var wu=Pf[yu],Ix=wu.toLowerCase(),Tx=wu[0].toUpperCase()+wu.slice(1);lr(Ix,"on"+Tx)}lr(Lp,"onAnimationEnd");lr(Pp,"onAnimationIteration");lr(Ip,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(Tp,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function If(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ig(r,t,void 0,e),e.currentTarget=null}function Op(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,m=c.currentTarget;if(c=c.listener,d!==o&&s.isPropagationStopped())break e;If(s,c,m),o=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,m=c.currentTarget,c=c.listener,d!==o&&s.isPropagationStopped())break e;If(s,c,m),o=d}}}if(Zl)throw e=sc,Zl=!1,sc=null,e}function je(e,t){var n=t[pc];n===void 0&&(n=t[pc]=new Set);var r=e+"__bubble";n.has(r)||(Up(t,e,2,!1),n.add(r))}function bu(e,t,n){var r=0;t&&(r|=4),Up(n,e,r,t)}var wl="_reactListening"+Math.random().toString(36).slice(2);function po(e){if(!e[wl]){e[wl]=!0,Hh.forEach(function(n){n!=="selectionchange"&&(Fx.has(n)||bu(n,!1,e),bu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wl]||(t[wl]=!0,bu("selectionchange",!1,t))}}function Up(e,t,n,r){switch(bp(t)){case 1:var s=Zg;break;case 4:s=Jg;break;default:s=ld}n=s.bind(null,t,n,e),s=void 0,!rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ju(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;c!==null;){if(l=Pr(c),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}c=c.parentNode}}r=r.return}lp(function(){var m=o,x=rd(n),w=[];e:{var k=Fp.get(e);if(k!==void 0){var D=ud,_=e;switch(e){case"keypress":if(Tl(n)===0)break e;case"keydown":case"keyup":D=fx;break;case"focusin":_="focus",D=mu;break;case"focusout":_="blur",D=mu;break;case"beforeblur":case"afterblur":D=mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=ex;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=mx;break;case Lp:case Pp:case Ip:D=rx;break;case Tp:D=xx;break;case"scroll":D=Yg;break;case"wheel":D=yx;break;case"copy":case"cut":case"paste":D=ax;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Nf}var A=(t&4)!==0,L=!A&&e==="scroll",j=A?k!==null?k+"Capture":null:k;A=[];for(var g=m,b;g!==null;){b=g;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,j!==null&&(E=lo(g,j),E!=null&&A.push(mo(g,E,b)))),L)break;g=g.return}0<A.length&&(k=new D(k,_,null,n,x),w.push({event:k,listeners:A}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",k&&n!==tc&&(_=n.relatedTarget||n.fromElement)&&(Pr(_)||_[Sn]))break e;if((D||k)&&(k=x.window===x?x:(k=x.ownerDocument)?k.defaultView||k.parentWindow:window,D?(_=n.relatedTarget||n.toElement,D=m,_=_?Pr(_):null,_!==null&&(L=Wr(_),_!==L||_.tag!==5&&_.tag!==6)&&(_=null)):(D=null,_=m),D!==_)){if(A=jf,E="onMouseLeave",j="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(A=Nf,E="onPointerLeave",j="onPointerEnter",g="pointer"),L=D==null?k:Es(D),b=_==null?k:Es(_),k=new A(E,g+"leave",D,n,x),k.target=L,k.relatedTarget=b,E=null,Pr(x)===m&&(A=new A(j,g+"enter",_,n,x),A.target=b,A.relatedTarget=L,E=A),L=E,D&&_)t:{for(A=D,j=_,g=0,b=A;b;b=ws(b))g++;for(b=0,E=j;E;E=ws(E))b++;for(;0<g-b;)A=ws(A),g--;for(;0<b-g;)j=ws(j),b--;for(;g--;){if(A===j||j!==null&&A===j.alternate)break t;A=ws(A),j=ws(j)}A=null}else A=null;D!==null&&Tf(w,k,D,A,!1),_!==null&&L!==null&&Tf(w,L,_,A,!0)}}e:{if(k=m?Es(m):window,D=k.nodeName&&k.nodeName.toLowerCase(),D==="select"||D==="input"&&k.type==="file")var R=Ex;else if(Cf(k))if(Cp)R=Rx;else{R=Dx;var U=Cx}else(D=k.nodeName)&&D.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(R=_x);if(R&&(R=R(e,m))){Ep(w,R,n,x);break e}U&&U(e,k,m),e==="focusout"&&(U=k._wrapperState)&&U.controlled&&k.type==="number"&&Zu(k,"number",k.value)}switch(U=m?Es(m):window,e){case"focusin":(Cf(U)||U.contentEditable==="true")&&(Ns=U,ic=m,eo=null);break;case"focusout":eo=ic=Ns=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,Lf(w,n,x);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":Lf(w,n,x)}var $;if(dd)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else ks?Np(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(kp&&n.locale!=="ko"&&(ks||V!=="onCompositionStart"?V==="onCompositionEnd"&&ks&&($=jp()):(qn=x,id="value"in qn?qn.value:qn.textContent,ks=!0)),U=ti(m,V),0<U.length&&(V=new kf(V,e,null,n,x),w.push({event:V,listeners:U}),$?V.data=$:($=Sp(n),$!==null&&(V.data=$)))),($=bx?jx(e,n):kx(e,n))&&(m=ti(m,"onBeforeInput"),0<m.length&&(x=new kf("onBeforeInput","beforeinput",null,n,x),w.push({event:x,listeners:m}),x.data=$))}Op(w,t)})}function mo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ti(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=lo(e,n),o!=null&&r.unshift(mo(e,o,s)),o=lo(e,t),o!=null&&r.push(mo(e,o,s))),e=e.return}return r}function ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tf(e,t,n,r,s){for(var o=t._reactName,l=[];n!==null&&n!==r;){var c=n,d=c.alternate,m=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&m!==null&&(c=m,s?(d=lo(n,o),d!=null&&l.unshift(mo(n,d,c))):s||(d=lo(n,o),d!=null&&l.push(mo(n,d,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Ox=/\r\n?/g,Ux=/\u0000|\uFFFD/g;function Ff(e){return(typeof e=="string"?e:""+e).replace(Ox,`
`).replace(Ux,"")}function bl(e,t,n){if(t=Ff(t),Ff(e)!==t&&n)throw Error(M(425))}function ni(){}var cc=null,dc=null;function fc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hc=typeof setTimeout=="function"?setTimeout:void 0,Mx=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,$x=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(e){return Of.resolve(null).then(e).catch(Bx)}:hc;function Bx(e){setTimeout(function(){throw e})}function ku(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),co(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);co(t)}function Yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Uf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),tn="__reactFiber$"+Ks,go="__reactProps$"+Ks,Sn="__reactContainer$"+Ks,pc="__reactEvents$"+Ks,zx="__reactListeners$"+Ks,Vx="__reactHandles$"+Ks;function Pr(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Uf(e);e!==null;){if(n=e[tn])return n;e=Uf(e)}return t}e=n,n=e.parentNode}return null}function Do(e){return e=e[tn]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Si(e){return e[go]||null}var mc=[],Cs=-1;function ir(e){return{current:e}}function ke(e){0>Cs||(e.current=mc[Cs],mc[Cs]=null,Cs--)}function be(e,t){Cs++,mc[Cs]=e.current,e.current=t}var or={},tt=ir(or),ct=ir(!1),Ur=or;function Bs(e,t){var n=e.type.contextTypes;if(!n)return or;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dt(e){return e=e.childContextTypes,e!=null}function ri(){ke(ct),ke(tt)}function Mf(e,t,n){if(tt.current!==or)throw Error(M(168));be(tt,t),be(ct,n)}function Mp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(M(108,Cg(e)||"Unknown",s));return Le({},n,r)}function si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||or,Ur=tt.current,be(tt,e),be(ct,ct.current),!0}function $f(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=Mp(e,t,Ur),r.__reactInternalMemoizedMergedChildContext=e,ke(ct),ke(tt),be(tt,e)):ke(ct),be(ct,n)}var yn=null,Ei=!1,Nu=!1;function $p(e){yn===null?yn=[e]:yn.push(e)}function Wx(e){Ei=!0,$p(e)}function ur(){if(!Nu&&yn!==null){Nu=!0;var e=0,t=ge;try{var n=yn;for(ge=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yn=null,Ei=!1}catch(s){throw yn!==null&&(yn=yn.slice(e+1)),dp(sd,ur),s}finally{ge=t,Nu=!1}}return null}var Ds=[],_s=0,ai=null,oi=0,Dt=[],_t=0,Mr=null,bn=1,jn="";function Rr(e,t){Ds[_s++]=oi,Ds[_s++]=ai,ai=e,oi=t}function Bp(e,t,n){Dt[_t++]=bn,Dt[_t++]=jn,Dt[_t++]=Mr,Mr=e;var r=bn;e=jn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var o=32-Wt(t)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,bn=1<<32-Wt(t)+s|n<<s|r,jn=o+e}else bn=1<<o|n<<s|r,jn=e}function hd(e){e.return!==null&&(Rr(e,1),Bp(e,1,0))}function pd(e){for(;e===ai;)ai=Ds[--_s],Ds[_s]=null,oi=Ds[--_s],Ds[_s]=null;for(;e===Mr;)Mr=Dt[--_t],Dt[_t]=null,jn=Dt[--_t],Dt[_t]=null,bn=Dt[--_t],Dt[_t]=null}var yt=null,vt=null,Ee=!1,zt=null;function zp(e,t){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,vt=Yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mr!==null?{id:bn,overflow:jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yt=e,vt=null,!0):!1;default:return!1}}function gc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xc(e){if(Ee){var t=vt;if(t){var n=t;if(!Bf(e,t)){if(gc(e))throw Error(M(418));t=Yn(n.nextSibling);var r=yt;t&&Bf(e,t)?zp(r,n):(e.flags=e.flags&-4097|2,Ee=!1,yt=e)}}else{if(gc(e))throw Error(M(418));e.flags=e.flags&-4097|2,Ee=!1,yt=e}}}function zf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function jl(e){if(e!==yt)return!1;if(!Ee)return zf(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fc(e.type,e.memoizedProps)),t&&(t=vt)){if(gc(e))throw Vp(),Error(M(418));for(;t;)zp(e,t),t=Yn(t.nextSibling)}if(zf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vt=Yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vt=null}}else vt=yt?Yn(e.stateNode.nextSibling):null;return!0}function Vp(){for(var e=vt;e;)e=Yn(e.nextSibling)}function zs(){vt=yt=null,Ee=!1}function md(e){zt===null?zt=[e]:zt.push(e)}var Hx=Dn.ReactCurrentBatchConfig;function Mt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var li=ir(null),ii=null,Rs=null,gd=null;function xd(){gd=Rs=ii=null}function vd(e){var t=li.current;ke(li),e._currentValue=t}function vc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Os(e,t){ii=e,gd=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ut=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(gd!==e)if(e={context:e,memoizedValue:t,next:null},Rs===null){if(ii===null)throw Error(M(308));Rs=e,ii.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var Ir=null;function yd(e){Ir===null?Ir=[e]:Ir.push(e)}function Wp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,yd(t)):(n.next=s.next,s.next=n),t.interleaved=n,En(e,r)}function En(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vn=!1;function wd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,En(e,n)}return s=r.interleaved,s===null?(t.next=t,yd(r)):(t.next=s.next,s.next=t),r.interleaved=t,En(e,n)}function Fl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ad(e,n)}}function Vf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ui(e,t,n,r){var s=e.updateQueue;Vn=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var d=c,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var x=e.alternate;x!==null&&(x=x.updateQueue,c=x.lastBaseUpdate,c!==l&&(c===null?x.firstBaseUpdate=m:c.next=m,x.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,x=m=d=null,c=o;do{var k=c.lane,D=c.eventTime;if((r&k)===k){x!==null&&(x=x.next={eventTime:D,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var _=e,A=c;switch(k=t,D=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){w=_.call(D,w,k);break e}w=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,k=typeof _=="function"?_.call(D,w,k):_,k==null)break e;w=Le({},w,k);break e;case 2:Vn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,k=s.effects,k===null?s.effects=[c]:k.push(c))}else D={eventTime:D,lane:k,tag:c.tag,payload:c.payload,callback:c.callback,next:null},x===null?(m=x=D,d=w):x=x.next=D,l|=k;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;k=c,c=k.next,k.next=null,s.lastBaseUpdate=k,s.shared.pending=null}}while(!0);if(x===null&&(d=w),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=x,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Br|=l,e.lanes=l,e.memoizedState=w}}function Wf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var qp=new Wh.Component().refs;function yc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ci={isMounted:function(e){return(e=e._reactInternals)?Wr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rt(),s=tr(e),o=kn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Xn(e,o,s),t!==null&&(Ht(t,e,s,r),Fl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rt(),s=tr(e),o=kn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Xn(e,o,s),t!==null&&(Ht(t,e,s,r),Fl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rt(),r=tr(e),s=kn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Xn(e,s,r),t!==null&&(Ht(t,e,r,n),Fl(t,e,r))}};function Hf(e,t,n,r,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!ho(n,r)||!ho(s,o):!0}function Qp(e,t,n){var r=!1,s=or,o=t.contextType;return typeof o=="object"&&o!==null?o=Pt(o):(s=dt(t)?Ur:tt.current,r=t.contextTypes,o=(r=r!=null)?Bs(e,s):or),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ci,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function qf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ci.enqueueReplaceState(t,t.state,null)}function wc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=qp,wd(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Pt(o):(o=dt(t)?Ur:tt.current,s.context=Bs(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(yc(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ci.enqueueReplaceState(s,s.state,null),ui(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ua(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var c=s.refs;c===qp&&(c=s.refs={}),l===null?delete c[o]:c[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function kl(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qf(e){var t=e._init;return t(e._payload)}function Gp(e){function t(j,g){if(e){var b=j.deletions;b===null?(j.deletions=[g],j.flags|=16):b.push(g)}}function n(j,g){if(!e)return null;for(;g!==null;)t(j,g),g=g.sibling;return null}function r(j,g){for(j=new Map;g!==null;)g.key!==null?j.set(g.key,g):j.set(g.index,g),g=g.sibling;return j}function s(j,g){return j=nr(j,g),j.index=0,j.sibling=null,j}function o(j,g,b){return j.index=b,e?(b=j.alternate,b!==null?(b=b.index,b<g?(j.flags|=2,g):b):(j.flags|=2,g)):(j.flags|=1048576,g)}function l(j){return e&&j.alternate===null&&(j.flags|=2),j}function c(j,g,b,E){return g===null||g.tag!==6?(g=Au(b,j.mode,E),g.return=j,g):(g=s(g,b),g.return=j,g)}function d(j,g,b,E){var R=b.type;return R===js?x(j,g,b.props.children,E,b.key):g!==null&&(g.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===zn&&Qf(R)===g.type)?(E=s(g,b.props),E.ref=Ua(j,g,b),E.return=j,E):(E=zl(b.type,b.key,b.props,null,j.mode,E),E.ref=Ua(j,g,b),E.return=j,E)}function m(j,g,b,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Lu(b,j.mode,E),g.return=j,g):(g=s(g,b.children||[]),g.return=j,g)}function x(j,g,b,E,R){return g===null||g.tag!==7?(g=Or(b,j.mode,E,R),g.return=j,g):(g=s(g,b),g.return=j,g)}function w(j,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Au(""+g,j.mode,b),g.return=j,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case fl:return b=zl(g.type,g.key,g.props,null,j.mode,b),b.ref=Ua(j,null,g),b.return=j,b;case bs:return g=Lu(g,j.mode,b),g.return=j,g;case zn:var E=g._init;return w(j,E(g._payload),b)}if(qa(g)||Pa(g))return g=Or(g,j.mode,b,null),g.return=j,g;kl(j,g)}return null}function k(j,g,b,E){var R=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:c(j,g,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fl:return b.key===R?d(j,g,b,E):null;case bs:return b.key===R?m(j,g,b,E):null;case zn:return R=b._init,k(j,g,R(b._payload),E)}if(qa(b)||Pa(b))return R!==null?null:x(j,g,b,E,null);kl(j,b)}return null}function D(j,g,b,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return j=j.get(b)||null,c(g,j,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case fl:return j=j.get(E.key===null?b:E.key)||null,d(g,j,E,R);case bs:return j=j.get(E.key===null?b:E.key)||null,m(g,j,E,R);case zn:var U=E._init;return D(j,g,b,U(E._payload),R)}if(qa(E)||Pa(E))return j=j.get(b)||null,x(g,j,E,R,null);kl(g,E)}return null}function _(j,g,b,E){for(var R=null,U=null,$=g,V=g=0,B=null;$!==null&&V<b.length;V++){$.index>V?(B=$,$=null):B=$.sibling;var C=k(j,$,b[V],E);if(C===null){$===null&&($=B);break}e&&$&&C.alternate===null&&t(j,$),g=o(C,g,V),U===null?R=C:U.sibling=C,U=C,$=B}if(V===b.length)return n(j,$),Ee&&Rr(j,V),R;if($===null){for(;V<b.length;V++)$=w(j,b[V],E),$!==null&&(g=o($,g,V),U===null?R=$:U.sibling=$,U=$);return Ee&&Rr(j,V),R}for($=r(j,$);V<b.length;V++)B=D($,j,V,b[V],E),B!==null&&(e&&B.alternate!==null&&$.delete(B.key===null?V:B.key),g=o(B,g,V),U===null?R=B:U.sibling=B,U=B);return e&&$.forEach(function(ne){return t(j,ne)}),Ee&&Rr(j,V),R}function A(j,g,b,E){var R=Pa(b);if(typeof R!="function")throw Error(M(150));if(b=R.call(b),b==null)throw Error(M(151));for(var U=R=null,$=g,V=g=0,B=null,C=b.next();$!==null&&!C.done;V++,C=b.next()){$.index>V?(B=$,$=null):B=$.sibling;var ne=k(j,$,C.value,E);if(ne===null){$===null&&($=B);break}e&&$&&ne.alternate===null&&t(j,$),g=o(ne,g,V),U===null?R=ne:U.sibling=ne,U=ne,$=B}if(C.done)return n(j,$),Ee&&Rr(j,V),R;if($===null){for(;!C.done;V++,C=b.next())C=w(j,C.value,E),C!==null&&(g=o(C,g,V),U===null?R=C:U.sibling=C,U=C);return Ee&&Rr(j,V),R}for($=r(j,$);!C.done;V++,C=b.next())C=D($,j,V,C.value,E),C!==null&&(e&&C.alternate!==null&&$.delete(C.key===null?V:C.key),g=o(C,g,V),U===null?R=C:U.sibling=C,U=C);return e&&$.forEach(function(Z){return t(j,Z)}),Ee&&Rr(j,V),R}function L(j,g,b,E){if(typeof b=="object"&&b!==null&&b.type===js&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case fl:e:{for(var R=b.key,U=g;U!==null;){if(U.key===R){if(R=b.type,R===js){if(U.tag===7){n(j,U.sibling),g=s(U,b.props.children),g.return=j,j=g;break e}}else if(U.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===zn&&Qf(R)===U.type){n(j,U.sibling),g=s(U,b.props),g.ref=Ua(j,U,b),g.return=j,j=g;break e}n(j,U);break}else t(j,U);U=U.sibling}b.type===js?(g=Or(b.props.children,j.mode,E,b.key),g.return=j,j=g):(E=zl(b.type,b.key,b.props,null,j.mode,E),E.ref=Ua(j,g,b),E.return=j,j=E)}return l(j);case bs:e:{for(U=b.key;g!==null;){if(g.key===U)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(j,g.sibling),g=s(g,b.children||[]),g.return=j,j=g;break e}else{n(j,g);break}else t(j,g);g=g.sibling}g=Lu(b,j.mode,E),g.return=j,j=g}return l(j);case zn:return U=b._init,L(j,g,U(b._payload),E)}if(qa(b))return _(j,g,b,E);if(Pa(b))return A(j,g,b,E);kl(j,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(j,g.sibling),g=s(g,b),g.return=j,j=g):(n(j,g),g=Au(b,j.mode,E),g.return=j,j=g),l(j)):n(j,g)}return L}var Vs=Gp(!0),Kp=Gp(!1),_o={},rn=ir(_o),xo=ir(_o),vo=ir(_o);function Tr(e){if(e===_o)throw Error(M(174));return e}function bd(e,t){switch(be(vo,t),be(xo,e),be(rn,_o),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yu(t,e)}ke(rn),be(rn,t)}function Ws(){ke(rn),ke(xo),ke(vo)}function Zp(e){Tr(vo.current);var t=Tr(rn.current),n=Yu(t,e.type);t!==n&&(be(xo,e),be(rn,n))}function jd(e){xo.current===e&&(ke(rn),ke(xo))}var Re=ir(0);function ci(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Su=[];function kd(){for(var e=0;e<Su.length;e++)Su[e]._workInProgressVersionPrimary=null;Su.length=0}var Ol=Dn.ReactCurrentDispatcher,Eu=Dn.ReactCurrentBatchConfig,$r=0,Ae=null,ze=null,He=null,di=!1,to=!1,yo=0,qx=0;function Ye(){throw Error(M(321))}function Nd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qt(e[n],t[n]))return!1;return!0}function Sd(e,t,n,r,s,o){if($r=o,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ol.current=e===null||e.memoizedState===null?Zx:Jx,e=n(r,s),to){o=0;do{if(to=!1,yo=0,25<=o)throw Error(M(301));o+=1,He=ze=null,t.updateQueue=null,Ol.current=Yx,e=n(r,s)}while(to)}if(Ol.current=fi,t=ze!==null&&ze.next!==null,$r=0,He=ze=Ae=null,di=!1,t)throw Error(M(300));return e}function Ed(){var e=yo!==0;return yo=0,e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ae.memoizedState=He=e:He=He.next=e,He}function It(){if(ze===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=He===null?Ae.memoizedState:He.next;if(t!==null)He=t,ze=e;else{if(e===null)throw Error(M(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Ae.memoizedState=He=e:He=He.next=e}return He}function wo(e,t){return typeof t=="function"?t(e):t}function Cu(e){var t=It(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=ze,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var c=l=null,d=null,m=o;do{var x=m.lane;if(($r&x)===x)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var w={lane:x,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(c=d=w,l=r):d=d.next=w,Ae.lanes|=x,Br|=x}m=m.next}while(m!==null&&m!==o);d===null?l=r:d.next=c,qt(r,t.memoizedState)||(ut=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Ae.lanes|=o,Br|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Du(e){var t=It(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);qt(o,t.memoizedState)||(ut=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Jp(){}function Yp(e,t){var n=Ae,r=It(),s=t(),o=!qt(r.memoizedState,s);if(o&&(r.memoizedState=s,ut=!0),r=r.queue,Cd(tm.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,bo(9,em.bind(null,n,r,s,t),void 0,null),qe===null)throw Error(M(349));$r&30||Xp(n,t,s)}return s}function Xp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function em(e,t,n,r){t.value=n,t.getSnapshot=r,nm(t)&&rm(e)}function tm(e,t,n){return n(function(){nm(t)&&rm(e)})}function nm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qt(e,n)}catch{return!0}}function rm(e){var t=En(e,1);t!==null&&Ht(t,e,1,-1)}function Gf(e){var t=en();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Kx.bind(null,Ae,e),[t.memoizedState,e]}function bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sm(){return It().memoizedState}function Ul(e,t,n,r){var s=en();Ae.flags|=e,s.memoizedState=bo(1|t,n,void 0,r===void 0?null:r)}function Di(e,t,n,r){var s=It();r=r===void 0?null:r;var o=void 0;if(ze!==null){var l=ze.memoizedState;if(o=l.destroy,r!==null&&Nd(r,l.deps)){s.memoizedState=bo(t,n,o,r);return}}Ae.flags|=e,s.memoizedState=bo(1|t,n,o,r)}function Kf(e,t){return Ul(8390656,8,e,t)}function Cd(e,t){return Di(2048,8,e,t)}function am(e,t){return Di(4,2,e,t)}function om(e,t){return Di(4,4,e,t)}function lm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function im(e,t,n){return n=n!=null?n.concat([e]):null,Di(4,4,lm.bind(null,t,e),n)}function Dd(){}function um(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cm(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dm(e,t,n){return $r&21?(qt(n,t)||(n=pp(),Ae.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=n)}function Qx(e,t){var n=ge;ge=n!==0&&4>n?n:4,e(!0);var r=Eu.transition;Eu.transition={};try{e(!1),t()}finally{ge=n,Eu.transition=r}}function fm(){return It().memoizedState}function Gx(e,t,n){var r=tr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hm(e))pm(t,n);else if(n=Wp(e,t,n,r),n!==null){var s=rt();Ht(n,e,r,s),mm(n,t,r)}}function Kx(e,t,n){var r=tr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hm(e))pm(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,c=o(l,n);if(s.hasEagerState=!0,s.eagerState=c,qt(c,l)){var d=t.interleaved;d===null?(s.next=s,yd(t)):(s.next=d.next,d.next=s),t.interleaved=s;return}}catch{}finally{}n=Wp(e,t,s,r),n!==null&&(s=rt(),Ht(n,e,r,s),mm(n,t,r))}}function hm(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function pm(e,t){to=di=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ad(e,n)}}var fi={readContext:Pt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},Zx={readContext:Pt,useCallback:function(e,t){return en().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:Kf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ul(4194308,4,lm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ul(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ul(4,2,e,t)},useMemo:function(e,t){var n=en();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=en();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gx.bind(null,Ae,e),[r.memoizedState,e]},useRef:function(e){var t=en();return e={current:e},t.memoizedState=e},useState:Gf,useDebugValue:Dd,useDeferredValue:function(e){return en().memoizedState=e},useTransition:function(){var e=Gf(!1),t=e[0];return e=Qx.bind(null,e[1]),en().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ae,s=en();if(Ee){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),qe===null)throw Error(M(349));$r&30||Xp(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Kf(tm.bind(null,r,o,e),[e]),r.flags|=2048,bo(9,em.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=en(),t=qe.identifierPrefix;if(Ee){var n=jn,r=bn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=qx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jx={readContext:Pt,useCallback:um,useContext:Pt,useEffect:Cd,useImperativeHandle:im,useInsertionEffect:am,useLayoutEffect:om,useMemo:cm,useReducer:Cu,useRef:sm,useState:function(){return Cu(wo)},useDebugValue:Dd,useDeferredValue:function(e){var t=It();return dm(t,ze.memoizedState,e)},useTransition:function(){var e=Cu(wo)[0],t=It().memoizedState;return[e,t]},useMutableSource:Jp,useSyncExternalStore:Yp,useId:fm,unstable_isNewReconciler:!1},Yx={readContext:Pt,useCallback:um,useContext:Pt,useEffect:Cd,useImperativeHandle:im,useInsertionEffect:am,useLayoutEffect:om,useMemo:cm,useReducer:Du,useRef:sm,useState:function(){return Du(wo)},useDebugValue:Dd,useDeferredValue:function(e){var t=It();return ze===null?t.memoizedState=e:dm(t,ze.memoizedState,e)},useTransition:function(){var e=Du(wo)[0],t=It().memoizedState;return[e,t]},useMutableSource:Jp,useSyncExternalStore:Yp,useId:fm,unstable_isNewReconciler:!1};function Hs(e,t){try{var n="",r=t;do n+=Eg(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function _u(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function gm(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){pi||(pi=!0,Ac=r),bc(e,t)},n}function xm(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){bc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){bc(e,t),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Zf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Xx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=hv.bind(null,e,t,n),t.then(e,e))}function Jf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,Xn(n,t,1))),n.lanes|=1),e)}var ev=Dn.ReactCurrentOwner,ut=!1;function nt(e,t,n,r){t.child=e===null?Kp(t,null,n,r):Vs(t,e.child,n,r)}function Xf(e,t,n,r,s){n=n.render;var o=t.ref;return Os(t,s),r=Sd(e,t,n,r,o,s),n=Ed(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cn(e,t,s)):(Ee&&n&&hd(t),t.flags|=1,nt(e,t,r,s),t.child)}function eh(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Fd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,vm(e,t,o,r,s)):(e=zl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:ho,n(l,r)&&e.ref===t.ref)return Cn(e,t,s)}return t.flags|=1,e=nr(o,r),e.ref=t.ref,e.return=t,t.child=e}function vm(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(ho(o,r)&&e.ref===t.ref)if(ut=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(ut=!0);else return t.lanes=e.lanes,Cn(e,t,s)}return jc(e,t,n,r,s)}function ym(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ls,xt),xt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(Ls,xt),xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,be(Ls,xt),xt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,be(Ls,xt),xt|=r;return nt(e,t,s,n),t.child}function wm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jc(e,t,n,r,s){var o=dt(n)?Ur:tt.current;return o=Bs(t,o),Os(t,s),n=Sd(e,t,n,r,o,s),r=Ed(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cn(e,t,s)):(Ee&&r&&hd(t),t.flags|=1,nt(e,t,n,s),t.child)}function th(e,t,n,r,s){if(dt(n)){var o=!0;si(t)}else o=!1;if(Os(t,s),t.stateNode===null)Ml(e,t),Qp(t,n,r),wc(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Pt(m):(m=dt(n)?Ur:tt.current,m=Bs(t,m));var x=n.getDerivedStateFromProps,w=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==m)&&qf(t,l,r,m),Vn=!1;var k=t.memoizedState;l.state=k,ui(t,r,l,s),d=t.memoizedState,c!==r||k!==d||ct.current||Vn?(typeof x=="function"&&(yc(t,n,x,r),d=t.memoizedState),(c=Vn||Hf(t,n,c,r,k,d,m))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=m,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Hp(e,t),c=t.memoizedProps,m=t.type===t.elementType?c:Mt(t.type,c),l.props=m,w=t.pendingProps,k=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Pt(d):(d=dt(n)?Ur:tt.current,d=Bs(t,d));var D=n.getDerivedStateFromProps;(x=typeof D=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==w||k!==d)&&qf(t,l,r,d),Vn=!1,k=t.memoizedState,l.state=k,ui(t,r,l,s);var _=t.memoizedState;c!==w||k!==_||ct.current||Vn?(typeof D=="function"&&(yc(t,n,D,r),_=t.memoizedState),(m=Vn||Hf(t,n,m,r,k,_,d)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,_,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,_,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),l.props=r,l.state=_,l.context=d,r=m):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),r=!1)}return kc(e,t,n,r,o,s)}function kc(e,t,n,r,s,o){wm(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&$f(t,n,!1),Cn(e,t,o);r=t.stateNode,ev.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Vs(t,e.child,null,o),t.child=Vs(t,null,c,o)):nt(e,t,c,o),t.memoizedState=r.state,s&&$f(t,n,!0),t.child}function bm(e){var t=e.stateNode;t.pendingContext?Mf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mf(e,t.context,!1),bd(e,t.containerInfo)}function nh(e,t,n,r,s){return zs(),md(s),t.flags|=256,nt(e,t,n,r),t.child}var Nc={dehydrated:null,treeContext:null,retryLane:0};function Sc(e){return{baseLanes:e,cachePool:null,transitions:null}}function jm(e,t,n){var r=t.pendingProps,s=Re.current,o=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),be(Re,s&1),e===null)return xc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Ai(l,r,0,null),e=Or(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Sc(n),t.memoizedState=Nc,e):_d(t,l));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return tv(e,t,l,r,c,s,n);if(o){o=r.fallback,l=t.mode,s=e.child,c=s.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=nr(s,d),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=nr(c,o):(o=Or(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?Sc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Nc,r}return o=e.child,e=o.sibling,r=nr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _d(e,t){return t=Ai({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Nl(e,t,n,r){return r!==null&&md(r),Vs(t,e.child,null,n),e=_d(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tv(e,t,n,r,s,o,l){if(n)return t.flags&256?(t.flags&=-257,r=_u(Error(M(422))),Nl(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Ai({mode:"visible",children:r.children},s,0,null),o=Or(o,s,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Vs(t,e.child,null,l),t.child.memoizedState=Sc(l),t.memoizedState=Nc,o);if(!(t.mode&1))return Nl(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(M(419)),r=_u(o,r,void 0),Nl(e,t,l,r)}if(c=(l&e.childLanes)!==0,ut||c){if(r=qe,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,En(e,s),Ht(r,e,s,-1))}return Td(),r=_u(Error(M(421))),Nl(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=pv.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,vt=Yn(s.nextSibling),yt=t,Ee=!0,zt=null,e!==null&&(Dt[_t++]=bn,Dt[_t++]=jn,Dt[_t++]=Mr,bn=e.id,jn=e.overflow,Mr=t),t=_d(t,r.children),t.flags|=4096,t)}function rh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vc(e.return,t,n)}function Ru(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function km(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(nt(e,t,r.children,n),r=Re.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rh(e,n,t);else if(e.tag===19)rh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(be(Re,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ci(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ru(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ci(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ru(t,!0,n,null,o);break;case"together":Ru(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ml(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=nr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nv(e,t,n){switch(t.tag){case 3:bm(t),zs();break;case 5:Zp(t);break;case 1:dt(t.type)&&si(t);break;case 4:bd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;be(li,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(be(Re,Re.current&1),t.flags|=128,null):n&t.child.childLanes?jm(e,t,n):(be(Re,Re.current&1),e=Cn(e,t,n),e!==null?e.sibling:null);be(Re,Re.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return km(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Re,Re.current),r)break;return null;case 22:case 23:return t.lanes=0,ym(e,t,n)}return Cn(e,t,n)}var Nm,Ec,Sm,Em;Nm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ec=function(){};Sm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Tr(rn.current);var o=null;switch(n){case"input":s=Gu(e,s),r=Gu(e,r),o=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),o=[];break;case"textarea":s=Ju(e,s),r=Ju(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ni)}Xu(n,r);var l;n=null;for(m in s)if(!r.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var c=s[m];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ao.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in r){var d=r[m];if(c=s!=null?s[m]:void 0,r.hasOwnProperty(m)&&d!==c&&(d!=null||c!=null))if(m==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ao.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&je("scroll",e),o||c===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};Em=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ma(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rv(e,t,n){var r=t.pendingProps;switch(pd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return dt(t.type)&&ri(),Xe(t),null;case 3:return r=t.stateNode,Ws(),ke(ct),ke(tt),kd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(Ic(zt),zt=null))),Ec(e,t),Xe(t),null;case 5:jd(t);var s=Tr(vo.current);if(n=t.type,e!==null&&t.stateNode!=null)Sm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return Xe(t),null}if(e=Tr(rn.current),jl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[tn]=t,r[go]=o,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<Ga.length;s++)je(Ga[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":ff(r,o),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},je("invalid",r);break;case"textarea":pf(r,o),je("invalid",r)}Xu(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&bl(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&bl(r.textContent,c,e),s=["children",""+c]):ao.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&je("scroll",r)}switch(n){case"input":hl(r),hf(r,o,!0);break;case"textarea":hl(r),mf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ni)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[tn]=t,e[go]=r,Nm(e,t,!1,!1),t.stateNode=e;e:{switch(l=ec(n,r),n){case"dialog":je("cancel",e),je("close",e),s=r;break;case"iframe":case"object":case"embed":je("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ga.length;s++)je(Ga[s],e);s=r;break;case"source":je("error",e),s=r;break;case"img":case"image":case"link":je("error",e),je("load",e),s=r;break;case"details":je("toggle",e),s=r;break;case"input":ff(e,r),s=Gu(e,r),je("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),je("invalid",e);break;case"textarea":pf(e,r),s=Ju(e,r),je("invalid",e);break;default:s=r}Xu(n,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];o==="style"?np(e,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&ep(e,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&oo(e,d):typeof d=="number"&&oo(e,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ao.hasOwnProperty(o)?d!=null&&o==="onScroll"&&je("scroll",e):d!=null&&Xc(e,o,d,l))}switch(n){case"input":hl(e),hf(e,r,!1);break;case"textarea":hl(e),mf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ar(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ps(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ps(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ni)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Em(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=Tr(vo.current),Tr(rn.current),jl(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(o=r.nodeValue!==n)&&(e=yt,e!==null))switch(e.tag){case 3:bl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return Xe(t),null;case 13:if(ke(Re),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&vt!==null&&t.mode&1&&!(t.flags&128))Vp(),zs(),t.flags|=98560,o=!1;else if(o=jl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(M(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[tn]=t}else zs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),o=!1}else zt!==null&&(Ic(zt),zt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Re.current&1?Ve===0&&(Ve=3):Td())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Ws(),Ec(e,t),e===null&&po(t.stateNode.containerInfo),Xe(t),null;case 10:return vd(t.type._context),Xe(t),null;case 17:return dt(t.type)&&ri(),Xe(t),null;case 19:if(ke(Re),o=t.memoizedState,o===null)return Xe(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)Ma(o,!1);else{if(Ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ci(e),l!==null){for(t.flags|=128,Ma(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(Re,Re.current&1|2),t.child}e=e.sibling}o.tail!==null&&Te()>qs&&(t.flags|=128,r=!0,Ma(o,!1),t.lanes=4194304)}else{if(!r)if(e=ci(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ma(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ee)return Xe(t),null}else 2*Te()-o.renderingStartTime>qs&&n!==1073741824&&(t.flags|=128,r=!0,Ma(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Te(),t.sibling=null,n=Re.current,be(Re,r?n&1|2:n&1),t):(Xe(t),null);case 22:case 23:return Id(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?xt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function sv(e,t){switch(pd(t),t.tag){case 1:return dt(t.type)&&ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ws(),ke(ct),ke(tt),kd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jd(t),null;case 13:if(ke(Re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));zs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Re),null;case 4:return Ws(),null;case 10:return vd(t.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var Sl=!1,et=!1,av=typeof WeakSet=="function"?WeakSet:Set,J=null;function As(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(e,t,r)}else n.current=null}function Cc(e,t,n){try{n()}catch(r){Pe(e,t,r)}}var sh=!1;function ov(e,t){if(cc=Xl,e=Rp(),fd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,m=0,x=0,w=e,k=null;t:for(;;){for(var D;w!==n||s!==0&&w.nodeType!==3||(c=l+s),w!==o||r!==0&&w.nodeType!==3||(d=l+r),w.nodeType===3&&(l+=w.nodeValue.length),(D=w.firstChild)!==null;)k=w,w=D;for(;;){if(w===e)break t;if(k===n&&++m===s&&(c=l),k===o&&++x===r&&(d=l),(D=w.nextSibling)!==null)break;w=k,k=w.parentNode}w=D}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(dc={focusedElem:e,selectionRange:n},Xl=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,L=_.memoizedState,j=t.stateNode,g=j.getSnapshotBeforeUpdate(t.elementType===t.type?A:Mt(t.type,A),L);j.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(E){Pe(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return _=sh,sh=!1,_}function no(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Cc(t,n,o)}s=s.next}while(s!==r)}}function _i(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Dc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cm(e){var t=e.alternate;t!==null&&(e.alternate=null,Cm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[go],delete t[pc],delete t[zx],delete t[Vx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dm(e){return e.tag===5||e.tag===3||e.tag===4}function ah(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _c(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ni));else if(r!==4&&(e=e.child,e!==null))for(_c(e,t,n),e=e.sibling;e!==null;)_c(e,t,n),e=e.sibling}function Rc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Rc(e,t,n),e=e.sibling;e!==null;)Rc(e,t,n),e=e.sibling}var Ge=null,$t=!1;function Bn(e,t,n){for(n=n.child;n!==null;)_m(e,t,n),n=n.sibling}function _m(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(bi,n)}catch{}switch(n.tag){case 5:et||As(n,t);case 6:var r=Ge,s=$t;Ge=null,Bn(e,t,n),Ge=r,$t=s,Ge!==null&&($t?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&($t?(e=Ge,n=n.stateNode,e.nodeType===8?ku(e.parentNode,n):e.nodeType===1&&ku(e,n),co(e)):ku(Ge,n.stateNode));break;case 4:r=Ge,s=$t,Ge=n.stateNode.containerInfo,$t=!0,Bn(e,t,n),Ge=r,$t=s;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Cc(n,t,l),s=s.next}while(s!==r)}Bn(e,t,n);break;case 1:if(!et&&(As(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Pe(n,t,c)}Bn(e,t,n);break;case 21:Bn(e,t,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,Bn(e,t,n),et=r):Bn(e,t,n);break;default:Bn(e,t,n)}}function oh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new av),t.forEach(function(r){var s=mv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ot(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Ge=c.stateNode,$t=!1;break e;case 3:Ge=c.stateNode.containerInfo,$t=!0;break e;case 4:Ge=c.stateNode.containerInfo,$t=!0;break e}c=c.return}if(Ge===null)throw Error(M(160));_m(o,l,s),Ge=null,$t=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){Pe(s,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rm(t,e),t=t.sibling}function Rm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Xt(e),r&4){try{no(3,e,e.return),_i(3,e)}catch(A){Pe(e,e.return,A)}try{no(5,e,e.return)}catch(A){Pe(e,e.return,A)}}break;case 1:Ot(t,e),Xt(e),r&512&&n!==null&&As(n,n.return);break;case 5:if(Ot(t,e),Xt(e),r&512&&n!==null&&As(n,n.return),e.flags&32){var s=e.stateNode;try{oo(s,"")}catch(A){Pe(e,e.return,A)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&Jh(s,o),ec(c,l);var m=ec(c,o);for(l=0;l<d.length;l+=2){var x=d[l],w=d[l+1];x==="style"?np(s,w):x==="dangerouslySetInnerHTML"?ep(s,w):x==="children"?oo(s,w):Xc(s,x,w,m)}switch(c){case"input":Ku(s,o);break;case"textarea":Yh(s,o);break;case"select":var k=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?Ps(s,!!o.multiple,D,!1):k!==!!o.multiple&&(o.defaultValue!=null?Ps(s,!!o.multiple,o.defaultValue,!0):Ps(s,!!o.multiple,o.multiple?[]:"",!1))}s[go]=o}catch(A){Pe(e,e.return,A)}}break;case 6:if(Ot(t,e),Xt(e),r&4){if(e.stateNode===null)throw Error(M(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(A){Pe(e,e.return,A)}}break;case 3:if(Ot(t,e),Xt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{co(t.containerInfo)}catch(A){Pe(e,e.return,A)}break;case 4:Ot(t,e),Xt(e);break;case 13:Ot(t,e),Xt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ld=Te())),r&4&&oh(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(et=(m=et)||x,Ot(t,e),et=m):Ot(t,e),Xt(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!x&&e.mode&1)for(J=e,x=e.child;x!==null;){for(w=J=x;J!==null;){switch(k=J,D=k.child,k.tag){case 0:case 11:case 14:case 15:no(4,k,k.return);break;case 1:As(k,k.return);var _=k.stateNode;if(typeof _.componentWillUnmount=="function"){r=k,n=k.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(A){Pe(r,n,A)}}break;case 5:As(k,k.return);break;case 22:if(k.memoizedState!==null){ih(w);continue}}D!==null?(D.return=k,J=D):ih(w)}x=x.sibling}e:for(x=null,w=e;;){if(w.tag===5){if(x===null){x=w;try{s=w.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=tp("display",l))}catch(A){Pe(e,e.return,A)}}}else if(w.tag===6){if(x===null)try{w.stateNode.nodeValue=m?"":w.memoizedProps}catch(A){Pe(e,e.return,A)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;x===w&&(x=null),w=w.return}x===w&&(x=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Ot(t,e),Xt(e),r&4&&oh(e);break;case 21:break;default:Ot(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dm(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(oo(s,""),r.flags&=-33);var o=ah(e);Rc(e,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,c=ah(e);_c(e,c,l);break;default:throw Error(M(161))}}catch(d){Pe(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lv(e,t,n){J=e,Am(e)}function Am(e,t,n){for(var r=(e.mode&1)!==0;J!==null;){var s=J,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Sl;if(!l){var c=s.alternate,d=c!==null&&c.memoizedState!==null||et;c=Sl;var m=et;if(Sl=l,(et=d)&&!m)for(J=s;J!==null;)l=J,d=l.child,l.tag===22&&l.memoizedState!==null?uh(s):d!==null?(d.return=l,J=d):uh(s);for(;o!==null;)J=o,Am(o),o=o.sibling;J=s,Sl=c,et=m}lh(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,J=o):lh(e)}}function lh(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||_i(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!et)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Mt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Wf(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wf(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var x=m.memoizedState;if(x!==null){var w=x.dehydrated;w!==null&&co(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}et||t.flags&512&&Dc(t)}catch(k){Pe(t,t.return,k)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function ih(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function uh(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_i(4,t)}catch(d){Pe(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(d){Pe(t,s,d)}}var o=t.return;try{Dc(t)}catch(d){Pe(t,o,d)}break;case 5:var l=t.return;try{Dc(t)}catch(d){Pe(t,l,d)}}}catch(d){Pe(t,t.return,d)}if(t===e){J=null;break}var c=t.sibling;if(c!==null){c.return=t.return,J=c;break}J=t.return}}var iv=Math.ceil,hi=Dn.ReactCurrentDispatcher,Rd=Dn.ReactCurrentOwner,Lt=Dn.ReactCurrentBatchConfig,he=0,qe=null,$e=null,Ke=0,xt=0,Ls=ir(0),Ve=0,jo=null,Br=0,Ri=0,Ad=0,ro=null,it=null,Ld=0,qs=1/0,xn=null,pi=!1,Ac=null,er=null,El=!1,Qn=null,mi=0,so=0,Lc=null,$l=-1,Bl=0;function rt(){return he&6?Te():$l!==-1?$l:$l=Te()}function tr(e){return e.mode&1?he&2&&Ke!==0?Ke&-Ke:Hx.transition!==null?(Bl===0&&(Bl=pp()),Bl):(e=ge,e!==0||(e=window.event,e=e===void 0?16:bp(e.type)),e):1}function Ht(e,t,n,r){if(50<so)throw so=0,Lc=null,Error(M(185));Eo(e,n,r),(!(he&2)||e!==qe)&&(e===qe&&(!(he&2)&&(Ri|=n),Ve===4&&Hn(e,Ke)),ft(e,r),n===1&&he===0&&!(t.mode&1)&&(qs=Te()+500,Ei&&ur()))}function ft(e,t){var n=e.callbackNode;Hg(e,t);var r=Yl(e,e===qe?Ke:0);if(r===0)n!==null&&vf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vf(n),t===1)e.tag===0?Wx(ch.bind(null,e)):$p(ch.bind(null,e)),$x(function(){!(he&6)&&ur()}),n=null;else{switch(mp(r)){case 1:n=sd;break;case 4:n=fp;break;case 16:n=Jl;break;case 536870912:n=hp;break;default:n=Jl}n=Mm(n,Lm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Lm(e,t){if($l=-1,Bl=0,he&6)throw Error(M(327));var n=e.callbackNode;if(Us()&&e.callbackNode!==n)return null;var r=Yl(e,e===qe?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=gi(e,r);else{t=r;var s=he;he|=2;var o=Im();(qe!==e||Ke!==t)&&(xn=null,qs=Te()+500,Fr(e,t));do try{dv();break}catch(c){Pm(e,c)}while(!0);xd(),hi.current=o,he=s,$e!==null?t=0:(qe=null,Ke=0,t=Ve)}if(t!==0){if(t===2&&(s=ac(e),s!==0&&(r=s,t=Pc(e,s))),t===1)throw n=jo,Fr(e,0),Hn(e,r),ft(e,Te()),n;if(t===6)Hn(e,r);else{if(s=e.current.alternate,!(r&30)&&!uv(s)&&(t=gi(e,r),t===2&&(o=ac(e),o!==0&&(r=o,t=Pc(e,o))),t===1))throw n=jo,Fr(e,0),Hn(e,r),ft(e,Te()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:Ar(e,it,xn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Ld+500-Te(),10<t)){if(Yl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){rt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hc(Ar.bind(null,e,it,xn),t);break}Ar(e,it,xn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-Wt(r);o=1<<l,l=t[l],l>s&&(s=l),r&=~o}if(r=s,r=Te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iv(r/1960))-r,10<r){e.timeoutHandle=hc(Ar.bind(null,e,it,xn),r);break}Ar(e,it,xn);break;case 5:Ar(e,it,xn);break;default:throw Error(M(329))}}}return ft(e,Te()),e.callbackNode===n?Lm.bind(null,e):null}function Pc(e,t){var n=ro;return e.current.memoizedState.isDehydrated&&(Fr(e,t).flags|=256),e=gi(e,t),e!==2&&(t=it,it=n,t!==null&&Ic(t)),e}function Ic(e){it===null?it=e:it.push.apply(it,e)}function uv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!qt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Ad,t&=~Ri,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ch(e){if(he&6)throw Error(M(327));Us();var t=Yl(e,0);if(!(t&1))return ft(e,Te()),null;var n=gi(e,t);if(e.tag!==0&&n===2){var r=ac(e);r!==0&&(t=r,n=Pc(e,r))}if(n===1)throw n=jo,Fr(e,0),Hn(e,t),ft(e,Te()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ar(e,it,xn),ft(e,Te()),null}function Pd(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(qs=Te()+500,Ei&&ur())}}function zr(e){Qn!==null&&Qn.tag===0&&!(he&6)&&Us();var t=he;he|=1;var n=Lt.transition,r=ge;try{if(Lt.transition=null,ge=1,e)return e()}finally{ge=r,Lt.transition=n,he=t,!(he&6)&&ur()}}function Id(){xt=Ls.current,ke(Ls)}function Fr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Mx(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(pd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ri();break;case 3:Ws(),ke(ct),ke(tt),kd();break;case 5:jd(r);break;case 4:Ws();break;case 13:ke(Re);break;case 19:ke(Re);break;case 10:vd(r.type._context);break;case 22:case 23:Id()}n=n.return}if(qe=e,$e=e=nr(e.current,null),Ke=xt=t,Ve=0,jo=null,Ad=Ri=Br=0,it=ro=null,Ir!==null){for(t=0;t<Ir.length;t++)if(n=Ir[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}Ir=null}return e}function Pm(e,t){do{var n=$e;try{if(xd(),Ol.current=fi,di){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}di=!1}if($r=0,He=ze=Ae=null,to=!1,yo=0,Rd.current=null,n===null||n.return===null){Ve=1,jo=t,$e=null;break}e:{var o=e,l=n.return,c=n,d=t;if(t=Ke,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,x=c,w=x.tag;if(!(x.mode&1)&&(w===0||w===11||w===15)){var k=x.alternate;k?(x.updateQueue=k.updateQueue,x.memoizedState=k.memoizedState,x.lanes=k.lanes):(x.updateQueue=null,x.memoizedState=null)}var D=Jf(l);if(D!==null){D.flags&=-257,Yf(D,l,c,o,t),D.mode&1&&Zf(o,m,t),t=D,d=m;var _=t.updateQueue;if(_===null){var A=new Set;A.add(d),t.updateQueue=A}else _.add(d);break e}else{if(!(t&1)){Zf(o,m,t),Td();break e}d=Error(M(426))}}else if(Ee&&c.mode&1){var L=Jf(l);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Yf(L,l,c,o,t),md(Hs(d,c));break e}}o=d=Hs(d,c),Ve!==4&&(Ve=2),ro===null?ro=[o]:ro.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var j=gm(o,d,t);Vf(o,j);break e;case 1:c=d;var g=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(er===null||!er.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=xm(o,c,t);Vf(o,E);break e}}o=o.return}while(o!==null)}Fm(n)}catch(R){t=R,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function Im(){var e=hi.current;return hi.current=fi,e===null?fi:e}function Td(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),qe===null||!(Br&268435455)&&!(Ri&268435455)||Hn(qe,Ke)}function gi(e,t){var n=he;he|=2;var r=Im();(qe!==e||Ke!==t)&&(xn=null,Fr(e,t));do try{cv();break}catch(s){Pm(e,s)}while(!0);if(xd(),he=n,hi.current=r,$e!==null)throw Error(M(261));return qe=null,Ke=0,Ve}function cv(){for(;$e!==null;)Tm($e)}function dv(){for(;$e!==null&&!Fg();)Tm($e)}function Tm(e){var t=Um(e.alternate,e,xt);e.memoizedProps=e.pendingProps,t===null?Fm(e):$e=t,Rd.current=null}function Fm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sv(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ve=6,$e=null;return}}else if(n=rv(n,t,xt),n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);Ve===0&&(Ve=5)}function Ar(e,t,n){var r=ge,s=Lt.transition;try{Lt.transition=null,ge=1,fv(e,t,n,r)}finally{Lt.transition=s,ge=r}return null}function fv(e,t,n,r){do Us();while(Qn!==null);if(he&6)throw Error(M(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(qg(e,o),e===qe&&($e=qe=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||El||(El=!0,Mm(Jl,function(){return Us(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Lt.transition,Lt.transition=null;var l=ge;ge=1;var c=he;he|=4,Rd.current=null,ov(e,n),Rm(n,e),Lx(dc),Xl=!!cc,dc=cc=null,e.current=n,lv(n),Og(),he=c,ge=l,Lt.transition=o}else e.current=n;if(El&&(El=!1,Qn=e,mi=s),o=e.pendingLanes,o===0&&(er=null),$g(n.stateNode),ft(e,Te()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pi)throw pi=!1,e=Ac,Ac=null,e;return mi&1&&e.tag!==0&&Us(),o=e.pendingLanes,o&1?e===Lc?so++:(so=0,Lc=e):so=0,ur(),null}function Us(){if(Qn!==null){var e=mp(mi),t=Lt.transition,n=ge;try{if(Lt.transition=null,ge=16>e?16:e,Qn===null)var r=!1;else{if(e=Qn,Qn=null,mi=0,he&6)throw Error(M(331));var s=he;for(he|=4,J=e.current;J!==null;){var o=J,l=o.child;if(J.flags&16){var c=o.deletions;if(c!==null){for(var d=0;d<c.length;d++){var m=c[d];for(J=m;J!==null;){var x=J;switch(x.tag){case 0:case 11:case 15:no(8,x,o)}var w=x.child;if(w!==null)w.return=x,J=w;else for(;J!==null;){x=J;var k=x.sibling,D=x.return;if(Cm(x),x===m){J=null;break}if(k!==null){k.return=D,J=k;break}J=D}}}var _=o.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var L=A.sibling;A.sibling=null,A=L}while(A!==null)}}J=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,J=l;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:no(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,J=j;break e}J=o.return}}var g=e.current;for(J=g;J!==null;){l=J;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,J=b;else e:for(l=g;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:_i(9,c)}}catch(R){Pe(c,c.return,R)}if(c===l){J=null;break e}var E=c.sibling;if(E!==null){E.return=c.return,J=E;break e}J=c.return}}if(he=s,ur(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(bi,e)}catch{}r=!0}return r}finally{ge=n,Lt.transition=t}}return!1}function dh(e,t,n){t=Hs(n,t),t=gm(e,t,1),e=Xn(e,t,1),t=rt(),e!==null&&(Eo(e,1,t),ft(e,t))}function Pe(e,t,n){if(e.tag===3)dh(e,e,n);else for(;t!==null;){if(t.tag===3){dh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){e=Hs(n,e),e=xm(t,e,1),t=Xn(t,e,1),e=rt(),t!==null&&(Eo(t,1,e),ft(t,e));break}}t=t.return}}function hv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rt(),e.pingedLanes|=e.suspendedLanes&n,qe===e&&(Ke&n)===n&&(Ve===4||Ve===3&&(Ke&130023424)===Ke&&500>Te()-Ld?Fr(e,0):Ad|=n),ft(e,t)}function Om(e,t){t===0&&(e.mode&1?(t=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):t=1);var n=rt();e=En(e,t),e!==null&&(Eo(e,t,n),ft(e,n))}function pv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Om(e,n)}function mv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),Om(e,n)}var Um;Um=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ut=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ut=!1,nv(e,t,n);ut=!!(e.flags&131072)}else ut=!1,Ee&&t.flags&1048576&&Bp(t,oi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ml(e,t),e=t.pendingProps;var s=Bs(t,tt.current);Os(t,n),s=Sd(null,t,r,e,s,n);var o=Ed();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(r)?(o=!0,si(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wd(t),s.updater=Ci,t.stateNode=s,s._reactInternals=t,wc(t,r,e,n),t=kc(null,t,r,!0,o,n)):(t.tag=0,Ee&&o&&hd(t),nt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ml(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=xv(r),e=Mt(r,e),s){case 0:t=jc(null,t,r,e,n);break e;case 1:t=th(null,t,r,e,n);break e;case 11:t=Xf(null,t,r,e,n);break e;case 14:t=eh(null,t,r,Mt(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),jc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),th(e,t,r,s,n);case 3:e:{if(bm(t),e===null)throw Error(M(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Hp(e,t),ui(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Hs(Error(M(423)),t),t=nh(e,t,r,n,s);break e}else if(r!==s){s=Hs(Error(M(424)),t),t=nh(e,t,r,n,s);break e}else for(vt=Yn(t.stateNode.containerInfo.firstChild),yt=t,Ee=!0,zt=null,n=Kp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zs(),r===s){t=Cn(e,t,n);break e}nt(e,t,r,n)}t=t.child}return t;case 5:return Zp(t),e===null&&xc(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,fc(r,s)?l=null:o!==null&&fc(r,o)&&(t.flags|=32),wm(e,t),nt(e,t,l,n),t.child;case 6:return e===null&&xc(t),null;case 13:return jm(e,t,n);case 4:return bd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vs(t,null,r,n):nt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),Xf(e,t,r,s,n);case 7:return nt(e,t,t.pendingProps,n),t.child;case 8:return nt(e,t,t.pendingProps.children,n),t.child;case 12:return nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,be(li,r._currentValue),r._currentValue=l,o!==null)if(qt(o.value,l)){if(o.children===s.children&&!ct.current){t=Cn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=kn(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var x=m.pending;x===null?d.next=d:(d.next=x.next,x.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),vc(o.return,n,t),c.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(M(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),vc(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}nt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Os(t,n),s=Pt(s),r=r(s),t.flags|=1,nt(e,t,r,n),t.child;case 14:return r=t.type,s=Mt(r,t.pendingProps),s=Mt(r.type,s),eh(e,t,r,s,n);case 15:return vm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),Ml(e,t),t.tag=1,dt(r)?(e=!0,si(t)):e=!1,Os(t,n),Qp(t,r,s),wc(t,r,s,n),kc(null,t,r,!0,e,n);case 19:return km(e,t,n);case 22:return ym(e,t,n)}throw Error(M(156,t.tag))};function Mm(e,t){return dp(e,t)}function gv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,n,r){return new gv(e,t,n,r)}function Fd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xv(e){if(typeof e=="function")return Fd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===td)return 11;if(e===nd)return 14}return 2}function nr(e,t){var n=e.alternate;return n===null?(n=At(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zl(e,t,n,r,s,o){var l=2;if(r=e,typeof e=="function")Fd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case js:return Or(n.children,s,o,t);case ed:l=8,s|=8;break;case Wu:return e=At(12,n,t,s|2),e.elementType=Wu,e.lanes=o,e;case Hu:return e=At(13,n,t,s),e.elementType=Hu,e.lanes=o,e;case qu:return e=At(19,n,t,s),e.elementType=qu,e.lanes=o,e;case Gh:return Ai(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qh:l=10;break e;case Qh:l=9;break e;case td:l=11;break e;case nd:l=14;break e;case zn:l=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=At(l,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Or(e,t,n,r){return e=At(7,e,r,t),e.lanes=n,e}function Ai(e,t,n,r){return e=At(22,e,r,t),e.elementType=Gh,e.lanes=n,e.stateNode={isHidden:!1},e}function Au(e,t,n){return e=At(6,e,null,t),e.lanes=n,e}function Lu(e,t,n){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Od(e,t,n,r,s,o,l,c,d){return e=new vv(e,t,n,c,d),t===1?(t=1,o===!0&&(t|=8)):t=0,o=At(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wd(o),e}function yv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $m(e){if(!e)return or;e=e._reactInternals;e:{if(Wr(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(dt(n))return Mp(e,n,t)}return t}function Bm(e,t,n,r,s,o,l,c,d){return e=Od(n,r,!0,e,s,o,l,c,d),e.context=$m(null),n=e.current,r=rt(),s=tr(n),o=kn(r,s),o.callback=t??null,Xn(n,o,s),e.current.lanes=s,Eo(e,s,r),ft(e,r),e}function Li(e,t,n,r){var s=t.current,o=rt(),l=tr(s);return n=$m(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xn(s,t,l),e!==null&&(Ht(e,s,l,o),Fl(e,s,l)),l}function xi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ud(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function wv(){return null}var zm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Md(e){this._internalRoot=e}Pi.prototype.render=Md.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));Li(e,t,null,null)};Pi.prototype.unmount=Md.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zr(function(){Li(null,e,null,null)}),t[Sn]=null}};function Pi(e){this._internalRoot=e}Pi.prototype.unstable_scheduleHydration=function(e){if(e){var t=vp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wn.length&&t!==0&&t<Wn[n].priority;n++);Wn.splice(n,0,e),n===0&&wp(e)}};function $d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hh(){}function bv(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var m=xi(l);o.call(m)}}var l=Bm(t,r,e,0,null,!1,!1,"",hh);return e._reactRootContainer=l,e[Sn]=l.current,po(e.nodeType===8?e.parentNode:e),zr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var m=xi(d);c.call(m)}}var d=Od(e,0,!1,null,null,!1,!1,"",hh);return e._reactRootContainer=d,e[Sn]=d.current,po(e.nodeType===8?e.parentNode:e),zr(function(){Li(t,d,n,r)}),d}function Ti(e,t,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var c=s;s=function(){var d=xi(l);c.call(d)}}Li(t,l,e,s)}else l=bv(n,t,e,s,r);return xi(l)}gp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qa(t.pendingLanes);n!==0&&(ad(t,n|1),ft(t,Te()),!(he&6)&&(qs=Te()+500,ur()))}break;case 13:zr(function(){var r=En(e,1);if(r!==null){var s=rt();Ht(r,e,1,s)}}),Ud(e,1)}};od=function(e){if(e.tag===13){var t=En(e,134217728);if(t!==null){var n=rt();Ht(t,e,134217728,n)}Ud(e,134217728)}};xp=function(e){if(e.tag===13){var t=tr(e),n=En(e,t);if(n!==null){var r=rt();Ht(n,e,t,r)}Ud(e,t)}};vp=function(){return ge};yp=function(e,t){var n=ge;try{return ge=e,t()}finally{ge=n}};nc=function(e,t,n){switch(t){case"input":if(Ku(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Si(r);if(!s)throw Error(M(90));Zh(r),Ku(r,s)}}}break;case"textarea":Yh(e,n);break;case"select":t=n.value,t!=null&&Ps(e,!!n.multiple,t,!1)}};ap=Pd;op=zr;var jv={usingClientEntryPoint:!1,Events:[Do,Es,Si,rp,sp,Pd]},$a={findFiberByHostInstance:Pr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kv={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=up(e),e===null?null:e.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||wv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{bi=Cl.inject(kv),nn=Cl}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jv;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$d(t))throw Error(M(200));return yv(e,t,null,n)};bt.createRoot=function(e,t){if(!$d(e))throw Error(M(299));var n=!1,r="",s=zm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Od(e,1,!1,null,null,n,!1,r,s),e[Sn]=t.current,po(e.nodeType===8?e.parentNode:e),new Md(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=up(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return zr(e)};bt.hydrate=function(e,t,n){if(!Ii(t))throw Error(M(200));return Ti(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!$d(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=zm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Bm(t,null,e,1,n??null,s,!1,o,l),e[Sn]=t.current,po(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Pi(t)};bt.render=function(e,t,n){if(!Ii(t))throw Error(M(200));return Ti(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!Ii(e))throw Error(M(40));return e._reactRootContainer?(zr(function(){Ti(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};bt.unstable_batchedUpdates=Pd;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ii(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return Ti(e,t,n,!1,r)};bt.version="18.2.0-next-9e3b772b8-20220608";function Vm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vm)}catch(e){console.error(e)}}Vm(),Bh.exports=bt;var Nv=Bh.exports,Wm,ph=Nv;Wm=ph.createRoot,ph.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ko.apply(this,arguments)}var Gn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gn||(Gn={}));const mh="popstate";function Sv(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:l,hash:c}=r.location;return Tc("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vi(s)}return Cv(t,n,null,e)}function Fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ev(){return Math.random().toString(36).substr(2,8)}function gh(e,t){return{usr:e.state,key:e.key,idx:t}}function Tc(e,t,n,r){return n===void 0&&(n=null),ko({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Zs(t):t,{state:n,key:t&&t.key||r||Ev()})}function vi(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Zs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Cv(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c=Gn.Pop,d=null,m=x();m==null&&(m=0,l.replaceState(ko({},l.state,{idx:m}),""));function x(){return(l.state||{idx:null}).idx}function w(){c=Gn.Pop;let L=x(),j=L==null?null:L-m;m=L,d&&d({action:c,location:A.location,delta:j})}function k(L,j){c=Gn.Push;let g=Tc(A.location,L,j);m=x()+1;let b=gh(g,m),E=A.createHref(g);try{l.pushState(b,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(E)}o&&d&&d({action:c,location:A.location,delta:1})}function D(L,j){c=Gn.Replace;let g=Tc(A.location,L,j);m=x();let b=gh(g,m),E=A.createHref(g);l.replaceState(b,"",E),o&&d&&d({action:c,location:A.location,delta:0})}function _(L){let j=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof L=="string"?L:vi(L);return g=g.replace(/ $/,"%20"),Fe(j,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,j)}let A={get action(){return c},get location(){return e(s,l)},listen(L){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(mh,w),d=L,()=>{s.removeEventListener(mh,w),d=null}},createHref(L){return t(s,L)},createURL:_,encodeLocation(L){let j=_(L);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:k,replace:D,go(L){return l.go(L)}};return A}var xh;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xh||(xh={}));function Dv(e,t,n){return n===void 0&&(n="/"),_v(e,t,n)}function _v(e,t,n,r){let s=typeof t=="string"?Zs(t):t,o=Bd(s.pathname||"/",n);if(o==null)return null;let l=qm(e);Rv(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let m=zv(o);c=Mv(l[d],m)}return c}function qm(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(Fe(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let m=rr([r,d.relativePath]),x=n.concat(d);o.children&&o.children.length>0&&(Fe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),qm(o.children,t,x,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:Ov(m,o.index),routesMeta:x})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let d of Qm(o.path))s(o,l,d)}),t}function Qm(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=Qm(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&c.push(...l),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Rv(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Uv(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Av=/^:[\w-]+$/,Lv=3,Pv=2,Iv=1,Tv=10,Fv=-2,vh=e=>e==="*";function Ov(e,t){let n=e.split("/"),r=n.length;return n.some(vh)&&(r+=Fv),t&&(r+=Pv),n.filter(s=>!vh(s)).reduce((s,o)=>s+(Av.test(o)?Lv:o===""?Iv:Tv),r)}function Uv(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Mv(e,t,n){let{routesMeta:r}=e,s={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],m=c===r.length-1,x=o==="/"?t:t.slice(o.length)||"/",w=$v({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},x),k=d.route;if(!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:rr([o,w.pathname]),pathnameBase:qv(rr([o,w.pathnameBase])),route:k}),w.pathnameBase!=="/"&&(o=rr([o,w.pathnameBase]))}return l}function $v(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Bv(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((m,x,w)=>{let{paramName:k,isOptional:D}=x;if(k==="*"){let A=c[w]||"";l=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const _=c[w];return D&&!_?m[k]=void 0:m[k]=(_||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:e}}function Bv(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Hm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function zv(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Bd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Vv(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Zs(e):e;return{pathname:n?n.startsWith("/")?n:Wv(n,t):t,search:Qv(r),hash:Gv(s)}}function Wv(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Hv(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zd(e,t){let n=Hv(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vd(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Zs(e):(s=ko({},e),Fe(!s.pathname||!s.pathname.includes("?"),Pu("?","pathname","search",s)),Fe(!s.pathname||!s.pathname.includes("#"),Pu("#","pathname","hash",s)),Fe(!s.search||!s.search.includes("#"),Pu("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=n;else{let w=t.length-1;if(!r&&l.startsWith("..")){let k=l.split("/");for(;k[0]==="..";)k.shift(),w-=1;s.pathname=k.join("/")}c=w>=0?t[w]:"/"}let d=Vv(s,c),m=l&&l!=="/"&&l.endsWith("/"),x=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(m||x)&&(d.pathname+="/"),d}const rr=e=>e.join("/").replace(/\/\/+/g,"/"),qv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Kv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Gm=["post","put","patch","delete"];new Set(Gm);const Zv=["get",...Gm];new Set(Zv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},No.apply(this,arguments)}const Wd=u.createContext(null),Jv=u.createContext(null),cr=u.createContext(null),Fi=u.createContext(null),on=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Km=u.createContext(null);function Yv(e,t){let{relative:n}=t===void 0?{}:t;Js()||Fe(!1);let{basename:r,navigator:s}=u.useContext(cr),{hash:o,pathname:l,search:c}=Ym(e,{relative:n}),d=l;return r!=="/"&&(d=l==="/"?r:rr([r,l])),s.createHref({pathname:d,search:c,hash:o})}function Js(){return u.useContext(Fi)!=null}function dr(){return Js()||Fe(!1),u.useContext(Fi).location}function Zm(e){u.useContext(cr).static||u.useLayoutEffect(e)}function ln(){let{isDataRoute:e}=u.useContext(on);return e?hy():Xv()}function Xv(){Js()||Fe(!1);let e=u.useContext(Wd),{basename:t,future:n,navigator:r}=u.useContext(cr),{matches:s}=u.useContext(on),{pathname:o}=dr(),l=JSON.stringify(zd(s,n.v7_relativeSplatPath)),c=u.useRef(!1);return Zm(()=>{c.current=!0}),u.useCallback(function(m,x){if(x===void 0&&(x={}),!c.current)return;if(typeof m=="number"){r.go(m);return}let w=Vd(m,JSON.parse(l),o,x.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:rr([t,w.pathname])),(x.replace?r.replace:r.push)(w,x.state,x)},[t,r,l,o,e])}const ey=u.createContext(null);function ty(e){let t=u.useContext(on).outlet;return t&&u.createElement(ey.Provider,{value:e},t)}function Jm(){let{matches:e}=u.useContext(on),t=e[e.length-1];return t?t.params:{}}function Ym(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(cr),{matches:s}=u.useContext(on),{pathname:o}=dr(),l=JSON.stringify(zd(s,r.v7_relativeSplatPath));return u.useMemo(()=>Vd(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function ny(e,t){return ry(e,t)}function ry(e,t,n,r){Js()||Fe(!1);let{navigator:s}=u.useContext(cr),{matches:o}=u.useContext(on),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let m=dr(),x;if(t){var w;let L=typeof t=="string"?Zs(t):t;d==="/"||(w=L.pathname)!=null&&w.startsWith(d)||Fe(!1),x=L}else x=m;let k=x.pathname||"/",D=k;if(d!=="/"){let L=d.replace(/^\//,"").split("/");D="/"+k.replace(/^\//,"").split("/").slice(L.length).join("/")}let _=Dv(e,{pathname:D}),A=iy(_&&_.map(L=>Object.assign({},L,{params:Object.assign({},c,L.params),pathname:rr([d,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?d:rr([d,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),o,n,r);return t&&A?u.createElement(Fi.Provider,{value:{location:No({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Gn.Pop}},A):A}function sy(){let e=fy(),t=Kv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const ay=u.createElement(sy,null);class oy extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(on.Provider,{value:this.props.routeContext},u.createElement(Km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ly(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Wd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(on.Provider,{value:t},r)}function iy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let x=l.findIndex(w=>w.route.id&&(c==null?void 0:c[w.route.id])!==void 0);x>=0||Fe(!1),l=l.slice(0,Math.min(l.length,x+1))}let d=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<l.length;x++){let w=l[x];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=x),w.route.id){let{loaderData:k,errors:D}=n,_=w.route.loader&&k[w.route.id]===void 0&&(!D||D[w.route.id]===void 0);if(w.route.lazy||_){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((x,w,k)=>{let D,_=!1,A=null,L=null;n&&(D=c&&w.route.id?c[w.route.id]:void 0,A=w.route.errorElement||ay,d&&(m<0&&k===0?(py("route-fallback"),_=!0,L=null):m===k&&(_=!0,L=w.route.hydrateFallbackElement||null)));let j=t.concat(l.slice(0,k+1)),g=()=>{let b;return D?b=A:_?b=L:w.route.Component?b=u.createElement(w.route.Component,null):w.route.element?b=w.route.element:b=x,u.createElement(ly,{match:w,routeContext:{outlet:x,matches:j,isDataRoute:n!=null},children:b})};return n&&(w.route.ErrorBoundary||w.route.errorElement||k===0)?u.createElement(oy,{location:n.location,revalidation:n.revalidation,component:A,error:D,children:g(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):g()},null)}var Xm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Xm||{}),e0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(e0||{});function uy(e){let t=u.useContext(Wd);return t||Fe(!1),t}function cy(e){let t=u.useContext(Jv);return t||Fe(!1),t}function dy(e){let t=u.useContext(on);return t||Fe(!1),t}function t0(e){let t=dy(),n=t.matches[t.matches.length-1];return n.route.id||Fe(!1),n.route.id}function fy(){var e;let t=u.useContext(Km),n=cy(),r=t0();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hy(){let{router:e}=uy(Xm.UseNavigateStable),t=t0(e0.UseNavigateStable),n=u.useRef(!1);return Zm(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,No({fromRouteId:t},o)))},[e,t])}const yh={};function py(e,t,n){yh[e]||(yh[e]=!0)}function my(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Fc(e){let{to:t,replace:n,state:r,relative:s}=e;Js()||Fe(!1);let{future:o,static:l}=u.useContext(cr),{matches:c}=u.useContext(on),{pathname:d}=dr(),m=ln(),x=Vd(t,zd(c,o.v7_relativeSplatPath),d,s==="path"),w=JSON.stringify(x);return u.useEffect(()=>m(JSON.parse(w),{replace:n,state:r,relative:s}),[m,w,s,n,r]),null}function gy(e){return ty(e.context)}function gt(e){Fe(!1)}function xy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Gn.Pop,navigator:o,static:l=!1,future:c}=e;Js()&&Fe(!1);let d=t.replace(/^\/*/,"/"),m=u.useMemo(()=>({basename:d,navigator:o,static:l,future:No({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);typeof r=="string"&&(r=Zs(r));let{pathname:x="/",search:w="",hash:k="",state:D=null,key:_="default"}=r,A=u.useMemo(()=>{let L=Bd(x,d);return L==null?null:{location:{pathname:L,search:w,hash:k,state:D,key:_},navigationType:s}},[d,x,w,k,D,_,s]);return A==null?null:u.createElement(cr.Provider,{value:m},u.createElement(Fi.Provider,{children:n,value:A}))}function vy(e){let{children:t,location:n}=e;return ny(Oc(t),n)}new Promise(()=>{});function Oc(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,Oc(r.props.children,o));return}r.type!==gt&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Oc(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uc.apply(this,arguments)}function yy(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function wy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function by(e,t){return e.button===0&&(!t||t==="_self")&&!wy(e)}const jy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ky="6";try{window.__reactRouterVersion=ky}catch{}const Ny="startTransition",wh=pg[Ny];function Sy(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=Sv({window:s,v5Compat:!0}));let l=o.current,[c,d]=u.useState({action:l.action,location:l.location}),{v7_startTransition:m}=r||{},x=u.useCallback(w=>{m&&wh?wh(()=>d(w)):d(w)},[d,m]);return u.useLayoutEffect(()=>l.listen(x),[l,x]),u.useEffect(()=>my(r),[r]),u.createElement(xy,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ey=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lr=u.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:l,state:c,target:d,to:m,preventScrollReset:x,viewTransition:w}=t,k=yy(t,jy),{basename:D}=u.useContext(cr),_,A=!1;if(typeof m=="string"&&Cy.test(m)&&(_=m,Ey))try{let b=new URL(window.location.href),E=m.startsWith("//")?new URL(b.protocol+m):new URL(m),R=Bd(E.pathname,D);E.origin===b.origin&&R!=null?m=R+E.search+E.hash:A=!0}catch{}let L=Yv(m,{relative:s}),j=Dy(m,{replace:l,state:c,target:d,preventScrollReset:x,relative:s,viewTransition:w});function g(b){r&&r(b),b.defaultPrevented||j(b)}return u.createElement("a",Uc({},k,{href:_||L,onClick:A||o?r:g,ref:n,target:d}))});var bh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bh||(bh={}));var jh;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(jh||(jh={}));function Dy(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:l,viewTransition:c}=t===void 0?{}:t,d=ln(),m=dr(),x=Ym(e,{relative:l});return u.useCallback(w=>{if(by(w,n)){w.preventDefault();let k=r!==void 0?r:vi(m)===vi(x);d(e,{replace:k,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[m,d,x,r,s,n,e,o,l,c])}const Oi="chat_auth";function n0(e,t){localStorage.setItem(Oi,JSON.stringify({token:e,user:t}))}function Me(){const e=localStorage.getItem(Oi);if(!e)return null;try{return JSON.parse(e).token}catch{return null}}function Ms(){const e=localStorage.getItem(Oi);if(!e)return null;try{return JSON.parse(e).user}catch{return null}}function r0(){localStorage.removeItem(Oi)}function _y(){try{if(typeof window<"u"){const{origin:e,location:t}=window,n=(t==null?void 0:t.hostname)||"";return n==="localhost"||n==="127.0.0.1"?"http://localhost:3000/api":`${String(e).replace(/\/$/,"")}/api`}}catch{}return"http://localhost:3000/api"}const Vt=_y(),s0=Vt.replace(/\/?api$/,"");function Ry(e){const t=`${Vt}${e}`,n=t.includes("?")?"&":"?";return`${t}${n}_=${Date.now()}`}const q={get:e=>fetch(Ry(e),{headers:{Authorization:`Bearer ${Me()}`},cache:"no-store"}).then(vn),post:(e,t)=>fetch(`${Vt}${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Me()}`},body:JSON.stringify(t)}).then(vn),patch:(e,t)=>fetch(`${Vt}${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Me()}`},body:JSON.stringify(t)}).then(vn),del:e=>fetch(`${Vt}${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Me()}`}}).then(vn),upload:(e,t)=>fetch(`${Vt}${e}`,{method:"POST",headers:{Authorization:`Bearer ${Me()}`},body:t}).then(vn),uploadPatch:(e,t)=>fetch(`${Vt}${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${Me()}`},body:t}).then(vn),delete:e=>fetch(`${Vt}${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Me()}`}}).then(vn)},Ay={post:(e,t)=>fetch(`${Vt}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(vn),upload:(e,t)=>fetch(`${Vt}${e}`,{method:"POST",body:t}).then(vn)};function Ut(e){return!e||/^https?:\/\//i.test(e)?e:`${s0.replace(/\/$/,"")}${e}`}async function vn(e){if(e.status===304)return null;if(!e.ok){const n=await e.text();let r;try{r=JSON.parse(n).error||n}catch{r=n}if(e.status===401){try{r0()}catch{}try{typeof window<"u"&&window.location.assign("/login")}catch{}throw new Error(r||"Sesso expirada. Faa login novamente.")}throw new Error(r||"Erro de requisio")}return(e.headers.get("content-type")||"").includes("application/json")?e.json():e.text()}const an=Object.create(null);an.open="0";an.close="1";an.ping="2";an.pong="3";an.message="4";an.upgrade="5";an.noop="6";const Vl=Object.create(null);Object.keys(an).forEach(e=>{Vl[an[e]]=e});const Mc={type:"error",data:"parser error"},a0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",o0=typeof ArrayBuffer=="function",l0=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Hd=({type:e,data:t},n,r)=>a0&&t instanceof Blob?n?r(t):kh(t,r):o0&&(t instanceof ArrayBuffer||l0(t))?n?r(t):kh(new Blob([t]),r):r(an[e]+(t||"")),kh=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Nh(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Iu;function Ly(e,t){if(a0&&e.data instanceof Blob)return e.data.arrayBuffer().then(Nh).then(t);if(o0&&(e.data instanceof ArrayBuffer||l0(e.data)))return t(Nh(e.data));Hd(e,!1,n=>{Iu||(Iu=new TextEncoder),t(Iu.encode(n))})}const Sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ka=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Sh.length;e++)Ka[Sh.charCodeAt(e)]=e;const Py=e=>{let t=e.length*.75,n=e.length,r,s=0,o,l,c,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const m=new ArrayBuffer(t),x=new Uint8Array(m);for(r=0;r<n;r+=4)o=Ka[e.charCodeAt(r)],l=Ka[e.charCodeAt(r+1)],c=Ka[e.charCodeAt(r+2)],d=Ka[e.charCodeAt(r+3)],x[s++]=o<<2|l>>4,x[s++]=(l&15)<<4|c>>2,x[s++]=(c&3)<<6|d&63;return m},Iy=typeof ArrayBuffer=="function",qd=(e,t)=>{if(typeof e!="string")return{type:"message",data:i0(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Ty(e.substring(1),t)}:Vl[n]?e.length>1?{type:Vl[n],data:e.substring(1)}:{type:Vl[n]}:Mc},Ty=(e,t)=>{if(Iy){const n=Py(e);return i0(n,t)}else return{base64:!0,data:e}},i0=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},u0="",Fy=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((o,l)=>{Hd(o,!1,c=>{r[l]=c,++s===n&&t(r.join(u0))})})},Oy=(e,t)=>{const n=e.split(u0),r=[];for(let s=0;s<n.length;s++){const o=qd(n[s],t);if(r.push(o),o.type==="error")break}return r};function Uy(){return new TransformStream({transform(e,t){Ly(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let Tu;function Dl(e){return e.reduce((t,n)=>t+n.length,0)}function _l(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function My(e,t){Tu||(Tu=new TextDecoder);const n=[];let r=0,s=-1,o=!1;return new TransformStream({transform(l,c){for(n.push(l);;){if(r===0){if(Dl(n)<1)break;const d=_l(n,1);o=(d[0]&128)===128,s=d[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Dl(n)<2)break;const d=_l(n,2);s=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),r=3}else if(r===2){if(Dl(n)<8)break;const d=_l(n,8),m=new DataView(d.buffer,d.byteOffset,d.length),x=m.getUint32(0);if(x>Math.pow(2,21)-1){c.enqueue(Mc);break}s=x*Math.pow(2,32)+m.getUint32(4),r=3}else{if(Dl(n)<s)break;const d=_l(n,s);c.enqueue(qd(o?d:Tu.decode(d),t)),r=0}if(s===0||s>e){c.enqueue(Mc);break}}}})}const c0=4;function Be(e){if(e)return $y(e)}function $y(e){for(var t in Be.prototype)e[t]=Be.prototype[t];return e}Be.prototype.on=Be.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Be.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Be.prototype.off=Be.prototype.removeListener=Be.prototype.removeAllListeners=Be.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Be.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};Be.prototype.emitReserved=Be.prototype.emit;Be.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Be.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ui=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Rt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),By="arraybuffer";function d0(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const zy=Rt.setTimeout,Vy=Rt.clearTimeout;function Mi(e,t){t.useNativeTimers?(e.setTimeoutFn=zy.bind(Rt),e.clearTimeoutFn=Vy.bind(Rt)):(e.setTimeoutFn=Rt.setTimeout.bind(Rt),e.clearTimeoutFn=Rt.clearTimeout.bind(Rt))}const Wy=1.33;function Hy(e){return typeof e=="string"?qy(e):Math.ceil((e.byteLength||e.size)*Wy)}function qy(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function f0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Qy(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Gy(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class Ky extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Qd extends Be{constructor(t){super(),this.writable=!1,Mi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new Ky(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=qd(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Qy(t);return n.length?"?"+n:""}}class Zy extends Qd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Oy(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Fy(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=f0()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let h0=!1;try{h0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Jy=h0;function Yy(){}class Xy extends Zy{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class sn extends Be{constructor(t,n,r){super(),this.createRequest=t,Mi(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=d0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=sn.requestsCount++,sn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Yy,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete sn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}sn.requestsCount=0;sn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Eh);else if(typeof addEventListener=="function"){const e="onpagehide"in Rt?"pagehide":"unload";addEventListener(e,Eh,!1)}}function Eh(){for(let e in sn.requests)sn.requests.hasOwnProperty(e)&&sn.requests[e].abort()}const ew=function(){const e=p0({xdomain:!1});return e&&e.responseType!==null}();class tw extends Xy{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=ew&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new sn(p0,this.uri(),t)}}function p0(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Jy))return new XMLHttpRequest}catch{}if(!t)try{return new Rt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const m0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class nw extends Qd{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=m0?{}:d0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;Hd(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}s&&Ui(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=f0()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Fu=Rt.WebSocket||Rt.MozWebSocket;class rw extends nw{createSocket(t,n,r){return m0?new Fu(t,n,r):n?new Fu(t,n):new Fu(t)}doWrite(t,n){this.ws.send(n)}}class sw extends Qd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=My(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=Uy();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const o=()=>{r.read().then(({done:c,value:d})=>{c||(this.onPacket(d),o())}).catch(c=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&Ui(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const aw={websocket:rw,webtransport:sw,polling:tw},ow=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,lw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function $c(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=ow.exec(e||""),o={},l=14;for(;l--;)o[lw[l]]=s[l]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=iw(o,o.path),o.queryKey=uw(o,o.query),o}function iw(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function uw(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,o){s&&(n[s]=o)}),n}const Bc=typeof addEventListener=="function"&&typeof removeEventListener=="function",Wl=[];Bc&&addEventListener("offline",()=>{Wl.forEach(e=>e())},!1);class sr extends Be{constructor(t,n){if(super(),this.binaryType=By,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=$c(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=$c(n.host).host);Mi(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Gy(this.opts.query)),Bc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Wl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=c0,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&sr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",sr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Hy(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ui(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(sr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Bc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Wl.indexOf(this._offlineEventListener);r!==-1&&Wl.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}sr.protocol=c0;class cw extends sr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;sr.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",w=>{if(!r)if(w.type==="pong"&&w.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;sr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const k=new Error("probe error");k.transport=n.name,this.emitReserved("upgradeError",k)}}))};function o(){r||(r=!0,x(),n.close(),n=null)}const l=w=>{const k=new Error("probe error: "+w);k.transport=n.name,o(),this.emitReserved("upgradeError",k)};function c(){l("transport closed")}function d(){l("socket closed")}function m(w){n&&w.name!==n.name&&o()}const x=()=>{n.removeListener("open",s),n.removeListener("error",l),n.removeListener("close",c),this.off("close",d),this.off("upgrading",m)};n.once("open",s),n.once("error",l),n.once("close",c),this.once("close",d),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let dw=class extends cw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>aw[s]).filter(s=>!!s)),super(t,r)}};function fw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=$c(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const hw=typeof ArrayBuffer=="function",pw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,g0=Object.prototype.toString,mw=typeof Blob=="function"||typeof Blob<"u"&&g0.call(Blob)==="[object BlobConstructor]",gw=typeof File=="function"||typeof File<"u"&&g0.call(File)==="[object FileConstructor]";function Gd(e){return hw&&(e instanceof ArrayBuffer||pw(e))||mw&&e instanceof Blob||gw&&e instanceof File}function Hl(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Hl(e[n]))return!0;return!1}if(Gd(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Hl(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Hl(e[n]))return!0;return!1}function xw(e){const t=[],n=e.data,r=e;return r.data=zc(n,t),r.attachments=t.length,{packet:r,buffers:t}}function zc(e,t){if(!e)return e;if(Gd(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=zc(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=zc(e[r],t));return n}return e}function vw(e,t){return e.data=Vc(e.data,t),delete e.attachments,e}function Vc(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Vc(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Vc(e[n],t));return e}const yw=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ww=5;var fe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(fe||(fe={}));class bw{constructor(t){this.replacer=t}encode(t){return(t.type===fe.EVENT||t.type===fe.ACK)&&Hl(t)?this.encodeAsBinary({type:t.type===fe.EVENT?fe.BINARY_EVENT:fe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===fe.BINARY_EVENT||t.type===fe.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=xw(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function Ch(e){return Object.prototype.toString.call(e)==="[object Object]"}class Kd extends Be{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===fe.BINARY_EVENT;r||n.type===fe.BINARY_ACK?(n.type=r?fe.EVENT:fe.ACK,this.reconstructor=new jw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Gd(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(fe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===fe.BINARY_EVENT||r.type===fe.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(o,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const o=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(Kd.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case fe.CONNECT:return Ch(n);case fe.DISCONNECT:return n===void 0;case fe.CONNECT_ERROR:return typeof n=="string"||Ch(n);case fe.EVENT:case fe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&yw.indexOf(n[0])===-1);case fe.ACK:case fe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class jw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=vw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const kw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Kd,Encoder:bw,get PacketType(){return fe},protocol:ww},Symbol.toStringTag,{value:"Module"}));function Bt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Nw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class x0 extends Be{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Bt(t,"open",this.onopen.bind(this)),Bt(t,"packet",this.onpacket.bind(this)),Bt(t,"error",this.onerror.bind(this)),Bt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,o;if(Nw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:fe.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,w=n.pop();this._registerAckCallback(x,w),l.id=x}const c=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(d?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},s),l=(...c)=>{this.io.clearTimeoutFn(o),n.apply(this,c)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,s)=>{const o=(l,c)=>l?s(l):r(c);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...o)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case fe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case fe.EVENT:case fe.BINARY_EVENT:this.onevent(t);break;case fe.ACK:case fe.BINARY_ACK:this.onack(t);break;case fe.DISCONNECT:this.ondisconnect();break;case fe.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:fe.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Ys(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ys.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Ys.prototype.reset=function(){this.attempts=0};Ys.prototype.setMin=function(e){this.ms=e};Ys.prototype.setMax=function(e){this.max=e};Ys.prototype.setJitter=function(e){this.jitter=e};class Wc extends Be{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Mi(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ys({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||kw;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new dw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Bt(n,"open",function(){r.onopen(),t&&t()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},l=Bt(n,"error",o);if(this._timeout!==!1){const c=this._timeout,d=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),n.close()},c);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(s),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Bt(t,"ping",this.onping.bind(this)),Bt(t,"data",this.ondata.bind(this)),Bt(t,"error",this.onerror.bind(this)),Bt(t,"close",this.onclose.bind(this)),Bt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Ui(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new x0(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ba={};function ql(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=fw(e,t.path||"/socket.io"),r=n.source,s=n.id,o=n.path,l=Ba[s]&&o in Ba[s].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let d;return c?d=new Wc(r,t):(Ba[s]||(Ba[s]=new Wc(r,t)),d=Ba[s]),n.query&&!t.query&&(t.query=n.queryKey),d.socket(n.path,t)}Object.assign(ql,{Manager:Wc,Socket:x0,io:ql,connect:ql});let Ou;function wn(){if(!Ou){const e=s0||(typeof window<"u"?window.location.origin:"");Ou=ql(e,{path:"/socket.io",withCredentials:!1,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3})}return Ou}async function Sw(){if(typeof window<"u"&&window.JsSIP)return window.JsSIP;await new Promise((e,t)=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/jssip@3/dist/jssip.min.js",n.async=!0,n.onload=()=>e(),n.onerror=()=>t(new Error("Falha ao carregar JsSIP via CDN")),document.head.appendChild(n)});try{window.JsSIP.debug.enable("JsSIP:*")}catch{}return window.JsSIP}async function Ew({wsUrl:e,domain:t,extension:n,password:r,iceServers:s}){const o=await Sw(),c={sockets:[new o.WebSocketInterface(e)],uri:`sip:${n}@${t}`,authorization_user:n,password:r,register:!0,register_expires:300,session_timers:!1},d=new o.UA(c);let m=null,x=!1;function w(g,b){d.on(g,b)}function k(){return new Promise(g=>{const b=()=>{x=!0,R(),g()},E=()=>{R(),g()};function R(){try{d.off("registered",b)}catch{}try{d.off("registrationFailed",E)}catch{}}d.on("registered",b),d.on("registrationFailed",E);try{d.start()}catch{g()}})}function D(){return x}function _(g,{onProgress:b,onAccepted:E,onEnded:R,onFailed:U,onTrack:$,audioDeviceId:V}={}){return new Promise((B,C)=>{const Z={eventHandlers:{progress:F=>{b&&b(F)},failed:F=>{m=null,U&&U(F),B(!1)},ended:F=>{m=null,R&&R(F),B(!1)},confirmed:F=>{E&&E(F),B(!0)}},mediaConstraints:{audio:V?{deviceId:{exact:V}}:!0,video:!1},pcConfig:{iceServers:s||[],iceTransportPolicy:"all"}};try{m=d.call(/^sip:/i.test(g)?g:`sip:${g}@${t}`,Z);try{m.connection.addEventListener("track",F=>{const[Y]=F.streams;$&&$(Y)}),m.connection.addEventListener("iceconnectionstatechange",()=>{})}catch{}}catch(F){C(F)}})}async function A(g){try{if(!m||!m.connection)return!1;const E=(await navigator.mediaDevices.getUserMedia({audio:g?{deviceId:{exact:g}}:!0})).getAudioTracks()[0];if(!E)return!1;const R=m.connection.getSenders().find(U=>U.track&&U.track.kind==="audio");return R&&await R.replaceTrack(E),!0}catch{return!1}}function L(g){var b;try{(b=m==null?void 0:m.sendDTMF)==null||b.call(m,String(g||"").substring(0,1))}catch{}}function j(){try{m==null||m.terminate()}catch{}m=null}return{ua:d,start:k,isRegistered:D,call:_,hangup:j,on:w,dtmf:L,setAudioDevice:A}}let de=null,za=!1,Va=null,Uu=null;const Mu="[SIP]";function Wa(e){try{localStorage.setItem("sip_registered",e?"1":"0"),window.dispatchEvent(new CustomEvent("sip:reg",{detail:{registered:e}}))}catch{}}function $u(e=3e3){Uu||(Uu=setTimeout(()=>{Uu=null;try{v0().catch(()=>{})}catch{}},e))}function Cw(){const e=[];try{const t="stun:202106.maisfone.com.br:3478";t&&t.split(",").map(o=>o.trim()).filter(Boolean).forEach(o=>e.push({urls:o}));const n=void 0,r=void 0,s=void 0}catch{}return e.length||e.push({urls:"stun:stun.l.google.com:19302"}),e}async function v0(){return za?de:Va||(Va=(async()=>{var e;try{const t="wss://202106.maisfone.com.br:7443/ws",n=await q.get("/phone/me").catch(r=>(console.warn(`${Mu} Falha ao carregar /phone/me:`,(r==null?void 0:r.message)||r),null));if(!n||!n.hasPassword||!n.domain||!n.extension)return console.warn(`${Mu} Conta SIP incompleta ou sem senha; aguardando configurao.`),za=!0,null;if(de=await Ew({wsUrl:t,domain:n.domain,extension:n.extension,password:n.password||"",iceServers:Cw()}),!de)return console.warn(`${Mu} createSipManager no retornou instncia (verifique URL e rede).`),za=!0,null;if(de!=null&&de.on){try{de.on("registered",()=>Wa(!0))}catch{}try{de.on("unregistered",()=>Wa(!1))}catch{}try{de.on("registrationFailed",()=>{Wa(!1),$u(5e3)})}catch{}try{de.on("disconnected",()=>{Wa(!1),$u(3e3)})}catch{}}await de.start(),Wa(!!((e=de==null?void 0:de.isRegistered)!=null&&e.call(de)));try{document.addEventListener("visibilitychange",()=>{var r,s;(r=de==null?void 0:de.isRegistered)!=null&&r.call(de)||(s=de.start)==null||s.call(de).catch(()=>{})})}catch{}try{window.addEventListener("online",()=>{var r;(r=de==null?void 0:de.start)==null||r.call(de).catch(()=>{})})}catch{}try{setInterval(()=>{var r;try{(r=de==null?void 0:de.ua)!=null&&r.register&&de.ua.register()}catch{}},24e4)}catch{}return za=!0,de}catch{return za=!1,$u(5e3),null}finally{Va=null}})(),Va)}function Dw(){return de}function _w(){var W,X;const e=ln(),t=dr(),n=Ms(),r=O=>{try{O?localStorage.setItem("notif_sound_url",O):localStorage.removeItem("notif_sound_url"),window.dispatchEvent(new Event("chat:alertSoundUpdated"))}catch{}},[s,o]=u.useState(0);u.useEffect(()=>{const O=()=>o(ae=>ae+1);return window.addEventListener("chat:userUpdated",O),()=>window.removeEventListener("chat:userUpdated",O)},[]),u.useEffect(()=>{const O=()=>{const pe=localStorage.getItem("chat_wallpaper")||"";pe?document.documentElement.style.setProperty("--chat-wallpaper",`url('${pe}')`):document.documentElement.style.removeProperty("--chat-wallpaper")},ae=pe=>r(pe);return O(),window.addEventListener("chat:wallpaperUpdated",O),(async()=>{try{const pe=`${window.location.origin}/api`.replace(/\/$/,""),De=await fetch(`${pe}/admin/config/public?_=${Date.now()}`,{cache:"no-store"});if(!De.ok)return;const ue=await De.json();if(!!!localStorage.getItem("chat_wallpaper")&&(ue!=null&&ue.chatWallpaperUrl)&&document.documentElement.style.setProperty("--chat-wallpaper",`url('${ue.chatWallpaperUrl}')`),ue&&Object.prototype.hasOwnProperty.call(ue,"alertSoundUrl")&&ae((ue==null?void 0:ue.alertSoundUrl)||""),ue&&Object.prototype.hasOwnProperty.call(ue,"chatIconUrl")){const ot=(ue==null?void 0:ue.chatIconUrl)||"";b(ot);try{ot?localStorage.setItem("chat_icon",ot):localStorage.removeItem("chat_icon"),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}}}catch{}})(),()=>window.removeEventListener("chat:wallpaperUpdated",O)},[]),u.useEffect(()=>{const O=wn(),ae=(pe={})=>{r((pe==null?void 0:pe.url)||"")},ve=(pe={})=>{const De=(pe==null?void 0:pe.url)||"";b(De);try{De?localStorage.setItem("chat_icon",De):localStorage.removeItem("chat_icon"),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}};return O.on("config:alert-sound",ae),O.on("config:chat-icon",ve),()=>{O.off("config:alert-sound",ae),O.off("config:chat-icon",ve)}},[]),u.useEffect(()=>{v0().catch(()=>{})},[]);const l=u.useCallback(()=>{try{r0()}catch{}d(!1),e("/login",{replace:!0}),setTimeout(()=>{window.location.pathname!=="/login"&&window.location.assign("/login")},75)},[e]),[c,d]=u.useState(!1),[m,x]=u.useState(()=>localStorage.getItem("chat_status")||"online"),w=O=>{x(O),localStorage.setItem("chat_status",O)},[k,D]=u.useState(()=>localStorage.getItem("theme")||"light"),[_,A]=u.useState(()=>localStorage.getItem("chat_bg")||"whatsapp"),[L,j]=u.useState(!1),[g,b]=u.useState(()=>localStorage.getItem("chat_icon")||""),E=u.useRef(null),[R,U]=u.useState(!1),[$,V]=u.useState(""),[B,C]=u.useState(""),ne=u.useRef(null),Z=u.useCallback(O=>{ne.current=O},[]),F=L?"w-16 md:w-16":"w-64 md:w-64",Y=u.useCallback(()=>{},[]);u.useEffect(()=>{const O=document.documentElement,ae=document.body;k==="dark"?(O.classList.add("dark"),ae.classList.add("dark")):(O.classList.remove("dark"),ae.classList.remove("dark")),localStorage.setItem("theme",k)},[k]),u.useEffect(()=>{const O=document.body;try{O.setAttribute("data-chat-bg",_)}catch{}localStorage.setItem("chat_bg",_)},[_]),u.useEffect(()=>{const O=()=>b(localStorage.getItem("chat_icon")||""),ae=()=>A(localStorage.getItem("chat_bg")||"whatsapp");return window.addEventListener("chat:iconUpdated",O),window.addEventListener("chat:bgUpdated",ae),()=>{window.removeEventListener("chat:iconUpdated",O),window.removeEventListener("chat:bgUpdated",ae)}},[]),u.useEffect(()=>{var ve;const O=wn(),ae=(ve=Ms())==null?void 0:ve.id;if(ae)try{O.emit("presence:online",{userId:ae,status:m})}catch{}},[n==null?void 0:n.id]),u.useEffect(()=>{var ve;const O=wn();if((ve=Ms())!=null&&ve.id)try{O.emit("presence:set",{status:m})}catch{}},[m]),u.useEffect(()=>{if(!c)return;const O=ae=>{const ve=ne.current;ve&&(ve.contains(ae.target)||d(!1))};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[c]);const le=async O=>{var ve,pe;const ae=(ve=O.target.files)==null?void 0:ve[0];if(ae){if(!((pe=ae.type)!=null&&pe.startsWith("image/"))){C("Escolha um arquivo de imagem"),O.target.value="";return}V(""),C(""),U(!0);try{const De=new FormData;De.append("avatar",ae);const ue=await q.uploadPatch("/users/me",De),ye=(ue==null?void 0:ue.user)||ue;if(ye!=null&&ye.avatarUrl){try{const ot=localStorage.getItem("chat_auth");if(ot){const kt=JSON.parse(ot);kt.user={...kt.user||{},avatarUrl:ye.avatarUrl},localStorage.setItem("chat_auth",JSON.stringify(kt))}}catch{}window.dispatchEvent(new Event("chat:userUpdated")),V("Foto atualizada com sucesso")}else V("Foto atualizada");d(!1)}catch(De){C((De==null?void 0:De.message)||"Falha ao enviar foto")}finally{U(!1),O.target.value=""}}},ie=()=>{var O;C(""),V(""),(O=E.current)==null||O.click()},Ce=O=>a.jsxs("div",{className:`${O} w-64 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded shadow-lg p-3 z-50`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Preferencias"}),a.jsx("button",{type:"button",onClick:()=>d(!1),className:"inline-flex w-6 h-6 items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Fechar menu",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:a.jsx("path",{d:"m6.225 4.811 13.964 13.964-1.061 1.06L5.164 5.871l1.061-1.06Zm11.55 0 1.06 1.06L4.87 19.386l-1.06-1.06L17.776 4.81Z"})})})]}),a.jsx("div",{className:"mt-3 border-t border-slate-200 dark:border-slate-700"}),a.jsx("div",{className:"px-1.5 py-1 text-xs text-slate-500 dark:text-slate-400",children:"Status"}),a.jsxs("div",{className:"flex flex-wrap gap-2 px-1.5 py-1",children:[a.jsx("button",{onClick:()=>w("online"),className:`px-2 py-1 rounded text-sm ${m==="online"?"bg-green-100 text-green-700":"hover:bg-slate-50 dark:hover:bg-slate-700/60"}`,children:"Online"}),a.jsx("button",{onClick:()=>w("ausente"),className:`px-2 py-1 rounded text-sm ${m==="ausente"?"bg-yellow-100 text-yellow-700":"hover:bg-slate-50 dark:hover:bg-slate-700/60"}`,children:"Ausente"}),a.jsx("button",{onClick:()=>w("offline"),className:`px-2 py-1 rounded text-sm ${m==="offline"?"bg-slate-100 text-slate-700":"hover:bg-slate-50 dark:hover:bg-slate-700/60"}`,children:"Offline"})]}),a.jsx("div",{className:"mt-2 border-t border-slate-200 dark:border-slate-700"}),a.jsx("div",{className:"px-1.5 py-1 text-xs text-slate-500 dark:text-slate-400",children:"Tema"}),a.jsxs("div",{className:"flex gap-2 px-1.5 py-1",children:[a.jsx("button",{onClick:()=>D("light"),className:`px-2 py-1 rounded text-sm ${k==="light"?"bg-slate-100 text-slate-700":"hover:bg-slate-50 dark:hover:bg-slate-700/60"}`,children:"Claro"}),a.jsx("button",{onClick:()=>D("dark"),className:`px-2 py-1 rounded text-sm ${k==="dark"?"bg-slate-700 text-white":"hover:bg-slate-50 dark:hover:bg-slate-700/60"}`,children:"Escuro"})]}),a.jsx("div",{className:"mt-2 border-t border-slate-200 dark:border-slate-700"}),a.jsx("div",{className:"px-1.5 py-1 text-xs text-slate-500 dark:text-slate-400",children:"Foto"}),a.jsxs("button",{type:"button",onClick:()=>{ie()},className:"w-full inline-flex items-center justify-center gap-2 px-2 py-1.5 rounded border border-slate-300 dark:border-slate-600 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/60 disabled:opacity-50",disabled:R,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:a.jsx("path",{d:"M9 3.75A.75.75 0 0 1 9.75 3h4.5a.75.75 0 0 1 .707.493l.401 1.12h2.192A1.95 1.95 0 0 1 19.5 6.563l.75 2.25A2.25 2.25 0 0 1 21 9.75v7.5A3.75 3.75 0 0 1 17.25 21h-10.5A3.75 3.75 0 0 1 3 17.25v-7.5a2.25 2.25 0 0 1 .75-1.688l.75-2.25A1.95 1.95 0 0 1 6.45 4.5h2.192l.401-1.12A.75.75 0 0 1 9 3.75ZM12 8.25a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9Zm0 1.5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Z"})}),a.jsx("span",{children:R?"Enviando...":"Alterar foto"})]}),a.jsx("div",{className:"mt-2 border-t border-slate-200 dark:border-slate-700"}),a.jsxs("div",{className:"flex flex-col gap-1 px-1.5 py-1",children:[a.jsx("button",{type:"button",onClick:()=>{d(!1),e("/")},className:"px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left",children:"Ir para Chat"}),(n==null?void 0:n.isAdmin)&&a.jsx("button",{type:"button",onClick:()=>{d(!1),e("/admin")},className:"px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left",children:"Ir para Admin"}),a.jsx("button",{type:"button",onClick:()=>{d(!1),e("/profile")},className:"px-2 py-1.5 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left",children:"Editar perfil"}),a.jsx("button",{type:"button",onClick:l,className:"px-2 py-1.5 text-sm text-red-600 rounded hover:bg-red-50 dark:hover:bg-red-900/30 text-left",children:"Sair"})]})]}),z=O=>t.pathname===O?"text-blue-600 font-semibold":"text-slate-700 hover:text-blue-600";return a.jsxs("div",{className:"flex h-screen overflow-x-hidden bg-slate-50 dark:bg-slate-900 dark:text-slate-100",children:[a.jsxs("aside",{className:`${F} flex-shrink-0 border-r border-slate-200 dark:border-slate-700 p-4 bg-white dark:bg-slate-800 flex flex-col z-40`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[L?g?a.jsx("img",{src:g,alt:"cone do chat",className:"w-8 h-8 rounded-full object-cover"}):a.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-slate-700 dark:text-slate-200",children:a.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z",fill:"currentColor"})}):a.jsxs("div",{className:"flex items-center gap-2",children:[g&&a.jsx("img",{src:g,alt:"cone",className:"w-6 h-6 rounded object-cover"}),a.jsx("h3",{className:"font-semibold text-xl",children:"Chat"})]}),a.jsxs("div",{className:"relative group hidden",children:[a.jsx("button",{type:"button",className:"inline-flex w-8 h-8 items-center justify-center rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700/60",title:L?"Expandir":"Recolher",onClick:()=>{const O=!L;j(O);try{localStorage.setItem("sidebar_mini",O?"1":"0")}catch{}},children:L?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M4.5 12h15v1.5h-15V12Zm0-4.5h9V9h-9V7.5Zm0 9h9V18h-9v-1.5Z"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M9 6h10v1.5H9V6Zm0 10.5h10V18H9v-1.5ZM9 11.25h10v1.5H9v-1.5ZM5 6h2v12H5V6Z"})})}),a.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:L?"Expandir":"Recolher"})]})]}),!L&&a.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Ol, ",n==null?void 0:n.name]}),a.jsxs("nav",{className:"mt-4 flex flex-col gap-2",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs(Lr,{title:"Conversas",className:`px-2 py-2 rounded flex items-center gap-2 ${z("/conversas")}`,to:"/conversas",onClick:Y,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z"})}),!L&&a.jsx("span",{children:"Conversas"})]}),L&&a.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Conversas"})]}),a.jsxs("div",{className:"relative group",children:[a.jsxs(Lr,{title:"Telefonia",className:`px-2 py-2 rounded flex items-center gap-2 ${z("/telefonia")}`,to:"/telefonia",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M2.25 6.75c0-1.24 1.01-2.25 2.25-2.25h3c.97 0 1.8.62 2.1 1.54l.86 2.58a2.25 2.25 0 0 1-.57 2.31l-1.21 1.21a12.06 12.06 0 0 0 4.88 4.88l1.21-1.21a2.25 2.25 0 0 1 2.31-.57l2.58.86c.92.3 1.54 1.13 1.54 2.1v3c0 1.24-1.01 2.25-2.25 2.25H18c-8.28 0-15-6.72-15-15v-3Z"})}),!L&&a.jsx("span",{children:"Telefonia"})]}),L&&a.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Telefonia"})]}),a.jsxs("div",{className:"relative group",children:[a.jsxs(Lr,{title:"Reunies",className:`px-2 py-2 rounded flex items-center gap-2 ${z("/reunioes")}`,to:"/reunioes",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M6.75 2a.75.75 0 0 1 .75.75V4h9V2.75a.75.75 0 0 1 1.5 0V4h.75A2.25 2.25 0 0 1 21 6.25v11A2.25 2.25 0 0 1 18.75 19.5H5.25A2.25 2.25 0 0 1 3 17.25v-11A2.25 2.25 0 0 1 5.25 4H6V2.75a.75.75 0 0 1 .75-.75Zm12 6H5.25a.75.75 0 0 0-.75.75V9h15V8.75a.75.75 0 0 0-.75-.75ZM19.5 10.5h-15V17.25c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V10.5Zm-9.75 2.25a.75.75 0 0 1 .102 1.493L9.75 14.25h-2.5a.75.75 0 0 1-.102-1.493l.102-.007h2.5Zm6 0a.75.75 0 0 1 .102 1.493l-.102.007h-3.5a.75.75 0 0 1-.102-1.493l.102-.007h3.5Z"})}),!L&&a.jsx("span",{children:"Reunies"})]}),L&&a.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Reunies"})]}),(n==null?void 0:n.isAdmin)&&a.jsxs("div",{className:"relative group",children:[a.jsxs(Lr,{title:"Admin",className:`px-2 py-2 rounded flex items-center gap-2 ${z("/admin")}`,to:"/admin",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M12 2.25 3.75 6v5.25c0 5.108 3.66 9.837 8.625 10.5 4.965-.663 8.625-5.392 8.625-10.5V6L12 2.25Zm0 5.25a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm0 12a7.5 7.5 0 0 1-6-3.09c.03-1.982 4.5-3.06 6-3.06s5.97 1.078 6 3.06A7.5 7.5 0 0 1 12 19.5Z"})}),!L&&a.jsx("span",{children:"Admin"})]}),L&&a.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Admin"})]}),a.jsxs("div",{className:"relative group",children:[a.jsxs(Lr,{title:"Contatos",className:`px-2 py-2 rounded flex items-center gap-2 ${z("/contatos")}`,to:"/contatos",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M5.25 3A2.25 2.25 0 0 0 3 5.25v13.5A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V5.25A2.25 2.25 0 0 0 18.75 3H5.25Zm6.75 4.5a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm0 6c2.209 0 4.5 1.122 4.5 2.5V17H7.5v-1c0-1.378 2.291-2.5 4.5-2.5Z"})}),!L&&a.jsx("span",{children:"Contatos"})]}),L&&a.jsx("span",{className:"pointer-events-none absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 text-white text-xs rounded px-2 py-1 shadow z-50 whitespace-nowrap dark:bg-slate-700",children:"Contatos"})]})]}),a.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-200 dark:border-slate-700",children:[a.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:le}),L?a.jsxs("div",{ref:Z,className:"flex flex-col items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>d(O=>!O),className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 hover:ring-2 hover:ring-blue-500/30","aria-label":"Abrir menu do perfil",children:[a.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:n!=null&&n.avatarUrl?a.jsx("img",{src:n.avatarUrl,alt:"avatar",className:"w-full h-full object-cover",onError:O=>{O.currentTarget.style.display="none"}}):a.jsx("div",{className:"w-full h-full bg-slate-300"})}),a.jsx("span",{className:`absolute bottom-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white dark:border-slate-800 ${m==="online"?"bg-green-500":m==="ausente"?"bg-yellow-500":"bg-slate-400"}`})]}),c&&Ce("fixed top-4 left-20")]}),R&&a.jsx("span",{className:"text-[10px] text-slate-500",children:"Enviando..."}),$&&a.jsx("span",{className:"text-[10px] text-green-600 text-center max-w-[64px]",children:$}),B&&a.jsx("span",{className:"text-[10px] text-red-600 text-center max-w-[64px]",children:B})]}):a.jsxs("div",{ref:Z,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>d(O=>!O),className:"w-full inline-flex items-center gap-3 rounded border border-slate-300 dark:border-slate-600 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700/60 text-left","aria-expanded":c,children:[a.jsxs("span",{className:"relative",children:[a.jsx("span",{className:"w-12 h-12 rounded-full border border-slate-300 dark:border-slate-600 overflow-hidden bg-slate-200 block",children:n!=null&&n.avatarUrl?a.jsx("img",{src:n.avatarUrl,alt:"avatar",className:"w-full h-full object-cover",onError:O=>{O.currentTarget.style.display="none"}}):a.jsx("span",{className:"w-full h-full flex items-center justify-center text-sm text-slate-500",children:((X=(W=n==null?void 0:n.name)==null?void 0:W.slice(0,2))==null?void 0:X.toUpperCase())||"ME"})}),a.jsx("span",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white dark:border-slate-800 ${m==="online"?"bg-green-500":m==="ausente"?"bg-yellow-500":m==="ocupado"?"bg-red-500":"bg-slate-400"}`})]}),a.jsxs("span",{className:"flex-1 min-w-0 text-left",children:[a.jsx("span",{className:"block font-semibold text-sm truncate",children:(n==null?void 0:n.name)||"Meu perfil"}),a.jsxs("span",{className:"block text-xs text-slate-500 capitalize truncate",children:["Status: ",m]})]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${c?"rotate-180":""}`,children:a.jsx("path",{d:"M12 15.75a.75.75 0 0 1-.53-.22l-4.5-4.5a.75.75 0 1 1 1.06-1.06L12 13.94l3.97-3.97a.75.75 0 0 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-.53.22Z"})})]}),c&&Ce("absolute right-0 bottom-full mb-2")]})]})]}),a.jsx("main",{className:"flex-1 overflow-hidden",children:a.jsx(gy,{})})]})}function Rw({className:e="w-4 h-4"}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"})})}function Aw({className:e="w-4 h-4"}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}function Lw({className:e="w-4 h-4"}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}function Ql({className:e="w-4 h-4"}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function Pw({className:e="w-5 h-5"}){return a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("circle",{cx:"5",cy:"12",r:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"}),a.jsx("circle",{cx:"19",cy:"12",r:"2"})]})}function Iw({className:e="w-5 h-5"}){return a.jsx("span",{className:e,role:"img","aria-label":"emoji",children:""})}function Dh({className:e="w-4 h-4",filled:t=!1}){return t?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:e,children:a.jsx("path",{d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l1.63 3.918 4.254.372c1.164.102 1.636 1.545.749 2.32l-3.244 2.76 1.003 4.135c.274 1.127-.964 1.997-1.96 1.4L12 15.64 8.356 18.116c-.996.598-2.234-.273-1.96-1.4l1.003-4.135-3.244-2.76c-.887-.775-.415-2.218.749-2.32l4.254-.372 1.63-3.918z"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:a.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l1.4 3.36a.562.562 0 00.46.345l3.633.314a.562.562 0 01.32.98l-2.77 2.357a.562.562 0 00-.182.536l.82 3.493a.562.562 0 01-.84.61l-3.1-1.87a.562.562 0 00-.586 0l-3.1 1.87a.562.562 0 01-.84-.61l.82-3.493a.562.562 0 00-.182-.536l-2.77-2.357a.562.562 0 01.32-.98l3.633-.314a.562.562 0 00.46-.345l1.4-3.36z"})})}function Hc({className:e="w-5 h-5"}){return a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.065 7-9.542 7s-8.268-2.943-9.542-7z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function qc({className:e="w-5 h-5"}){return a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0112 19c-4.477 0-8.268-2.943-9.542-7a11.05 11.05 0 012.909-4.516"}),a.jsx("path",{d:"M9.88 9.88a3 3 0 104.24 4.24"}),a.jsx("path",{d:"M3 3l18 18"}),a.jsx("path",{d:"M10.73 5.08A10.95 10.95 0 0112 5c4.477 0 8.268 2.943 9.542 7a11.07 11.07 0 01-2.232 3.592"})]})}function Tw(){const e=ln(),t=dr(),[n,r]=u.useState(""),[s,o]=u.useState(""),[l,c]=u.useState(!1),[d,m]=u.useState(!1),[x,w]=u.useState(""),[k,D]=u.useState(!1),[_,A]=u.useState(""),[L,j]=u.useState(!1),[g,b]=u.useState(""),[E,R]=u.useState(""),[U,$]=u.useState(""),[V,B]=u.useState(!1),C="",[ne,Z]=u.useState(C);u.useEffect(()=>{try{const le=localStorage.getItem("theme")||(matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.classList.toggle("dark",le==="dark");const ie=localStorage.getItem("rememberedEmail");ie&&(r(ie),c(!0))}catch{}},[]),u.useEffect(()=>{(async()=>{try{const ie=typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api",Ce=await fetch(`${String(ie).replace(/\/$/,"")}/admin/config/public?_=${Date.now()}`,{cache:"no-store"});if(!Ce.ok)return;const z=await Ce.json();Object.prototype.hasOwnProperty.call(z||{},"loginLogoUrl")&&Z((z==null?void 0:z.loginLogoUrl)||"")}catch{Z(C)}})()},[]),u.useEffect(()=>{try{new URLSearchParams((t==null?void 0:t.search)||"").get("registered")==="1"?w("Conta criada com sucesso! Faa login com suas credenciais."):w("")}catch{w("")}},[t]),u.useEffect(()=>{L&&(b(n||""),R(""),$(""))},[L,n]);async function F(le){le.preventDefault(),D(!0),w(""),A("");try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(n))throw new Error("Informe um e-mail vlido");if(!s||s.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const Ce=await q.post("/auth/login",{email:n,password:s});n0(Ce.token,Ce.user);try{l?localStorage.setItem("rememberedEmail",n):localStorage.removeItem("rememberedEmail")}catch{}e("/")}catch(ie){A(ie.message||"Falha no login")}finally{D(!1)}}async function Y(le){le.preventDefault(),R(""),$("");try{const ie=(g||"").trim();if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(ie))throw new Error("Informe um e-mail vlido");B(!0);const z=await q.post("/auth/forgot-password",{email:ie});R((z==null?void 0:z.message)||"Se o e-mail estiver cadastrado, voc receber uma nova senha.")}catch(ie){$((ie==null?void 0:ie.message)||"No foi possvel processar a solicitao. Tente novamente.")}finally{B(!1)}}return a.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-100",children:[a.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[a.jsx("div",{className:"absolute -top-32 -left-24 h-72 w-72 rounded-full bg-emerald-500/30 blur-3xl"}),a.jsx("div",{className:"absolute bottom-[-8rem] right-[-6rem] h-96 w-96 rounded-full bg-blue-500/25 blur-3xl"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.18),transparent_55%)]"}),a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(135deg,rgba(15,23,42,0.6),rgba(15,23,42,0.9))]"})]}),a.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-6 py-12",children:a.jsxs("div",{className:"grid w-full max-w-5xl gap-12 rounded-[2.5rem] border border-white/5 bg-white/5 p-8 shadow-[0_20px_70px_-30px_rgba(15,23,42,0.9)] backdrop-blur-lg lg:grid-cols-[1.1fr_1fr] lg:p-12",children:[a.jsxs("div",{className:"hidden flex-col justify-between lg:flex",children:[a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("span",{className:"inline-flex items-center gap-2 w-fit rounded-full border border-white/10 bg-white/5 px-4 py-1 text-sm text-slate-200",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400 animate-pulse"}),"Plataforma omnichannel"]}),a.jsx("h1",{className:"text-4xl font-semibold leading-tight text-white",children:"Conecte sua equipe e Participe de Grupos"}),a.jsx("p",{className:"text-lg text-slate-300",children:"Nosso chat interno conecta toda a equipe em tempo real, facilitando a troca de ideias e decises rpidas. Comunicao simples, gil e segura para aumentar a produtividade e fortalecer a colaborao."})]}),a.jsxs("div",{className:"mt-10 flex flex-col gap-4 text-sm text-slate-200/80",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-300",children:"01"}),"Respostas rapidas e consistentes em todos os atendimentos."]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-cyan-500/20 text-cyan-200",children:"02"}),"Monitoramento em tempo real e historico completo das conversas."]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-500/20 text-blue-200",children:"03"}),"Seguranca e privacidade alinhadas as melhores praticas do mercado."]})]})]}),a.jsxs("form",{onSubmit:F,className:"relative flex flex-col gap-6 rounded-3xl border border-white/10 bg-white/90 p-8 text-slate-900 shadow-2xl backdrop-blur dark:bg-slate-900/85 dark:text-slate-100",noValidate:!0,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[ne?a.jsx("img",{src:ne,alt:"Logo",className:"h-10 w-auto",draggable:!1}):a.jsx("div",{className:"h-10 w-10 rounded-lg border border-white/10 bg-white/10"}),a.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-300"})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h2",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"Bem-vindo de volta"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Acesse sua conta para continuar acompanhando suas conversas."})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"E-mail"}),a.jsx("input",{id:"email",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-emerald-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"voce@empresa.com",type:"email",autoComplete:"email",autoFocus:!0,required:!0,value:n,onChange:le=>r(le.target.value)})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Senha"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-14 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-emerald-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Insira sua senha",type:d?"text":"password",autoComplete:"current-password",minLength:6,required:!0,value:s,onChange:le=>o(le.target.value)}),a.jsx("button",{type:"button",onClick:()=>m(le=>!le),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center gap-2 rounded-lg border border-transparent px-3 text-xs font-medium text-emerald-600 transition hover:border-emerald-200 hover:bg-emerald-50 hover:text-emerald-700 dark:text-emerald-300 dark:hover:border-emerald-500/50 dark:hover:bg-emerald-500/10","aria-label":d?"Ocultar senha":"Mostrar senha",children:d?a.jsx(qc,{className:"w-4 h-4"}):a.jsx(Hc,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[a.jsx("input",{type:"checkbox",checked:l,onChange:le=>c(le.target.checked),className:"h-4 w-4 rounded border-slate-300 text-emerald-500 focus:ring-emerald-400 dark:border-slate-600"}),"Lembrar de mim"]}),a.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 flex flex-col items-end gap-0.5 text-right",children:a.jsx("button",{type:"button",className:"text-emerald-500 underline underline-offset-2 hover:text-emerald-400",onClick:()=>j(!0),children:"Esqueci minha senha"})})]}),x&&a.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-emerald-300/60 bg-emerald-50 px-3 py-2 text-sm text-emerald-700 dark:border-emerald-500/40 dark:bg-emerald-500/10 dark:text-emerald-200",children:[a.jsx("span",{className:"text-base",children:"?"}),a.jsx("span",{children:x})]}),_&&a.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-300/60 bg-red-50/80 px-3 py-2 text-sm text-red-600 dark:border-red-500/40 dark:bg-red-500/10 dark:text-red-200",children:[a.jsx("span",{className:"text-base",children:"??"}),a.jsx("span",{children:_})]}),a.jsx("button",{type:"submit",disabled:k,className:"inline-flex h-12 items-center justify-center rounded-2xl bg-gradient-to-r from-emerald-500 via-cyan-500 to-blue-500 px-6 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:shadow-2xl hover:shadow-emerald-500/40 disabled:opacity-60 disabled:shadow-none",children:k?"Entrando...":"Entrar"}),a.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-300",children:["No tem conta?"," ",a.jsx(Lr,{className:"font-medium text-emerald-600 transition hover:text-emerald-500 dark:text-emerald-300 dark:hover:text-emerald-200",to:"/register",children:"Criar cadastro"})]}),a.jsx("p",{className:"text-center text-[11px] text-slate-400 dark:text-slate-500",children:"Ao continuar voce concorda com os termos de uso e politica de privacidade da plataforma."})]})]})}),L&&a.jsx("div",{className:"fixed inset-0 z-20 flex items-center justify-center bg-slate-950/60 backdrop-blur-sm px-4",children:a.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/90 p-6 text-slate-100 shadow-[0_20px_70px_-40px_rgba(0,0,0,1)]",children:[a.jsx("button",{type:"button",className:"absolute right-3 top-3 text-slate-400 hover:text-white","aria-label":"Fechar",onClick:()=>j(!1),children:a.jsx(Ql,{})}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Recuperar senha"}),a.jsx("p",{className:"text-sm text-slate-300 mb-4",children:"Informe o e-mail cadastrado para receber uma nova senha temporria."}),a.jsxs("form",{onSubmit:Y,className:"space-y-3",children:[a.jsx("input",{className:"w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm outline-none focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/40",placeholder:"seuemail@empresa.com",type:"email",value:g,onChange:le=>b(le.target.value)}),a.jsx("button",{type:"submit",disabled:V,className:"w-full rounded-2xl bg-teal-500/90 px-4 py-2.5 font-semibold text-white shadow-lg shadow-teal-500/30 transition hover:bg-teal-400 disabled:cursor-not-allowed disabled:opacity-60",children:V?"Enviando...":"Enviar nova senha"}),E&&a.jsx("div",{className:"rounded-xl border border-emerald-300/40 bg-emerald-500/10 px-3 py-2 text-emerald-100 text-sm",children:E}),U&&a.jsx("div",{className:"rounded-xl border border-rose-300/40 bg-rose-500/10 px-3 py-2 text-rose-100 text-sm",children:U})]})]})})]})}function Fw(){const e=ln(),t="",[n,r]=u.useState(t),[s,o]=u.useState(""),[l,c]=u.useState(""),[d,m]=u.useState(""),[x,w]=u.useState(""),[k,D]=u.useState(!0),[_,A]=u.useState(!1),[L,j]=u.useState(!1),[g,b]=u.useState(!1),[E,R]=u.useState(null),[U,$]=u.useState(""),[V,B]=u.useState("");u.useEffect(()=>()=>{U&&URL.revokeObjectURL(U)},[U]),u.useEffect(()=>{(async()=>{try{const F=typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api",Y=await fetch(`${String(F).replace(/\/$/,"")}/admin/config/public?_=${Date.now()}`,{cache:"no-store"});if(!Y.ok)return;const le=await Y.json();Object.prototype.hasOwnProperty.call(le||{},"loginLogoUrl")&&r((le==null?void 0:le.loginLogoUrl)||"")}catch{r(t)}})()},[]);async function C(Z){if(Z.preventDefault(),!k){B("Confirme que leu e aceita os termos de uso.");return}if(B(""),d!==x){B("As senhas no conferem.");return}b(!0);try{const F=new FormData;F.append("name",s.trim()),F.append("email",l.trim()),F.append("password",d),E&&F.append("avatar",E),await Ay.upload("/auth/register",F),e("/login?registered=1")}catch(F){B(F.message||"Falha no cadastro. Tente novamente.")}finally{b(!1)}}function ne(Z){var Y;const F=((Y=Z.target.files)==null?void 0:Y[0])||null;R(F),U&&URL.revokeObjectURL(U),$(F?URL.createObjectURL(F):"")}return a.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-100",children:[a.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[a.jsx("div",{className:"absolute -top-28 -left-36 h-80 w-80 rounded-full bg-cyan-400/25 blur-3xl"}),a.jsx("div",{className:"absolute bottom-[-7rem] right-[-6rem] h-96 w-96 rounded-full bg-emerald-500/25 blur-3xl"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(14,165,233,0.18),transparent_60%)]"}),a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(135deg,rgba(15,23,42,0.65),rgba(15,23,42,0.92))]"})]}),a.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-6 py-12",children:a.jsxs("div",{className:"grid w-full max-w-5xl gap-10 rounded-[2.5rem] border border-white/5 bg-white/5 p-8 shadow-[0_22px_80px_-28px_rgba(14,116,144,0.8)] backdrop-blur-lg lg:grid-cols-[1.05fr_1fr] lg:p-12",children:[a.jsxs("div",{className:"hidden flex-col justify-between lg:flex",children:[a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("span",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-1 text-sm text-slate-200",children:[a.jsx("span",{className:"h-2 w-2 animate-pulse rounded-full bg-emerald-400"}),"Crie sua conta em minutos"]}),a.jsx("h1",{className:"text-4xl font-semibold leading-tight text-white",children:"Personalize seu atendimento com o poder do sistema omnichannel"}),a.jsx("p",{className:"text-lg text-slate-300",children:"Gestao de equipes, dashboards inteligentes e integracoes prontas para canais que o seu cliente ama usar."})]}),a.jsxs("ul",{className:"mt-10 space-y-4 text-sm text-slate-200/80",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-200",children:"?"}),"Fluxos automaticos e organizacao de filas de atendimento."]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-cyan-500/20 text-cyan-200",children:"?"}),"Biblioteca de templates, etiquetas e respostas salvas."]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500/20 text-blue-200",children:"?"}),"Times ilimitados, usuarios convidados e permissoes customizadas."]})]})]}),a.jsxs("form",{onSubmit:C,className:"relative flex flex-col gap-5 rounded-3xl border border-white/10 bg-white/90 p-8 text-slate-900 shadow-2xl backdrop-blur dark:bg-slate-900/85 dark:text-slate-100",noValidate:!0,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[n?a.jsx("img",{src:n,alt:"Logo",className:"h-10 w-auto",draggable:!1}):a.jsx("div",{className:"h-10 w-10 rounded-lg border border-white/10 bg-white/10"}),a.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-300",children:"Novo portal de atendimento"})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h2",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"Criar conta"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Preencha os dados abaixo para ativar seu espao de trabalho."})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Nome completo"}),a.jsx("input",{id:"name",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Como devemos te chamar?",value:s,onChange:Z=>o(Z.target.value),required:!0})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"E-mail corporativo"}),a.jsx("input",{id:"email",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"voce@empresa.com",type:"email",autoComplete:"email",value:l,onChange:Z=>c(Z.target.value),required:!0})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Senha"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-14 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Crie uma senha",type:_?"text":"password",minLength:8,value:d,onChange:Z=>m(Z.target.value),required:!0}),a.jsx("button",{type:"button",onClick:()=>A(Z=>!Z),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center rounded-lg border border-transparent px-3 text-xs font-medium text-cyan-600 transition hover:border-cyan-200 hover:bg-cyan-50 hover:text-cyan-700 dark:text-cyan-200 dark:hover:border-cyan-400/50 dark:hover:bg-cyan-500/10","aria-label":_?"Ocultar senha":"Mostrar senha",children:_?a.jsx(qc,{className:"w-4 h-4"}):a.jsx(Hc,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"confirm",className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Confirmar senha"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirm",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-14 text-sm text-slate-900 shadow-sm focus:border-transparent focus:outline-none focus:ring-2 focus:ring-cyan-400/80 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Repita a senha",type:L?"text":"password",minLength:8,value:x,onChange:Z=>w(Z.target.value),required:!0}),a.jsx("button",{type:"button",onClick:()=>j(Z=>!Z),className:"absolute inset-y-0 right-3 my-1 inline-flex items-center justify-center rounded-lg border border-transparent px-3 text-xs font-medium text-cyan-600 transition hover:border-cyan-200 hover:bg-cyan-50 hover:text-cyan-700 dark:text-cyan-200 dark:hover:border-cyan-400/50 dark:hover:bg-cyan-500/10","aria-label":L?"Ocultar confirmacao":"Mostrar confirmacao",children:L?a.jsx(qc,{className:"w-4 h-4"}):a.jsx(Hc,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-200",children:"Foto de perfil (opcional)"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:U?a.jsx("img",{src:U,alt:"Pr-visualizao do avatar",className:"h-full w-full object-cover"}):a.jsx("div",{className:"grid h-full w-full place-items-center text-xs text-slate-400 dark:text-slate-500",children:"sem foto"})}),a.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-cyan-200 hover:text-cyan-600 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-cyan-500/60 dark:hover:text-cyan-300",children:[a.jsx("span",{children:"Carregar imagem"}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ne})]})]})]}),a.jsxs("label",{className:"mt-1 inline-flex items-start gap-3 text-xs text-slate-500 dark:text-slate-300",children:[a.jsx("input",{type:"checkbox",checked:k,onChange:Z=>D(Z.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300 text-cyan-500 focus:ring-cyan-400 dark:border-slate-600"}),a.jsx("span",{children:"Li e concordo com os termos de uso, poltica de privacidade e boas prticas do sistema omnichannel."})]}),V&&a.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-300/60 bg-red-50/80 px-3 py-2 text-sm text-red-600 dark:border-red-500/40 dark:bg-red-500/10 dark:text-red-200",children:[a.jsx("span",{className:"text-base",children:"??"}),a.jsx("span",{children:V})]}),a.jsx("button",{type:"submit",disabled:g,className:"inline-flex h-12 items-center justify-center rounded-2xl bg-gradient-to-r from-cyan-500 via-emerald-500 to-blue-500 px-6 text-sm font-semibold text-white shadow-lg shadow-cyan-500/25 transition hover:shadow-2xl hover:shadow-cyan-500/35 disabled:opacity-60 disabled:shadow-none",children:g?"Cadastrando...":"Criar minha conta"}),a.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-300",children:["J possui conta?"," ",a.jsx(Lr,{className:"font-medium text-cyan-600 transition hover:text-cyan-500 dark:text-cyan-300 dark:hover:text-cyan-200",to:"/login",children:"Entrar"})]}),a.jsx("p",{className:"text-center text-[11px] text-slate-400 dark:text-slate-500",children:"Suporte 24/7 e implementao assistida inclusos para novos clientes."})]})]})})]})}const Ow="BLX4iWgrhNgMUBR7yYLSu_LLHgE0ZbrFlrY9UBd3hGAfXc6SrOTcsVf2tdI1hJEzcXG3cg8NFIkNmvDXIK8sKm0",_h={attached:!1};function Uw(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let o=0;o<r.length;o+=1)s[o]=r.charCodeAt(o);return s}async function Mw(){try{const{key:e}=await q.get("/push/vapid-public-key");if(e)return e}catch{}return Ow}async function y0(e){if(!e)return null;try{await q.post("/push/subscribe",{subscription:e})}catch(t){console.error("Falha ao registrar subscription no servidor",t)}return e}function $w(){if(!(_h.attached||typeof navigator>"u"||!navigator.serviceWorker))try{navigator.serviceWorker.addEventListener("message",async e=>{var t;if(((t=e==null?void 0:e.data)==null?void 0:t.type)==="push:subscription")try{await y0(e.data.subscription)}catch{}}),_h.attached=!0}catch{}}async function Bw(){if(typeof window>"u"||!("serviceWorker"in navigator)||!("PushManager"in window))return null;$w();const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();if(!t){const n=await Mw(),r=Uw(n);t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r})}return await y0(t),t}const Rl={recent:[],caras:["","","","","","","","","","","","","","","","","","","","","","","",""],gestos:["","","","","","","","","","","","","","","",""],amor:["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],animais:["","","","","","","","","","","","","","","",""],comida:["","","","","","","","","","","","","","","","","","","","","","","","","","",""],objetos:["","","","","","","","","","","","","","",""],transportes:["","","","","","","","","",""],clima:["","","","","","","","","","","","","","","","","","","",""],natureza:["","","","","","","","","","","","","","","","","","","","",""]},zw=[{key:"recent",label:"Recentes",icon:""},{key:"favoritos",label:"Favoritos",icon:""},{key:"caras",label:"Caras",icon:""},{key:"gestos",label:"Gestos",icon:""},{key:"amor",label:"Amor",icon:""},{key:"natureza",label:"Natureza",icon:""},{key:"clima",label:"Clima",icon:""},{key:"animais",label:"Animais",icon:""},{key:"comida",label:"Comida",icon:""},{key:"objetos",label:"Objetos",icon:""},{key:"transportes",label:"Transp.",icon:""}];function _r(e){return Array.isArray(e)?e:[]}function Vw(e){if(!Number.isFinite(e)||e<=0)return"";const t=Math.floor(e),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function Ww(e){return e?e.split(/(\*[^*\n]+\*)/g).map((n,r)=>n.startsWith("*")&&n.endsWith("*")&&n.length>2?a.jsx("strong",{children:n.slice(1,-1)},r):a.jsx(wi.Fragment,{children:n},r)):null}const Rh=50;function w0(){var sf;const[e,t]=u.useState([]),[n,r]=u.useState([]),[s,o]=u.useState([]),[l,c]=u.useState(null),[d,m]=u.useState([]),[x,w]=u.useState(""),[k,D]=u.useState([]),[_,A]=u.useState(!1),[L,j]=u.useState(""),[g,b]=u.useState(null),[E,R]=u.useState(!1),[U,$]=u.useState(""),[V,B]=u.useState(0),[C,ne]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_pins")||"{}")}catch{return{}}}),[Z,F]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_mutes")||"{}")}catch{return{}}}),[Y,le]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("chat_manual_unread")||"{}")}catch{return{}}}),ie=u.useCallback(i=>{try{localStorage.setItem("chat_manual_unread",JSON.stringify(i))}catch{}},[]),Ce=u.useCallback((i,h)=>{i&&le(p=>{const y={...p||{}};return h?y[i]=h:delete y[i],ie(y),y})},[ie]),z=u.useCallback(i=>{i&&Ce(i,null)},[Ce]),W=u.useCallback(i=>!!(i&&(Y!=null&&Y[i])),[Y]),X=u.useCallback((i=0,h)=>i&&i>0?i:W(h)?1:0,[W]),O=u.useCallback(i=>{if(!i)return null;const h=(e||[]).find(p=>p.id===i);return h||(n||[]).find(p=>p.groupId===i)||null},[e,n]),ae=u.useCallback(i=>{var S,N,P,I;if(!i)return;const h=O(i),p=((S=h==null?void 0:h.lastMessage)==null?void 0:S.id)||((N=h==null?void 0:h.message)==null?void 0:N.id)||(h==null?void 0:h.id)||null,y=((P=h==null?void 0:h.lastMessage)==null?void 0:P.createdAt)||((I=h==null?void 0:h.message)==null?void 0:I.createdAt)||new Date().toISOString();Ce(i,{messageId:p,createdAt:y})},[O,Ce]),ve=u.useCallback(i=>{i&&z(i)},[z]);function pe(i){ne(h=>{const p={...h||{}};p[i]=!p[i];try{localStorage.setItem("chat_pins",JSON.stringify(p))}catch{}return p})}function De(i){F(h=>{const p={...h||{}};p[i]=!p[i];try{localStorage.setItem("chat_mutes",JSON.stringify(p))}catch{}return p})}const[ue,ye]=u.useState(null),ot=l!=null&&l.id?Y==null?void 0:Y[l.id]:null,kt=u.useRef(null),Hr=u.useCallback(i=>{kt.current=i},[]),[Ro,Xs]=u.useState(null),un=u.useCallback((i,h=2e3)=>{if(i){if(Xs(i),fn.current)try{clearTimeout(fn.current)}catch{}fn.current=setTimeout(()=>{Xs(p=>p===i?null:p),fn.current=null},h)}},[]),ea=u.useCallback(i=>{if(!i||typeof document>"u")return!1;const h=document.getElementById(`msg-${i}`);if(!h)return!1;try{h.scrollIntoView({behavior:"smooth",block:"center"})}catch{}return un(i),!0},[un]),[fr,_n]=u.useState(""),[Ao,Rn]=u.useState(""),[Qt,Lo]=u.useState(""),[K,Gt]=u.useState(!1),Po=u.useRef(null),[ta,Io]=u.useState({left:4,bottom:120,width:360,maxHeight:416}),$i=u.useRef(null);function Bi(){try{const i=Po.current,h=$i.current,p=typeof window<"u"?window.innerWidth:800,y=typeof window<"u"?window.innerHeight:600,S=4,N=4,P=Math.min(26*16,y-S*2),I=oe=>oe&&oe.getBoundingClientRect?oe.getBoundingClientRect():null,Q=I(h),H=I(i);if(Q||H){const oe=Q?Math.min(420,Math.max(320,Q.width||420)):Math.min(420,Math.max(320,p*.95)),Ne=Math.min(oe,p-S*2),_e=Q?Q.left:H?H.left:S,Ue=S,We=Q?Q.top:H?H.top:y/2,Tt=Math.max(S,y-We+N);Io({left:Ue,bottom:Tt,width:Ne,maxHeight:P})}else Io({left:S,bottom:120,width:Math.min(420,Math.max(320,p*.95)),maxHeight:P})}catch{}Gt(!0)}const[se,Qe]=u.useState({open:!1,type:null,id:null,groupId:null,x:0,y:0}),ht=u.useRef(null),[Nt,hr]=u.useState(null),[qr,Qr]=u.useState(!1),[na,ra]=u.useState(!1),[sa,pr]=u.useState(""),[Gr,Kr]=u.useState(""),Zr=u.useCallback(async i=>{if(!(!Nt||!i)){pr(""),ra(!0);try{const h={type:Nt.type||"text",content:Nt.content||""};await q.post(`/messages/${i}`,h),Qr(!1),hr(null)}catch(h){pr((h==null?void 0:h.message)||"Falha ao encaminhar mensagem")}finally{ra(!1)}}},[Nt]);wi.useMemo(()=>{try{const i=Object.keys(Rl).filter(y=>y!=="recent"&&y!=="bandeiras"),h=[];i.forEach(y=>{(Rl[y]||[]).forEach(S=>h.push(S))});const p=new Set;return h.filter(y=>p.has(y)?!1:(p.add(y),!0))}catch{return[]}},[]);const[mr,Jr]=u.useState("caras"),[Yr,aa]=u.useState(()=>{try{const i=localStorage.getItem("chat_recent_emojis"),h=i?JSON.parse(i):[];return Array.isArray(h)?h.slice(0,24):[]}catch{return[]}}),[oa,la]=u.useState(""),[gr,To]=u.useState(()=>{try{const i=localStorage.getItem("chat_fav_emojis"),h=i?JSON.parse(i):[];return Array.isArray(h)?h.slice(0,48):[]}catch{return[]}});function Fo(i){try{To(h=>{const y=(h||[]).includes(i)?(h||[]).filter(S=>S!==i):[i,...(h||[]).filter(S=>S!==i)].slice(0,48);try{localStorage.setItem("chat_fav_emojis",JSON.stringify(y))}catch{}return y})}catch{}}const An=u.useRef(null),xr=u.useRef({}),Oo=i=>h=>{h&&(xr.current[i]=h)},ia=u.useMemo(()=>{const i=[];(e||[]).forEach(p=>{p!=null&&p.id&&p.id!==(l==null?void 0:l.id)&&i.push({id:p.id,name:p.name||"Grupo",isDM:!1})}),(n||[]).forEach(p=>{var y;p!=null&&p.groupId&&p.groupId!==(l==null?void 0:l.id)&&i.push({id:p.groupId,name:((y=p.other)==null?void 0:y.name)||"Direto",isDM:!0})});const h=new Set;return i.filter(p=>h.has(p.id)?!1:(h.add(p.id),!0))},[e,n,l==null?void 0:l.id]),Oe=u.useMemo(()=>{const i=(Gr||"").trim().toLowerCase();return i?ia.filter(h=>(h.name||"").toLowerCase().includes(i)):ia},[ia,Gr]);u.useEffect(()=>()=>{if(fn.current){try{clearTimeout(fn.current)}catch{}fn.current=null}},[]);const Ln=["recent","favoritos","caras","gestos","amor","natureza","clima","animais","comida","objetos","transportes"];u.useEffect(()=>{if(!K)return;const i=An.current;if(!i)return;let h=!1;const p=()=>{h||(h=!0,requestAnimationFrame(()=>{try{let y=mr;for(const S of Ln){const N=xr.current[S];if(!N)continue;N.offsetTop-i.scrollTop<=32&&(y=S)}y&&y!==mr&&Jr(y)}finally{h=!1}}))};return i.addEventListener("scroll",p,{passive:!0}),()=>i.removeEventListener("scroll",p)},[K,oa,mr]);const vr=u.useRef(null),cn=u.useRef(null),yr=u.useRef(null),Xr=u.useRef(!1),[ua,es]=u.useState(null),[ts,ns]=u.useState(!1),[Pn,rs]=u.useState(!1),ca=u.useCallback(()=>{const i=yr.current;if(i)try{i.scrollTop=i.scrollHeight}catch{}},[]),ss=u.useRef(null),Uo=u.useRef(null),pt=u.useRef(null),ee=Ms(),Mo=ln(),[dn,as]=u.useState(null),[lt,os]=u.useState(""),St=u.useRef(null),ls=u.useRef(null),fn=u.useRef(null),[$o,is]=u.useState(""),[us,Kt]=u.useState(!1),da=u.useRef([]),[cs,Et]=u.useState(!1),Bo=u.useRef(null);u.useEffect(()=>{da.current=k},[k]),u.useEffect(()=>()=>{da.current.forEach(i=>{if(i!=null&&i.preview)try{URL.revokeObjectURL(i.preview)}catch{}})},[]);function zi(i){var h;return{id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,file:i,preview:(h=i==null?void 0:i.type)!=null&&h.startsWith("image/")?URL.createObjectURL(i):null}}function fa(i=[]){if(!i.length)return;const h=i.map(p=>zi(p));D(p=>[...p,...h])}function ds(i){i.preventDefault(),i.stopPropagation(),_||A(!0)}function zo(i){i.preventDefault(),i.stopPropagation(),A(!1)}function Vo(i){i.preventDefault(),i.stopPropagation(),A(!1);const h=[],p=i.dataTransfer;if(p!=null&&p.items&&p.items.length)for(let y=0;y<p.items.length;y++){const S=p.items[y];if(S.kind==="file"){const N=S.getAsFile();N&&h.push(N)}}else if(p!=null&&p.files&&p.files.length)for(let y=0;y<p.files.length;y++)h.push(p.files[y]);h.length&&fa(h)}function Vi(i){D(h=>{const p=h.find(y=>y.id===i);if(p!=null&&p.preview)try{URL.revokeObjectURL(p.preview)}catch{}return h.filter(y=>y.id!==i)})}function Wo(){da.current.forEach(i=>{if(i!=null&&i.preview)try{URL.revokeObjectURL(i.preview)}catch{}}),D([]);try{cn.current&&(cn.current.value="")}catch{}}async function Wi(i,h="arquivo"){try{const p=typeof Me=="function"?Me():null,y=p?{Authorization:`Bearer ${p}`}:{},S=await fetch(i,{mode:"cors",credentials:"same-origin",headers:y});if(!S.ok)throw new Error("Falha ao baixar arquivo");const N=await S.blob(),P=URL.createObjectURL(N),I=document.createElement("a");I.href=P,I.download=h,document.body.appendChild(I),I.click(),I.remove(),setTimeout(()=>URL.revokeObjectURL(P),1500)}catch(p){j((p==null?void 0:p.message)||"No foi possvel baixar o arquivo");try{const y=document.createElement("a");y.href=i,y.rel="noopener noreferrer",y.target="_blank",y.download=h,document.body.appendChild(y),y.click(),y.remove()}catch{}}}u.useEffect(()=>{if(!ue)return;const i=h=>{const p=kt.current;if(!p){ye(null);return}p.contains(h.target)||ye(null)};return document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}},[ue]),u.useEffect(()=>{if(!(se!=null&&se.open))return;const i=p=>{const y=ht.current;if(!y){Qe(S=>({...S,open:!1}));return}y.contains(p.target)||Qe(S=>({...S,open:!1}))},h=p=>{p.key==="Escape"&&Qe(y=>({...y,open:!1}))};return document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i),document.removeEventListener("keydown",h)}},[se==null?void 0:se.open]),u.useEffect(()=>{if(!cs)return;const i=p=>{const y=Bo.current;if(!y){Et(!1);return}y.contains(p.target)||Et(!1)},h=p=>{p.key==="Escape"&&Et(!1)};return document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i),document.removeEventListener("keydown",h)}},[cs]);const wr=typeof window<"u"&&"Notification"in window,Hi=(()=>{if(!wr)return"default";try{return Notification.permission}catch{return"default"}})(),[fs,hs]=u.useState(Hi==="granted"),Ho=u.useRef(typeof document<"u"?document.title:"Chat"),In=u.useRef(null),hn=u.useRef({url:"",buffer:null}),[qi,ps]=u.useState(()=>{try{return!document.hidden&&document.hasFocus()}catch{return!0}}),Qi=!0,[qo,Qo]=u.useState("");u.useEffect(()=>{const i=()=>{try{ps(!document.hidden&&document.hasFocus())}catch{ps(!0)}};return i(),window.addEventListener("focus",i),window.addEventListener("blur",i),document.addEventListener("visibilitychange",i),()=>{window.removeEventListener("focus",i),window.removeEventListener("blur",i),document.removeEventListener("visibilitychange",i)}},[]),u.useEffect(()=>{if(!wr||!fs)return;let i=!1;return(async()=>{try{await Bw(),i||Qo("")}catch(h){i||Qo((h==null?void 0:h.message)||"Falha ao registrar push")}})(),()=>{i=!0}},[wr,fs]),u.useEffect(()=>{const i=()=>{try{const h=localStorage.getItem("notif_sound_url")||"";h?hn.current.url!==h&&(hn.current={url:h,buffer:null}):hn.current={url:"",buffer:null}}catch{}};return i(),window.addEventListener("chat:alertSoundUpdated",i),()=>window.removeEventListener("chat:alertSoundUpdated",i)},[]),u.useEffect(()=>{if(!wr)return;let i=!1;const h=()=>{try{const p=Notification.permission;i||hs(p==="granted")}catch{}};h();try{Notification.permission==="default"&&Notification.requestPermission().then(p=>{i||hs(p==="granted")})}catch{}return window.addEventListener("focus",h),document.addEventListener("visibilitychange",h),()=>{i=!0,window.removeEventListener("focus",h),document.removeEventListener("visibilitychange",h)}},[wr]);function ha(i){return i?i.type==="text"?i.content||"":i.type==="image"||i.type==="gif"?"Imagem":i.type==="audio"?"udio":"Anexo":""}function we(i){if(typeof i=="number")return Number.isFinite(i)?i:0;if(typeof i=="string"&&i){const h=Date.parse(i);return Number.isNaN(h)?0:h}return 0}function Gi(i,h){var H,re;if(!i)return i;const p=i.lastMessage||i.latestMessage||i.message||i.lastMessagePreview||null,y=we(i._lastAt)||we(i.lastAt)||we(i.lastMessageAt)||we(p==null?void 0:p.createdAt)||we(p==null?void 0:p.timestamp)||we(i.updatedAt)||we(i.createdAt)||h||0;let S=i._lastPreview!==void 0&&i._lastPreview!==null?i._lastPreview:i.lastPreview!==void 0&&i.lastPreview!==null?i.lastPreview:i.preview!==void 0&&i.preview!==null?i.preview:"";if(!S&&p){const oe=p.type||p.messageType||"text";oe==="text"?S=p.content||"":oe==="image"||oe==="gif"?S="Imagem":oe==="audio"?S="udio":S="Anexo";const Ne=((H=p.author)==null?void 0:H.id)||p.authorId||p.userId||null;S&&Ne&&Ne===(ee==null?void 0:ee.id)&&(S=`Voc: ${S}`)}const N=we(i._lastReceivedAt)||we(i.lastIncomingAt)||we(i.lastReceivedAt)||we(i.lastSeenAt)||0,P=((re=p==null?void 0:p.author)==null?void 0:re.id)||(p==null?void 0:p.authorId)||(p==null?void 0:p.userId)||null,Q=(P&&(ee!=null&&ee.id)?P!==ee.id:!!(p!=null&&p.from))?y:N;return{...i,_lastAt:y,_lastPreview:S,_lastReceivedAt:Q}}function pa(i){const h=Date.now();return(i||[]).map((p,y)=>Gi(p,h-y)).sort((p,y)=>{const S=C!=null&&C[p==null?void 0:p.id]?1:0,N=C!=null&&C[y==null?void 0:y.id]?1:0;if(S!==N)return N-S;const P=Zt(p),I=Zt(y);if(P!==I)return I-P;const Q=we(p==null?void 0:p._lastAt),H=we(y==null?void 0:y._lastAt);return Q!==H?H-Q:we(y==null?void 0:y.updatedAt)-we(p==null?void 0:p.updatedAt)})}const Zt=u.useCallback(i=>{if(!i)return 0;const h=we(i._lastReceivedAt);return h>0?h:we(i._lastAt)},[]);function br(i,{mine:h=!1}={}){if(!i||!i.groupId)return;const p=(()=>{try{return new Date(i.createdAt||Date.now()).getTime()}catch{return Date.now()}})();let y=ha(i);h&&y&&(y=`Voc: ${y}`);const S=(l==null?void 0:l.id)===i.groupId;t(N=>(N||[]).map(P=>{if(!P||P.id!==i.groupId)return P;const I=we(P._lastReceivedAt),Q={...P,_lastAt:p,_lastPreview:y,_lastReceivedAt:h?I:p};return S?Q._unread=0:h||(Q._unread=(P._unread||0)+1),Q})),r(N=>(N||[]).map(P=>{if(!P||P.groupId!==i.groupId)return P;const I=we(P._lastReceivedAt),Q={...P,_lastAt:p,_lastPreview:y,_lastReceivedAt:h?I:p};return S?Q._unread=0:h||(Q._unread=(P._unread||0)+1),Q}))}function ms(i){try{if(!i)return"";try{const S=new URL(i,typeof window<"u"?window.location.origin:"http://localhost").searchParams.get("name");if(S)return S}catch{}const p=String(i).split("?")[0].split("/").pop()||"";return decodeURIComponent(p)}catch{return String(i||"")}}function Ki(i){var h,p;try{if(!fs)return;const y=((h=i==null?void 0:i.author)==null?void 0:h.name)||"Mensagem",S=ha(i),N=(p=i==null?void 0:i.author)!=null&&p.avatarUrl?Ut(i.author.avatarUrl):void 0,P=new Notification(y,{body:S,icon:N});P.onclick=()=>{var I,Q,H,re;try{(I=window==null?void 0:window.focus)==null||I.call(window)}catch{}try{c({id:i.groupId,name:((Q=i.group)==null?void 0:Q.name)||"Direto",avatarUrl:((H=i.group)==null?void 0:H.avatarUrl)||((re=i.author)==null?void 0:re.avatarUrl)||void 0}),Yt()}catch{}try{P.close()}catch{}},setTimeout(()=>{try{P.close()}catch{}},8e3)}catch{}}async function Go(){try{const i=window.AudioContext||window.webkitAudioContext;if(!i)return;In.current||(In.current=new i);const h=In.current;try{const S=localStorage.getItem("notif_sound_url")||"";if(S){if(hn.current.url!==S||!hn.current.buffer){const Q=await(await fetch(S)).arrayBuffer(),H=await h.decodeAudioData(Q.slice(0));hn.current={url:S,buffer:H}}const N=h.createBufferSource();N.buffer=hn.current.buffer;const P=h.createGain();P.gain.setValueAtTime(1e-4,h.currentTime),P.gain.exponentialRampToValueAtTime(.6,h.currentTime+.01),P.gain.exponentialRampToValueAtTime(1e-4,h.currentTime+Math.min(1.2,N.buffer.duration)),N.connect(P).connect(h.destination),N.start();return}}catch{}const p=h.createOscillator(),y=h.createGain();p.type="sine",p.frequency.value=880,y.gain.setValueAtTime(1e-4,h.currentTime),y.gain.exponentialRampToValueAtTime(.4,h.currentTime+.01),y.gain.exponentialRampToValueAtTime(1e-4,h.currentTime+.45),p.connect(y).connect(h.destination),p.start(),p.stop(h.currentTime+.5)}catch{}}u.useEffect(()=>{function i(){var h,p;try{(p=(h=In.current)==null?void 0:h.resume)==null||p.call(h)}catch{}try{window.removeEventListener("click",i),window.removeEventListener("keydown",i),window.removeEventListener("touchstart",i)}catch{}}return window.addEventListener("click",i),window.addEventListener("keydown",i),window.addEventListener("touchstart",i),()=>{try{window.removeEventListener("click",i),window.removeEventListener("keydown",i),window.removeEventListener("touchstart",i)}catch{}}},[]),u.useEffect(()=>{try{const i=(e||[]).reduce((h,p)=>h+X(p._unread||0,p.id),0)+(n||[]).reduce((h,p)=>h+X(p._unread||0,p.groupId),0);i>0?document.title=`(${i}) ${Ho.current}`:document.title=Ho.current}catch{}},[e,n,X]);const[Jt,ma]=u.useState(""),[pn,ga]=u.useState([]),[xa,jr]=u.useState(-1),[va,gs]=u.useState(!1),[Ko,kr]=u.useState(!1),[Tn,Fn]=u.useState("self"),[Ct,Zo]=u.useState(null),[me,Nr]=u.useState(null),[mn,Jo]=u.useState([]),[Zi,ya]=u.useState(!1),[Yo,Xo]=u.useState(""),[wa,el]=u.useState([]),[tl,nl]=u.useState(!1),[Sr,rl]=u.useState(""),[On,Un]=u.useState("perfil"),[ba,ja]=u.useState(""),[Er,ka]=u.useState(""),[Mn,Na]=u.useState(""),[xs,f]=u.useState(""),[v,T]=u.useState(null),[G,te]=u.useState(""),[xe,Ie]=u.useState(""),[Sa,Cr]=u.useState(""),[Zd,gn]=u.useState(""),[Jd,Ji]=u.useState([]),[Yi,Xi]=u.useState({});function sl(i){var h;return!!((h=Yi==null?void 0:Yi[(l==null?void 0:l.id)||""])!=null&&h[i])}const Yd=u.useRef(null),[Dr,b0]=u.useState(()=>{try{return typeof window>"u"?!0:window.innerWidth>=1024}catch{return!0}}),[al,Ea]=u.useState(()=>{try{return typeof window>"u"?!0:window.innerWidth>=1024}catch{return!0}}),Yt=u.useCallback(()=>{try{typeof window<"u"&&window.innerWidth<1024&&Ea(!1)}catch{}},[Ea]);u.useEffect(()=>{if(typeof window>"u")return;const i=()=>{try{const h=window.innerWidth>=1024;b0(h),h&&Ea(!0)}catch{}};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const[Ca,j0]=u.useState(()=>{try{return localStorage.getItem("chat_groups_collapsed")==="1"}catch{}return!1}),[Da,k0]=u.useState(()=>{try{return localStorage.getItem("chat_people_collapsed")==="1"}catch{}return!1});u.useEffect(()=>{try{localStorage.setItem("chat_groups_collapsed",Ca?"1":"0")}catch{}},[Ca]),u.useEffect(()=>{try{localStorage.setItem("chat_people_collapsed",Da?"1":"0")}catch{}},[Da]);async function eu(i){if(!(!(l!=null&&l.id)||!(i!=null&&i.id)))try{sl(i.id)?(await q.del(`/messages/${i.id}/favorite`),Xi(h=>{const p={...h||{}},y={...p[l.id]||{}};return delete y[i.id],p[l.id]=y,p}),Ji(h=>h.filter(p=>p.id!==i.id))):(await q.post(`/messages/${i.id}/favorite`,{}),Xi(h=>({...h,[l.id]:{...(h||{})[l.id]||{},[i.id]:!0}})),Ji(h=>h!=null&&h.some(p=>p.id===i.id)?h:[i,...h||[]]))}catch{}}const tu=u.useMemo(()=>{const i={};return(n||[]).forEach(h=>{var p;h!=null&&h.groupId&&((p=h==null?void 0:h.other)!=null&&p.id)&&(i[h.groupId]=h.other.id)}),i},[n]);u.useEffect(()=>{(async()=>{var i;if(l!=null&&l.id)try{const h=_r(await q.get(`/messages/favorites?groupId=${l.id}`)),p={},y=[];for(const S of h)(i=S==null?void 0:S.message)!=null&&i.id&&(p[S.message.id]=!0,y.push(S.message));Xi(S=>({...S,[l.id]:p})),Ji(y)}catch{}})()},[l==null?void 0:l.id,Z,tu]);const N0=u.useRef(null),[S0,Xd]=u.useState({});u.useEffect(()=>{const i=wn(),h=ee==null?void 0:ee.id,p=(()=>{try{return localStorage.getItem("chat_status")||"online"}catch{return"online"}})();try{i.emit("presence:online",{userId:h,status:p})}catch{}const y=(N={})=>{try{const P={};for(const I of N.users||[])I!=null&&I.userId&&(P[I.userId]=I.status||"online");Xd(P)}catch{}},S=(N={})=>{N!=null&&N.userId&&Xd(P=>({...P,[N.userId]:N.status||"online"}))};i.on("presence:snapshot",y),i.on("presence:update",S);try{i.emit("presence:who")}catch{}return()=>{try{i.off("presence:snapshot",y),i.off("presence:update",S)}catch{}}},[ee==null?void 0:ee.id]);const _a=u.useMemo(()=>{var p;const i=l==null?void 0:l.id;if(!i)return null;const h=n.find(y=>y.groupId===i);return((p=h==null?void 0:h.other)==null?void 0:p.id)||null},[n,l==null?void 0:l.id]),ol=u.useMemo(()=>{var h;if(_a)return _a;const i=(d||[]).find(p=>{var y,S;return(((y=p.author)==null?void 0:y.id)||p.authorId)&&(((S=p.author)==null?void 0:S.id)||p.authorId)!==(ee==null?void 0:ee.id)});return i?((h=i.author)==null?void 0:h.id)||i.authorId:null},[_a,d,ee==null?void 0:ee.id]);u.useEffect(()=>{(async()=>{var i,h,p,y;try{const S=_r(await q.get("/groups")),N=pa(S);t(N);const P=_r(await q.get("/dm")),I=pa(P);r(I);const Q=_r(await q.get("/users/all"));o(Q);const H=localStorage.getItem("chat_active");if(H){const re=N.find(Ne=>Ne.id===H);if(re){c(re),Yt();return}const oe=I.find(Ne=>Ne.groupId===H);if(oe){c({id:oe.groupId,name:((i=oe.other)==null?void 0:i.name)||"Direto",avatarUrl:((h=oe.other)==null?void 0:h.avatarUrl)||void 0}),Yt();return}}N[0]?(c(N[0]),Yt()):I[0]&&(c({id:I[0].groupId,name:((p=I[0].other)==null?void 0:p.name)||"Direto",avatarUrl:((y=I[0].other)==null?void 0:y.avatarUrl)||void 0}),Yt())}catch{j("Falha ao carregar listas")}})()},[Yt]),u.useEffect(()=>{const i=Yd.current;if(!i)return;if(!Dr){try{i.style.transform="",i.style.transition="",i.style.display=""}catch{}return}let h=0;const p=()=>{try{if(!al||(i.style.display!=="flex"&&(i.style.display="flex"),i.style.transition==="none"))return;i.style.transition="",i.style.transform=""}catch{}},y=()=>{cancelAnimationFrame(h),h=requestAnimationFrame(p)};y();const S=new MutationObserver(()=>y());return S.observe(i,{attributes:!0,attributeFilter:["style"]}),()=>{S.disconnect(),cancelAnimationFrame(h)}},[Dr,al]),u.useEffect(()=>{function i(h){var p,y;try{(p=h.stopImmediatePropagation)==null||p.call(h),(y=h.stopPropagation)==null||y.call(h)}catch{}}return window.addEventListener("chat:openDrawer",i,!0),window.addEventListener("chat:closeDrawer",i,!0),()=>{window.removeEventListener("chat:openDrawer",i,!0),window.removeEventListener("chat:closeDrawer",i,!0)}},[]),u.useEffect(()=>{const i=wn();try{e.forEach(h=>i.emit("group:join",h.id))}catch{}},[e]),u.useEffect(()=>{const i=wn();try{n.forEach(h=>i.emit("group:join",h.groupId))}catch{}},[n]),u.useEffect(()=>{const i=wn(),h=ee==null?void 0:ee.id;if(!h)return;const p=y=>{try{const{groupId:S,userA:N,userB:P}=y||{};if(!S||!(N!=null&&N.id)||!(P!=null&&P.id)||N.id!==h&&P.id!==h)return;const I=N.id===h?P:N,Q=Date.now();r(H=>(H||[]).some(re=>re.groupId===S)?H:[...H||[],{id:S,groupId:S,other:I,_unread:0,_lastAt:Q}]),i.emit("group:join",S)}catch{}};return i.on("dm:created",p),()=>i.off("dm:created",p)},[ee==null?void 0:ee.id]),u.useEffect(()=>{const i=wn();function h(N,P){return((N==null?void 0:N.name)||"").localeCompare((P==null?void 0:P.name)||"","pt-BR",{sensitivity:"base"})}const p=N=>{!(N!=null&&N.id)||N.id===(ee==null?void 0:ee.id)||o(P=>{if((P||[]).some(Q=>Q.id===N.id))return P;const I=[...P||[],{id:N.id,name:N.name,email:N.email,phone:N.phone,avatarUrl:N.avatarUrl}];return I.sort(h),I})},y=N=>{N!=null&&N.id&&o(P=>{const I=(P||[]).map(Q=>Q.id===N.id?{...Q,name:N.name,email:N.email,phone:N.phone,avatarUrl:N.avatarUrl}:Q);return I.sort(h),I})},S=({id:N})=>{N&&o(P=>(P||[]).filter(I=>I.id!==N))};return i.on("user:created",p),i.on("user:updated",y),i.on("user:deleted",S),()=>{i.off("user:created",p),i.off("user:updated",y),i.off("user:deleted",S)}},[ee==null?void 0:ee.id]),u.useEffect(()=>{(async()=>{var i;try{const h=n.filter(y=>y&&y.groupId&&(y._lastAt===void 0||y._lastAt===null||y._lastPreview===void 0));if(!h.length)return;const p={};for(const y of h)try{const N=_r(await q.get(`/messages/${y.groupId}?take=1`))[0]||null,P=N!=null&&N.createdAt?new Date(N.createdAt).getTime():0,I=(((i=N==null?void 0:N.author)==null?void 0:i.id)||(N==null?void 0:N.authorId))===(ee==null?void 0:ee.id);let Q="";N&&(N.type==="text"?Q=N.content||"":N.type==="image"||N.type==="gif"?Q="Imagem":N.type==="audio"?Q="udio":Q="Anexo",I&&(Q=`Voc: ${Q}`)),p[y.groupId]={last:P,prev:Q,received:I?we(y._lastReceivedAt):P}}catch{}Object.keys(p).length&&r(y=>y.map(S=>p[S.groupId]!==void 0?{...S,_lastAt:p[S.groupId].last,_lastPreview:p[S.groupId].prev,_lastReceivedAt:p[S.groupId].received}:S))}catch{}})()},[n,ee==null?void 0:ee.id]);const ll=u.useCallback(async(i,h=null)=>{var I;if(!i)return{items:[],nextCursor:null,hasMore:!1};const p=new URLSearchParams;p.set("take",Rh.toString()),h&&p.set("cursor",h);const y=_r(await q.get(`/messages/${i}?${p.toString()}`)),S=y.slice().reverse(),N=y.length===Rh,P=N&&((I=y[y.length-1])==null?void 0:I.id)||null;return{items:S,nextCursor:P,hasMore:N}},[]),E0=u.useCallback(async()=>{var y;if(!(l!=null&&l.id)||Pn||!ts)return;const i=ua||(((y=d[0])==null?void 0:y.id)??null);if(!i)return;const h=yr.current,p=h?h.scrollHeight:null;Xr.current=!0,rs(!0);try{const{items:S,nextCursor:N,hasMore:P}=await ll(l.id,i);m(I=>{const Q=new Set((I||[]).map(re=>re.id)),H=S.filter(re=>!Q.has(re.id));return H.length?[...H,...I||[]]:I}),es(N),ns(P),requestAnimationFrame(()=>{const I=yr.current;I&&p!==null&&(I.scrollTop=I.scrollHeight-p),Xr.current=!1})}catch(S){Xr.current=!1,j((S==null?void 0:S.message)||"Falha ao carregar mensagens antigas")}finally{rs(!1)}},[l==null?void 0:l.id,ll,ua,ts,Pn,d]);async function C0(i){var h,p,y,S;j("");try{const N=await q.get(`/dm/with/${i}`);if(N!=null&&N.groupId){r(P=>(P||[]).map(I=>I.groupId===N.groupId?{...I,other:N.other||I.other}:I)),c({id:N.groupId,name:((h=N.other)==null?void 0:h.name)||"Direto",avatarUrl:((p=N.other)==null?void 0:p.avatarUrl)||void 0}),Yt();return}}catch{}try{const N=await q.post(`/dm/${i}`);if(N!=null&&N.groupId){const P=(n||[]).some(I=>I.groupId===N.groupId);r(I=>{const Q=I.find(oe=>oe.groupId===N.groupId),H=Q==null?void 0:Q._lastAt,re=(Q==null?void 0:Q._unread)||0;return Q?I.map(oe=>oe.groupId===N.groupId?{...oe,other:N.other,_unread:re,_lastAt:H}:oe):[...I||[],{id:N.groupId,groupId:N.groupId,other:N.other,_unread:re,_lastAt:H}]}),c({id:N.groupId,name:((y=N.other)==null?void 0:y.name)||"Direto",avatarUrl:((S=N.other)==null?void 0:S.avatarUrl)||void 0}),Yt();return}}catch(N){j(N.message||"Falha ao abrir conversa");return}j("Nao foi possivel iniciar a conversa")}u.useEffect(()=>{if(!l)return;let i=()=>{};return(async()=>{es(null),ns(!1),rs(!1);const{items:h,nextCursor:p,hasMore:y}=await ll(l.id);m(h),es(p),ns(y);try{await q.post(`/messages/${l.id}/read`,{})}catch{}t(H=>H.map(re=>re.id===l.id?{...re,_unread:0}:re)),r(H=>H.map(re=>re.groupId===l.id?{...re,_unread:0}:re));const S=wn();try{S.off("message:new")}catch{}try{S.off("message:deleted")}catch{}S.emit("group:join",l.id);const N=H=>{var Ue;const re=(((Ue=H.author)==null?void 0:Ue.id)||H.authorId)===(ee==null?void 0:ee.id),oe=H.groupId===l.id,Ne=!!(Z!=null&&Z[H.groupId])||(tu[H.groupId]?!!(Z!=null&&Z[tu[H.groupId]]):!1),_e=(()=>{try{return(!qi||document.hidden)&&!re}catch{return!re}})();if(oe&&!re)try{q.post(`/messages/${l.id}/read`,{})}catch{}if(_e)try{Ki(H)}catch{}br(H,{mine:re}),oe&&m(We=>{var Tt;return(We||[]).some(Se=>Se.id===H.id)?We:(Tt=H.replyTo)!=null&&Tt.id?We.map(Se=>{var mt;return Se.id===H.replyTo.id?{...Se,_count:{replies:(((mt=Se._count)==null?void 0:mt.replies)||0)+1}}:Se}).concat(H):[...We,H]});try{!re&&!Ne&&Go()}catch{}},P=H=>{(H==null?void 0:H.groupId)===l.id&&m(re=>re.map(oe=>oe.id===H.id?H:oe))},I=H=>{try{if(!H||H.groupId!==l.id)return;const re=Array.isArray(H.ids)?H.ids:[],oe=H.userId;if(!oe||!re.length)return;m(Ne=>Ne.map(_e=>re.includes(_e.id)?{..._e,reads:(_e.reads||[]).some(Ue=>Ue.userId===oe)?_e.reads||[]:[..._e.reads||[],{userId:oe}]}:_e))}catch{}},Q=H=>{H.groupId===l.id&&m(re=>re.map(oe=>oe.id===H.id?{...oe,deletedAt:H.deletedAt}:oe))};S.on("message:new",N),S.on("message:updated",P),S.on("messages:read",I),S.on("message:deleted",Q),i=()=>{ye(null),S.off("message:new",N),S.off("message:updated",P),S.off("messages:read",I),S.off("message:deleted",Q),S.emit("group:leave",l.id)}})(),()=>i()},[l==null?void 0:l.id,ll]),u.useEffect(()=>{if(l!=null&&l.id)try{localStorage.setItem("chat_active",l.id)}catch{}},[l==null?void 0:l.id]),u.useEffect(()=>{ca()},[d,l==null?void 0:l.id,ca]);const[$n,il]=u.useState(!1);async function nu(i){var p,y,S;if(i&&i.preventDefault&&i.preventDefault(),j(""),!l||$n)return;let h=!1;try{il(!0);const N=!!(x||"").trim(),P=k.length>0,I=(g==null?void 0:g.id)||null;if(N){const Q=x,H=/^(https?:\/\/\S+)/i.test(Q),re=Q.toLowerCase(),oe=H&&/(\.gif($|\?))/i.test(re),Ne=H&&/(\.png|\.jpg|\.jpeg|\.webp|\.bmp|\.svg)($|\?)/i.test(re),_e=oe?"gif":Ne?"image":"text",Ue=await q.post(`/messages/${l.id}`,{type:_e,content:Q,replyToId:I});m(We=>(We||[]).some(Tt=>Tt.id===Ue.id)?We:[...We,Ue]),br(Ue,{mine:!0}),w(""),h=!0}if(P){for(const Q of k){const H=Q==null?void 0:Q.file;if(!H)continue;const re=new FormData;re.append("file",H);let oe="file";(p=H.type)!=null&&p.startsWith("audio")?oe="audio":(y=H.type)!=null&&y.startsWith("image")&&(oe="image");const Ne=I?`&replyToId=${I}`:"",_e=await q.upload(`/messages/${l.id}/upload?type=${oe}${Ne}`,re);m(Ue=>(Ue||[]).some(We=>We.id===_e.id)?Ue:[...Ue,_e]),br(_e,{mine:!0}),h=!0}Wo()}(N||P)&&b(null)}catch(N){j(N.message||"Falha ao enviar mensagem")}finally{if(il(!1),h)try{(S=vr.current)==null||S.focus()}catch{}}}function D0(i){b(i)}async function _0(i){if(confirm("Excluir esta mensagem?"))try{await q.delete(`/messages/${i.id}`),m(h=>h.map(p=>p.id===i.id?{...p,deletedAt:new Date().toISOString()}:p))}catch(h){j(h.message||"Falha ao excluir")}}function R0(i){const h=d.find(p=>{var y;return((y=p.replyTo)==null?void 0:y.id)===i.id});h&&ea(h.id)}u.useEffect(()=>{const i=(Jt||"").trim().toLowerCase();if(!i){ga([]),jr(-1);return}const h=d.filter(p=>p&&!p.deletedAt&&p.type==="text"&&(p.content||"").toLowerCase().includes(i)).map(p=>p.id);if(ga(h),h.length){jr(0);const p=document.getElementById(`msg-${h[0]}`);if(p)try{p.scrollIntoView({behavior:"smooth",block:"center"})}catch{}un(h[0],1500)}else jr(-1)},[Jt,d,l==null?void 0:l.id,un]);function ru(i=!0){if(!pn.length)return;let h=xa;h<0?h=0:h=(h+(i?1:-1)+pn.length)%pn.length,jr(h);const p=pn[h],y=document.getElementById(`msg-${p}`);if(y)try{y.scrollIntoView({behavior:"smooth",block:"center"})}catch{}un(p,1500)}function A0(i){const h=vr.current;if(!h){w(N=>N+i);try{aa(N=>{const P=[i,...(N||[]).filter(I=>I!==i)].slice(0,24);try{localStorage.setItem("chat_recent_emojis",JSON.stringify(P))}catch{}return P})}catch{}Gt(!1);try{la("")}catch{}return}const p=h.selectionStart??x.length,y=h.selectionEnd??x.length,S=x.slice(0,p)+i+x.slice(y);w(S),requestAnimationFrame(()=>{h.focus();const N=p+i.length;try{h.setSelectionRange(N,N)}catch{}});try{aa(N=>{const P=[i,...(N||[]).filter(I=>I!==i)].slice(0,24);try{localStorage.setItem("chat_recent_emojis",JSON.stringify(P))}catch{}return P})}catch{}Gt(!1);try{la("")}catch{}}async function L0(){if($(""),!E)try{dn&&tf();const i=await navigator.mediaDevices.getUserMedia({audio:!0});Uo.current=i;const h=window.MediaRecorder&&MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",p=new MediaRecorder(i,{mimeType:h});ss.current=p;const y=[];p.ondataavailable=S=>{S.data&&S.data.size>0&&y.push(S.data)},p.onstop=()=>{try{if(!y.length){$("Nenhum udio foi capturado");return}const S=new Blob(y,{type:h}),N=new File([S],`rec-${Date.now()}.webm`,{type:h});try{lt&&URL.revokeObjectURL(lt)}catch{}const P=URL.createObjectURL(S);as(N),os(P),$("")}catch(S){$(S.message||"Falha ao processar udio")}finally{ef()}},p.start(),ls.current=Date.now(),R(!0),B(0)}catch{$("Acesso ao microfone negado ou indisponvel"),ef()}}function P0(){var i;try{(i=ss.current)==null||i.stop()}catch{}}function ef(){var i,h;if(R(!1),pt.current){try{clearInterval(pt.current)}catch{}pt.current=null}B(0),ls.current=null;try{(h=(i=Uo.current)==null?void 0:i.getTracks)==null||h.call(i).forEach(p=>p.stop())}catch{}Uo.current=null,ss.current=null}u.useEffect(()=>{if(!E){if(pt.current){try{clearInterval(pt.current)}catch{}pt.current=null}return}const i=ls.current??Date.now();ls.current=i;const h=()=>{const p=Math.max(0,Math.floor((Date.now()-i)/1e3));B(p)};if(h(),pt.current)try{clearInterval(pt.current)}catch{}return pt.current=setInterval(h,1e3),()=>{if(pt.current){try{clearInterval(pt.current)}catch{}pt.current=null}}},[E]),u.useEffect(()=>{const i=St.current;if(i)try{i.pause(),i.currentTime=0}catch{}return Kt(!1),lt||is(""),()=>{try{lt&&URL.revokeObjectURL(lt)}catch{}}},[lt]);const I0=()=>{const i=St.current;if(!i)return;const h=Vw(i.duration);is(h)},T0=()=>{const i=St.current;if(i)try{i.pause(),i.currentTime=0}catch{}Kt(!1)},F0=()=>{Kt(!1)},O0=()=>{if($n)return;const i=St.current;i&&(us?i.pause():i.play().then(()=>Kt(!0)).catch(()=>Kt(!1)))};async function U0(){if(!(!dn||!(l!=null&&l.id)))try{il(!0);const i=new FormData;i.append("file",dn);const h=await q.upload(`/messages/${l.id}/upload?type=audio`,i);m(y=>y.some(S=>S.id===h.id)?y:[...y,h]),br(h,{mine:!0});const p=St.current;if(p)try{p.pause(),p.currentTime=0}catch{}Kt(!1),as(null),$("");try{lt&&URL.revokeObjectURL(lt)}catch{}os(""),is("")}catch(i){$((i==null?void 0:i.message)||"Falha ao Enviar udio")}finally{il(!1)}}function tf(){const i=St.current;if(i)try{i.pause(),i.currentTime=0}catch{}Kt(!1),as(null),$("");try{lt&&URL.revokeObjectURL(lt)}catch{}os(""),is("")}function nf(i=Ct,{force:h=!1}={}){const p=i||{};if((h||!ba)&&ja((p==null?void 0:p.name)||""),(h||!Er)&&ka((p==null?void 0:p.phone)||""),(h||!Mn)&&Na((p==null?void 0:p.address)||""),h||!xs)try{const y=localStorage.getItem("profile_status");f(y!==null?y:(p==null?void 0:p.status)||"")}catch{f((p==null?void 0:p.status)||"")}}async function rf(i=!1){try{kr(!0);const h=await q.get("/users/me");Zo(h||{}),nf(h,{force:i}),gn(""),Cr("")}catch{gn("Falha ao carregar perfil")}finally{kr(!1)}}function M0(){var h;gs(!0);const i=l==null?void 0:l.id;if(i){const p=n.find(y=>y.groupId===i);if((h=p==null?void 0:p.other)!=null&&h.id){const y=(s||[]).find(S=>S.id===p.other.id)||p.other;Fn("contact"),Nr(y||null),(async()=>{try{ya(!0),Xo("");const S=await q.get(`/users/${p.other.id}/shared-groups`);Jo(Array.isArray(S)?S:[])}catch(S){Xo((S==null?void 0:S.message)||"Falha ao carregar grupos em comum"),Jo([])}finally{ya(!1)}})(),Un("perfil"),kr(!1),gn(""),Cr("");return}Fn("group"),Un("perfil"),kr(!1),gn(""),Cr(""),(async()=>{try{nl(!0),rl("");const y=await q.get(`/groups/${i}/participants`);el(Array.isArray(y)?y:[])}catch(y){rl((y==null?void 0:y.message)||"Falha ao carregar participAes"),el([])}finally{nl(!1)}})();return}Fn("self"),rf(!0)}async function $0(){try{gn(""),Cr("");const i=new FormData;i.append("name",ba||""),Er!=null&&i.append("phone",Er),Mn!=null&&i.append("address",Mn),v&&i.append("avatar",v),await q.uploadPatch("/users/me",i);try{localStorage.setItem("profile_status",xs||"")}catch{}Cr("Perfil atualizado"),T(null),rf(!0)}catch(i){gn((i==null?void 0:i.message)||"Falha ao salvar perfil")}}async function B0(){try{if(gn(""),Cr(""),!G||!xe){gn("Preencha senha atual e nova");return}await q.post("/users/me/password",{current:G,password:xe}),Cr("Senha atualizada"),te(""),Ie("")}catch(i){gn((i==null?void 0:i.message)||"Falha ao alterar senha")}}const[Ra,z0]=u.useState(!1),[Aa,V0]=u.useState(!1),W0=u.useMemo(()=>{const i=new Set;return(n||[]).forEach(h=>{h!=null&&h.groupId&&i.add(h.groupId)}),i},[n]),su=u.useMemo(()=>{const i={};return(e||[]).forEach((h,p)=>{h!=null&&h.id&&(i[h.id]=p)}),i},[e]),H0=u.useMemo(()=>{const i=Qt.trim().toLowerCase();let h=i?e.filter(p=>(p.name||"").toLowerCase().includes(i)):e;return h=h.filter(p=>(p==null?void 0:p.id)&&!W0.has(p.id)),Ra&&(h=h.filter(p=>!!(C!=null&&C[p.id]))),Aa&&(h=h.filter(p=>X(p._unread||0,p.id)>0)),[...h].sort((p,y)=>{const S=C!=null&&C[p.id]?1:0,N=C!=null&&C[y.id]?1:0;if(S!==N)return N-S;const P=Zt(p),I=Zt(y);if(P!==I)return I-P;const Q=we(p==null?void 0:p._lastAt),H=we(y==null?void 0:y._lastAt);if(Q!==H)return H-Q;const re=X((p==null?void 0:p._unread)||0,p==null?void 0:p.id),oe=X((y==null?void 0:y._unread)||0,y==null?void 0:y.id);if(re!==oe)return oe-re;const Ne=su[p.id]??Number.MAX_SAFE_INTEGER,_e=su[y.id]??Number.MAX_SAFE_INTEGER;return Ne-_e})},[e,Qt,C,Ra,Aa,su,Zt,X]),La=u.useMemo(()=>{const i={};return(n||[]).forEach(h=>{var y;const p=(y=h==null?void 0:h.other)==null?void 0:y.id;p&&(i[p]=h)}),i},[n]),au=u.useMemo(()=>{const i={};return(s||[]).forEach((h,p)=>{h!=null&&h.id&&(i[h.id]=p)}),i},[s]),ou=u.useMemo(()=>{const i={};return(n||[]).forEach((h,p)=>{var S;const y=(S=h==null?void 0:h.other)==null?void 0:S.id;y&&(i[y]=p)}),i},[n]),vs=u.useMemo(()=>{const i=l==null?void 0:l.id;return i?(n||[]).some(h=>h.groupId===i):!1},[l==null?void 0:l.id,n]),ul=u.useMemo(()=>l!=null&&l.id?vs?_a||ol||null:l.id:null,[l==null?void 0:l.id,vs,_a,ol]),q0=!!(ul&&(C!=null&&C[ul])),Q0=u.useMemo(()=>{var i;if(!l)return"Selecione um grupo";if(vs){const h=(n||[]).find(y=>y.groupId===l.id),p=(i=h==null?void 0:h.other)==null?void 0:i.name;if(p)return p}return(l==null?void 0:l.name)||"Direto"},[l,vs,n]),G0=u.useMemo(()=>{var i;if(l){if(l.avatarUrl)return l.avatarUrl;if(vs){const h=(n||[]).find(p=>p.groupId===l.id);if((i=h==null?void 0:h.other)!=null&&i.avatarUrl)return h.other.avatarUrl}}},[l,vs,n]),K0=u.useMemo(()=>{const i=Qt.trim().toLowerCase();let h=i?s.filter(p=>(p.name||"").toLowerCase().includes(i)):s;return Ra&&(h=h.filter(p=>!!(C!=null&&C[p.id]))),Aa&&(h=h.filter(p=>{const y=La[p.id];return X((y==null?void 0:y._unread)||0,y==null?void 0:y.groupId)>0})),[...h].sort((p,y)=>{const S=C!=null&&C[p.id]?1:0,N=C!=null&&C[y.id]?1:0;if(S!==N)return N-S;const P=La[p.id],I=La[y.id],Q=Zt(P),H=Zt(I);if(Q!==H)return H-Q;const re=we(P==null?void 0:P._lastAt),oe=we(I==null?void 0:I._lastAt);if(re!==oe)return oe-re;const Ne=X((P==null?void 0:P._unread)||0,P==null?void 0:P.groupId),_e=X((I==null?void 0:I._unread)||0,I==null?void 0:I.groupId);if(Ne!==_e)return _e-Ne;const Ue=ou[p.id]??Number.MAX_SAFE_INTEGER,We=ou[y.id]??Number.MAX_SAFE_INTEGER;if(Ue!==We)return Ue-We;const Tt=au[p.id]??Number.MAX_SAFE_INTEGER,Se=au[y.id]??Number.MAX_SAFE_INTEGER;return Tt-Se})},[s,n,Qt,Aa,Ra,C,La,au,ou,Zt,X]);return u.useEffect(()=>{(async()=>{var i;try{const h=(e||[]).filter(y=>y&&y.id&&(y._lastAt===void 0||y._lastAt===null||y._lastPreview===void 0));if(!h.length)return;const p={};for(const y of h)try{const N=_r(await q.get(`/messages/${y.id}?take=1`))[0]||null,P=N!=null&&N.createdAt?new Date(N.createdAt).getTime():0,I=(((i=N==null?void 0:N.author)==null?void 0:i.id)||(N==null?void 0:N.authorId))===(ee==null?void 0:ee.id);let Q="";N&&(N.type==="text"?Q=N.content||"":N.type==="image"||N.type==="gif"?Q="Imagem":N.type==="audio"?Q="udio":Q="Anexo",I&&(Q=`Voc: ${Q}`)),p[y.id]={last:P,prev:Q,received:I?we(y._lastReceivedAt):P}}catch{}Object.keys(p).length&&t(y=>(y||[]).map(S=>p[S.id]!==void 0?{...S,_lastAt:p[S.id].last,_lastPreview:p[S.id].prev,_lastReceivedAt:p[S.id].received}:S))}catch{}})()},[e,ee==null?void 0:ee.id]),a.jsxs("div",{className:"relative flex h-full min-h-full w-full overflow-x-hidden bg-slate-50 dark:bg-slate-950",children:[qo&&a.jsx("div",{className:"absolute left-1/2 top-3 z-50 -translate-x-1/2 rounded bg-amber-100 px-4 py-2 text-sm text-amber-800 shadow",children:qo}),qr&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:a.jsxs("div",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-700 shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Encaminhar mensagem"}),a.jsx("div",{className:"font-medium truncate max-w-[360px]",children:(Nt==null?void 0:Nt.content)||"(vazia)"})]}),a.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:hover:text-white",onClick:()=>{Qr(!1),hr(null),pr(""),Kr("")},children:a.jsx(Ql,{})})]}),a.jsx("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700",children:a.jsx("input",{type:"text",value:Gr,onChange:i=>Kr(i.target.value),placeholder:"Buscar conversa ou usurio",className:"w-full rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),a.jsx("div",{className:"max-h-80 overflow-y-auto divide-y divide-slate-100 dark:divide-slate-800",children:Oe.length?Oe.map(i=>a.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-800",onClick:()=>Zr(i.id),disabled:na,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:i.name}),!i.isDM&&a.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:"Grupo"})]}),na&&a.jsx("span",{className:"text-xs text-slate-500",children:"Enviando..."})]},i.id)):a.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Nenhum destino disponvel."})}),sa&&a.jsx("div",{className:"px-4 py-2 text-sm text-red-600 border-t border-red-100 bg-red-50 dark:border-red-800 dark:bg-red-900/30",children:sa})]})}),!Dr&&al&&a.jsx("button",{type:"button",className:"fixed inset-0 z-30 bg-slate-900/30 backdrop-blur-[1px] lg:hidden","aria-label":"Fechar lista de conversas",onClick:()=>Ea(!1)}),a.jsxs("aside",{id:"chat-left-pane",ref:Yd,className:`w-72 xl:w-80 max-w-full flex-shrink-0 flex h-full flex-col border-r border-slate-200 bg-white dark:bg-slate-900/70 overflow-y-auto transition-transform duration-200 ease-out ${Dr?"":"fixed inset-y-0 left-0 z-40 shadow-xl"} ${al?"translate-x-0":"-translate-x-full"} lg:static lg:shadow-none lg:translate-x-0`,children:[a.jsxs("div",{className:"px-3 py-2 border-b border-slate-200",children:[a.jsx("input",{value:Qt,onChange:i=>Lo(i.target.value),placeholder:"Buscar conversas...",className:"w-full border rounded px-3 py-1.5 text-sm"}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border hover:bg-slate-50",onClick:()=>{var i;try{(i=document.getElementById("people-list"))==null||i.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},children:"Nova conversa"}),a.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Ra,onChange:i=>z0(i.target.checked)})," ","Fixadas"]}),a.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Aa,onChange:i=>V0(i.target.checked)})," ","No lidas"]})]})]}),a.jsxs("div",{className:"px-3 py-1.5 text-[10px] font-semibold uppercase tracking-wide text-slate-500 sticky top-0 z-10 bg-white dark:bg-slate-800 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("span",{children:"Grupos"}),a.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-transform",onClick:()=>j0(i=>!i),"aria-label":Ca?"Expandir grupos":"Ocultar grupos",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${Ca?"-rotate-90":"rotate-0"}`,children:a.jsx("path",{d:"M8.47 4.97a.75.75 0 0 1 1.06 0l6 6a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06L13.94 12 8.47 6.53a.75.75 0 0 1 0-1.06Z"})})})]}),!Ca&&H0.map(i=>{const h=(i==null?void 0:i._lastAt)||0,p=h?new Date(h).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",y=(i==null?void 0:i._lastPreview)||"";C!=null&&C[i.id],Z!=null&&Z[i.id];const S=X(i._unread||0,i.id);return a.jsxs("button",{onClick:()=>{c(i),Yt()},onContextMenu:N=>{N.preventDefault(),N.stopPropagation(),Qe({open:!0,type:"group",id:i.id,groupId:i.id,x:N.clientX,y:N.clientY})},className:`px-3 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/60 border ${(l==null?void 0:l.id)===i.id?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600":"border-transparent hover:border-slate-200 dark:border-transparent dark:hover:border-slate-600"} flex items-center justify-between transition-colors`,title:i.name||"",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"truncate text-left",title:i.name||"",children:i.name}),p&&a.jsx("span",{className:"text-[11px] text-slate-500",children:p})]}),y&&a.jsx("div",{className:"text-slate-500 truncate max-w-[220px] text-xs",title:y,children:y})]}),a.jsx("div",{className:"flex items-center gap-1 shrink-0",children:S>0&&a.jsx("span",{className:"ml-2 min-w-[22px] h-5 px-1.5 rounded-full bg-blue-600/90 text-white text-[11px] inline-flex items-center justify-center shadow",children:S})})]},i.id)}),a.jsxs("div",{className:"px-3 py-1.5 text-[10px] font-semibold uppercase tracking-wide text-slate-500 border-t border-slate-200 sticky top-0 z-10 bg-white dark:bg-slate-800 flex items-center justify-between",children:[a.jsx("span",{children:"Pessoas"}),a.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-transform",onClick:()=>k0(i=>!i),"aria-label":Da?"Expandir pessoas":"Ocultar pessoas",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-4 h-4 transition-transform ${Da?"-rotate-90":"rotate-0"}`,children:a.jsx("path",{d:"M8.47 4.97a.75.75 0 0 1 1.06 0l6 6a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06L13.94 12 8.47 6.53a.75.75 0 0 1 0-1.06Z"})})})]}),!Da&&a.jsx("div",{id:"people-list",className:"px-3 py-2 flex flex-col gap-1",children:K0.map(i=>{const h=La[i.id]||null,p=X((h==null?void 0:h._unread)||0,h==null?void 0:h.groupId),y=(h==null?void 0:h._lastAt)||0,S=y?new Date(y).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",N=(h==null?void 0:h._lastPreview)||"";C!=null&&C[i.id];const P=!!(l!=null&&l.id&&(h!=null&&h.groupId)&&l.id===h.groupId);return a.jsxs("button",{onClick:()=>C0(i.id),onContextMenu:I=>{I.preventDefault(),I.stopPropagation(),Qe({open:!0,type:"user",id:i.id,groupId:(h==null?void 0:h.groupId)||null,x:I.clientX,y:I.clientY})},className:`rounded-lg px-2 py-2 flex items-center justify-between gap-2 border transition-colors ${P?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600":"hover:bg-slate-50 dark:hover:bg-slate-700/60 border-transparent hover:border-slate-200 dark:hover:border-slate-600"}`,children:[a.jsxs("span",{className:"flex items-center gap-2 min-w-0",children:[a.jsx(zu,{url:i.avatarUrl,name:i.name,size:40,status:S0[i.id]||i.status,showStatus:!0}),a.jsxs("span",{className:"flex flex-col items-start min-w-0",children:[a.jsx("span",{className:"truncate font-medium text-sm",title:i.name||"",children:i.name}),i.status&&a.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full border ${String(i.status).toLowerCase()==="online"?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:i.status}),N&&a.jsx("span",{className:"truncate text-xs text-slate-500 max-w-[180px]",title:N,children:N})]})]}),a.jsxs("span",{className:"flex items-center gap-2 shrink-0",children:[S&&a.jsx("span",{className:"text-[11px] text-slate-500",children:S}),p>0&&a.jsx("span",{className:"min-w-[22px] h-5 px-1.5 rounded-full bg-blue-600/90 text-white text-[11px] inline-flex items-center justify-center shadow",children:p}),!!(C!=null&&C[i.id])&&a.jsx(Dh,{className:"w-4 h-4 text-amber-500"})]})]},i.id)})})]}),(se==null?void 0:se.open)&&a.jsxs("div",{ref:ht,className:"fixed z-50 w-48 bg-white border border-slate-200 rounded shadow",style:{top:Math.max(8,se.y),left:Math.max(8,se.x)},role:"menu",children:[se.type==="user"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{se!=null&&se.id&&pe(se.id),Qe(i=>({...i,open:!1}))},children:C!=null&&C[se.id]?"Desafixar":"Fixar"}),a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{const i=se.groupId||se.id;i&&De(i),Qe(h=>({...h,open:!1}))},children:(()=>{const i=se.groupId||se.id;return Z!=null&&Z[i]?"Reativar som":"Silenciar"})()}),se.groupId&&a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{ae(se.groupId),Qe(i=>({...i,open:!1}))},children:"Marcar como no lida"}),se.groupId&&W(se.groupId)&&a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{ve(se.groupId),Qe(i=>({...i,open:!1}))},children:"Marcar como lida"})]}),se.type==="group"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{se!=null&&se.id&&pe(se.id),Qe(i=>({...i,open:!1}))},children:C!=null&&C[se.id]?"Desafixar":"Fixar"}),a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{se!=null&&se.id&&De(se.id),Qe(i=>({...i,open:!1}))},children:Z!=null&&Z[se.id]?"Reativar som":"Silenciar"}),!!(se!=null&&se.id)&&a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{ae(se.id),Qe(i=>({...i,open:!1}))},children:"Marcar como no lida"}),!!(se!=null&&se.id)&&W(se.id)&&a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{ve(se.id),Qe(i=>({...i,open:!1}))},children:"Marcar como lida"})]})]}),a.jsxs("div",{className:"relative flex-1 flex min-h-0 min-w-0 flex-col chat-bg border-r border-slate-200 bg-slate-100 dark:bg-slate-900/60",onDragOver:ds,onDragEnter:ds,onDragLeave:zo,onDrop:Vo,children:[_&&a.jsx("div",{className:"absolute inset-0 z-20 rounded-xl border-2 border-dashed border-emerald-400 bg-emerald-50/70 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-700 dark:text-emerald-200 text-sm font-medium pointer-events-none",children:"Solte os arquivos aqui para anexar"}),a.jsxs("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 bg-gradient-to-r from-white/80 to-slate-50/80 dark:from-slate-900/60 dark:to-slate-800/60 backdrop-blur font-medium flex items-center gap-2 shadow-sm",children:[!Dr&&a.jsx("button",{type:"button",className:"lg:hidden inline-flex items-center justify-center rounded border border-slate-300 p-2 text-slate-600 hover:bg-slate-100","aria-label":"Abrir lista de conversas",onClick:()=>Ea(!0),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:a.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsxs("button",{type:"button",className:"flex items-center gap-3 min-w-0 truncate text-left hover:underline",onClick:()=>M0(),title:"Abrir perfil",children:[a.jsx(zu,{url:G0,name:(l==null?void 0:l.name)||"Selecione um grupo",size:36}),a.jsx("span",{className:"truncate font-semibold text-slate-700 dark:text-slate-200",children:Q0})]}),a.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 rounded border border-slate-300 bg-white/90 px-2 py-1 shadow-sm",children:[a.jsx(Rw,{className:"h-4 w-4 text-slate-500"}),a.jsx("input",{ref:N0,value:Jt,onChange:i=>ma(i.target.value),placeholder:"Buscar mensagens...",className:"w-64 border-0 bg-transparent text-sm focus:outline-none focus:ring-0","aria-label":"Buscar mensagens",onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),ru(!i.shiftKey))}}),a.jsx("span",{className:"text-[11px] text-slate-500",children:Jt?pn.length?`${xa+1}/${pn.length}`:"0/0":"--"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",className:"px-1.5 py-1 rounded hover:bg-slate-100",title:"Resultado anterior",onClick:()=>ru(!1),children:a.jsx(Aw,{})}),a.jsx("button",{type:"button",className:"px-1.5 py-1 rounded hover:bg-slate-100",title:"Prximo resultado",onClick:()=>ru(!0),children:a.jsx(Lw,{})}),Jt&&a.jsx("button",{type:"button",className:"px-1.5 py-1 rounded hover:bg-slate-100",title:"Limpar busca",onClick:()=>ma(""),children:a.jsx(Ql,{})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",title:"Mais opes","aria-haspopup":"menu","aria-expanded":cs,onClick:()=>Et(i=>!i),children:a.jsx(Pw,{})}),cs&&a.jsx("div",{ref:Bo,className:"absolute right-0 top-10 z-20 w-48 rounded border border-slate-200 bg-white shadow",role:"menu",children:a.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>{ul&&pe(ul),Et(!1)},role:"menuitem",children:q0?"Desafixar conversa":"Fixar conversa"})})]})]})]}),!l&&a.jsx("div",{className:"flex-1 grid place-items-center p-6",children:a.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-300",children:[a.jsx("div",{className:"mx-auto dark:bg-slate-700 grid place-items-center",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8 text-slate-400 dark:text-slate-300",children:a.jsx("path",{d:"M19.5 6.75v10.5A2.25 2.25 0 0 1 17.25 19.5H6.75A2.25 2.25 0 0 1 4.5 17.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5A2.25 2.25 0 0 1 19.5 6.75ZM8.25 9A.75.75 0 0 0 7.5 9.75v6a.75.75 0 0 0 1.5 0v-6A.75.75 0 0 0 8.25 9Zm4.5 0a.75.75 0 0 0-.75.75v6a.75.75 0 0 0 1.5 0v-6A.75.75 0 0 0 12.75 9Zm4.5.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"})})}),a.jsx("div",{className:"text-lg font-semibold",children:"Selecione uma conversa"}),a.jsx("div",{className:"text-sm",children:"Escolha um grupo ou contato  esquerda."})]})}),a.jsx("div",{ref:yr,className:`flex-1 overflow-y-auto overflow-x-hidden overscroll-contain p-4 ${l?"":"hidden"}`,children:a.jsxs("div",{className:"flex min-h-full flex-col",children:[a.jsx("div",{className:"flex-1 min-h-[1px]","aria-hidden":!0}),a.jsxs("div",{className:"flex flex-col space-y-3",children:[l&&(ts||Pn)&&a.jsx("div",{className:"flex justify-center pb-2",children:a.jsx("button",{type:"button",onClick:E0,disabled:Pn,className:"px-4 py-1.5 rounded-full border border-slate-300 text-sm text-slate-600 hover:bg-slate-50 disabled:opacity-60 disabled:cursor-not-allowed",children:Pn?"Carregando...":"Carregar mensagens anteriores"})}),d.map((i,h)=>{var H,re,oe,Ne,_e,Ue,We,Tt;const p=(((H=i.author)==null?void 0:H.id)||i.authorId)===(ee==null?void 0:ee.id),y=p?"min-w-0 w-fit max-w-[min(75%,_600px)] bg-blue-600 text-white px-4 py-2.5 rounded-2xl rounded-tr-md shadow-md break-words":"min-w-0 w-fit max-w-[min(65%,_560px)] bg-white text-slate-800 px-4 py-2.5 rounded-2xl rounded-tl-md shadow-md border border-slate-200/60 break-words",S=p?"flex justify-end mb-2 items-end min-w-0":"flex justify-start mb-2 items-end min-w-0",N=d[h-1],P=!N||new Date(N.createdAt).toDateString()!==new Date(i.createdAt).toDateString(),I=(()=>{const Se=new Date(i.createdAt),mt=new Date,Ft=Je=>new Date(Je.getFullYear(),Je.getMonth(),Je.getDate()),ys=(Ft(Se)-Ft(mt))/864e5;return ys===0?"Hoje":ys===-1?"Ontem":Se.toLocaleDateString("pt-BR")})(),Q=(ot==null?void 0:ot.messageId)===i.id&&!!(l!=null&&l.id);return a.jsxs("div",{id:`msg-${i.id}`,className:"w-full",children:[P&&a.jsx("div",{className:"max-w-32 mx-auto rounded-full text-center text-xs bg-sky-600  text-slate-100 my-2",children:I}),Q&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs bg-amber-50 border border-amber-200 text-amber-700 rounded-full px-3 py-1 mb-2",children:[a.jsx("span",{className:"font-semibold",children:"Mensagens marcadas como no lidas"}),a.jsx("button",{type:"button",className:"text-amber-800 hover:underline font-medium",onClick:()=>z(l==null?void 0:l.id),children:"Marcar como lidas"})]}),a.jsxs("div",{className:`${S} group`,children:[!p&&a.jsx("div",{className:"mr-2",children:a.jsx(zu,{url:(re=i.author)==null?void 0:re.avatarUrl,name:(oe=i.author)==null?void 0:oe.name,size:32})}),a.jsxs("div",{className:`${y} ${Ro===i.id?"ring-2 ring-yellow-400":""} ${Jt&&i.type==="text"&&(i.content||"").toLowerCase().includes((Jt||"").toLowerCase())?"outline outline-2 outline-yellow-300":""}`,children:[!p&&a.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600",children:((Ne=i.author)==null?void 0:Ne.name)||"Contato"}),i.replyTo&&a.jsxs("button",{type:"button",onClick:()=>ea(i.replyTo.id),className:"mb-1 w-full text-left pl-2 border-l-4 border-blue-400 text-xs text-slate-600 hover:bg-blue-50 focus:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-300 rounded-sm transition dark:hover:bg-slate-800/60 dark:focus:bg-slate-800/90",title:"Abrir mensagem original",children:[a.jsx("div",{className:"font-medium",children:((_e=i.replyTo.author)==null?void 0:_e.name)||"Mensagem"}),a.jsx("div",{className:"truncate opacity-90",children:i.replyTo.type==="text"?i.replyTo.content:i.replyTo.type==="image"?"Imagem":i.replyTo.type==="audio"?"udio":"Anexo"})]}),i.deletedAt?a.jsx("div",{className:"italic opacity-70",children:"Mensagem apagada"}):i.type==="text"?a.jsx(Hw,{message:i,mine:p,onStartEdit:Se=>{_n(Se.id),Rn(Se.content||""),ye(null)},onSave:async(Se,mt)=>{try{const Ft=await q.patch(`/messages/${Se.id}`,{content:mt.trim()});m(ys=>ys.map(Je=>Je.id===Se.id?Ft:Je)),_n(""),Rn("")}catch(Ft){j((Ft==null?void 0:Ft.message)||"Falha ao editar")}},onCancel:()=>{_n(""),Rn("")},editingId:fr,editText:Ao,setEditText:Rn}):i.type==="image"||i.type==="gif"?(()=>{const Se=Ut(i.content),mt=ms(i.content)||"imagem";return a.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[a.jsx("a",{href:Se,target:"_blank",rel:"noopener noreferrer",className:"inline-block max-w-[220px]",children:a.jsx("img",{src:Se,alt:mt,className:"max-w-full max-h-60 rounded shadow-sm object-contain bg-slate-100"})}),a.jsx("button",{type:"button",onClick:()=>Wi(Se,mt),className:"inline-flex items-center gap-1 rounded px-3 py-1 text-xs font-semibold text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-400 transition",children:"Baixar"})]})})():i.type==="audio"?a.jsx("audio",{src:Ut(i.content),controls:!0,className:"w-60"}):a.jsx("a",{className:"underline break-all",href:Ut(i.content),target:"_blank",rel:"noreferrer",title:ms(i.content)||"Abrir anexo",children:ms(i.content)||"Abrir anexo"}),a.jsxs("div",{className:"mt-1 text-[10px] opacity-80 flex items-center gap-2",children:[a.jsx("span",{children:new Date(i.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),p&&(()=>{const Se=(i.reads||[]).map(Je=>Je.userId);if(ol){const Je=Se.includes(ol),cl=Je?"Visualizada":"Entregue";return a.jsx(Bu,{read:Je,title:cl})}const mt=Se.filter(Je=>Je&&Je!==(ee==null?void 0:ee.id));if(mt.length===0)return a.jsx(Bu,{read:!1,title:"Entregue"});const Ft=mt.map(Je=>{var cl;return((cl=(s||[]).find(Z0=>Z0.id===Je))==null?void 0:cl.name)||""}).filter(Boolean),ys=Ft.length?Ft.join(", "):`Visto por ${mt.length}`;return a.jsx(Bu,{read:!0,title:ys})})(),a.jsx("button",{type:"button",title:sl(i.id)?"Remover favorito":"Favoritar",onClick:()=>eu(i),className:`${sl(i.id)?"text-yellow-400":"text-slate-300 hover:text-slate-500"} transition-colors`,children:a.jsx(Dh,{className:"w-4 h-4",filled:sl(i.id)})})]})]}),a.jsxs("div",{className:"ml-1 relative",ref:ue===i.id?Hr:null,children:[a.jsx("button",{type:"button",className:"opacity-0 group-hover:opacity-100 p-1 text-slate-500 hover:text-slate-700",onClick:()=>ye(ue===i.id?null:i.id),"aria-label":"Aes",children:"..."}),ue===i.id&&a.jsxs("div",{className:"absolute right-0 mt-1 bg-white border border-slate-200 rounded shadow text-sm z-10",children:[a.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{ye(null),D0(i)},children:"Responder"}),(((Ue=i.author)==null?void 0:Ue.id)||i.authorId)===(ee==null?void 0:ee.id)&&i.type==="text"&&!i.deletedAt&&a.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{_n(i.id),Rn(i.content||""),ye(null)},children:"Editar"}),a.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{ye(null),eu(i)},children:"Favoritar"}),!i.deletedAt&&a.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{hr(i),pr(""),Kr(""),Qr(!0),ye(null)},children:"Encaminhar"}),(((We=i.author)==null?void 0:We.id)||i.authorId)===(ee==null?void 0:ee.id)&&a.jsx("button",{className:"block w-full text-left px-3 py-1.5 text-red-600 hover:bg-red-50",onClick:()=>{ye(null),_0(i)},children:"Apagar"}),((Tt=i._count)==null?void 0:Tt.replies)>0&&a.jsx("button",{className:"block w-full text-left px-3 py-1.5 hover:bg-slate-50",onClick:()=>{ye(null),R0(i)},children:"Ir para respostas"})]})]})]})]},i.id)})]})]})}),g&&a.jsxs("div",{className:"px-3 py-2 border-t border-slate-200 bg-slate-50 flex items-start gap-2",children:[a.jsxs("div",{className:"border-l-4 border-blue-500 pl-2 text-sm text-slate-700 flex-1",children:[a.jsxs("div",{className:"font-medium",children:["Respondendo ",((sf=g.author)==null?void 0:sf.name)||"mensagem"]}),a.jsx("div",{className:"truncate",children:g.type==="text"?g.content:g.type==="image"?"Imagem":g.type==="audio"?"udio":"Anexo"})]}),a.jsx("button",{className:"text-slate-500 hover:text-slate-700",onClick:()=>b(null),children:"Cancelar"}),E&&!((x||"").trim()||k.length)&&a.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[a.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",V>0?`${V}s`:"REC"]})]}),dn&&a.jsxs("div",{className:"px-3 py-2 border-t border-slate-200 bg-white dark:bg-slate-900",children:[a.jsx("audio",{ref:St,src:lt,onLoadedMetadata:I0,onEnded:T0,onPause:F0,onPlay:()=>Kt(!0),className:"hidden",preload:"metadata"}),a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:O0,className:`inline-flex items-center justify-center w-9 h-9 rounded-full transition ${us?"bg-red-600 text-white hover:bg-red-500":"bg-slate-200 text-slate-600 hover:bg-slate-300"}`,"aria-label":us?"Pausar pr-escuta":"Reproduzir pr-escuta",disabled:$n,children:us?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M7 5.25h2.5c.414 0 .75.336.75.75v12a.75.75 0 0 1-.75.75H7a.75.75 0 0 1-.75-.75V6A.75.75 0 0 1 7 5.25Zm7.5 0H17c.414 0 .75.336.75.75v12a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1-.75-.75V6a.75.75 0 0 1 .75-.75Z"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M5.87 3.52 18.5 10.3a1.5 1.5 0 0 1 0 2.6L5.87 19.68A1.5 1.5 0 0 1 3.5 18.5V5.5a1.5 1.5 0 0 1 2.37-1.98Z"})})}),a.jsxs("div",{className:"flex flex-col leading-tight text-right min-w-[120px]",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Pr-escuta do udio"}),a.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:$o?`Durao ${$o}`:dn?`Tamanho ${(dn.size/(1024*1024)).toFixed(1)} MB`:""})]}),a.jsx("button",{type:"button",onClick:U0,disabled:$n,className:"inline-flex items-center justify-center w-9 h-9 rounded-full bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 transition","aria-label":"Enviar udio",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M2.31 20.87 22 12 2.31 3.13a.75.75 0 0 0-.98.97L4.7 11.1c.1.25.1.53 0 .78l-3.37 7a.75.75 0 0 0 .98.98Z"})})}),a.jsx("button",{type:"button",onClick:tf,className:"inline-flex items-center justify-center w-9 h-9 rounded-full bg-slate-100 text-slate-600 hover:bg-red-50 hover:text-red-600 transition","aria-label":"Excluir udio",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M9 3.75A.75.75 0 0 1 9.75 3h4.5a.75.75 0 0 1 .75.75V5h3a.75.75 0 0 1 0 1.5h-.522l-.73 12.035A2.25 2.25 0 0 1 14.508 20H9.492a2.25 2.25 0 0 1-2.19-1.965L6.57 6.5H6a.75.75 0 0 1 0-1.5h3V3.75Zm1.5 3.75a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Zm4.5 0a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Z"})})})]})]}),k.length>0&&a.jsx("div",{className:"px-3 py-2 border-t border-slate-200 bg-white dark:bg-slate-900 flex flex-wrap gap-3 flex-wrap",children:k.map(i=>{var h,p,y;return a.jsxs("div",{className:"flex items-center gap-3 border border-slate-200 dark:border-slate-700 rounded-lg px-2 py-1.5 bg-slate-50 dark:bg-slate-800/50",children:[i.preview?a.jsx("img",{src:i.preview,alt:i.file.name,className:"w-16 h-16 object-cover rounded border border-slate-200 dark:border-slate-600"}):a.jsx("div",{className:"w-16 h-16 flex items-center justify-center rounded border border-dashed border-slate-300 bg-slate-100 dark:bg-slate-700/40 text-[11px] font-semibold text-slate-600 dark:text-slate-200",children:(h=i.file.type)!=null&&h.startsWith("audio")?"udio":(p=i.file.type)!=null&&p.startsWith("Vdeo")?"Vdeo":(y=i.file.type)!=null&&y.includes("pdf")?"PDF":"Arquivo"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:"truncate text-xs font-medium text-slate-700 dark:text-slate-200",title:i.file.name,children:i.file.name}),a.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:[((i.file.size||0)/(1024*1024)).toFixed(2)," MB"]})]}),a.jsx("button",{type:"button",className:"text-slate-500 hover:text-red-600 text-sm",onClick:()=>Vi(i.id),"aria-label":`Remover anexo ${i.file.name}`,children:"Remover"})]},i.id)})}),a.jsxs("form",{ref:$i,onSubmit:nu,onDragOver:ds,onDragEnter:ds,onDragLeave:zo,onDrop:Vo,className:`chat-composer relative flex flex-col gap-2 p-3 border-t border-slate-200/70 bg-white/90 dark:bg-slate-900/70 backdrop-blur ${l?"":"hidden"}`,children:[_&&a.jsx("div",{className:"absolute inset-0 z-10 rounded-xl border-2 border-dashed border-emerald-400 bg-emerald-50/80 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-700 dark:text-emerald-200 text-sm font-medium pointer-events-none",children:"Solte os arquivos aqui para anexar"}),a.jsxs("div",{className:"flex w-full items-center gap-2 flex-wrap md:flex-nowrap",children:[a.jsx("button",{type:"button",ref:Po,onClick:()=>K?Gt(!1):Bi(),title:"Emojis",className:"flex-shrink-0 px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Emojis",children:a.jsx(Iw,{className:"w-5 h-5"})}),a.jsxs("button",{type:"button",onClick:()=>{var i;try{cn.current&&(cn.current.value="")}catch{}(i=cn.current)==null||i.click()},title:"Anexar",className:"inline-flex shrink-0 items-center justify-center p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Anexar",style:{fontSize:0},children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:a.jsx("path",{d:"M21.44 11.05l-9.19 9.19a5 5 0 11-7.07-7.07l9.19-9.19a3 3 0 114.24 4.24l-9.19 9.19a1 1 0 11-1.41-1.41l8.49-8.49"})}),a.jsx("span",{className:"sr-only",children:"Anexar arquivo"})]}),a.jsx("input",{ref:cn,type:"file",multiple:!0,accept:"*/*",onChange:i=>{const h=Array.from(i.target.files||[]);fa(h)},className:"hidden"}),a.jsx("textarea",{ref:vr,value:x,onChange:i=>w(i.target.value),onKeyDown:i=>{i.key==="Enter"&&!i.shiftKey&&!i.altKey&&!i.ctrlKey&&!i.metaKey&&!i.isComposing&&(i.preventDefault(),nu())},onPaste:i=>{var h;try{const p=((h=i.clipboardData)==null?void 0:h.items)||[];for(let y=0;y<p.length;y++){const S=p[y];if(S&&typeof S.type=="string"&&S.type.startsWith("image/")){const N=S.getAsFile();if(N){const P=`paste-${Date.now()}.${(N.type.split("/")[1]||"png").replace(/[^a-z0-9]/gi,"")}`,I=new File([N],P,{type:N.type||"image/png"});fa([I]),i.preventDefault();break}}}}catch{}},placeholder:"Digite sua mensagem... (Enter envia, Shift+Enter quebra linha)",rows:1,className:"flex-1 min-w-0 border border-slate-300 dark:border-slate-700 rounded-xl px-3 py-3 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800 resize-y min-h-[40px]"}),a.jsx("button",{type:"button",onClick:()=>{(x||"").trim()||k.length?$n||nu():E?P0():L0()},className:`${$n?"bg-blue-400 text-white cursor-wait":(x||"").trim()||k.length?"bg-blue-600 text-white hover:bg-blue-700 shadow":E?"bg-red-600 text-white hover:bg-red-700 shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300 shadow"} inline-flex items-center justify-center rounded-full h-10 flex-shrink-0 transition ${E&&!((x||"").trim()||k.length)?"px-4 gap-2":"w-10"}`,title:$n?"Enviando...":(x||"").trim()||k.length?"Enviar":E?"Parar gravao":"Gravar udio",disabled:$n,children:(x||"").trim()||k.length?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M2.31 20.87 22 12 2.31 3.13a.75.75 0 0 0-.98.97L4.7 11.1c.1.25.1.53 0 .78l-3.37 7a.75.75 0 0 0 .98.98Z"})}):E?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M12 14.5a3.5 3.5 0 0 0 3.5-3.5V7a3.5 3.5 0 1 0-7 0v4a3.5 3.5 0 0 0 3.5 3.5Zm5-3.5a5 5 0 0 1-10 0H5a7 7 0 0 0 6 6.92V20h2v-2.08A7 7 0 0 0 19 11h-2Z"})})}),E&&!((x||"").trim()||k.length)&&a.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[a.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",V>0?`${V}s`:"REC"]})]}),!!((x||"").trim()||k.length)&&L&&a.jsx("div",{className:"text-sm text-red-600",children:L}),!(x||"").trim()&&!k.length&&U&&a.jsx("div",{className:"text-sm text-red-600",children:U}),K&&a.jsxs("div",{className:"fixed mb-2 bg-white border border-slate-200 rounded-md p-2 shadow z-50 overflow-y-auto overflow-x-hidden",style:{left:Math.max(4,ta.left),bottom:Math.max(4,ta.bottom||0),width:`${ta.width||360}px`,maxHeight:`${ta.maxHeight||416}px`},children:[a.jsx("button",{type:"button",className:"absolute top-2 right-2 p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700/60","aria-label":"Fechar",onClick:()=>Gt(!1),title:"Fechar",children:a.jsx(Ql,{className:"w-4 h-4"})}),!1,!1,a.jsx("div",{ref:An,className:"relative max-h-80 overflow-y-auto overflow-x-hidden pr-1",children:Ln.filter(i=>i!=="recent"||Yr.length>0).filter(i=>i!=="favoritos"||(gr||[]).length>0).filter(i=>i!=="recent"&&i!=="favoritos"?(Rl[i]||[]).length>0:!0).map(i=>{var h;return a.jsxs("div",{children:[a.jsx("div",{ref:Oo(i),className:"sticky top-0 bg-white text-[11px] text-slate-500 mb-1 mt-1",children:i==="recent"?"Recentes":i==="favoritos"?"Favoritos":((h=zw.find(p=>p.key===i))==null?void 0:h.label)||i}),a.jsx("div",{className:"grid grid-cols-7 sm:grid-cols-8 md:grid-cols-10 gap-1 mb-2",children:(i==="recent"?Yr:i==="favoritos"?gr||[]:Rl[i]||[]).map(p=>a.jsxs("button",{type:"button",onClick:()=>A0(p),onContextMenu:y=>{y.preventDefault(),Fo(p)},className:`relative inline-flex items-center justify-center w-8 h-8 md:w-9 md:h-9 text-2xl leading-none hover:bg-slate-100 dark:hover:bg-slate-700/60 rounded px-1.5 ${(gr||[]).includes(p)?"bg-yellow-50":""}`,children:[(gr||[]).includes(p)&&a.jsx("span",{className:"absolute -top-0.5 -left-0.5 text-[10px] text-yellow-600",children:""}),p]},`sec-${i}-${p}`))})]},`sec-${i}`)})}),mr==="recent"&&Yr.length===0&&a.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Sem recentes ainda"})]})]})]}),!Dr&&va&&a.jsx("button",{type:"button",className:"fixed inset-0 z-30 bg-slate-900/30 backdrop-blur-[1px] lg:hidden","aria-label":"Fechar detalhes",onClick:()=>gs(!1)}),va&&a.jsxs("aside",{className:`flex h-full flex-col border-l border-slate-200 bg-white dark:bg-slate-900/70 transition-transform duration-200 ease-out ${Dr?"w-[360px] max-w-sm flex-shrink-0":"fixed inset-y-0 right-0 z-40 w-full max-w-sm shadow-xl"}`,children:[a.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("div",{className:"font-semibold",children:"Detalhes"}),a.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-700","aria-label":"Fechar detalhes",onClick:()=>gs(!1),children:""}),E&&!((x||"").trim()||k.length)&&a.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[a.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",V>0?`${V}s`:"REC"]})]}),a.jsx("div",{className:"px-4 pt-2 border-b border-slate-200",children:a.jsxs("div",{className:"inline-flex items-center gap-2 text-sm",children:[a.jsx("button",{className:`px-3 py-2 ${On==="perfil"?"border-b-2 border-blue-600 text-blue-700":"text-slate-600 hover:text-slate-800"}`,onClick:()=>Un("perfil"),children:"Perfil"}),a.jsx("button",{className:`px-3 py-2 ${On==="arquivos"?"border-b-2 border-blue-600 text-blue-700":"text-slate-600 hover:text-slate-800"}`,onClick:()=>Un("arquivos"),children:"Arquivos"}),a.jsx("button",{className:`px-3 py-2 ${On==="favoritos"?"border-b-2 border-blue-600 text-blue-700":"text-slate-600 hover:text-slate-800"}`,onClick:()=>Un("favoritos"),children:"Favoritos"}),E&&!((x||"").trim()||k.length)&&a.jsxs("span",{className:"text-xs text-red-600 inline-flex items-center gap-1","aria-live":"polite",children:[a.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full"})," ",V>0?`${V}s`:"REC"]})]})}),a.jsx("div",{className:"p-4 space-y-4 overflow-auto flex-1",children:Ko?a.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):a.jsxs(a.Fragment,{children:[On==="perfil"&&a.jsx(a.Fragment,{children:Tn==="contact"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:me!=null&&me.avatarUrl?a.jsx("img",{src:Ut(me.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-slate-500 text-sm",children:"Sem foto"})}),a.jsxs("div",{className:"w-full",children:[a.jsx("div",{className:"text-center font-semibold truncate",children:(me==null?void 0:me.name)||"Contato"}),a.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[(me==null?void 0:me.email)&&a.jsx("div",{className:"px-3 py-1 rounded bg-slate-50 border border-slate-200 truncate text-center",children:me.email}),(me==null?void 0:me.phone)&&a.jsx("div",{className:"px-3 py-1 rounded bg-slate-50 border border-slate-200 truncate text-center",children:me.phone})]})]})]}),a.jsxs("div",{className:"mt-3 flex justify-center gap-2",children:[(me==null?void 0:me.phone)&&a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{const i=new URLSearchParams;me.phone&&i.set("to",me.phone),me.name&&i.set("name",me.name),me.id&&i.set("id",me.id),Mo(`/telefonia?${i.toString()}`)},children:"Ligar"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>Un("arquivos"),children:"Ver arquivos"})]}),a.jsxs("div",{className:"mt-5",children:[a.jsx("div",{className:"font-semibold mb-2",children:"Grupos em comum"}),Zi?a.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):Yo?a.jsx("div",{className:"text-sm text-red-600",children:Yo}):mn.filter(i=>((i==null?void 0:i.name)||"").toUpperCase()!=="DM").length>0?a.jsx("ul",{className:"space-y-1",children:mn.filter(i=>((i==null?void 0:i.name)||"").toUpperCase()!=="DM").map(i=>a.jsx("li",{children:a.jsx("button",{type:"button",className:"w-full text-left px-2 py-1 rounded border border-slate-200 hover:bg-slate-50",onClick:()=>{c({id:i.id,name:i.name}),Yt()},children:i.name})},i.id))}):a.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum grupo em comum."})]})]}):Tn==="group"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:l!=null&&l.avatarUrl?a.jsx("img",{src:Ut(l.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-slate-500 text-sm",children:"Grupo"})}),a.jsx("div",{className:"w-full",children:a.jsx("div",{className:"text-center font-semibold truncate",children:(l==null?void 0:l.name)||"Grupo"})})]}),a.jsxs("div",{className:"mt-5",children:[a.jsx("div",{className:"font-semibold mb-2",children:"Participantes"}),tl?a.jsx("div",{className:"text-sm text-slate-500",children:"Carregando..."}):Sr?a.jsx("div",{className:"text-sm text-red-600",children:Sr}):wa.length>0?a.jsx("ul",{className:"space-y-1",children:wa.map(i=>{var h,p,y,S,N;return a.jsxs("li",{className:"flex items-center gap-2 px-2 py-1 rounded border border-slate-200",children:[a.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center shrink-0",children:(h=i.user)!=null&&h.avatarUrl?a.jsx("img",{src:Ut(i.user.avatarUrl),alt:((p=i.user)==null?void 0:p.name)||"participante",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-[10px] text-slate-500",children:(((y=i.user)==null?void 0:y.name)||"?").slice(0,1).toUpperCase()})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm truncate",children:((S=i.user)==null?void 0:S.name)||"Participante"}),((N=i.user)==null?void 0:N.email)&&a.jsx("div",{className:"text-[11px] text-slate-500 truncate",children:i.user.email})]}),i.role&&a.jsx("span",{className:"text-[11px] text-slate-500 ml-2",children:i.role})]},i.id)})}):a.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum participante."})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center",children:v?a.jsx("img",{src:URL.createObjectURL(v),alt:"avatar",className:"w-full h-full object-cover"}):Ct!=null&&Ct.avatarUrl?a.jsx("img",{src:Ut(Ct.avatarUrl),alt:"avatar",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-slate-500",children:"Sem foto"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm text-slate-600",children:"Foto de perfil"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"pfAvatar",type:"file",accept:"image/*",className:"hidden",onChange:i=>{var h;return T(((h=i.target.files)==null?void 0:h[0])||null)}}),a.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var i;return(i=document.getElementById("pfAvatar"))==null?void 0:i.click()},children:"Alterar"}),v&&a.jsx("button",{type:"button",className:"px-2 py-1 rounded text-red-600 hover:bg-red-50",onClick:()=>T(null),children:"Remover"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Nome"}),a.jsx("input",{value:ba,onChange:i=>ja(i.target.value),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"E-mail"}),a.jsx("input",{value:(Ct==null?void 0:Ct.email)||"",disabled:!0,className:"w-full border rounded px-3 py-2 bg-slate-50 text-slate-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Telefone"}),a.jsx("input",{value:Er,onChange:i=>ka(i.target.value),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Endereo"}),a.jsx("input",{value:Mn,onChange:i=>Na(i.target.value),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Status"}),a.jsx("input",{value:xs,onChange:i=>f(i.target.value),placeholder:"Ex.: Disponvel",className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:$0,children:"Salvar"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{T(null),nf(void 0,{force:!0})},children:"Cancelar"})]})]}),a.jsxs("div",{className:"pt-3 border-t border-slate-200 space-y-2",children:[a.jsx("div",{className:"font-medium text-sm",children:"Alterar senha"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsx("input",{type:"password",value:G,onChange:i=>te(i.target.value),placeholder:"Senha atual",className:"w-full border rounded px-3 py-2"}),a.jsx("input",{type:"password",value:xe,onChange:i=>Ie(i.target.value),placeholder:"Nova senha",className:"w-full border rounded px-3 py-2"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-slate-800 text-white hover:bg-slate-900",onClick:B0,children:"Atualizar senha"})})]})]})]})}),On==="arquivos"&&a.jsxs("div",{className:"space-y-2",children:[d.filter(i=>i.type!=="text"&&!i.deletedAt).map(i=>a.jsxs("div",{className:"flex items-center justify-between border rounded px-3 py-2 text-sm",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:i.type==="image"||i.type==="gif"?"Imagem":i.type==="audio"?"udio":"Anexo"}),a.jsx("div",{className:"text-slate-500 truncate max-w-[220px]",children:i.type==="text"?i.content:ms(i.content)||i.content})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsxs("span",{className:"text-[11px] text-slate-500",children:[new Date(i.createdAt).toLocaleDateString("pt-BR")," ",new Date(i.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]}),a.jsx("a",{className:"px-2 py-1 rounded border border-slate-300 hover:bg-slate-50",href:Ut(i.content),target:"_blank",rel:"noreferrer",children:"Abrir"})]})]},i.id)),d.filter(i=>i.type!=="text"&&!i.deletedAt).length===0&&a.jsx("div",{className:"text-sm text-slate-500",children:"Nenhum arquivo nesta conversa."})]}),On==="favoritos"&&a.jsxs("div",{className:"space-y-2",children:[Jd.map(i=>{var h;return a.jsxs("div",{className:"border rounded px-3 py-2 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"font-medium truncate",children:((h=i.author)==null?void 0:h.name)||"Voc"}),a.jsxs("div",{className:"text-[11px] text-slate-500",children:[new Date(i.createdAt).toLocaleDateString("pt-BR")," ",new Date(i.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]}),a.jsx("div",{className:"mt-1",children:i.type==="text"?i.content:i.type==="image"||i.type==="gif"?"Imagem":i.type==="audio"?"udio":"Anexo"}),a.jsx("div",{className:"mt-1",children:a.jsx("button",{className:"text-[12px] text-red-600 hover:underline",onClick:()=>eu(i),children:"Remover favorito"})})]},i.id)}),Jd.length===0&&a.jsx("div",{className:"text-sm text-slate-500",children:"Nenhuma mensagem favoritada nesta conversa."})]}),Sa&&a.jsx("div",{className:"text-green-600 text-sm",children:Sa}),Zd&&a.jsx("div",{className:"text-red-600 text-sm",children:Zd})]})})]})]})}function Hw({message:e,mine:t,editingId:n,editText:r,setEditText:s,onStartEdit:o,onSave:l,onCancel:c}){return n===e.id?a.jsxs("div",{children:[a.jsx("textarea",{value:r,onChange:m=>s(m.target.value),className:"w-full border rounded px-2 py-1 text-sm text-slate-800",rows:2}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-blue-600 text-white text-xs hover:bg-blue-700",onClick:()=>l(e,r),children:"Salvar"}),a.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-slate-300 text-xs hover:bg-slate-50",onClick:()=>c(),children:"Cancelar"})]})]}):a.jsxs("div",{children:[a.jsx("div",{className:"whitespace-pre-wrap break-words",style:{overflowWrap:"anywhere",wordBreak:"break-word"},children:Ww(e.content||"")}),e.editedAt&&a.jsx("div",{className:"text-[10px] opacity-70",children:"(editado)"})]})}function Bu({read:e,title:t}){const n=e?"#ffffff":"#94a3b8",r=e?"rgba(0,0,0,0.35)":"none",s=2.2,o=e?3.2:0;return a.jsx("span",{title:t,"aria-label":t,className:"inline-flex items-center ml-1",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M7 13l-2 2 3 3 2-2-3-3z",fill:n,opacity:"0.0"}),e&&a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M1.5 13.5l4 4 7-7",stroke:r,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M8.5 13.5l4 4 9-9",stroke:r,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round"})]}),a.jsx("path",{d:"M1.5 13.5l4 4 7-7",stroke:n,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M8.5 13.5l4 4 9-9",stroke:n,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round"})]})})}function zu({url:e,name:t,size:n=28,status:r,showStatus:s=!1}){const[o,l]=u.useState(!1),c={position:"relative",width:n,height:n,display:"inline-block"},d={width:n,height:n,borderRadius:"50%",objectFit:"cover",flexShrink:0,display:"block"},m=(t||"U").trim().slice(0,2).toUpperCase(),x=(()=>{const D=String(r||"").toLowerCase();return D==="online"?"#16a34a":D==="busy"||D==="ocupado"?"#dc2626":D==="away"||D==="ausente"?"#f59e0b":"#94a3b8"})(),w=Math.max(8,Math.floor(n*.32)),k={position:"absolute",right:-1,bottom:-1,width:w,height:w,borderRadius:"50%",background:x,border:"2px solid rgba(255,255,255,0.95)",boxShadow:"0 0 0 1px rgba(15,23,42,0.08)"};return a.jsxs("span",{style:c,children:[e&&!o?a.jsx("img",{src:Ut(e),alt:t||"avatar",style:d,onError:()=>l(!0)}):a.jsx("div",{style:{...d,background:"#cbd5e1",color:"#334155",display:"grid",placeItems:"center",fontSize:Math.max(10,Math.floor(n*.42)),fontWeight:"bold"},children:m}),s&&a.jsx("span",{style:k})]})}function qw(){return a.jsx(w0,{})}function Qw(){const e=dr(),t=u.useMemo(()=>new URLSearchParams(e.search),[e.search]),[n,r]=u.useState(t.get("to")||""),[s]=u.useState(t.get("name")||""),[o,l]=u.useState("idle"),[c,d]=u.useState(""),[m,x]=u.useState({loading:!0,data:null,error:""}),[w,k]=u.useState({registered:!1}),[D,_]=u.useState({phase:"idle",reason:""}),[A,L]=u.useState(0),j=u.useRef(null),g=u.useRef(null),b=u.useRef(null);u.useEffect(()=>{(async()=>{try{const C=await q.get("/phone/me");x({loading:!1,data:C,error:""})}catch(C){x({loading:!1,data:null,error:C.message||"Falha ao carregar SIP"})}})()},[]),u.useEffect(()=>{const C=ne=>{var Z;return k({registered:!!((Z=ne==null?void 0:ne.detail)!=null&&Z.registered)})};window.addEventListener("sip:reg",C);try{k({registered:localStorage.getItem("sip_registered")==="1"})}catch{}return()=>window.removeEventListener("sip:reg",C)},[]),u.useEffect(()=>{q.post("/phone/me/status",{registered:!!w.registered}).catch(()=>{})},[w.registered]);function E(){R(),L(0),j.current=setInterval(()=>L(C=>C+1),1e3)}function R(){try{clearInterval(j.current)}catch{}j.current=null}async function U(){d("");const C=String(n||"").replace(/\D/g,"");if(C.length<2){d("Informe um nmero/ramal vlido");return}try{const ne=b.current||Dw();if(!ne){d("SIP no inicializado/registrado"),l("error");return}b.current=ne,l("calling"),_({phase:"progress",reason:""}),await ne.call(C,{onProgress:()=>_({phase:"progress",reason:""}),onAccepted:()=>{l("in-call"),_({phase:"accepted",reason:""}),E()},onEnded:()=>{l("ended"),_({phase:"ended",reason:""}),R()},onFailed:F=>{var ie;const Y=(F==null?void 0:F.response)&&(F.response.status_code||((ie=F.response)==null?void 0:ie.statusCode)),le=(F==null?void 0:F.cause)||(F==null?void 0:F.message)||"";l("error"),_({phase:"failed",reason:Y?`${Y} ${le}`.trim():le||"Falha SIP"}),R(),d(Y?`Falha SIP: ${Y} ${le||""}`.trim():"Falha SIP ou destino ocupado")},onTrack:F=>{try{g.current&&(g.current.srcObject=F)}catch{}}})||l("ended")}catch(ne){d(ne.message||"Falha ao iniciar chamada"),l("error")}}function $(){var C,ne;try{(ne=(C=b.current)==null?void 0:C.hangup)==null||ne.call(C)}catch{}l("ended"),R()}const V=(()=>{var ne,Z,F;return String(n||"").replace(/\D/g,"").length>=2&&!!w.registered&&!!((ne=m==null?void 0:m.data)!=null&&ne.hasPassword&&((Z=m==null?void 0:m.data)!=null&&Z.domain)&&((F=m==null?void 0:m.data)!=null&&F.extension))})();function B(C){var ne,Z;if(o==="in-call"||o==="calling")try{(Z=(ne=b.current)==null?void 0:ne.dtmf)==null||Z.call(ne,C)}catch{}else r(F=>(F||"")+String(C))}return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Telefonia"}),a.jsx("div",{className:"flex-1 p-4",children:a.jsxs("div",{className:"max-w-xl mx-auto bg-white/80 dark:bg-slate-800/70 backdrop-blur border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Discador"}),s&&a.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 mb-2",children:["Contato: ",a.jsx("span",{className:"font-medium",children:s})]}),a.jsx("div",{className:"mb-3",children:m.loading?a.jsx("div",{className:"text-xs text-slate-500",children:"Carregando configurao SIP..."}):m.error?a.jsx("div",{className:"p-2 rounded border border-red-300 bg-red-50 text-sm text-red-700",children:m.error}):!m.data||!m.data.hasPassword?a.jsx("div",{className:"p-2 rounded border border-yellow-300 bg-yellow-50 text-sm text-yellow-800",children:"Sua conta SIP ainda no est configurada. Solicite ao administrador para cadastrar domnio, ramal e senha."}):a.jsxs("div",{className:"p-2 rounded border border-green-300 bg-green-50 text-sm text-green-800",children:["Conta SIP configurada: ",a.jsx("span",{className:"font-medium",children:m.data.domain}),"  Ramal ",a.jsx("span",{className:"font-medium",children:m.data.extension})]})}),a.jsxs("div",{className:"mb-2 text-xs text-slate-600",children:["SIP registro: ",w.registered?"registrado":"no registrado"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{value:n,onChange:C=>r(C.target.value),placeholder:"Nmero/Ramal",className:"flex-1 border rounded px-3 py-2"}),a.jsx("button",{disabled:!V||o==="calling"||o==="in-call",className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",onClick:U,children:"Ligar"}),a.jsx("button",{disabled:!(o==="calling"||o==="in-call"),className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:$,children:"Desligar"})]}),c&&a.jsx("div",{className:"mt-2 text-sm text-red-600",children:c}),a.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 max-w-xs",children:[["1","2","3","4","5","6","7","8","9","*","0","#"].map(C=>a.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>B(C),children:C},C)),a.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50 col-span-2",onClick:()=>r(""),children:"Limpar"}),a.jsx("button",{className:"px-4 py-3 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>r(C=>String(C||"").slice(0,-1)),children:""})]}),a.jsxs("div",{className:"mt-4 text-xs text-slate-600 dark:text-slate-300",children:["Status: ",o," ",o==="in-call"&&`(${Math.floor(A/60).toString().padStart(2,"0")}:${(A%60).toString().padStart(2,"0")})`]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"text-xs mb-1 text-slate-500",children:"udio remoto"}),a.jsx("audio",{ref:g,autoPlay:!0,playsInline:!0})]})]})})]})}function Gw(){const e=ln(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,l]=u.useState(""),[c,d]=u.useState("Reunio"),[m,x]=u.useState(""),[w,k]=u.useState(!0),[D,_]=u.useState(""),[A,L]=u.useState(""),[j,g]=u.useState(""),[b,E]=u.useState(!1);u.useEffect(()=>{(async()=>{try{const B=await q.get("/meetings");n(B)}catch(B){l(B.message||"Falha ao carregar reunies")}finally{s(!1)}})()},[]);async function R(B){var C;(C=B==null?void 0:B.preventDefault)==null||C.call(B),l(""),E(!0);try{const ne=j.split(",").map(le=>le.trim()).filter(Boolean).map(le=>({email:le})),Z={title:c||"Reunio",description:m||void 0,isInstant:w,scheduledStart:!w&&D?new Date(D).toISOString():void 0,scheduledEnd:!w&&A?new Date(A).toISOString():void 0,participants:ne},F=await q.post("/meetings",Z),Y=await q.get("/meetings");n(Y),d("Reunio"),x(""),k(!0),_(""),L(""),g(""),F!=null&&F.code&&(F!=null&&F.isInstant)&&e(`/telefonia?to=${F.code}&name=${encodeURIComponent(F.title)}`)}catch(ne){l(ne.message||"Falha ao criar reunio")}finally{E(!1)}}async function U(B){const C=prompt("Informe e-mails separados por vrgula:");if(C)try{const ne=C.split(",").map(F=>F.trim()).filter(Boolean).map(F=>({email:F}));await q.post(`/meetings/${B}/participants`,{participants:ne});const Z=await q.get("/meetings");n(Z)}catch(ne){alert(ne.message||"Falha ao adicionar convidados")}}function $(B,C){e(`/telefonia?to=${B}&name=${encodeURIComponent(C||"Reunio")}`)}function V(B){try{navigator.clipboard.writeText(B),alert("Copiado!")}catch{alert(B)}}return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Reunies"}),a.jsxs("div",{className:"flex-1 p-4 space-y-6",children:[a.jsxs("form",{onSubmit:R,className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Nova reunio"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("label",{className:"flex flex-col text-sm",children:[a.jsx("span",{className:"text-slate-600 mb-1",children:"Ttulo"}),a.jsx("input",{value:c,onChange:B=>d(B.target.value),className:"border rounded px-3 py-2"})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm mt-6 md:mt-0",children:[a.jsx("input",{type:"checkbox",checked:w,onChange:B=>k(B.target.checked)}),"Instantnea"]}),!w&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"flex flex-col text-sm",children:[a.jsx("span",{className:"text-slate-600 mb-1",children:"Incio"}),a.jsx("input",{type:"datetime-local",value:D,onChange:B=>_(B.target.value),className:"border rounded px-3 py-2"})]}),a.jsxs("label",{className:"flex flex-col text-sm",children:[a.jsx("span",{className:"text-slate-600 mb-1",children:"Fim"}),a.jsx("input",{type:"datetime-local",value:A,onChange:B=>L(B.target.value),className:"border rounded px-3 py-2"})]})]}),a.jsxs("label",{className:"md:col-span-2 flex flex-col text-sm",children:[a.jsx("span",{className:"text-slate-600 mb-1",children:"Descrio (opcional)"}),a.jsx("textarea",{value:m,onChange:B=>x(B.target.value),className:"border rounded px-3 py-2",rows:2})]}),a.jsxs("label",{className:"md:col-span-2 flex flex-col text-sm",children:[a.jsx("span",{className:"text-slate-600 mb-1",children:"Convidados (e-mails, separados por vrgula)"}),a.jsx("input",{value:j,onChange:B=>g(B.target.value),className:"border rounded px-3 py-2",placeholder:"exemplo@dominio.com, outro@dominio.com"})]})]}),a.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[a.jsx("button",{type:"submit",disabled:b,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:b?"Criando...":"Criar"}),o&&a.jsx("span",{className:"text-sm text-red-600",children:o})]})]}),a.jsxs("div",{className:"max-w-4xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Minhas reunies"}),r?a.jsx("div",{className:"text-sm text-slate-600",children:"Carregando..."}):t.length===0?a.jsx("div",{className:"text-sm text-slate-600",children:"Nenhuma reunio encontrada"}):a.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(B=>a.jsxs("li",{className:"py-3 flex items-center gap-3 justify-between",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs("div",{className:"font-medium truncate",children:[B.title," ",a.jsxs("span",{className:"text-xs text-slate-500",children:["#",B.code]})]}),a.jsxs("div",{className:"text-xs text-slate-500 truncate",children:[B.isInstant?"Instantnea":"Agendada",B.scheduledStart?`  ${new Date(B.scheduledStart).toLocaleString()}`:""]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>$(B.code,B.title),children:"Entrar"}),a.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>U(B.id),children:"Convidar"}),a.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>e(`/reunioes/${B.id}`),children:"Detalhes"}),a.jsx("button",{className:"px-2 py-1.5 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50",onClick:()=>V(B.code),children:"Copiar cdigo"})]})]},B.id))})]})]})]})}function Kw(){const{id:e}=Jm(),t=ln(),[n,r]=u.useState(null),[s,o]=u.useState(""),[l,c]=u.useState(!0);u.useEffect(()=>{(async()=>{try{const x=await q.get(`/meetings/${e}`);r(x)}catch(x){o(x.message||"Falha ao carregar")}finally{c(!1)}})()},[e]);function d(x){try{navigator.clipboard.writeText(x)}catch{}}async function m(){const x=prompt("Informe e-mails separados por vrgula:");if(x)try{const w=x.split(",").map(D=>D.trim()).filter(Boolean).map(D=>({email:D}));await q.post(`/meetings/${e}/participants`,{participants:w});const k=await q.get(`/meetings/${e}`);r(k)}catch(w){alert(w.message||"Falha ao adicionar")}}return l?a.jsx("div",{className:"p-4",children:"Carregando..."}):s?a.jsx("div",{className:"p-4 text-red-600",children:s}):n?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Detalhes da reunio"}),a.jsxs("div",{className:"flex-1 p-4 space-y-4",children:[a.jsxs("div",{className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[a.jsxs("div",{className:"text-xl font-semibold",children:[n.title," ",a.jsxs("span",{className:"text-xs text-slate-500",children:["#",n.code]})]}),a.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[n.isInstant?"Instantnea":"Agendada",n.scheduledStart?`  ${new Date(n.scheduledStart).toLocaleString()}`:""]}),n.description&&a.jsx("div",{className:"mt-2 text-sm",children:n.description}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:()=>t(`/telefonia?to=${n.code}&name=${encodeURIComponent(n.title)}`),children:"Entrar"}),a.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:()=>d(n.code),children:"Copiar cdigo"}),a.jsx("button",{className:"px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600",onClick:m,children:"Convidar"})]})]}),a.jsxs("div",{className:"max-w-3xl bg-white/80 dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[a.jsx("div",{className:"font-semibold mb-2",children:"Participantes"}),a.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.participants.map(x=>a.jsxs("li",{className:"py-2 flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:x.name||x.email}),a.jsx("div",{className:"text-xs text-slate-500",children:x.email})]}),a.jsx("div",{className:"flex items-center gap-2",children:x.inviteToken&&a.jsx("button",{className:"px-2 py-1 text-xs rounded border border-slate-300 dark:border-slate-600",onClick:()=>d(`${window.location.origin}/join/${x.inviteToken}`),children:"Copiar link"})})]},x.id))})]})]})]}):a.jsx("div",{className:"p-4",children:"No encontrado"})}const Zw="http://localhost:3001/api";async function Jw(e){const t=await fetch(e);if(!t.ok)throw new Error(await t.text());return t.json()}function Yw(){const{token:e}=Jm();ln();const[t,n]=u.useState(null),[r,s]=u.useState("");if(u.useEffect(()=>{(async()=>{try{const d=await Jw(`${Zw}/meetings/invite/${e}`);n(d)}catch(d){s(d.message||"Convite invlido")}})()},[e]),r)return a.jsxs("div",{className:"p-6 max-w-xl mx-auto text-center",children:[a.jsx("div",{className:"text-xl font-semibold mb-2",children:"Convite invlido"}),a.jsx("div",{className:"text-slate-600",children:String(r)})]});if(!t)return a.jsx("div",{className:"p-6 max-w-xl mx-auto text-center",children:"Carregando..."});const{meeting:o,participant:l}=t,c=`/telefonia?to=${o.code}&name=${encodeURIComponent(o.title)}`;return a.jsx("div",{className:"p-6 max-w-xl mx-auto",children:a.jsxs("div",{className:"bg-white/80 border border-slate-200 rounded-xl p-6 shadow-sm",children:[a.jsx("div",{className:"text-xl font-semibold",children:"Convite para reunio"}),a.jsx("div",{className:"mt-2 text-slate-700",children:o.title}),o.scheduledStart&&a.jsx("div",{className:"text-sm text-slate-500",children:new Date(o.scheduledStart).toLocaleString()}),a.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:["Convidado: ",l.name||l.email||"Convidado"]}),a.jsxs("div",{className:"mt-6 flex gap-3",children:[a.jsx("a",{href:c,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Abrir no app"}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.code).then(()=>alert("Cdigo copiado"))},className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",children:"Copiar cdigo"})]}),a.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Se necessrio, faa login para entrar."})]})})}function Xw(){const e=ln(),[t,n]=u.useState([]),[r,s]=u.useState(""),[o,l]=u.useState(!0),[c,d]=u.useState("");u.useEffect(()=>{(async()=>{try{const x=await q.get("/users/all");n(x)}catch(x){d(x.message||"Falha ao carregar contatos")}finally{l(!1)}})()},[]);const m=t.filter(x=>(x.name+" "+(x.email||"")).toLowerCase().includes(r.toLowerCase()));return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"px-4 py-3 sticky top-0 z-10 border-b border-slate-200/70 bg-white/70 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 font-medium",children:"Contatos"}),a.jsx("div",{className:"flex-1 p-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto bg-white/80 dark:bg-slate-800/70 backdrop-blur border border-slate-200/60 dark:border-slate-700/60 rounded-xl p-4 shadow-sm",children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsx("input",{value:r,onChange:x=>s(x.target.value),placeholder:"Buscar por nome ou e-mail",className:"flex-1 border rounded px-3 py-2"})}),o?a.jsx("div",{className:"text-sm text-slate-600",children:"Carregando..."}):c?a.jsx("div",{className:"text-sm text-red-600",children:c}):a.jsxs("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[m.map(x=>a.jsxs("li",{className:"py-2 flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[x.avatarUrl?a.jsx("img",{src:Ut(x.avatarUrl),alt:x.name,className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-300"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:x.name}),a.jsx("div",{className:"text-xs text-slate-500 truncate",children:x.email})]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[x.phone&&a.jsx("span",{className:"text-xs text-slate-500 hidden md:inline",children:x.phone}),a.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700/60",onClick:()=>{const w=new URLSearchParams;x.phone&&w.set("to",x.phone),w.set("name",x.name),w.set("id",x.id),e(`/telefonia?${w.toString()}`)},children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:a.jsx("path",{d:"M2.25 6.75c0-1.24 1.01-2.25 2.25-2.25h3c.97 0 1.8.62 2.1 1.54l.86 2.58a2.25 2.25 0 0 1-.57 2.31l-1.21 1.21a12.06 12.06 0 0 0 4.88 4.88l1.21-1.21a2.25 2.25 0  1  2.31-.57l2.58.86c.92.3 1.54 1.13 1.54 2.1v3c0 1.24-1.01 2.25-2.25 2.25H18c-8.28 0-15-6.72-15-15v-3Z"})}),"Ligar"]})]})]},x.id)),m.length===0&&a.jsx("li",{className:"py-6 text-sm text-slate-500 text-center",children:"Nenhum contato encontrado"})]})]})})]})}function e1(){var ka,Mn,Na,xs;const e=Ms(),[t,n]=u.useState("usuarios"),[r,s]=u.useState(""),[o,l]=u.useState([]),[c,d]=u.useState(""),[m,x]=u.useState(""),[w,k]=u.useState(""),[D,_]=u.useState(""),[A,L]=u.useState(""),[j,g]=u.useState(!1),[b,E]=u.useState(""),[R,U]=u.useState(null),[$,V]=u.useState(!1),[B,C]=u.useState(""),[ne,Z]=u.useState(""),F=f=>(f||"").replace(/\D/g,""),Y=f=>{const v=F(f).slice(0,11);return v.length<=2?v:v.length<=6?`(${v.slice(0,2)}) ${v.slice(2)}`:v.length===10?`(${v.slice(0,2)}) ${v.slice(2,6)}-${v.slice(6)}`:v.length>=11?`(${v.slice(0,2)}) ${v.slice(2,7)}-${v.slice(7)}`:v},[le,ie]=u.useState([]),[Ce,z]=u.useState(""),[W,X]=u.useState(null),[O,ae]=u.useState([]),[ve,pe]=u.useState(""),[De,ue]=u.useState(!1),[ye,ot]=u.useState(""),[kt,Hr]=u.useState([]),[Ro,Xs]=u.useState(!1),[un,ea]=u.useState(null),[fr,_n]=u.useState(""),[Ao,Rn]=u.useState(!1),[Qt,Lo]=u.useState(null);function K(f,v="info",T=3e3){Lo({message:f,type:v});try{T&&setTimeout(()=>Lo(null),T)}catch{}}const Gt=u.useCallback(f=>{if(!f)return"";try{return new Date(f).toLocaleString("pt-BR")}catch{return f}},[]),Po=u.useCallback(f=>{const v=Number(f);if(!Number.isFinite(v)||v<0)return"";if(v===0)return"0 B";const T=["B","KB","MB","GB","TB"],G=Math.min(T.length-1,Math.floor(Math.log(v)/Math.log(1024))),te=v/Math.pow(1024,G);return`${te>=10?te.toFixed(0):te.toFixed(1)} ${T[G]}`},[]),[ta,Io]=u.useState(""),[$i,Bi]=u.useState(""),[se,Qe]=u.useState(""),[ht,Nt]=u.useState(""),[hr,qr]=u.useState(""),[Qr,na]=u.useState(!1),[ra,sa]=u.useState(!1),[pr,Gr]=u.useState(!1),[Kr,Zr]=u.useState([]),[mr,Jr]=u.useState(null),[Yr,aa]=u.useState(""),[oa,la]=u.useState(!1),[gr,To]=u.useState(""),Fo=u.useRef(null),An=u.useRef(null),xr=u.useMemo(()=>({autoEnabled:!1,time:"02:00",retentionDays:7,lastAutoRunAt:null,lastManualRunAt:null,lastManualResult:null,lastAutoResult:null,lastRestoreAt:null,lastRestoreName:null,lastRestoreActor:null}),[]),[Oo,ia]=u.useState([]),[Oe,Ln]=u.useState(xr),[vr,cn]=u.useState(!1),[yr,Xr]=u.useState(!1),[ua,es]=u.useState(""),[ts,ns]=u.useState(""),[Pn,rs]=u.useState(""),[ca,ss]=u.useState(!1),[Uo,pt]=u.useState(()=>{try{return localStorage.getItem("chat_bg")||"default"}catch{return"default"}}),[ee,Mo]=u.useState(""),[dn,as]=u.useState(""),[lt,os]=u.useState("");function St(f,v){if(!(typeof window>"u"))try{const T=Array.isArray(f)?f:[];if(v){const G=T.find(te=>te.id===v);if(G!=null&&G.url){localStorage.setItem("notif_sound_url",G.url),window.dispatchEvent(new Event("chat:alertSoundUpdated"));return}}localStorage.removeItem("notif_sound_url"),window.dispatchEvent(new Event("chat:alertSoundUpdated"))}catch{}}async function ls({silent:f}={}){try{const v=await q.get("/admin/config");Qe((v==null?void 0:v.chatIconUrl)||""),Nt((v==null?void 0:v.chatWallpaperUrl)||""),qr((v==null?void 0:v.loginLogoUrl)||"");const T=Array.isArray(v==null?void 0:v.alertSounds)?v.alertSounds:[];Zr(T),Jr((v==null?void 0:v.activeAlertSoundId)||null),St(T,(v==null?void 0:v.activeAlertSoundId)||null)}catch(v){f||K(v.message||"Falha ao carregar configuraes","error")}}u.useEffect(()=>{try{const f=localStorage.getItem("chat_icon");f&&(Io(f.startsWith("data:")?f:""),Bi(f.startsWith("data:")?"":f))}catch{}(async()=>{try{const f=await(await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+`/admin/config/public?_=${Date.now()}`,{cache:"no-store"})).json();f!=null&&f.chatIconUrl&&Qe(f.chatIconUrl),f!=null&&f.chatWallpaperUrl&&Nt(f.chatWallpaperUrl),Object.prototype.hasOwnProperty.call(f||{},"loginLogoUrl")&&qr((f==null?void 0:f.loginLogoUrl)||"")}catch{}})(),(async()=>{try{await ls({silent:!0})}catch{}})()},[]);async function fn(f){if(!f)return;const v=new FormData;v.append("icon",f);try{const T=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/icon",{method:"POST",headers:{Authorization:`Bearer ${Me()||""}`},body:v});if(!T.ok){const te=await T.text();throw new Error(te||"Falha no upload")}const G=await T.json();if(G!=null&&G.chatIconUrl){Qe(G.chatIconUrl),K("cone global atualizado","success");try{localStorage.setItem("chat_icon",G.chatIconUrl),window.dispatchEvent(new Event("chat:iconUpdated"))}catch{}}}catch(T){K(T.message||"Falha ao enviar cone","error")}}async function $o(f){if(!f)return;const v=new FormData;v.append("wallpaper",f);try{const T=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/wallpaper",{method:"POST",headers:{Authorization:`Bearer ${Me()||""}`},body:v});if(!T.ok){const te=await T.text();throw new Error(te||"Falha no upload")}const G=await T.json();if(G!=null&&G.chatWallpaperUrl){Nt(G.chatWallpaperUrl),document.documentElement.style.setProperty("--chat-wallpaper",`url('${G.chatWallpaperUrl}')`);try{localStorage.setItem("chat_wallpaper",G.chatWallpaperUrl),window.dispatchEvent(new Event("chat:wallpaperUpdated"))}catch{}K("Papel de parede global atualizado","success")}}catch(T){K(T.message||"Falha ao enviar papel de parede","error")}}async function is(f){var T;if(!f)return;if(!((T=f.type)!=null&&T.startsWith("image/"))){K("Selecione uma imagem","error");return}na(!0);const v=new FormData;v.append("loginLogo",f);try{const G=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/login-logo",{method:"POST",headers:{Authorization:`Bearer ${Me()||""}`},body:v});if(!G.ok){const xe=await G.text();throw new Error(xe||"Falha no upload")}const te=await G.json();qr((te==null?void 0:te.loginLogoUrl)||""),K("Logo do login atualizada","success")}catch(G){K(G.message||"Falha ao enviar logo do login","error")}finally{na(!1)}}async function us(){Gr(!0);try{const f=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Me()||""}`},body:JSON.stringify({loginLogoUrl:hr||null})});if(!f.ok){const v=await f.text();throw new Error(v||"Falha ao salvar")}K("Logo do login salva","success")}catch(f){K(f.message||"Falha ao salvar logo do login","error")}finally{Gr(!1)}}async function Kt(){try{if(!ht){K("Nenhum papel de parede para salvar","error");return}const f=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Me()||""}`},body:JSON.stringify({chatWallpaperUrl:ht})});if(!f.ok){const v=await f.text();throw new Error(v||"Falha ao salvar")}K("Papel de parede salvo para todos","success")}catch(f){K(f.message||"Falha ao salvar papel de parede","error")}}async function da(){try{if(!(typeof window<"u"?window.confirm("Excluir Logo da tela de login?"):!0))return;sa(!0);const v=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/login-logo",{method:"DELETE",headers:{Authorization:`Bearer ${Me()||""}`}});if(!v.ok){const T=await v.text();throw new Error(T||"Falha ao excluir")}qr(""),K("Logo do login excluda","success")}catch(f){K(f.message||"Falha ao excluir logo do login","error")}finally{sa(!1)}}async function cs(){try{if(!(typeof window<"u"?window.confirm("Excluir papel de parede global?"):!0))return;const v=await fetch((typeof window<"u"?`${window.location.origin}/api`:"http://localhost:3000/api")+"/admin/config/wallpaper",{method:"DELETE",headers:{Authorization:`Bearer ${Me()||""}`}});if(!v.ok){const T=await v.text();throw new Error(T||"Falha ao excluir")}Nt("");try{localStorage.removeItem("chat_wallpaper"),document.documentElement.style.removeProperty("--chat-wallpaper"),window.dispatchEvent(new Event("chat:wallpaperUpdated"))}catch{}K("Papel de parede global excludo","success")}catch(f){K(f.message||"Falha ao excluir papel de parede","error")}}const Et=u.useCallback(async()=>{cn(!0);try{const f=await q.get("/admin/backup");ia(Array.isArray(f==null?void 0:f.backups)?f.backups:[]);const v={...xr,...(f==null?void 0:f.settings)||{}};Ln(v)}catch(f){K(f.message||"Falha ao carregar backups","error")}finally{cn(!1)}},[xr]);async function Bo(){Xr(!0);try{await q.post("/admin/backup/run",{}),K("Backup criado com sucesso","success"),await Et()}catch(f){K(f.message||"Falha ao executar backup","error")}finally{Xr(!1)}}async function zi(f){if(!f)return;let v=!0;if(typeof window<"u"&&(v=window.confirm(`Restaurar o backup "${f}"? Esta ao substituir mensagens e arquivos atuais.`)),!!v){es(f);try{await q.post("/admin/backup/restore",{name:f,confirm:!0}),K("Backup restaurado com sucesso","success")}catch(T){K(T.message||"Falha ao restaurar backup","error")}finally{es(""),await Et()}}}async function fa(f){if(!f)return;let v=!0;if(typeof window<"u"&&(v=window.confirm(`Excluir backup "${f}"?`)),!!v){ns(f);try{await q.delete(`/admin/backup/${encodeURIComponent(f)}`),K("Backup excludo","success")}catch(T){K(T.message||"Falha ao excluir backup","error")}finally{ns(""),await Et()}}}async function ds(f){if(f){rs(f);try{const v=await fetch(`${Vt}/admin/backup/download/${encodeURIComponent(f)}`,{headers:{Authorization:`Bearer ${Me()||""}`}});if(!v.ok){const xe=await v.text();throw new Error(xe||"Falha ao preparar download")}const T=await v.blob(),G=window.URL.createObjectURL(T),te=document.createElement("a");te.href=G,te.download=`${f}.zip`,document.body.appendChild(te),te.click(),document.body.removeChild(te),window.URL.revokeObjectURL(G)}catch(v){K(v.message||"Falha ao baixar backup","error")}finally{rs("")}}}async function zo(f){var v;(v=f==null?void 0:f.preventDefault)==null||v.call(f),ss(!0);try{const T={autoEnabled:Oe.autoEnabled,time:Oe.time,retentionDays:Oe.retentionDays},G=await q.post("/admin/backup/settings",T),te={...xr,...(G==null?void 0:G.settings)||T};Ln(te),K("Configuraes de backup salvas","success")}catch(T){K(T.message||"Falha ao salvar configuraes de backup","error")}finally{ss(!1)}}u.useEffect(()=>{t==="Configuracoes"&&Et()},[t,Et]);function Vo(){var f,v;try{(v=(f=Fo.current)==null?void 0:f.click)==null||v.call(f)}catch{}}async function Vi(f){var T,G;const v=(G=(T=f==null?void 0:f.target)==null?void 0:T.files)==null?void 0:G[0];if(v){if(v.type&&!v.type.startsWith("audio/")){K("Selecione um arquivo de udio","error"),f!=null&&f.target&&(f.target.value="");return}la(!0);try{const te=new FormData;te.append("sound",v);const xe=(Yr||"").trim();xe&&te.append("name",xe);const Ie=await q.upload("/admin/config/alert-sounds",te),Sa=Array.isArray(Ie==null?void 0:Ie.alertSounds)?Ie.alertSounds:[];Zr(Sa),Jr((Ie==null?void 0:Ie.activeAlertSoundId)||null),St(Sa,(Ie==null?void 0:Ie.activeAlertSoundId)||null),xe&&aa(""),K("Som enviado","success")}catch(te){K(te.message||"Falha ao enviar som","error")}finally{la(!1),f!=null&&f.target&&(f.target.value="")}}}async function Wo(f){try{const v=await q.post(`/admin/config/alert-sounds/${f||"none"}/activate`,{}),T=Array.isArray(v==null?void 0:v.alertSounds)?v.alertSounds:[];Zr(T),Jr((v==null?void 0:v.activeAlertSoundId)||null),St(T,(v==null?void 0:v.activeAlertSoundId)||null),K(f?"Som de alerta atualizado":"Bip padro ativado","success")}catch(v){K(v.message||"Falha ao atualizar som de alerta","error")}}async function Wi(f){if(f)try{if(typeof window<"u"&&!window.confirm("Excluir este som de alerta?"))return;To(f);const v=await q.del(`/admin/config/alert-sounds/${f}`),T=Array.isArray(v==null?void 0:v.alertSounds)?v.alertSounds:[];Zr(T),Jr((v==null?void 0:v.activeAlertSoundId)||null),St(T,(v==null?void 0:v.activeAlertSoundId)||null),K("Som excludo","success")}catch(v){K(v.message||"Falha ao excluir som","error")}finally{To("")}}function wr(f){var v,T;if(!f){K("Som indisponvel","error");return}try{(T=(v=An.current)==null?void 0:v.pause)==null||T.call(v),An.current=new Audio(f),An.current.onended=()=>{An.current=null},An.current.play().catch(()=>{K("No foi possvel reproduzir o som","error")})}catch{K("No foi possvel reproduzir o som","error")}}async function Hi(f){var v;(v=f==null?void 0:f.preventDefault)==null||v.call(f);try{const T=(ee||"").trim(),G=(dn||"").trim(),te=(lt||"").trim();if(!T){K("Informe a senha atual","error");return}if(G.length<6){K("Nova senha deve ter 6+ caracteres","error");return}if(G!==te){K("Confirmao no confere","error");return}await q.post("/users/me/password",{current:T,password:G}),Mo(""),as(""),os(""),K("Senha do admin alterada","success")}catch(T){K(T.message||"Falha ao alterar senha","error")}}u.useEffect(()=>{(async()=>{try{const f=await q.get("/users");l(Array.isArray(f)?f:[])}catch(f){s(v=>v?v+"  Usurios: "+(f.message||"falha"):"Usurios: "+(f.message||"falha"))}})()},[]),u.useEffect(()=>{(async()=>{try{const f=await q.get("/groups/all?includeDMs=false");ie(Array.isArray(f)?f:[])}catch(f){s(v=>v?v+"  Grupos: "+(f.message||"falha"):"Grupos: "+(f.message||"falha"))}})()},[]);const fs=u.useMemo(()=>{const f=b.trim().toLowerCase();return f?o.filter(v=>`${v.name} ${v.email}`.toLowerCase().includes(f)):o},[o,b]),hs=u.useMemo(()=>o.filter(f=>!O.some(v=>v.userId===f.id)),[o,O]),Ho=u.useMemo(()=>{const f=ve.trim().toLowerCase();return f?hs.filter(v=>`${v.name} ${v.email}`.toLowerCase().includes(f)):hs},[hs,ve]);async function In(){try{const f=await q.get("/users");l(Array.isArray(f)?f:[])}catch{}}async function hn(f){var xe;(xe=f==null?void 0:f.preventDefault)==null||xe.call(f),s("");const v=Y(D),T=F(v),G=(A||"").trim();if(T&&(T.length<10||T.length>11))return s("Telefone invlido (use DDD + nmero).");const te={name:c.trim(),email:m.trim(),password:w,isAdmin:!!j,phone:T?v:null,address:G||null};if(!te.name||te.name.length<2)return s("Informe um nome vlido.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(te.email))return s("E-mail invlido.");if(!te.password||te.password.length<6)return s("Senha com 6+ caracteres.");try{await q.post("/users",te),await In(),d(""),x(""),k(""),_(""),L(""),g(!1)}catch(Ie){s(Ie.message||"Falha ao criar usurio")}}function qi(f){U({...f}),C("")}function ps(){$||(U(null),C(""))}async function Qi(f){var v;if((v=f==null?void 0:f.preventDefault)==null||v.call(f),!!R){V(!0),s("");try{const T=Y(R.phone||""),G=F(T);if(G&&(G.length<10||G.length>11))throw new Error("Telefone invlido (use DDD + nmero).");const te={name:(R.name||"").trim(),email:(R.email||"").trim(),phone:G?T:null,address:(R.address||"").trim()||null,isAdmin:!!R.isAdmin,isBlocked:!!R.isBlocked};if(await q.patch(`/users/${R.id}`,te),B&&B.trim().length>=6)if(e!=null&&e.id&&R.id===e.id){if(!ne.trim())throw new Error("Informe a senha atual para alterar a sua senha.");await q.post("/users/me/password",{current:ne.trim(),password:B.trim()})}else await q.post(`/users/${R.id}/password`,{password:B.trim()});await In(),ps()}catch(T){s(T.message||"Falha ao salvar usurio")}finally{V(!1)}}}async function qo(f){if(confirm("Excluir este usurio?"))try{await q.del(`/users/${f}`),l(v=>v.filter(T=>T.id!==f)),K("Usurio excludo","success")}catch(v){K(v.message||"Falha ao excluir","error")}}function Qo(f){ea(f.id),_n("")}function ha(){ea(null),_n("")}async function we(){if(!(!un||!fr)){Rn(!0);try{await q.post(`/groups/${fr}/members`,{userId:un}),(W==null?void 0:W.id)===fr&&await Sr(),ha(),K("Usurio adicionado ao grupo","success")}catch(f){K(f.message||"Falha ao adicionar ao grupo","error")}finally{Rn(!1)}}}async function Gi(f){var T;(T=f==null?void 0:f.preventDefault)==null||T.call(f),s("");const v=(Ce||"").trim();if(v.length<2)return s("Informe um nome de grupo com 2+ caracteres.");try{await q.post("/groups",{name:v});const G=await q.get("/groups/all?includeDMs=false");ie(Array.isArray(G)?G:[]),z("")}catch(G){s(G.message||"Falha ao criar grupo")}}const[pa,Zt]=u.useState([]),[br,ms]=u.useState(""),[Ki,Go]=u.useState(!1),[Jt,ma]=u.useState(""),[pn,ga]=u.useState(""),[xa,jr]=u.useState(""),[va,gs]=u.useState(""),[Ko,kr]=u.useState(""),[Tn,Fn]=u.useState(!1),[Ct,Zo]=u.useState(null),[me,Nr]=u.useState({domain:"",extension:"",password:""});async function mn(){Go(!0),ma("");try{const f=await q.get("/phone");Zt(Array.isArray(f)?f:[])}catch(f){ma(f.message||"Falha ao carregar contas SIP")}finally{Go(!1)}}u.useEffect(()=>{(async()=>{try{await mn()}catch{}})()},[]);async function Jo(f){var v;(v=f==null?void 0:f.preventDefault)==null||v.call(f),Fn(!0);try{const T=(pn||"").trim(),G=(xa||"").trim(),te=(va||"").trim(),xe=(Ko||"").trim();if(!T||!G||!te){K("Informe usurio, domnio e ramal.","error");return}await q.patch(`/phone/${T}`,{domain:G,extension:te,...xe?{password:xe}:{}}),await mn(),ga(""),jr(""),gs(""),kr(""),K("Conta SIP salva","success")}catch(T){K(T.message||"Falha ao salvar conta SIP","error")}finally{Fn(!1)}}function Zi(f){Zo(f.user.id),Nr({domain:f.domain||"",extension:f.extension||"",password:""})}function ya(){Zo(null),Nr({domain:"",extension:"",password:""})}async function Yo(){if(Ct){Fn(!0);try{const f={domain:(me.domain||"").trim(),extension:(me.extension||"").trim()};if(!f.domain||!f.extension){K("Domnio e ramal so obrigatrios.","error");return}(me.password||"").trim()&&(f.password=(me.password||"").trim()),await q.patch(`/phone/${Ct}`,f),await mn(),ya(),K("Conta SIP atualizada","success")}catch(f){K(f.message||"Falha ao atualizar conta SIP","error")}finally{Fn(!1)}}}async function Xo(f){try{await q.post(`/phone/${f}/disconnect`,{}),await mn(),K("Desconectado","success")}catch(v){K(v.message||"Falha ao desconectar","error")}}async function wa(f){try{if(typeof window<"u"&&!window.confirm("Excluir ramal/conta SIP deste usurio?"))return;await q.delete(`/phone/${f}`),await mn(),K("Ramal excludo","success")}catch(v){K(v.message||"Falha ao excluir ramal","error")}}async function el(f){X(f),pe(""),ot(""),Hr([]);try{const v=await q.get(`/groups/${f.id}/members`);ae(Array.isArray(v)?v:[])}catch(v){ae([]),s(v.message||"Falha ao carregar membros")}}async function tl(f){if(f)try{if((W==null?void 0:W.id)===f){if(O.length>0){K("Remova todos os membros antes de excluir o grupo.","error");return}}else try{const v=await q.get(`/groups/${f}/members`);if(Array.isArray(v)&&v.length>0){K("Remova todos os membros antes de excluir o grupo.","error");return}}catch{}if(typeof window<"u"&&!window.confirm("Excluir este grupo? Esta ao no pode ser desfeita."))return;await q.delete(`/groups/${f}`),ie(v=>v.filter(T=>T.id!==f)),(W==null?void 0:W.id)===f&&(X(null),ae([])),K("Grupo excludo","success")}catch(v){K(v.message||"Falha ao excluir grupo","error")}}async function nl(f){if(!(f!=null&&f.id))return;const v=(f.name||"").trim(),G=((typeof window<"u"?window.prompt("Novo nome do grupo:",v):v)||"").trim();if(!(!G||G===v))try{await q.patch(`/groups/${f.id}`,{name:G}),ie(te=>te.map(xe=>xe.id===f.id?{...xe,name:G}:xe)),(W==null?void 0:W.id)===f.id&&X(te=>({...te,name:G})),K("Grupo renomeado","success")}catch(te){K(te.message||"Falha ao renomear grupo","error")}}async function Sr(){if(W)try{const f=await q.get(`/groups/${W.id}/members`);ae(Array.isArray(f)?f:[])}catch{}}async function rl(){if(!(!W||!ye)){ue(!0);try{await q.post(`/groups/${W.id}/members`,{userId:ye}),ot(""),await Sr()}catch(f){K(f.message||"Falha ao adicionar membro","error")}finally{ue(!1)}}}async function On(f){if(W)try{await q.delete(`/groups/${W.id}/members/${f}`),ae(v=>v.filter(T=>T.userId!==f))}catch(v){K(v.message||"Falha ao remover","error")}}function Un(f){Hr(v=>v.includes(f)?v.filter(T=>T!==f):[...v,f])}function ba(){Hr(O.map(f=>f.userId))}function ja(){Hr([])}async function Er(){if(!(!W||!kt.length)&&!(typeof window<"u"&&!window.confirm(`Remover ${kt.length} membro(s) de ${W.name}?`))){Xs(!0);try{const f=kt.map(te=>q.delete(`/groups/${W.id}/members/${te}`)),v=await Promise.allSettled(f),T=v.filter(te=>te.status==="fulfilled").length,G=v.length-T;T&&await Sr(),ja(),G?K(`Removidos: ${T}. Falhas: ${G}.`,"error"):K(`Removidos: ${T}.`,"success")}catch(f){K(f.message||"Falha ao remover seleo","error")}finally{Xs(!1)}}}return a.jsxs("div",{className:"p-4 overflow-auto h-full",children:[Qt&&a.jsx("div",{className:`fixed bottom-4 right-4 z-50 px-4 py-2 rounded shadow border text-sm ${Qt.type==="success"?"bg-green-50 text-green-800 border-green-200":Qt.type==="error"?"bg-red-50 text-red-800 border-red-200":"bg-slate-50 text-slate-800 border-slate-200"}`,children:Qt.message}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Admin"}),a.jsx("div",{className:"mt-3 border-b border-slate-200",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>n("usuarios"),className:`px-2 py-2 -mb-px border-b-2 ${t==="usuarios"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Usurios"}),a.jsx("button",{onClick:()=>n("grupos"),className:`px-2 py-2 -mb-px border-b-2 ${t==="grupos"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Grupos"}),a.jsx("button",{onClick:()=>n("telefonia"),className:`px-2 py-2 -mb-px border-b-2 ${t==="telefonia"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Telefonia"}),a.jsx("button",{onClick:()=>n("Configuracoes"),className:`px-2 py-2 -mb-px border-b-2 ${t==="Configuracoes"?"border-blue-600 text-blue-700":"border-transparent text-slate-600 hover:text-slate-800"}`,children:"Configuraes"})]})}),r&&a.jsx("div",{className:"mt-3 rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2",children:r}),t==="usuarios"&&a.jsxs("section",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[a.jsxs("form",{onSubmit:hn,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2",children:[a.jsx("h4",{className:"font-medium",children:"Novo Usurio"}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome",value:c,onChange:f=>d(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"E-mail",value:m,onChange:f=>x(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Telefone (opcional)",value:D,onChange:f=>_(Y(f.target.value))}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Endereo (opcional)",value:A,onChange:f=>L(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha",type:"password",value:w,onChange:f=>k(f.target.value)}),a.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:j,onChange:f=>g(f.target.checked)})," Admin"]}),a.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Criar"})]}),a.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium",children:"Lista"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar...",value:b,onChange:f=>E(f.target.value)}),a.jsx("button",{className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:In,children:"Atualizar"})]})]}),fs.length?a.jsx("ul",{className:"mt-2 divide-y divide-slate-200",children:fs.map(f=>a.jsxs("li",{className:"py-2 flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:f.name}),a.jsx("div",{className:"text-xs text-slate-500 truncate",children:f.email}),a.jsxs("div",{className:"text-xs text-slate-500",children:[f.isAdmin?"admin":"",f.isBlocked?(f.isAdmin?"  ":"")+"bloqueado":""]})]}),a.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[a.jsx("button",{className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>qi(f),children:"Editar"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>qo(f.id),children:"Excluir"}),a.jsx("div",{className:"relative inline-block",children:un===f.id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:fr,onChange:v=>_n(v.target.value),children:[a.jsx("option",{value:"",children:"Escolha o grupo"}),le.map(v=>a.jsx("option",{value:v.id,children:v.name},v.id))]}),a.jsx("button",{className:"px-2 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",disabled:!fr||Ao,onClick:we,children:Ao?"Adicionando...":"Adicionar"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:ha,children:"Cancelar"})]}):a.jsx("button",{className:"px-2 py-1 text-sm rounded border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>Qo(f),children:"Adicionar ao grupo"})})]})]},f.id))}):a.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum usurio encontrado."})]})]}),t==="grupos"&&a.jsxs("section",{className:"mt-4 grid grid-cols-1 lg:grid-cols-[0.9fr_1fr_1.6fr] gap-4 items-start",children:[a.jsxs("form",{onSubmit:Gi,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Novo Grupo"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Crie um grupo e depois gerencie os membros ao lado."})]}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome do grupo",value:Ce,onChange:f=>z(f.target.value)}),a.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Criar"})]}),a.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h4",{className:"font-medium",children:"Lista"}),a.jsxs("div",{className:"text-xs text-slate-500",children:[le.length," grupo(s)"]})]}),le.length?a.jsx("ul",{className:"mt-3 space-y-2 max-h-[420px] overflow-auto pr-1",children:le.map(f=>{const v=(W==null?void 0:W.id)===f.id,T=v&&O.length>0;return a.jsx("li",{className:`px-3 py-2 rounded border cursor-pointer transition ${v?"border-blue-400 bg-blue-50":"border-slate-200 hover:bg-slate-50"}`,onClick:()=>el(f),children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("div",{className:"min-w-0",children:a.jsx("div",{className:"font-medium truncate",children:f.name})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:G=>{G.stopPropagation(),nl(f)},children:"Renomear"}),a.jsx("button",{type:"button",className:`px-2 py-1 text-xs rounded border border-red-300 text-red-700 ${T?"opacity-50 cursor-not-allowed":"hover:bg-red-50"}`,disabled:T,title:T?"Remova todos os membros antes de excluir":"Excluir",onClick:G=>{G.stopPropagation(),T||tl(f.id)},children:"Excluir"})]})]})},f.id)})}):a.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum grupo encontrado."})]}),a.jsx("div",{className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-3",children:W?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("h4",{className:"font-medium truncate",children:["Membros - ",W.name]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[a.jsx("button",{type:"button",className:`rounded border px-2 py-1 border-red-300 text-red-700 ${O.length>0?"opacity-50 cursor-not-allowed":"hover:bg-red-50"}`,disabled:O.length>0,title:O.length>0?"Remova todos os membros antes de excluir":"Excluir grupo",onClick:()=>{O.length===0&&tl(W.id)},children:"Excluir grupo"}),a.jsx("button",{type:"button",className:"rounded border px-2 py-1 hover:bg-slate-50",onClick:ba,children:"Selecionar todos"}),a.jsx("button",{type:"button",className:"rounded border px-2 py-1 hover:bg-slate-50",onClick:ja,children:"Limpar selecao"}),a.jsx("button",{type:"button",className:"rounded bg-red-600 text-white px-2 py-1 disabled:opacity-60",disabled:!kt.length||Ro,onClick:Er,children:Ro?"Removendo...":"Remover selecao"}),a.jsx("button",{type:"button",className:"text-slate-600 underline",onClick:Sr,children:"Atualizar"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{className:"border rounded px-2 py-1 text-sm flex-1",placeholder:"Buscar usuario...",value:ve,onChange:f=>pe(f.target.value)}),a.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:ye,onChange:f=>ot(f.target.value),children:[a.jsx("option",{value:"",children:"Selecionar usuario"}),Ho.map(f=>a.jsxs("option",{value:f.id,children:[f.name," - ",f.email]},f.id))]}),a.jsx("button",{type:"button",className:"px-3 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",disabled:!ye||De,onClick:rl,children:De?"Adicionando...":"Adicionar"})]}),O.length?a.jsx("div",{className:"max-h-[420px] overflow-auto pr-1",children:a.jsx("ul",{className:"mt-1 divide-y divide-slate-200",children:O.map(f=>{var v,T;return a.jsxs("li",{className:"py-2 flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:kt.includes(f.userId),onChange:()=>Un(f.userId)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium truncate",children:((v=f.user)==null?void 0:v.name)||f.userId}),a.jsx("div",{className:"text-xs text-slate-500 truncate",children:(T=f.user)==null?void 0:T.email})]})]}),a.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>On(f.userId),children:"Remover"})]},f.userId)})})}):a.jsx("div",{className:"text-sm text-slate-500",children:"Sem membros ainda."})]}):a.jsx("div",{className:"text-sm text-slate-500",children:"Selecione um grupo para ver os membros."})})]}),t==="telefonia"&&a.jsxs("section",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[a.jsxs("form",{onSubmit:Jo,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2 md:col-span-1",children:[a.jsx("h4",{className:"font-medium",children:"Nova/Atualizar conta SIP"}),a.jsxs("select",{className:"border rounded px-3 py-2",value:pn,onChange:f=>ga(f.target.value),children:[a.jsx("option",{value:"",children:"Selecione o usurio"}),o.map(f=>a.jsxs("option",{value:f.id,children:[f.name,"  ",f.email]},f.id))]}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Domnio (ex.: sip.empresa.com)",value:xa,onChange:f=>jr(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Ramal/Extenso",value:va,onChange:f=>gs(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha (opcional para manter)",type:"password",value:Ko,onChange:f=>kr(f.target.value)}),a.jsx("button",{disabled:Tn,className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700 disabled:opacity-60",children:Tn?"Salvando...":"Salvar conta SIP"})]}),a.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 md:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium",children:"Contas SIP"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{className:"border rounded px-2 py-1 text-sm w-64 shrink-0",placeholder:"Buscar por nome, e-mail, ramal, domnio",value:br,onChange:f=>ms(f.target.value)}),a.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:mn,children:"Atualizar"})]})]}),Jt&&a.jsx("div",{className:"mt-2 rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2 text-sm",children:Jt}),Ki?a.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Carregando..."}):pa.length?a.jsx("ul",{className:"mt-2 divide-y divide-slate-200",children:pa.filter(f=>{var G,te;const v=br.trim().toLowerCase();return v?`${((G=f.user)==null?void 0:G.name)||""} ${((te=f.user)==null?void 0:te.email)||""} ${f.extension||""} ${f.domain||""}`.toLowerCase().includes(v):!0}).map(f=>{var v,T,G,te;return a.jsx("li",{className:"py-2",children:Ct===f.user.id?a.jsxs("div",{className:"grid md:grid-cols-6 gap-2 items-center",children:[a.jsxs("div",{className:"md:col-span-2 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:(v=f.user)==null?void 0:v.name}),a.jsx("div",{className:"text-xs text-slate-500 truncate",children:(T=f.user)==null?void 0:T.email})]}),a.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Domnio",value:me.domain,onChange:xe=>Nr(Ie=>({...Ie,domain:xe.target.value}))}),a.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Ramal",value:me.extension,onChange:xe=>Nr(Ie=>({...Ie,extension:xe.target.value}))}),a.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Senha (opcional)",type:"password",value:me.password,onChange:xe=>Nr(Ie=>({...Ie,password:xe.target.value}))}),a.jsxs("div",{className:"flex items-center gap-2 justify-end whitespace-nowrap",children:[a.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:ya,disabled:Tn,children:"Cancelar"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded bg-blue-600 text-white disabled:opacity-60",onClick:Yo,disabled:Tn,children:"Salvar"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>wa(f.user.id),disabled:Tn,children:"Excluir"})]})]}):a.jsxs("div",{className:"grid md:grid-cols-6 gap-2 items-center",children:[a.jsxs("div",{className:"md:col-span-2 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:(G=f.user)==null?void 0:G.name}),a.jsx("div",{className:"text-xs text-slate-500 truncate",children:(te=f.user)==null?void 0:te.email})]}),a.jsx("div",{className:"text-sm truncate",children:f.domain}),a.jsx("div",{className:"text-sm",children:f.extension}),a.jsx("div",{className:"text-xs",children:a.jsx("span",{className:`px-2 py-0.5 rounded-full border ${f.regRegistered?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:f.regRegistered?"registrado":f.regStatus||"desconectado"})}),a.jsxs("div",{className:"flex items-center gap-3 justify-end whitespace-nowrap",children:[a.jsx("button",{className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>Zi(f),children:"Editar"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded border border-amber-300 text-amber-700 hover:bg-amber-50",onClick:()=>Xo(f.user.id),children:"Desconectar"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:()=>wa(f.user.id),children:"Excluir"})]})]})},f.id)})}):a.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhuma conta SIP encontrada."})]})]}),t==="Configuracoes"&&a.jsxs("section",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4 items-start",children:[a.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 lg:col-span-3",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Backups do chat"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Gera cpias do banco de dados e da pasta de uploads. Restaurar um backup substitui dados atuais."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",onClick:Bo,disabled:yr,children:yr?"Executando...":"Executar backup agora"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border hover:bg-slate-50 disabled:opacity-60",onClick:Et,disabled:vr,children:vr?"Atualizando...":"Atualizar lista"})]})]}),a.jsxs("form",{onSubmit:zo,className:"mt-4 space-y-3",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:!!Oe.autoEnabled,onChange:f=>Ln(v=>({...v,autoEnabled:f.target.checked}))}),"Ativar backup automtico dirio"]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-3 md:items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Horrio"}),a.jsx("input",{type:"time",className:"mt-1 border rounded px-3 py-2 w-full",value:Oe.time||"02:00",onChange:f=>Ln(v=>({...v,time:f.target.value})),disabled:!Oe.autoEnabled})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Reteno (dias)"}),a.jsx("input",{type:"number",min:"0",max:"365",className:"mt-1 border rounded px-3 py-2 w-full",value:Oe.retentionDays??7,onChange:f=>Ln(v=>({...v,retentionDays:Math.max(0,Number(f.target.value))})),disabled:!Oe.autoEnabled})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:ca,children:ca?"Salvando...":"Salvar agendamento"})})]}),a.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[a.jsxs("div",{children:["ltimo backup manual: ",Gt(Oe.lastManualRunAt)," ",((ka=Oe.lastManualResult)==null?void 0:ka.ok)===!1?`(erro: ${((Mn=Oe.lastManualResult)==null?void 0:Mn.error)||"desconhecido"})`:""]}),a.jsxs("div",{children:["ltimo backup automtico: ",Gt(Oe.lastAutoRunAt)," ",((Na=Oe.lastAutoResult)==null?void 0:Na.ok)===!1?`(erro: ${((xs=Oe.lastAutoResult)==null?void 0:xs.error)||"desconhecido"})`:""]}),a.jsxs("div",{children:["ltima restaurao: ",Gt(Oe.lastRestoreAt)," ",Oe.lastRestoreName?`(${Oe.lastRestoreName})`:""]})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium",children:"Backups disponveis"}),vr?a.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Carregando backups..."}):Oo.length?a.jsx("div",{className:"mt-2 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm border border-slate-200 rounded",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Nome"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Criado em"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Tamanho"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-slate-600",children:"Origem"}),a.jsx("th",{className:"px-3 py-2 text-right font-medium text-slate-600",children:"Aes"})]})}),a.jsx("tbody",{children:Oo.map(f=>{var v;return a.jsxs("tr",{className:"border-t border-slate-200",children:[a.jsx("td",{className:"px-3 py-2 font-mono text-xs md:text-sm",children:f.name}),a.jsx("td",{className:"px-3 py-2",children:Gt(f.createdAt)}),a.jsx("td",{className:"px-3 py-2",children:Po(f.size)}),a.jsx("td",{className:"px-3 py-2",children:((v=f==null?void 0:f.meta)==null?void 0:v.reason)==="auto"?"Automtico":"Manual"}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border hover:bg-slate-50 disabled:opacity-60",onClick:()=>ds(f.name),disabled:Pn===f.name,children:Pn===f.name?"Baixando...":"Download"}),a.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",onClick:()=>zi(f.name),disabled:ua===f.name,children:ua===f.name?"Restaurando...":"Restaurar"}),a.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:()=>fa(f.name),disabled:ts===f.name,children:ts===f.name?"Excluindo...":"Excluir"})]})})]},f.name)})})]})}):a.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Nenhum backup encontrado ainda."})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded border border-slate-200 lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Marca e aparencia global"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Configuracoes aplicadas para todos os usuarios."})]}),a.jsxs("div",{className:"mt-3 grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"cone do chat"}),a.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[se?a.jsx("img",{src:se,alt:"global",className:"w-12 h-12 rounded-full object-cover border"}):a.jsx("div",{className:"w-12 h-12 rounded-full border bg-slate-100"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"cfg-file-global",className:"hidden",type:"file",accept:"image/*",onChange:f=>{var v;return fn((v=f.target.files)==null?void 0:v[0])}}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var f;return(f=document.getElementById("cfg-file-global"))==null?void 0:f.click()},children:"Enviar"}),se&&a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>{try{localStorage.setItem("chat_icon",se),window.dispatchEvent(new Event("chat:iconUpdated")),K("Aplicado icone global neste navegador","success")}catch{}},children:"Aplicar local"})]})]})]}),a.jsxs("div",{className:"p-3 rounded border border-slate-200 bg-slate-50/60",children:[a.jsx("h4",{className:"font-medium",children:"Logo da tela de login"}),a.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[hr?a.jsx("img",{src:hr,alt:"logo de login",className:"w-16 h-16 rounded-xl object-cover border"}):a.jsx("div",{className:"w-16 h-16 rounded-xl border bg-slate-100 grid place-items-center text-xs text-slate-400",children:"Sem logo"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("input",{id:"login-logo-file",className:"hidden",type:"file",accept:"image/*",onChange:f=>{var v;return is((v=f.target.files)==null?void 0:v[0])}}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50 disabled:opacity-60",onClick:()=>{var f;return(f=document.getElementById("login-logo-file"))==null?void 0:f.click()},disabled:Qr,children:Qr?"Enviando...":"Enviar"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:da,disabled:ra,children:ra?"Excluindo...":"Remover (deixar sem logo)"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-green-300 text-green-700 hover:bg-green-50 disabled:opacity-60",onClick:us,disabled:pr,children:pr?"Salvando...":"Salvar"})]})]}),a.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Exibido na pgina de login. Reenvie para substituir."})]}),a.jsxs("div",{className:"p-3 rounded border border-slate-200 bg-slate-50/60",children:[a.jsx("h4",{className:"font-medium",children:"Papel de parede (conversas)"}),a.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[a.jsx("div",{className:"w-28 h-16 rounded border bg-slate-100 overflow-hidden",children:a.jsx("div",{className:"w-full h-full chat-bg",style:{"--chat-wallpaper":ht?`url('${ht}')`:void 0}})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("input",{id:"cfg-file-wallpaper",className:"hidden",type:"file",accept:"image/*",onChange:f=>{var v;return $o((v=f.target.files)==null?void 0:v[0])}}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50",onClick:()=>{var f;return(f=document.getElementById("cfg-file-wallpaper"))==null?void 0:f.click()},children:"Enviar"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-green-300 text-green-700 hover:bg-green-50",onClick:Kt,disabled:!ht,children:"Salvar"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>{try{if(!ht){K("Nenhum wallpaper para aplicar","error");return}localStorage.setItem("chat_wallpaper",ht),document.documentElement.style.setProperty("--chat-wallpaper",`url('${ht}')`),window.dispatchEvent(new Event("chat:wallpaperUpdated")),K("Aplicado localmente","success")}catch{}},disabled:!ht,children:"Aplicar local"}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-red-300 text-red-700 hover:bg-red-50",onClick:cs,disabled:!ht,children:"Excluir"})]})]}),a.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Afeta todos os usurios. A aplicao local funciona apenas neste navegador."})]}),a.jsxs("div",{className:"md:col-span-3 p-4 rounded border border-slate-200 bg-slate-50/60",children:[a.jsx("h4",{className:"font-medium",children:"Sons de alerta"}),a.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Faa upload de arquivos de udio (mp3, wav, ogg) para usar como alerta padro do chat."}),a.jsxs("div",{className:"mt-3 flex flex-col md:flex-row md:items-end gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Nome (opcional)"}),a.jsx("input",{className:"mt-1 border rounded px-3 py-2 w-full",placeholder:"Ex.: Alerta ping",value:Yr,onChange:f=>aa(f.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:Fo,type:"file",accept:"audio/*",className:"hidden",onChange:Vi}),a.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-slate-300 hover:bg-slate-50 disabled:opacity-60",onClick:Vo,disabled:oa,children:oa?"Enviando...":"Enviar som"}),oa&&a.jsx("span",{className:"text-xs text-slate-500",children:"Aguarde..."})]})]}),Kr.length?a.jsx("ul",{className:"mt-3 divide-y divide-slate-200",children:Kr.map(f=>a.jsxs("li",{className:"py-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:f.name||"Som"}),a.jsx("div",{className:"text-xs text-slate-500 truncate",children:f.url})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border hover:bg-slate-50",onClick:()=>wr(f.url),children:"Ouvir"}),mr===f.id?a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-50 text-blue-700 border border-blue-200",children:"Ativo"}):a.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>Wo(f.id),children:"Definir"}),a.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded border border-red-300 text-red-700 hover:bg-red-50 disabled:opacity-60",onClick:()=>Wi(f.id),disabled:gr===f.id,children:gr===f.id?"Excluindo...":"Excluir"})]})]},f.id))}):a.jsx("div",{className:"mt-3 text-sm text-slate-500",children:"Nenhum som cadastrado ainda."}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{type:"button",className:"text-xs text-slate-600 underline disabled:opacity-60",onClick:()=>Wo(null),disabled:!mr,children:"Usar bip padro"})})]})]})]}),a.jsxs("form",{onSubmit:Hi,className:"bg-white p-4 rounded border border-slate-200 flex flex-col gap-2 lg:col-span-3",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Conta do administrador"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-2 mt-2",children:[a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Senha atual",type:"password",value:ee,onChange:f=>Mo(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nova senha (6+)",type:"password",value:dn,onChange:f=>as(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Confirmar nova senha",type:"password",value:lt,onChange:f=>os(f.target.value)})]}),a.jsx("div",{className:"flex items-center justify-end",children:a.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Alterar senha"})})]})]}),R&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black/30 grid place-items-center",onClick:ps,children:a.jsxs("div",{className:"bg-white w-full max-w-lg rounded border border-slate-200 p-4",onClick:f=>f.stopPropagation(),children:[a.jsx("h4",{className:"text-lg font-medium mb-2",children:"Editar Usurio"}),a.jsxs("form",{onSubmit:Qi,className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Nome",value:R.name||"",onChange:f=>U(v=>({...v,name:f.target.value}))}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"E-mail",value:R.email||"",onChange:f=>U(v=>({...v,email:f.target.value}))}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Telefone",value:R.phone||"",onChange:f=>U(v=>({...v,phone:Y(f.target.value)}))}),a.jsx("input",{className:"border rounded px-3 py-2",placeholder:"Endereo",value:R.address||"",onChange:f=>U(v=>({...v,address:f.target.value}))}),a.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!!R.isAdmin,onChange:f=>U(v=>({...v,isAdmin:f.target.checked}))})," Admin"]}),a.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!!R.isBlocked,onChange:f=>U(v=>({...v,isBlocked:f.target.checked}))})," Bloqueado"]}),(e==null?void 0:e.id)&&R.id===e.id&&a.jsx("input",{className:"border rounded px-3 py-2 md:col-span-2",placeholder:"Senha atual (obrigatria para trocar a sua senha)",type:"password",value:ne,onChange:f=>Z(f.target.value)}),a.jsx("input",{className:"border rounded px-3 py-2 md:col-span-2",placeholder:"Nova senha (opcional, 6+)",type:"password",value:B,onChange:f=>C(f.target.value)}),a.jsxs("div",{className:"md:col-span-2 flex items-center justify-end gap-2 mt-2",children:[a.jsx("button",{type:"button",className:"px-3 py-2 rounded border",onClick:ps,disabled:$,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:$,children:$?"Salvando...":"Salvar"})]})]})]})})]})}function t1(){const[e,t]=u.useState(""),[n,r]=u.useState(""),[s,o]=u.useState(""),[l,c]=u.useState(null),[d,m]=u.useState(""),[x,w]=u.useState(""),[k,D]=u.useState(""),[_,A]=u.useState(""),[L,j]=u.useState(""),[g,b]=u.useState(""),E=u.useRef(null),R=u.useRef(""),U=F=>(F||"").replace(/\D/g,""),$=F=>{const Y=U(F).slice(0,11);return Y.length<=2?Y:Y.length<=6?`(${Y.slice(0,2)}) ${Y.slice(2)}`:Y.length===10?`(${Y.slice(0,2)}) ${Y.slice(2,6)}-${Y.slice(6)}`:Y.length>=11?`(${Y.slice(0,2)}) ${Y.slice(2,7)}-${Y.slice(7)}`:Y},V=()=>{if(R.current){if(typeof URL<"u"&&typeof URL.revokeObjectURL=="function")try{URL.revokeObjectURL(R.current)}catch{}R.current=""}};u.useEffect(()=>()=>{V()},[]),u.useEffect(()=>{(async()=>{try{const F=await q.get("/users/me");t(F.name||""),r(F.phone?$(F.phone):""),o(F.address||"");const Y=F.avatarUrl||"";w(Y),m(Y)}catch{b("Falha ao carregar perfil")}})()},[]);const B=()=>{var F;(F=E.current)==null||F.click()},C=F=>{var le;const Y=((le=F.target.files)==null?void 0:le[0])||null;if(c(Y),V(),Y)try{const ie=URL.createObjectURL(Y);R.current=ie,m(ie)}catch{m(x)}else m(x)};async function ne(F){F.preventDefault(),j(""),b("");try{const Y=$(n),le=U(Y);if(le&&(le.length<10||le.length>11))throw new Error("Telefone invalido (use DDD + numero).");const ie=(e||"").trim(),Ce=(s||"").trim(),z={phone:le?Y:null,address:Ce||null};if(ie&&(z.name=ie),l){await q.patch("/users/me",z);const W=new FormData;W.append("avatar",l),await q.uploadPatch("/users/me",W)}else await q.patch("/users/me",z);try{const W=await q.get("/users/me"),X=W.avatarUrl||"";t(W.name||""),r(W.phone?$(W.phone):""),o(W.address||""),V(),w(X),m(X),c(null),E.current&&(E.current.value="");const O=Me();O&&n0(O,W);try{window.dispatchEvent(new Event("chat:userUpdated"))}catch{}}catch{}j("Perfil atualizado!")}catch(Y){b(Y.message||"Erro ao salvar")}}async function Z(F){F.preventDefault(),j(""),b("");try{await q.post("/users/me/password",{current:k,password:_}),D(""),A(""),j("Senha alterada!")}catch(Y){b(Y.message||"Erro ao alterar senha")}}return a.jsxs("div",{className:"p-4 overflow-auto h-full",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Meu perfil"}),L&&a.jsx("div",{className:"text-green-600 text-sm mt-2",children:L}),g&&a.jsx("div",{className:"text-red-600 text-sm mt-2",children:g}),a.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-[260px,1fr]",children:[a.jsxs("section",{className:"bg-white p-4 rounded border border-slate-200 flex flex-col items-center gap-3 text-center",children:[a.jsx("div",{className:"w-28 h-28 md:w-32 md:h-32 rounded-full border border-slate-200 dark:border-slate-700 overflow-hidden bg-slate-100 flex items-center justify-center text-slate-500",children:d?a.jsx("img",{src:d,alt:"avatar",className:"w-full h-full object-cover",onError:()=>m("")}):a.jsx("span",{className:"text-sm",children:"Sem foto"})}),a.jsx("button",{type:"button",onClick:B,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 text-sm rounded border border-slate-300 hover:bg-slate-50",children:"Alterar foto"}),a.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:C}),l&&a.jsx("div",{className:"w-full text-xs text-slate-500 truncate",children:l.name}),a.jsx("p",{className:"text-xs text-slate-500",children:"Utilize imagens quadradas para melhor resultado."})]}),a.jsxs("form",{onSubmit:ne,className:"bg-white p-4 rounded border border-slate-200 grid md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-700",children:"Nome"}),a.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:e,onChange:F=>t(F.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-700",children:"Telefone"}),a.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:n,onChange:F=>r($(F.target.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-sm text-slate-700",children:"Endereco"}),a.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:s,onChange:F=>o(F.target.value)})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx("button",{className:"inline-flex items-center justify-center rounded bg-blue-600 text-white px-3 py-2 hover:bg-blue-700",children:"Salvar"})})]})]}),a.jsxs("form",{onSubmit:Z,className:"mt-4 bg-white p-4 rounded border border-slate-200 grid md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-700",children:"Senha atual"}),a.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",type:"password",value:k,onChange:F=>D(F.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-700",children:"Nova senha"}),a.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",type:"password",value:_,onChange:F=>A(F.target.value)})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx("button",{className:"inline-flex items-center justify-center rounded bg-slate-700 text-white px-3 py-2 hover:bg-slate-800",children:"Alterar senha"})})]})]})}function n1({children:e}){return Me()?e:a.jsx(Fc,{to:"/login",replace:!0})}function r1({children:e}){const t=Me(),n=Ms();return t?n!=null&&n.isAdmin?e:a.jsx(Fc,{to:"/",replace:!0}):a.jsx(Fc,{to:"/login",replace:!0})}Wm(document.getElementById("root")).render(a.jsx(wi.StrictMode,{children:a.jsx(Sy,{children:a.jsxs(vy,{children:[a.jsx(gt,{path:"/login",element:a.jsx(Tw,{})}),a.jsx(gt,{path:"/register",element:a.jsx(Fw,{})}),a.jsx(gt,{path:"/join/:token",element:a.jsx(Yw,{})}),a.jsxs(gt,{path:"/",element:a.jsx(n1,{children:a.jsx(_w,{})}),children:[a.jsx(gt,{index:!0,element:a.jsx(w0,{})}),a.jsx(gt,{path:"conversas",element:a.jsx(qw,{})}),a.jsx(gt,{path:"telefonia",element:a.jsx(Qw,{})}),a.jsx(gt,{path:"reunioes",element:a.jsx(Gw,{})}),a.jsx(gt,{path:"reunioes/:id",element:a.jsx(Kw,{})}),a.jsx(gt,{path:"contatos",element:a.jsx(Xw,{})}),a.jsx(gt,{path:"admin",element:a.jsx(r1,{children:a.jsx(e1,{})})}),a.jsx(gt,{path:"profile",element:a.jsx(t1,{})})]})]})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{try{navigator.serviceWorker.register("/sw.js")}catch(e){console.error("Falha ao registrar o Service Worker",e)}});
